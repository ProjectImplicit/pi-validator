{"version":3,"file":"main.js","sources":["study/modelHelpers.js","study/fileModel.js","study/studyModel.js","study/editors/pdfEditor.js","study/fullHeight.js","study/editors/ace/aceComponent.js","study/editors/ace/editorComponent.js","classNames.js","study/editors/jstEditor.js","study/editors/imgEditor.js","study/editors/ace/syntaxComponent.js","study/editors/ace/parser/messages.js","study/editors/ace/parser/parser.js","study/editors/ace/parser/pipValidator.js","study/editors/ace/parser/questValidator.js","study/editors/ace/parser/managerValidator.js","study/editors/ace/parser/validator.js","study/editors/ace/validatorComponent.js","study/editors/jsEditor.js","study/editorComponent.js","contextMenuComponent.js","messagesComponent.js","study/sidebar/fileContext.js","study/sidebar/filesComponent.js","study/sidebarComponent.js","study/studyComponent.js","mainComponent.js","main.js"],"sourcesContent":["export let checkStatus = response => {\n\tif (response.status >= 200 && response.status < 300) {\n\t\treturn response;\n\t}\n\n\tlet error = new Error(response.statusText);\n\terror.response = response;\n\tthrow error;\n};\n\nexport let toJSON = response => response.json();","import {toJSON, checkStatus} from './modelHelpers';\nexport default File;\nlet baseUrl = '/dashboard/dashboard';\n\n/**\n * file = {\n * \tid: #hash,\n * \turl: URL\n * }\n */\n\nclass File {\n\tconstructor(file){\n\t\tlet url = this.url = file.url;\n\n\t\tthis.studyID = file.studyID;\n\t\tthis.isDir = file.isDir;\n\t\tthis.name = url.substring(url.lastIndexOf('/')+1);\n\t\tthis.type = url.substring(url.lastIndexOf('.')+1);\n\t\tthis.id = file.id;\n\t\tthis.id = this.name;\n\n\t\t// keep track of file content\n\t\tthis.sourceContent = m.prop('');\n\t\tthis.content = (store => {\n\t\t\tvar prop = (...args) => {\n\t\t\t\tif (args.length) {\n\t\t\t\t\tstore = args[0];\n\t\t\t\t\tthis.checkSyntax();\n\t\t\t\t}\n\t\t\t\treturn store;\n\t\t\t};\n\n\t\t\tprop.toJSON = () => store;\n\n\t\t\treturn prop;\n\t\t})('');\n\n\t\t// this is set within the load function\n\t\tthis.loaded = false;\n\t\tthis.error = false;\n\n\t\t// these are defined when calling checkSyntax\n\t\tthis.syntaxValid = undefined;\n\t\tthis.syntaxData = undefined;\n\t}\n\n\tapiUrl(){\n\t\treturn `${baseUrl}/files/${this.studyID}/file/${this.id}`;\n\t}\n\n\tget(){\n\t\treturn fetch(this.apiUrl(), {credentials: 'same-origin'})\n\t\t\t.then(checkStatus)\n\t\t\t.then(toJSON)\n\t\t\t.then(response => {\n\t\t\t\tthis.sourceContent(response.content);\n\t\t\t\tthis.content(response.content);\n\t\t\t\tthis.loaded = true;\n\t\t\t})\n\t\t\t.catch(reason => {\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.error = true;\n\t\t\t\treturn Promise.reject(reason); // do not swallow error\n\t\t\t});\n\t}\n\n\tsave(){\n\t\treturn fetch(this.apiUrl(), {\n\t\t\tcredentials: 'same-origin',\n\t\t\tmethod:'put',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tcontent: this.content\n\t\t\t})\n\t\t})\n\t\t\t.then(checkStatus)\n\t\t\t.then(toJSON)\n\t\t\t.then(()=>{\n\t\t\t\tthis.sourceContent(this.content()); // update source content\n\t\t\t});\n\t}\n\n\tdel(){\n\t\treturn fetch(this.apiUrl(), {method:'delete',credentials: 'same-origin'})\n\t\t\t.then(checkStatus);\n\t}\n\n\n\thasChanged() {\n\t\treturn this.sourceContent() === this.content();\n\t}\n\n\tdefine(context = window){\n\t\tvar requirejs = context.requirejs;\n\t\tvar name = this.url;\n\t\tvar content = this.content();\n\n\t\treturn new Promise((resolve) => {\n\t\t\trequirejs.undef(name);\n\t\t\tcontext.eval(content.replace(`define(`,`define('` + name + `',`));\n\t\t\tresolve();\n\t\t});\n\t}\n\n\trequire(context = window){\n\t\tvar requirejs = context.requirejs;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\trequirejs([this.url], resolve,reject);\n\t\t});\n\t}\n\n\tcheckSyntax(){\n\t\tvar jshint = window.JSHINT;\n\t\tthis.syntaxValid = jshint(this.content(), jshintOptions);\n\t\tthis.syntaxData = jshint.data();\n\t\treturn this.syntaxValid;\n\t}\n}\n\nvar jshintOptions = {\n\t// JSHint Default Configuration File (as on JSHint website)\n\t// See http://jshint.com/docs/ for more details\n\n\t'curly'         : false,    // true: Require {} for every new block or scope\n\t'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n\t'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n\t'unused'        : 'vars',   // Unused variables:\n\t\t\t\t\t\t\t\t//   true     : all variables, last function parameter\n\t\t\t\t\t\t\t\t//   'vars'   : all variables only\n\t\t\t\t\t\t\t\t//   'strict' : all variables, all function parameters\n\t'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n\t'browser'       : true,     // Web Browser (window, document, etc)\n\t'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n\t// Custom Globals\n\tpredef: ['piGlobal','define','require','requirejs','angular']\n};\n\n","import {toJSON, checkStatus} from './modelHelpers';\nimport File from './fileModel';\nexport default studyModel;\n\nlet baseUrl = '/dashboard/dashboard';\n\nclass studyModel {\n\tconstructor(id){\n\t\tthis.id = id;\n\t\tthis.files = m.prop([]);\n\t\tthis.loaded = false;\n\t\tthis.error = false;\n\t}\n\n\tapiURL(){\n\t\treturn `${baseUrl}/files/${this.id}`;\n\t}\n\n\tget(){\n\t\treturn fetch(this.apiURL(),{credentials: 'same-origin'})\n\t\t\t.then(checkStatus)\n\t\t\t.then(toJSON)\n\t\t\t.then(study => {\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.files(study.files.map(file => {\n\t\t\t\t\tObject.assign(file, {studyID: this.id});\n\t\t\t\t\treturn new File(file);\n\t\t\t\t}));\n\t\t\t})\n\t\t\t.catch(reason => {\n\t\t\t\tthis.error = true;\n\t\t\t\treturn Promise.reject(reason); // do not swallow error\n\t\t\t});\n\t}\n\n\tgetFile(id){\n\t\treturn this.files().find(file => file.id === id);\n\t}\n\n\tcreate(fileName){\n\t\treturn fetch(this.apiURL() + '/file', {method:'post', credentials: 'same-origin', data: {name: fileName}})\n\t\t\t.then(checkStatus)\n\t\t\t.then(toJSON)\n\t\t\t.then(response => {\n\t\t\t\tthis.files().push(new File(response));\n\t\t\t});\n\t}\n\n\tdel(fileId){\n\t\treturn this.getFile(fileId).del()\n\t\t\t.then(() => {\n\t\t\t\tlet cleanFiles = this.files().filter(file => file.id !== fileId);\n\t\t\t\tthis.files(cleanFiles);\n\t\t\t});\n\t}\n}","export default pdfEditor;\n\nlet pdfEditor = {\n\tview: (ctrl, args) => {\n\t\tlet file = args.file;\n\t\treturn m('object', {\n\t\t\tdata: file.url,\n\t\t\ttype: 'application/pdf',\n\t\t\twidth: '100%',\n\t\t\theight: '100%'\n\t\t});\n\t}\n};","export default fullHeight;\nlet fullHeight = (element, isInitialized, ctx) => {\n\tif (!isInitialized){\n\t\tonResize();\n\n\t\twindow.addEventListener('resize', onResize, true);\n\n\t\tctx.onunload = function(){\n\t\t\twindow.removeEventListener('resize', onResize);\n\t\t};\n\n\t}\n\n\tfunction onResize(){\n\t\telement.style.height = document.documentElement.clientHeight - element.getBoundingClientRect().top + 'px';\n\t}\n\n};","import fullHeight from '../../fullHeight';\nexport default aceComponent;\n\nvar noop = function(){};\n\nvar aceComponent = {\n\tcontroller: function controller(args){\n\t\tvar ctrl = {\n\t\t\tcontent: args.content\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\n\tview: function editorView(ctrl, args){\n\t\treturn m('.editor', {config: aceComponent.config(ctrl, args)});\n\t},\n\n\tconfig: function(ctrl, args){\n\t\treturn function(element, isInitialized, ctx){\n\t\t\tvar editor;\n\t\t\tvar content = ctrl.content;\n\t\t\tvar settings = args.settings || {};\n\t\t\tlet mode = settings.mode || 'javascript';\n\n\t\t\tif (!isInitialized){\n\t\t\t\tfullHeight(element, isInitialized, ctx);\n\n\t\t\t\trequire(['ace/ace'], function(ace){\n\t\t\t\t\tace.config.set('packaged', true);\n\t\t\t\t\tace.config.set('basePath', require.toUrl('ace'));\n\n\t\t\t\t\teditor = ace.edit(element);\n\t\t\t\t\tvar commands = editor.commands;\n\n\t\t\t\t\teditor.setTheme('ace/theme/monokai');\n\t\t\t\t\teditor.getSession().setMode('ace/mode/' + mode);\n\t\t\t\t\tif (mode !== 'javascript') editor.getSession().setUseWorker(false);\n\t\t\t\t\teditor.setHighlightActiveLine(true);\n\t\t\t\t\teditor.setShowPrintMargin(false);\n\t\t\t\t\teditor.setFontSize('18px');\n\t\t\t\t\teditor.$blockScrolling = Infinity; // scroll to top\n\n\t\t\t\t\teditor.getSession().on('change', function(){\n\t\t\t\t\t\tm.startComputation();\n\t\t\t\t\t\tcontent(editor.getValue());\n\t\t\t\t\t\tm.endComputation();\n\t\t\t\t\t});\n\n\t\t\t\t\tcommands.addCommand({\n\t\t\t\t\t\tname: 'save',\n\t\t\t\t\t\tbindKey: {win: 'Ctrl-S', mac: 'Command-S'},\n\t\t\t\t\t\texec: ctrl.onSave || noop\n\t\t\t\t\t});\n\n\t\t\t\t\teditor.setValue(content());\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\teditor && editor.setValue(content());\n\t\t};\n\t}\n};","import aceComponent from './aceComponent';\nexport default editorPage;\n\nvar editorPage = {\n\tcontroller: function(args){\n\t\tvar file = args.file;\n\n\t\tfile.get().then(m.redraw);\n\n\t\tvar ctrl = {\n\t\t\tfile: file,\n\t\t\tcontent:file.content,\n\t\t\tplay: play\n\t\t};\n\n\t\treturn ctrl;\n\n\t\tfunction play(){\n\t\t\tvar playground;\n\n\t\t\tplayground = window.open('playground.html', 'Playground');\n\n\t\t\tplayground.onload = function(){\n\t\t\t\t// first set the unload listener\n\t\t\t\tplayground.addEventListener('unload', function() {\n\t\t\t\t\t// get focus back here\n\t\t\t\t\twindow.focus();\n\t\t\t\t});\n\n\t\t\t\t// then activate the player (this ensures that when )\n\t\t\t\tplayground.activate(file);\n\t\t\t\tplayground.focus();\n\t\t\t};\n\n\t\t}\n\t},\n\n\tview: function(ctrl, args){\n\t\tlet file = ctrl.file;\n\t\treturn m('.editor', [\n\t\t\t!file.loaded\n\t\t\t\t?\n\t\t\t\tm('.loader')\n\t\t\t\t:\n\t\t\t\tfile.error\n\t\t\t\t\t?\n\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t`The file \"${file.url}\" was not found`\n\t\t\t\t\t])\n\t\t\t\t\t:\n\t\t\t\t\t[\n\t\t\t\t\t\tm('.btn-toolbar', [\n\t\t\t\t\t\t\tm('.btn-group', [\n\t\t\t\t\t\t\t\tctrl.file.type === 'js'\n\t\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\tm('a.btn.btn-secondary', {onclick: ctrl.play},[\n\t\t\t\t\t\t\t\t\t\tm('strong.fa.fa-play')\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\tm('a.btn.btn-secondary', {onclick: file.save.bind(file)},[\n\t\t\t\t\t\t\t\t\tm('strong.fa.fa-save')\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm.component(aceComponent, {content:ctrl.content, settings: args.settings})\n\t\t\t\t\t]\n\t\t]);\n\t}\n};","// taken from here:\n// https://github.com/JedWatson/classnames/blob/master/index.js\nvar hasOwn = {}.hasOwnProperty;\n\nfunction classNames () {\n\tvar classes = '';\n\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\tvar arg = arguments[i];\n\t\tif (!arg) continue;\n\n\t\tvar argType = typeof arg;\n\n\t\tif (argType === 'string' || argType === 'number') {\n\t\t\tclasses += ' ' + arg;\n\t\t} else if (Array.isArray(arg)) {\n\t\t\tclasses += ' ' + classNames.apply(null, arg);\n\t\t} else if (argType === 'object') {\n\t\t\tfor (var key in arg) {\n\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\tclasses += ' ' + key;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classes.substr(1);\n}\n\nexport default classNames;\n","import editorComponent from './ace/editorComponent';\nimport classNames from '../../classNames';\n\nexport default jsEditor;\n\nlet jsEditor = {\n\tcontroller: args => {\n\t\treturn {\n\t\t\tfile: args.file,\n\t\t\tactiveTab: m.prop('edit')\n\t\t};\n\t},\n\tview: ctrl => {\n\t\tlet file = ctrl.file;\n\t\tlet activeTab = ctrl.activeTab;\n\t\treturn m('div',[\n\t\t\tm('ul.nav.nav-tabs',[\n\t\t\t\tm('li.nav-item', [\n\t\t\t\t\tm('a[data-tab=\"edit\"].nav-link', {onclick:m.withAttr('data-tab', activeTab), class: classNames({active: activeTab() == 'edit'})}, 'Edit')\n\t\t\t\t]),\n\t\t\t\tm('li.nav-item',[\n\t\t\t\t\tm('a.nav-link.disabled', 'Syntax')\n\t\t\t\t]),\n\t\t\t\tm('li.nav-item',[\n\t\t\t\t\tm('a.nav-link.disabled', 'Vaildate')\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('.tab-content', [\n\t\t\t\tactiveTab() == 'edit' ? m.component(editorComponent, {file:file, settings: {mode:'ejs'}}) : ''\n\t\t\t])\n\t\t]);\n\t}\n};","export default imgEditor;\n\nlet imgEditor = {\n\tview: (ctrl, args) => {\n\t\tlet file = args.file;\n\t\treturn m('div.img-editor.centrify', [\n\t\t\tm('img', {src:file.url})\n\t\t]);\n\t}\n};","export default syntax;\n\n/**\n * Syntax component\n * Takes an argument as follows:\n *\n * {valid: Boolean, data: jshint(script).data()}\n */\nvar syntax = {\n\n\t/**\n\t * Analyze script\n\t * @param  {String} script A script to analyze\n\t * @return {Object}\n\t * {\n\t *      isValid: Boolean,\n\t *      data: Object, // raw data\n\t *      errors: Array, // an array of analyzed errors\n\t *      errorCount: Number, // the number of errors\n\t *      warningCount: Number // the number of warnings\n\t * }\n\t */\n\tanalize: (isValid, data) => {\n\t\tvar errorCount = 0;\n\t\tvar warningCount = 0;\n\t\tvar errors = isValid ? [] : data.errors\n\t\t\t.filter(e => e) // clean null values\n\t\t\t.map(err => {\n\t\t\t\tvar isError = err.code && (err.code[0] === 'E');\n\n\t\t\t\tisError ? errorCount++ : warningCount++;\n\n\t\t\t\treturn {\n\t\t\t\t\tisError: isError,\n\t\t\t\t\tline: err.line,\n\t\t\t\t\tcol: err.character,\n\t\t\t\t\treason: err.reason,\n\t\t\t\t\tevidence: err.evidence\n\t\t\t\t};\n\t\t\t});\n\t\treturn {\n\t\t\tisValid: isValid,\n\t\t\tdata: data,\n\t\t\terrors : errors,\n\t\t\terrorCount: errorCount,\n\t\t\twarningCount: warningCount\n\t\t};\n\t},\n\n\tjshintOptions: {\n\t\t// JSHint Default Configuration File (as on JSHint website)\n\t\t// See http://jshint.com/docs/ for more details\n\n\t\t'curly'         : false,    // true: Require {} for every new block or scope\n\t\t'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n\t\t'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n\t\t'unused'        : 'vars',   // Unused variables:\n\t\t\t\t\t\t\t\t\t//   true     : all variables, last function parameter\n\t\t\t\t\t\t\t\t\t//   'vars'   : all variables only\n\t\t\t\t\t\t\t\t\t//   'strict' : all variables, all function parameters\n\t\t'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n\t\t'browser'       : true,     // Web Browser (window, document, etc)\n\t\t'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n\t\t// Custom Globals\n\t\tpredef: ['piGlobal','define','require','requirejs','angular']\n\t},\n\n\tcontroller:  args => {\n\t\tvar file = args.file;\n\t\treturn syntax.analize(file.syntaxValid, file.syntaxData);\n\t},\n\n\tview: ctrl => {\n\t\treturn m('div', [\n\t\t\tctrl.isValid\n\t\t\t\t?\n\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t])\n\t\t\t\t:\n\t\t\t\tm('div', [\n\t\t\t\t\tm('table.table', [\n\t\t\t\t\t\tm('tbody', ctrl.errors.map(err => {\n\t\t\t\t\t\t\treturn m('tr',[\n\t\t\t\t\t\t\t\tm('td.text-muted', `line ${err.line}`),\n\t\t\t\t\t\t\t\tm('td.text-muted', `col ${err.col}`),\n\t\t\t\t\t\t\t\tm('td', {class: err.isError ? 'text-danger' : 'text-info'}, err.reason),\n\t\t\t\t\t\t\t\tm('td',err.evidence)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}))\n\t\t\t\t\t]),\n\n\t\t\t\t\tm('.row',[\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.errorCount} critical errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-info'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-warning-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.warningCount} non standard syntax errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\n\t\t\t\t])\n\t\t]);\n\t}\n};\n","export function warn(message, test){\n\treturn {level:'warn', message: message, test:test};\n}\n\nexport function error(message, test){\n\treturn {level:'error', message: message, test:test};\n}\n\nexport function row(element, testArr){\n\tvar messages = flatten(testArr)\n\t\t.filter(msg => msg) // clean empty\n\t\t.filter(msg => typeof msg.test == 'function' ? msg.test(element) : !!msg.test); // run test...\n\n\treturn !messages.length ? null : {\n\t\telement: element,\n\t\tmessages: messages\n\t};\n}\n\nfunction flatten(arr) {\n\treturn arr.reduce(function (flat, toFlatten) {\n\t\treturn flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n\t}, []);\n}","function multiPick(arr, propArr){\n\treturn arr\n\t\t.map(e=> e && [].concat(e[propArr[0]], e[propArr[1]], e[propArr[2]])) // gather all stim arrays\n\t\t.reduce((previous, current)=>previous.concat(current),[]) // flatten arrays\n\t\t.filter(t=>t); // remove all undefined stim\n}\n\nfunction flattenSequence(sequence){\n\tfunction unMix(e){\n\t\treturn flattenSequence([].concat(e.data, e.elseData, (e.branches || []).map(e=>e.data)));\n\t}\n\n\treturn sequence\n\t\t.reduce((previous, current) => {return previous.concat(current && current.mixer ? unMix(current) : current);},[])\n\t\t.filter(t=>t); // remove all undefined stim;\n}\n\nfunction concatClean(){\n\tvar args = [].splice.call(arguments,0);\n\treturn [].concat.apply([], args).filter(e=>e);\n}\n\nexport function pipElements(script){\n\tvar trials, stimuli, media;\n\n\ttrials = concatClean(flattenSequence(script.sequence), script.trialSets);\n\tstimuli = concatClean(\n\t\tscript.stimulusSets,\n\t\tmultiPick(trials,['stimuli', 'layout'])\n\t);\n\tmedia = concatClean(\n\t\tscript.mediaSets,\n\t\tmultiPick(stimuli,['media','touchMedia'])\n\t);\n\n\treturn {trials:trials, stimuli:stimuli, media:media};\n}\n\nexport function questElements(script){\n\tvar pages, questions;\n\n\tpages = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\tquestions = [].concat(\n\t\tscript.questionsSets,\n\t\tflattenSequence(multiPick(pages,['questions']))\n\t).filter(t=>t);\n\n\treturn {pages:pages, questions:questions};\n}\n\nexport function managerElements(script){\n\tvar tasks;\n\n\ttasks = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\treturn {tasks:tasks};\n}","import {warn, error, row} from './messages';\nimport {pipElements} from './parser';\n\nexport default pipValidator;\n\nfunction pipValidator(script, url){\n\tvar errors = [];\n\tvar elements = pipElements(script);\n\n\terrors.push({type:'Settings',errors: checkSettings(script, url)});\n\terrors.push({type:'Trials',errors: filterMap(elements.trials, trialTest)});\n\t// errors.push({type:'Stimuli',errors: filterMap(elements.stimuli, stimuliTest)});\n\t// errors.push({type:'Media',errors: filterMap(elements.media, mediaTest)});\n\n\treturn errors;\n}\n\nfunction filterMap(arr, fn){\n\treturn arr.map(fn).filter(e=>e);\n}\n\n/**\n * Check settings\n * @param  {Object} script The script to be tested\n * @param  {String} url    The script origin URL\n * @return {Array}        Array of error rows\n */\nfunction checkSettings(script, url){\n\tvar settings = script.settings || {};\n\n\tvar w = byProp(warn);\n\t// var e = byProp(error);\n\n\tvar errors = [\n\t\tr('base_url', [\n\t\t\tw('Your base_url is not in the same directory as your script.', e => {\n\t\t\t\t// use this!!!\n\t\t\t\t// http://stackoverflow.com/questions/4497531/javascript-get-url-path\n\t\t\t\tvar getPath = url => {\n\t\t\t\t\tvar a = document.createElement('a');\n\t\t\t\t\ta.href = url;\n\t\t\t\t\treturn a.pathname;\n\t\t\t\t};\n\n\t\t\t\tvar path = getPath(url).substring(0, url.lastIndexOf('/') + 1); // get path but remove file name\n\t\t\t\tvar t = s => (!s || getPath(s).indexOf(path) !== 0);\n\n\t\t\t\treturn (typeof e == 'object') ? t(e.image) && t(e.template) : t(e);\n\t\t\t})\n\t\t])\n\t];\n\n\treturn errors.filter(function(err){return !!err;});\n\n\tfunction r(prop, arr){\n\t\tvar el = {};\n\t\tel[prop] = settings[prop];\n\t\treturn prop in settings && row(el, arr);\n\t}\n\n\t// wrap warn/error so that I don't have to individually\n\tfunction byProp(fn){\n\t\treturn function(msg, test){\n\t\t\treturn fn(msg, e => {\n\t\t\t\tfor (var prop in e) {\n\t\t\t\t\treturn test(e[prop]);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n}\n\nfunction trialTest(trial) {\n\tvar tests = [\n\t\ttestInteractions(trial.interactions),\n\t\ttestInput(trial.input)\n\t];\n\n\treturn row(trial, tests);\n\n\tfunction testInteractions(interactions){\n\t\tif (!interactions) {return;}\n\n\t\tif (!Array.isArray(interactions)){\n\t\t\treturn [error('Interactions must be an array.', true)];\n\t\t}\n\n\t\treturn  interactions.map((interaction, index) => {\n\t\t\treturn [\n\t\t\t\t!interaction.conditions ? error(`Interaction [${index}] must have conditions`, true) : [\n\t\t\t\t\terror(`Interaction conditon [${index}] must have a type`, toArray(interaction.conditions).some(c=>!c.type))\n\t\t\t\t],\n\t\t\t\t!interaction.actions ? error(`Interaction [${index}] must have actions`, true) : [\n\t\t\t\t\terror(`Interaction action [${index}] must have a type`, toArray(interaction.actions).some(a=>!a.type))\n\t\t\t\t]\n\t\t\t];\n\t\t});\n\n\n\t\tfunction toArray(arr){\n\t\t\treturn Array.isArray(arr) ? arr : [arr];\n\t\t}\n\n\t}\n\n\tfunction testInput(input){\n\t\tif (!input) {return;}\n\n\t\tif (!Array.isArray(trial.input)){\n\t\t\treturn [error('Input must be an Array', true)];\n\t\t}\n\n\t\treturn [\n\t\t\terror('Input must always have a handle', input.some(i=>!i.handle)),\n\t\t\terror('Input must always have an on attribute', input.some(i=>!i.on))\n\t\t];\n\t}\n}\n\nfunction stimuliTest(stim){\n\tvar tests = [];\n\treturn row(stim, tests);\n}\n\nfunction mediaTest(media){\n\tvar tests = [\n\n\t];\n\treturn row(media, tests);\n}","import messages from './messages';\nimport {questElements} from './parser';\n\nexport default function questValidator(script){\n\tvar errors = [];\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Pages', errors:[]});\n\terrors.push({type:'Questions', errors:[]});\n\n\treturn errors;\n}","\nimport {warn, error} from './messages';\nimport {managerElements} from './parser';\n\nexport default function managerValidator(script){\n\tvar errors = [];\n\tvar elements = managerElements(script);\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Tasks', errors:[]});\n\n\treturn errors;\n}\n\n\n\n","import pipValidate from './pipValidator';\nimport questValidate from './questValidator';\nimport managerValidate from './managerValidator';\n\nexport default function validate(script){\n\tvar type = script.type && script.type.toLowerCase();\n\tswitch (type){\n\tcase 'pip' : return pipValidate.apply(null, arguments);\n\tcase 'quest' : return questValidate.apply(null, arguments);\n\tcase 'manager' : return managerValidate.apply(null, arguments);\n\tdefault:\n\t\tthrow new Error('Unknown script.type: ' + type);\n\t}\n}\n\nexport function dd(){\n\treturn [\n\t\t{\n\t\t\ttype: 'task',\n\t\t\terrosrs:[],\n\t\t\terrors: [\n\t\t\t\t{\n\t\t\t\t\telement: {name:'myName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'error', message: 'error message1'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message2'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message3'},\n\t\t\t\t\t\t{level:'error', message: 'error message4'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\telement: {name:'otherName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'warn', message: 'warn message1'},\n\t\t\t\t\t\t{level:'error', message: 'error message2'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t];\n}\n","import validator from './parser/validator';\nexport default validateComponent;\n\nvar validateComponent = {\n\tcontroller: args => {\n\t\tvar file = args.file;\n\t\tvar ctrl = {\n\t\t\tvalidations : m.prop([]),\n\t\t\tisError: false\n\t\t};\n\n\t\tm.startComputation();\n\t\tfile\n\t\t\t.define()\n\t\t\t.then(()=>{\n\t\t\t\treturn file.require();\n\t\t\t})\n\t\t\t.then(script => {\n\t\t\t\tctrl.validations(validator(script, file.url));\n\t\t\t\tm.endComputation();\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tctrl.isError = true;\n\t\t\t\tm.endComputation();\n\t\t\t});\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn  m('div', [\n\t\t\t!ctrl.isError ? '' :\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t`There was a problem parsing this script. Are you sure that it is a valid PI script? Make sure you fix all syntax errors.`\n\t\t\t]),\n\n\t\t\tctrl.validations().map(validationReport => {\n\t\t\t\treturn [\n\t\t\t\t\tm('h4', validationReport.type),\n\t\t\t\t\t!validationReport.errors.length\n\t\t\t\t\t\t?\n\t\t\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t\t\t])\n\t\t\t\t\t\t:\n\t\t\t\t\t\tvalidationReport.errors.map(err => {\n\t\t\t\t\t\t\treturn m('.row',[\n\t\t\t\t\t\t\t\tm('.col-md-4.stringified',\n\t\t\t\t\t\t\t\t\tm('div', {class:'pre'}, m.trust(stringify(err.element)))\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tm('.col-md-8',[\n\t\t\t\t\t\t\t\t\tm('ul', err.messages.map(msg => {\n\t\t\t\t\t\t\t\t\t\treturn m('li.list-unstyled', {class: msg.level == 'error' ? 'text-danger' : 'text-info'}, [\n\t\t\t\t\t\t\t\t\t\t\tm('strong', msg.level),\n\t\t\t\t\t\t\t\t\t\t\tmsg.message\n\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t})\n\t\t\t\t];\n\t\t\t})\n\n\t\t]);\n\t}\n};\n\n\nfunction stringify(value, pretty) {\n\tif (value == null) { // null || undefined\n\t\treturn '<i class=\"text-muted\">undefined</i>';\n\t}\n\tif (value === '') {\n\t\treturn '<i class=\"text-muted\">an empty string</i>';\n\t}\n\n\tswitch (typeof value) {\n\t\tcase 'string':\n\t\t\tbreak;\n\t\tcase 'number':\n\t\t\tvalue = '' + value;\n\t\t\tbreak;\n\t\tcase 'object':\n\t\t\t// display the error message not the full thing...\n\t\t\tif (value instanceof Error){\n\t\t\t\tvalue = value.message;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t/* fall through */\n\t\tdefault:\n\t\t\t// @TODO: implement this: http://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript\n\t\t\tvalue = syntaxHighlight(JSON.stringify(value, null, 4));\n\t}\n\n\treturn value;\n}\n\n\nfunction syntaxHighlight(json) {\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        var cls = 'number';\n        if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n                cls = 'key';\n            } else {\n                cls = 'string';\n            }\n        } else if (/true|false/.test(match)) {\n            cls = 'boolean';\n        } else if (/null/.test(match)) {\n            cls = 'null';\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n}\n","import editorComponent from './ace/editorComponent';\nimport syntaxComponent from './ace/syntaxComponent';\nimport validatorComponent from './ace/validatorComponent';\nimport classNames from '../../classNames';\n\nexport default jsEditor;\n\nlet jsEditor = {\n\tcontroller: args => {\n\t\treturn {\n\t\t\tfile: args.file,\n\t\t\tactiveTab: m.prop('edit')\n\t\t};\n\t},\n\tview: ctrl => {\n\t\tlet file = ctrl.file;\n\t\tlet activeTab = ctrl.activeTab;\n\t\treturn m('div',[\n\t\t\t!file.loaded ? '' : m('ul.nav.nav-tabs',[\n\t\t\t\tm('li.nav-item', [\n\t\t\t\t\tm('a[data-tab=\"edit\"].nav-link', {onclick:m.withAttr('data-tab', activeTab), class: classNames({active: activeTab() == 'edit'})}, 'Edit')\n\t\t\t\t]),\n\t\t\t\tm('li.nav-item', [\n\t\t\t\t\tm('a[data-tab=\"syntax\"].nav-link', {onclick:m.withAttr('data-tab', activeTab), class: classNames({active: activeTab() == 'syntax'})}, [\n\t\t\t\t\t\t'Syntax ',\n\t\t\t\t\t\tm('span.badge.alert-danger',file.syntaxValid ? '' : file.syntaxData.errors.length)\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\tm('li.nav-item', [\n\t\t\t\t\tm('a[data-tab=\"validate\"].nav-link', {onclick:m.withAttr('data-tab', activeTab), class: classNames({active: activeTab() == 'validate'})}, 'Validate')\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('.tab-content', [\n\t\t\t\tactiveTab() == 'edit' ? m.component(editorComponent, {file:file}) : '',\n\t\t\t\tactiveTab() == 'syntax' ? m.component(syntaxComponent, {file:file}) : '',\n\t\t\t\tactiveTab() == 'validate' ? m.component(validatorComponent, {file:file}) : ''\n\t\t\t])\n\t\t]);\n\t}\n};","import fullHeight from './fullHeight';\nimport jsEditor from './editors/jsEditor';\nimport jstEditor from './editors/jstEditor';\nimport imgEditor from './editors/imgEditor';\nimport pdfEditor from './editors/pdfEditor';\n\nexport default fileEditorComponent;\n\nlet editors = {\n\tjs: jsEditor,\n\tjpg: imgEditor,\n\tbmp: imgEditor,\n\tpng: imgEditor,\n\thtml: jstEditor,\n\tjst: jstEditor,\n\tpdf: pdfEditor\n};\n\nlet fileEditorComponent = {\n\tcontroller: function(study) {\n\t\tvar id = m.route.param('fileID');\n\t\tvar file = study.getFile(id);\n\n\t\tvar ctrl = {\n\t\t\tfile: file\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\n\tview: (ctrl, args = {}) => {\n\t\tvar file = ctrl.file;\n\n\t\treturn m('div', {config:fullHeight}, [\n\t\t\tfile\n\t\t\t\t? editors[file.type]\n\t\t\t\t\t? m.component(editors[file.type], {file:file, settings: args.settings})\n\t\t\t\t\t: m('.centrify', [\n\t\t\t\t\t\tm('i.fa.fa-file.fa-5x'),\n\t\t\t\t\t\tm('h5', 'Unknow file type')\n\t\t\t\t\t])\n\t\t\t\t: m('.centrify', [\n\t\t\t\t\tm('i.fa.fa-smile-o.fa-5x'),\n\t\t\t\t\tm('h5', 'Please select a file to start working')\n\t\t\t\t])\n\t\t]);\n\t}\n};","import classNames from './classNames';\nexport default contextMenuComponent;\n\n/**\n * Set this component into your layout then use any mouse event to open the context menu:\n * oncontextmenu: contextMenuComponent.open([...menu])\n *\n * Example menu:\n * [\n * \t{icon:'fa-play', text:'begone'},\n *\t{icon:'fa-play', text:'asdf'},\n *\t{separator:true},\n *\t{icon:'fa-play', text:'wertwert', menu: [\n *\t\t{icon:'fa-play', text:'asdf'}\n *\t]}\n * ]\n */\n\nlet contextMenuComponent = {\n\tvm: {\n\t\tshow: m.prop(false),\n\t\tstyle: m.prop({}),\n\t\tmenu: m.prop([\n\t\t])\n\t},\n\tview: () => {\n\t\treturn m(\n\t\t\t'.context-menu',\n\t\t\t{\n\t\t\t\tclass: classNames({'show-context-menu': contextMenuComponent.vm.show()}),\n\t\t\t\tstyle: contextMenuComponent.vm.style()\n\t\t\t},\n\t\t\tcontextMenuComponent.vm.menu().map(menuNode)\n\t\t);\n\t},\n\n\topen: menu => e => {\n\t\te.preventDefault();\n\n\t\tcontextMenuComponent.vm.menu(menu);\n\t\tcontextMenuComponent.vm.show(true);\n\t\tcontextMenuComponent.vm.style({\n\t\t\tleft:e.pageX + 'px',\n\t\t\ttop:e.pageY + 'px'\n\t\t});\n\n\t\tdocument.addEventListener('mousedown', onClick, false);\n\t\tfunction onClick(){\n\t\t\tcontextMenuComponent.vm.show(false);\n\t\t\tdocument.removeEventListener('mousedown', onClick);\n\t\t\tm.redraw();\n\t\t}\n\t}\n};\n\nlet menuNode = (node, key) => {\n\treturn node.separator\n\t\t? m('.context-menu-separator', {key:key})\n\t\t: m('.context-menu-item', {class: classNames({disabled: node.disabled, submenu:node.menu, key: key})}, [\n\t\t\tm('button.context-menu-btn',{onmousedown: node.disabled || node.action}, [\n\t\t\t\tm('i.fa', {class:node.icon}),\n\t\t\t\tm('span.context-menu-text', node.text)\n\t\t\t]),\n\t\t\tnode.menu ? m('.context-menu', node.menu.map(menuNode)) : ''\n\t\t]);\n};","export default messages;\n\nlet messages = {\n\tvm: {isOpen: false},\n\n\topen: (type, opts={}) => {\n\t\tlet promise = new Promise((resolve, reject) => {\n\t\t\tmessages.vm = {resolve,reject,type, opts, isOpen:true};\n\t\t});\n\t\tm.redraw();\n\n\t\treturn promise;\n\t},\n\n\tclose: response => {\n\t\tlet vm = messages.vm;\n\t\tvm.isOpen = false;\n\t\tif (typeof vm.resolve === 'function') vm.resolve(response);\n\t\tm.redraw();\n\t},\n\n\talert: opts => {\n\t\treturn messages.open('alert', opts);\n\t},\n\n\tconfirm: opts => {\n\t\treturn messages.open('confirm', opts);\n\t},\n\n\tprompt: opts => {\n\t\treturn messages.open('prompt', opts);\n\t},\n\n\tview: () => {\n\t\tlet vm = messages.vm;\n\n\t\t// switch (vm.type) {\n\t\t// \tcase 'alert':\n\t\t// \t\treturn\n\t\t// \tdefault:\n\t\t// \t\tthrow new Error(`unnknown message type ${vm.type}`);\n\t\t// }\n\n\t\treturn m('.messages', [\n\t\t\t!vm || !vm.isOpen\n\t\t\t\t? ''\n\t\t\t\t:[\n\t\t\t\t\tm('.overlay', {config:messages.config()}),\n\t\t\t\t\tm('.messages-wrapper', {onclick:messages.close.bind(null, null)}, [\n\t\t\t\t\t\tm('.card.col-sm-5',[\n\t\t\t\t\t\t\tm('.card-block',[\n\t\t\t\t\t\t\t\tmessages.views[vm.type](vm.opts)\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t]);\n\n\t},\n\n\tconfig: () => {\n\t\treturn (element, isInitialized, context) => {\n\t\t\tif (!isInitialized) {\n\t\t\t\tlet handleKey = function(e) {\n\t\t\t\t\tif (e.keyCode == 27) {\n\t\t\t\t\t\tmessages.close(null);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tdocument.body.addEventListener('keyup', handleKey);\n\n\t\t\t\tcontext.onunload = function() {\n\t\t\t\t\tdocument.body.removeEventListener('keyup', handleKey);\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t},\n\n\tviews: {\n\t\talert: (opts={}) => {\n\t\t\tlet close = response => messages.close.bind(null, response);\n\t\t\treturn [\n\t\t\t\tm('h4', opts.header),\n\t\t\t\tm('p.card-text', opts.content),\n\t\t\t\tm('.text-xs-right',[\n\t\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n\t\t\t\t])\n\t\t\t];\n\t\t},\n\n\t\tconfirm: (opts={}) => {\n\t\t\tlet close = response => messages.close.bind(null, response);\n\t\t\treturn [\n\t\t\t\tm('h4', opts.header),\n\t\t\t\tm('p.card-text', opts.content),\n\t\t\t\tm('.text-xs-right',[\n\t\t\t\t\tm('a.btn.btn-secondary.btn-sm', {onclick:close(null)}, opts.okText || 'Cancel'),\n\t\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n\t\t\t\t])\n\t\t\t];\n\t\t},\n\n\t\tprompt: (opts={}) => {\n\t\t\tlet close = response => messages.close.bind(null, response);\n\t\t\treturn [\n\t\t\t\tm('h4', opts.header),\n\t\t\t\tm('p.card-text', opts.content),\n\t\t\t\tm('input'),\n\t\t\t\tm('.text-xs-right',[\n\t\t\t\t\tm('a.btn.btn-secondary.btn-sm', {onclick:close(null)}, opts.okText || 'Cancel'),\n\t\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n\t\t\t\t])\n\t\t\t];\n\t\t}\n\t}\n\n\n};","import contextMenu from '../../contextMenuComponent';\nimport messages from '../../messagesComponent';\nexport default fileContext;\n\n// download support according to modernizer\nlet downloadSupport = !window.externalHost && 'download' in document.createElement('a');\n\nlet fileContext = (file, study) => {\n\tlet menu = [\n\t\t//{icon:'fa-plus', text:'New File', action: () => study.create('new.js')},\n\t\t{icon:'fa-copy', text:'Duplicate', action: () => messages.alert({header:'Duplicate: ' + file.name, content:'Duplicate has not been implemented yet'})},\n\t\t{separator:true},\n\t\t{icon:'fa-download', text:'Download', action: downloadFile},\n\t\t// {icon:'fa-clipboard', text:'Copy Url', action: () => alert('copy')},\n\t\t{icon:'fa-close', text:'Delete', action: deleteFile}\n\t];\n\treturn contextMenu.open(menu);\n\n\tfunction downloadFile(){\n\t\tif (downloadSupport){\n\t\t\tlet link = document.createElement('a');\n\t\t\tlink.href = file.url;\n\t\t\tlink.download = file.name;\n\t\t\tlink.target = '_blank';\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\t\t} else {\n\t\t\tlet win = window.open(file.url, '_blank');\n\t\t\twin.focus();\n\t\t}\n\t}\n\n\tfunction deleteFile(){\n\t\tmessages.confirm({\n\t\t\theader:['Delete ',m('small', file.name)],\n\t\t\tcontent: 'Are you sure you want to delete this file? This action is permanent!'\n\t\t})\n\t\t.then(ok => {\n\t\t\tif (ok) return study.del(file.id);\n\t\t})\n\t\t.then(m.redraw)\n\t\t.catch( err => {\n\t\t\terr.response.json()\n\t\t\t\t.then(response => {\n\t\t\t\t\tmessages.alert({\n\t\t\t\t\t\theader: 'Delete failed:',\n\t\t\t\t\t\tcontent: response.message\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\treturn err;\n\t\t});\n\t} // end delete file\n};\n\n","import classNames from '../../classNames';\nimport fileContext from './fileContext';\nexport default filesComponent;\n\nlet filesComponent = {\n\tview: (ctrl, study) => {\n\t\tlet files = study.files();\n\t\treturn m('.files', [\n\t\t\tm('ul', files.map(file => m.component(nodeComponent, {file, study})))\n\t\t]);\n\t}\n};\n\nlet nodeComponent = {\n\tcontroller: ({file}) => {\n\t\treturn {\n\t\t\tisDir: file.isDir,\n\t\t\tisOpen: false,\n\t\t\tisCurrent: m.route.param('fileID') === file.id\n\t\t};\n\n\t},\n\tview: (ctrl, {file, study}) => {\n\t\treturn m('li.file-node',\n\t\t\t{\n\t\t\t\tkey: file.id,\n\t\t\t\tclass: classNames({\n\t\t\t\t\topen : ctrl.isOpen\n\t\t\t\t}),\n\t\t\t\tonclick: choose(file),\n\t\t\t\toncontextmenu: fileContext(file, study)\n\t\t\t},\n\t\t\t[\n\t\t\t\tm('a.wholerow', {\n\t\t\t\t\tunselectable:'on',\n\t\t\t\t\tclass:classNames({\n\t\t\t\t\t\t'current': ctrl.isCurrent\n\t\t\t\t\t})\n\t\t\t\t}, m.trust('&nbsp;')),\n\n\t\t\t\tm('i.fa.fa-fw', {\n\t\t\t\t\tclass: classNames({\n\t\t\t\t\t\t'fa-caret-right' : ctrl.isDir && !ctrl.isOpen,\n\t\t\t\t\t\t'fa-caret-down': ctrl.isDir && ctrl.isOpen\n\t\t\t\t\t}),\n\t\t\t\t\tonclick: ctrl.isDir ? (() => ctrl.isOpen = !ctrl.isOpen) : null\n\t\t\t\t}),\n\n\t\t\t\tm('a', [\n\t\t\t\t\tm('i.fa.fa-fw.fa-file-o', {\n\t\t\t\t\t\tclass: classNames({\n\t\t\t\t\t\t\t'fa-file-code-o': /(js)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-file-text-o': /(jst|html|xml)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-file-image-o': /(jpg|png|bmp)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-file-pdf-o': /(pdf)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-folder-o': file.isDir\n\t\t\t\t\t\t})\n\t\t\t\t\t}),\n\t\t\t\t\t` ${file.name}`\n\t\t\t\t])\n\t\t\t]\n\t\t);\n\t}\n};\n\nlet choose = file => e => {\n\te.preventDefault();\n\tm.route(`/editor/${file.studyID}/${file.id}`);\n};\n","import fullHeight from './fullHeight';\nimport filesComponent from './sidebar/filesComponent';\nexport default sidebarComponent;\n\nlet sidebarComponent = {\n\tview: (ctrl , study) => {\n\t\treturn m('.editor-sidebar', {config:fullHeight}, [\n\t\t\tm('h5', [\n\t\t\t\tstudy.id\n\t\t\t]),\n\n\t\t\tm('.btn-group',[\n\t\t\t\tm('.btn.btn-sm.pull.btn-secondary',[\n\t\t\t\t\tm('i.fa.fa-plus'), ' New'\n\t\t\t\t])\n\t\t\t]),\n\n\t\t\tm.component(filesComponent, study)\n\t\t]);\n\t}\n};","export default editorLayoutComponent;\nimport studyModel from './studyModel';\nimport editorComponent from './editorComponent';\nimport sidebarComponent from './sidebarComponent';\nimport contextMenu from '../contextMenuComponent';\nimport messages from '../messagesComponent';\n\nlet editorLayoutComponent = {\n\tcontroller: ()=>{\n\t\tlet study = new studyModel(m.route.param('studyID'));\n\t\tlet ctrl = {study};\n\n\t\tstudy\n\t\t\t.get()\n\t\t\t.then(m.redraw);\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\tlet study = ctrl.study;\n\t\treturn  m('div', [\n\t\t\tm('nav.navbar.navbar-dark.navbar-fixed-top', [\n\t\t\t\tm('a.navbar-brand', 'Dashboard'),\n\t\t\t\tm('ul.nav.navbar-nav',[\n\t\t\t\t\tm('li.nav-item',[\n\t\t\t\t\t\tm('a.nav-link',{href:'/studies', config:m.route},'Studies')\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\n\t\t\tm('.container-fluid', {style:{marginTop:'70px'}},[\n\t\t\t\tstudy.loaded\n\t\t\t\t\t?\n\t\t\t\t\tm('.row', [\n\t\t\t\t\t\tm('.sidebar.col-md-2', [\n\t\t\t\t\t\t\tm.component(sidebarComponent, study)\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('.main.col-md-10',[\n\t\t\t\t\t\t\tm.component(editorComponent, study)\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t\t:\n\t\t\t\t\t''\n\t\t\t]),\n\n\t\t\tm.component(contextMenu), // register context menu\n\t\t\tm.component(messages)\n\t\t]);\n\t}\n};","import {toJSON, checkStatus} from './study/modelHelpers';\nexport default mainComponent;\n\nvar mainComponent = {\n\tcontroller: function(){\n\t\tvar ctrl = {\n\t\t\tstudies:m.prop(),\n\t\t\tloaded:false\n\t\t};\n\t\tfetch('/dashboard/dashboard/studies', {credentials: 'same-origin'})\n\t\t\t.then(checkStatus)\n\t\t\t.then(toJSON)\n\t\t\t.then(ctrl.studies)\n\t\t\t.then(()=>ctrl.loaded = true)\n\t\t\t.then(m.redraw);\n\n\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn m('.container', [\n\t\t\tm('h2', 'My studies'),\n\t\t\t!ctrl.loaded\n\t\t\t\t?\n\t\t\t\tm('.loader')\n\t\t\t\t:\n\t\t\t\tm('.list-group',ctrl.studies().studies.map(study => m('a.list-group-item',{\n\t\t\t\t\thref: `/editor/${study.id}`,\n\t\t\t\t\tconfig: m.route\n\t\t\t\t}, study.name)))\n\t\t]);\n\t}\n};","import mainComponent from './mainComponent';\nimport editorLayoutComponent from './study/studyComponent';\n\nm.route(document.body, 'studies', {\n\n\t'studies' : mainComponent,\n\t'/editor/:studyID': editorLayoutComponent,\n\t'/editor/:studyID/:fileID': editorLayoutComponent\n});"],"names":["baseUrl","jsEditor","editorComponent","pipValidate","questValidate","managerValidate","validator","syntaxComponent","validatorComponent","jstEditor","contextMenu"],"mappings":"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","sourceRoot":"/source/"}