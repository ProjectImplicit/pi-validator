{"version":3,"file":"main.js","sources":["../node_modules/promise-polyfill/src/finally.js","../src/utils/polyfills.js","../node_modules/promise-polyfill/src/index.js","../node_modules/promise-polyfill/src/polyfill.js","../node_modules/whatwg-fetch/fetch.js","../node_modules/moment/moment.js","../node_modules/pikaday/pikaday.js","../node_modules/mithril/mithril.js","../src/setup.js","../src/utils/modelHelpers.js","../src/modelUrls.js","../src/utils/dateRange.js","../src/utils/forms/inputWrapper.js","../src/utils/forms/textInput.js","../src/utils/forms/maybeInput.js","../src/utils/forms/checkboxInput.js","../src/utils/forms/selectInput.js","../src/utils/forms/radioInput.js","../src/utils/formHelpers.js","../src/utils/forms/arrayInput.js","../src/utils/transformProp.js","../src/study/statistics/statisticsFormComponent.js","../src/utils/sortTable.js","../src/utils/formatDate.js","../src/study/statistics/statisticsTableComponent.js","../src/study/statistics/statisticsComponent.js","../src/study/statistics/statisticsModel.js","../src/study/statistics/instructions.js","../src/study/statistics_old/statisticsModel.js","../src/study/statistics_old/statisticsFormComponent.js","../src/study/statistics_old/statisticsTableComponent.js","../src/study/statistics_old/statisticsComponent.js","../src/study/statistics_old/instructions.js","../src/pool/poolModel.js","../src/utils/messagesComponent.js","../src/utils/spinnerComponent.js","../src/utils/classNames.js","../src/pool/poolEditComponent.js","../src/pool/poolCreateComponent.js","../src/pool/poolActions.js","../src/login/authModel.js","../src/pool/poolComponent.js","../src/pool/historyComponent.js","../src/downloads/downloadsModel.js","../src/downloads/downloadsCreate.js","../src/downloads/downloadsActions.js","../src/downloads/downloadsComponent.js","../src/downloadsAccess/downloadsAccessModel.js","../src/downloadsAccess/downloadsAccessCreateComponent.js","../src/downloadsAccess/downloadsAccessGrantComponent.js","../src/downloadsAccess/downloadsAccessRevokeComponent.js","../src/downloadsAccess/downloadsAccessActions.js","../src/downloadsAccess/downloadsAccessComponent.js","../src/utils/fullHeight.js","../src/login/loginComponent.js","../src/study/files/editors/jshintOptions.js","../src/study/files/fileModel.js","../src/study/files/fileCollectionModel.js","../src/study/files/editors/imgEditor.js","../src/study/files/editors/unknownEditor.js","../src/utils/downloadUrl.js","../src/study/files/sidebar/moveFileComponent.js","../src/study/studyModel.js","../src/study/files/sidebar/copyFileComponent.js","../src/study/files/sidebar/fileActions.js","../src/study/files/editors/ace/aceComponent.js","../src/study/files/editors/ace/syntaxComponent.js","../src/study/files/editors/ace/parser/messages.js","../src/study/files/editors/ace/parser/parser.js","../src/study/files/editors/ace/parser/pipValidator.js","../src/study/files/editors/ace/validatorComponent.js","../src/study/files/editors/ace/parser/validator.js","../src/study/files/editors/ace/parser/questValidator.js","../src/study/files/editors/ace/parser/managerValidator.js","../src/utils/copyUrl.js","../src/utils/prettyPrint.js","../src/study/files/editors/snippets/inheritInput.js","../src/study/files/editors/snippets/task.js","../src/study/files/editors/snippets/page.js","../src/study/files/editors/snippets/quest.js","../src/study/files/editors/snippetActions.js","../src/study/files/editors/textMenu.js","../src/study/files/editors/textEditor.js","../src/utils/observer.js","../src/study/files/editorComponent.js","../src/study/files/editors/pdfEditor.js","../src/study/files/wizardComponent.js","../src/study/files/wizards/ratingWizard.js","../src/utils/contextMenuComponent.js","../src/study/files/sidebar/fileContext.js","../src/utils/uploader.js","../src/study/files/sidebar/nodeComponent.js","../src/study/files/sidebar/folderComponent.js","../src/study/files/sidebar/fileListComponent.js","../src/utils/dropdown.js","../src/study/templates/studyTemplatesComponent.js","../src/tags/tagsModel.js","../src/tags/studyTagsComponent.js","../src/downloads/dataComp.js","../src/study/sharing/sharingModel.js","../src/study/studyActions.js","../src/study/studyMenu.js","../src/study/files/sidebar/sidebarButtons.js","../src/study/files/sidebar/sidebarComponent.js","../src/utils/splitPane.js","../src/study/files/filesComponent.js","../src/study/files/viewFileCollectionModel.js","../src/study/files/viewFilesComponent.js","../src/study/studiesComponent.js","../src/deploy/forms/deployList/deployListComponent.js","../src/deploy/forms/deployList/deployListModel.js","../src/deploy/forms/changeRequestList/changeRequestListComponent.js","../src/deploy/forms/changeRequestList/changeRequestListModel.js","../src/deploy/forms/removalList/removalListComponent.js","../src/deploy/forms/removalList/removalListModel.js","../src/deploy/deployModel.js","../src/deploy/rulesComponent.js","../src/deploy/deployComponent.js","../src/deploy/studyRemovalComponent.js","../src/deploy/studyChangeRequestComponent.js","../src/addUser/addUserComponent.js","../src/addUser/addUserModel.js","../src/admin/config/configModel.js","../src/settings/settingsModel.js","../src/settings/changePasswordView.js","../src/settings/settingsActions.js","../src/settings/connect2dropboxView.js","../src/settings/settingsMenu.js","../src/settings/changeEmailView.js","../src/messages/messagesModel.js","../src/massMail/massMailComponent.js","../src/activation/activationModel.js","../src/collaboration/collaborationModel.js","../src/study/sharing/sharingComponent.js","../src/tags/tagsActions.js","../src/study/templates/translateModel.js","../src/utils/textareaAutoresize.js","../src/study/templates/pagesComponent.js","../src/main.js","../src/layoutWrapper.js","../src/routes.js","../src/tags/tagsComponent.js","../src/recovery/recoveryComponent.js","../src/recovery/recoveryModel.js","../src/activation/activationComponent.js","../src/collaboration/collaborationComponent.js","../src/settings/settingsComponent.js","../src/messages/messagesComponent.js","../src/settings/resetPasswordComponent.js","../src/admin/users/usersComponent.js","../src/admin/users/usersModel.js","../src/admin/config/configComponent.js","../src/massMail/massMailModel.js"],"sourcesContent":["/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","/**\n * Object.assign polyfill from https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n **/\nif (typeof Object.assign != 'function') {\n    Object.assign = function (target, varArgs) { // eslint-disable-line no-unused-vars\n        'use strict';\n        if (target == null) { // TypeError if undefined or null\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        let to = Object(target);\n\n        for (let index = 1; index < arguments.length; index++) {\n            let nextSource = arguments[index];\n\n            if (nextSource != null) { // Skip over if undefined or null\n                for (let nextKey in nextSource) {\n                    // Avoid bugs when hasOwnProperty is shadowed\n                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                        to[nextKey] = nextSource[nextKey];\n                    }\n                }\n            }\n        }\n        return to;\n    };\n}\n\nif (!Array.prototype.find) {\n    Object.defineProperty(Array.prototype, 'find', {\n        value: function(predicate) {\n            'use strict';\n            if (this == null) {\n                throw new TypeError('Array.prototype.find called on null or undefined');\n            }\n            if (typeof predicate !== 'function') {\n                throw new TypeError('predicate must be a function');\n            }\n            let list = Object(this);\n            let length = list.length >>> 0;\n            let thisArg = arguments[1];\n            let value;\n\n            for (let i = 0; i < length; i++) {\n                value = list[i];\n                if (predicate.call(thisArg, value, i, list)) {\n                    return value;\n                }\n            }\n            return undefined;\n        }\n    });\n}\n\nif (!Array.prototype.includes) {\n    Array.prototype.includes = function(searchElement /*, fromIndex*/) {\n        'use strict';\n        if (this == null) {\n            throw new TypeError('Array.prototype.includes called on null or undefined');\n        }\n\n        let O = Object(this);\n        let len = parseInt(O.length, 10) || 0;\n        if (len === 0) {\n            return false;\n        }\n        let n = parseInt(arguments[1], 10) || 0;\n        let k;\n        if (n >= 0) {\n            k = n;\n        } else {\n            k = len + n;\n            if (k < 0) {k = 0;}\n        }\n        let currentElement;\n        while (k < len) {\n            currentElement = O[k];\n            if (searchElement === currentElement || (searchElement !== searchElement && currentElement !== currentElement)) { // NaN !== NaN\n                return true;\n            }\n            k++;\n        }\n        return false;\n    };\n}\nif (!String.prototype.includes) {\n    String.prototype.includes = function(search, start) {\n        'use strict';\n        if (typeof start !== 'number') {\n            start = 0;\n        }\n\n        if (start + search.length > this.length) {\n            return false;\n        } else {\n            return this.indexOf(search, start) !== -1;\n        }\n    };\n}\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!('Promise' in globalNS)) {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","//! moment.js\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\n    var hookCallback;\n\n    function hooks () {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback (callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';\n    }\n\n    function isObject(input) {\n        // IE8 will treat undefined and null as object if it wasn't for\n        // input != null\n        return input != null && Object.prototype.toString.call(input) === '[object Object]';\n    }\n\n    function isObjectEmpty(obj) {\n        if (Object.getOwnPropertyNames) {\n            return (Object.getOwnPropertyNames(obj).length === 0);\n        } else {\n            var k;\n            for (k in obj) {\n                if (obj.hasOwnProperty(k)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    function isNumber(input) {\n        return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';\n    }\n\n    function isDate(input) {\n        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n    }\n\n    function map(arr, fn) {\n        var res = [], i;\n        for (i = 0; i < arr.length; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function createUTC (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty           : false,\n            unusedTokens    : [],\n            unusedInput     : [],\n            overflow        : -2,\n            charsLeftOver   : 0,\n            nullInput       : false,\n            invalidMonth    : null,\n            invalidFormat   : false,\n            userInvalidated : false,\n            iso             : false,\n            parsedDateParts : [],\n            meridiem        : null,\n            rfc2822         : false,\n            weekdayMismatch : false\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    var some;\n    if (Array.prototype.some) {\n        some = Array.prototype.some;\n    } else {\n        some = function (fun) {\n            var t = Object(this);\n            var len = t.length >>> 0;\n\n            for (var i = 0; i < len; i++) {\n                if (i in t && fun.call(this, t[i], i, t)) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m);\n            var parsedParts = some.call(flags.parsedDateParts, function (i) {\n                return i != null;\n            });\n            var isNowValid = !isNaN(m._d.getTime()) &&\n                flags.overflow < 0 &&\n                !flags.empty &&\n                !flags.invalidMonth &&\n                !flags.invalidWeekday &&\n                !flags.weekdayMismatch &&\n                !flags.nullInput &&\n                !flags.invalidFormat &&\n                !flags.userInvalidated &&\n                (!flags.meridiem || (flags.meridiem && parsedParts));\n\n            if (m._strict) {\n                isNowValid = isNowValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n\n            if (Object.isFrozen == null || !Object.isFrozen(m)) {\n                m._isValid = isNowValid;\n            }\n            else {\n                return isNowValid;\n            }\n        }\n        return m._isValid;\n    }\n\n    function createInvalid (flags) {\n        var m = createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        }\n        else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = hooks.momentProperties = [];\n\n    function copyConfig(to, from) {\n        var i, prop, val;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentProperties.length > 0) {\n            for (i = 0; i < momentProperties.length; i++) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    var updateInProgress = false;\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        if (!this.isValid()) {\n            this._d = new Date(NaN);\n        }\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment (obj) {\n        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n    }\n\n    function absFloor (number) {\n        if (number < 0) {\n            // -0 -> 0\n            return Math.ceil(number) || 0;\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if ((dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    function warn(msg) {\n        if (hooks.suppressDeprecationWarnings === false &&\n                (typeof console !==  'undefined') && console.warn) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (hooks.deprecationHandler != null) {\n                hooks.deprecationHandler(null, msg);\n            }\n            if (firstTime) {\n                var args = [];\n                var arg;\n                for (var i = 0; i < arguments.length; i++) {\n                    arg = '';\n                    if (typeof arguments[i] === 'object') {\n                        arg += '\\n[' + i + '] ';\n                        for (var key in arguments[0]) {\n                            arg += key + ': ' + arguments[0][key] + ', ';\n                        }\n                        arg = arg.slice(0, -2); // Remove trailing comma and space\n                    } else {\n                        arg = arguments[i];\n                    }\n                    args.push(arg);\n                }\n                warn(msg + '\\nArguments: ' + Array.prototype.slice.call(args).join('') + '\\n' + (new Error()).stack);\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(name, msg);\n        }\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    hooks.suppressDeprecationWarnings = false;\n    hooks.deprecationHandler = null;\n\n    function isFunction(input) {\n        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';\n    }\n\n    function set (config) {\n        var prop, i;\n        for (i in config) {\n            prop = config[i];\n            if (isFunction(prop)) {\n                this[i] = prop;\n            } else {\n                this['_' + i] = prop;\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        this._dayOfMonthOrdinalParseLenient = new RegExp(\n            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n                '|' + (/\\d{1,2}/).source);\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig), prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        for (prop in parentConfig) {\n            if (hasOwnProp(parentConfig, prop) &&\n                    !hasOwnProp(childConfig, prop) &&\n                    isObject(parentConfig[prop])) {\n                // make sure changes to properties don't modify parent config\n                res[prop] = extend({}, res[prop]);\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    var keys;\n\n    if (Object.keys) {\n        keys = Object.keys;\n    } else {\n        keys = function (obj) {\n            var i, res = [];\n            for (i in obj) {\n                if (hasOwnProp(obj, i)) {\n                    res.push(i);\n                }\n            }\n            return res;\n        };\n    }\n\n    var defaultCalendar = {\n        sameDay : '[Today at] LT',\n        nextDay : '[Tomorrow at] LT',\n        nextWeek : 'dddd [at] LT',\n        lastDay : '[Yesterday at] LT',\n        lastWeek : '[Last] dddd [at] LT',\n        sameElse : 'L'\n    };\n\n    function calendar (key, mom, now) {\n        var output = this._calendar[key] || this._calendar['sameElse'];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    var defaultLongDateFormat = {\n        LTS  : 'h:mm:ss A',\n        LT   : 'h:mm A',\n        L    : 'MM/DD/YYYY',\n        LL   : 'MMMM D, YYYY',\n        LLL  : 'MMMM D, YYYY h:mm A',\n        LLLL : 'dddd, MMMM D, YYYY h:mm A'\n    };\n\n    function longDateFormat (key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n            return val.slice(1);\n        });\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate () {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d';\n    var defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\n    function ordinal (number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    var defaultRelativeTime = {\n        future : 'in %s',\n        past   : '%s ago',\n        s  : 'a few seconds',\n        ss : '%d seconds',\n        m  : 'a minute',\n        mm : '%d minutes',\n        h  : 'an hour',\n        hh : '%d hours',\n        d  : 'a day',\n        dd : '%d days',\n        M  : 'a month',\n        MM : '%d months',\n        y  : 'a year',\n        yy : '%d years'\n    };\n\n    function relativeTime (number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return (isFunction(output)) ?\n            output(number, withoutSuffix, string, isFuture) :\n            output.replace(/%d/i, number);\n    }\n\n    function pastFuture (diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias (unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    var priorities = {};\n\n    function addUnitPriority(unit, priority) {\n        priorities[unit] = priority;\n    }\n\n    function getPrioritizedUnits(unitsObj) {\n        var units = [];\n        for (var u in unitsObj) {\n            units.push({unit: u, priority: priorities[u]});\n        }\n        units.sort(function (a, b) {\n            return a.priority - b.priority;\n        });\n        return units;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n    }\n\n    var formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\n    var localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\n    var formatFunctions = {};\n\n    var formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken (token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(func.apply(this, arguments), token);\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens), i, length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '', i;\n            for (i = 0; i < length; i++) {\n                output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var match1         = /\\d/;            //       0 - 9\n    var match2         = /\\d\\d/;          //      00 - 99\n    var match3         = /\\d{3}/;         //     000 - 999\n    var match4         = /\\d{4}/;         //    0000 - 9999\n    var match6         = /[+-]?\\d{6}/;    // -999999 - 999999\n    var match1to2      = /\\d\\d?/;         //       0 - 99\n    var match3to4      = /\\d\\d\\d\\d?/;     //     999 - 9999\n    var match5to6      = /\\d\\d\\d\\d\\d\\d?/; //   99999 - 999999\n    var match1to3      = /\\d{1,3}/;       //       0 - 999\n    var match1to4      = /\\d{1,4}/;       //       0 - 9999\n    var match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\n    var matchUnsigned  = /\\d+/;           //       0 - inf\n    var matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\n    var matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\n    var matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n\n    var matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n    // any word (or two) characters or numbers including two/three word month in arabic.\n    // includes scottish gaelic two word and hyphenated months\n    var matchWord = /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i;\n\n    var regexes = {};\n\n    function addRegexToken (token, regex, strictRegex) {\n        regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {\n            return (isStrict && strictRegex) ? strictRegex : regex;\n        };\n    }\n\n    function getParseRegexForToken (token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n            return p1 || p2 || p3 || p4;\n        }));\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken (token, callback) {\n        var i, func = callback;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (isNumber(callback)) {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        for (i = 0; i < token.length; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken (token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0;\n    var MONTH = 1;\n    var DATE = 2;\n    var HOUR = 3;\n    var MINUTE = 4;\n    var SECOND = 5;\n    var MILLISECOND = 6;\n    var WEEK = 7;\n    var WEEKDAY = 8;\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? '' + y : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY',   4],       0, 'year');\n    addFormatToken(0, ['YYYYY',  5],       0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PRIORITIES\n\n    addUnitPriority('year', 1);\n\n    // PARSING\n\n    addRegexToken('Y',      matchSigned);\n    addRegexToken('YY',     match1to2, match2);\n    addRegexToken('YYYY',   match1to4, match4);\n    addRegexToken('YYYYY',  match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    // HOOKS\n\n    hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', true);\n\n    function getIsLeapYear () {\n        return isLeapYear(this.year());\n    }\n\n    function makeGetSet (unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                set$1(this, unit, value);\n                hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get(this, unit);\n            }\n        };\n    }\n\n    function get (mom, unit) {\n        return mom.isValid() ?\n            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;\n    }\n\n    function set$1 (mom, unit, value) {\n        if (mom.isValid() && !isNaN(value)) {\n            if (unit === 'FullYear' && isLeapYear(mom.year()) && mom.month() === 1 && mom.date() === 29) {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));\n            }\n            else {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function stringGet (units) {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units]();\n        }\n        return this;\n    }\n\n\n    function stringSet (units, value) {\n        if (typeof units === 'object') {\n            units = normalizeObjectUnits(units);\n            var prioritized = getPrioritizedUnits(units);\n            for (var i = 0; i < prioritized.length; i++) {\n                this[prioritized[i].unit](units[prioritized[i].unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    function mod(n, x) {\n        return ((n % x) + x) % x;\n    }\n\n    var indexOf;\n\n    if (Array.prototype.indexOf) {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function (o) {\n            // I know\n            var i;\n            for (i = 0; i < this.length; ++i) {\n                if (this[i] === o) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n\n    function daysInMonth(year, month) {\n        if (isNaN(year) || isNaN(month)) {\n            return NaN;\n        }\n        var modMonth = mod(month, 12);\n        year += (month - modMonth) / 12;\n        return modMonth === 1 ? (isLeapYear(year) ? 29 : 28) : (31 - modMonth % 7 % 2);\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PRIORITY\n\n    addUnitPriority('month', 8);\n\n    // PARSING\n\n    addRegexToken('M',    match1to2);\n    addRegexToken('MM',   match1to2, match2);\n    addRegexToken('MMM',  function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/;\n    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\n    function localeMonths (m, format) {\n        if (!m) {\n            return isArray(this._months) ? this._months :\n                this._months['standalone'];\n        }\n        return isArray(this._months) ? this._months[m.month()] :\n            this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\n    function localeMonthsShort (m, format) {\n        if (!m) {\n            return isArray(this._monthsShort) ? this._monthsShort :\n                this._monthsShort['standalone'];\n        }\n        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :\n            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    function handleStrictParse(monthName, format, strict) {\n        var i, ii, mom, llc = monthName.toLocaleLowerCase();\n        if (!this._monthsParse) {\n            // this is not used\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n            for (i = 0; i < 12; ++i) {\n                mom = createUTC([2000, i]);\n                this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();\n                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeMonthsParse (monthName, format, strict) {\n        var i, mom, regex;\n\n        if (this._monthsParseExact) {\n            return handleStrictParse.call(this, monthName, format, strict);\n        }\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        // TODO: add sorting\n        // Sorting makes sure if one month (or abbr) is a prefix of another\n        // see sorting in computeMonthsParse\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth (mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (!isNumber(value)) {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth (value) {\n        if (value != null) {\n            setMonth(this, value);\n            hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth () {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    var defaultMonthsShortRegex = matchWord;\n    function monthsShortRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsShortRegex')) {\n                this._monthsShortRegex = defaultMonthsShortRegex;\n            }\n            return this._monthsShortStrictRegex && isStrict ?\n                this._monthsShortStrictRegex : this._monthsShortRegex;\n        }\n    }\n\n    var defaultMonthsRegex = matchWord;\n    function monthsRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                this._monthsRegex = defaultMonthsRegex;\n            }\n            return this._monthsStrictRegex && isStrict ?\n                this._monthsStrictRegex : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n        }\n        for (i = 0; i < 24; i++) {\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n    }\n\n    function createDate (y, m, d, h, M, s, ms) {\n        // can't just apply() to create a date:\n        // https://stackoverflow.com/q/181348\n        var date = new Date(y, m, d, h, M, s, ms);\n\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {\n            date.setFullYear(y);\n        }\n        return date;\n    }\n\n    function createUTCDate (y) {\n        var date = new Date(Date.UTC.apply(null, arguments));\n\n        // the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {\n            date.setUTCFullYear(y);\n        }\n        return date;\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear, resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek, resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PRIORITIES\n\n    addUnitPriority('week', 5);\n    addUnitPriority('isoWeek', 5);\n\n    // PARSING\n\n    addRegexToken('w',  match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W',  match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n        week[token.substr(0, 1)] = toInt(input);\n    });\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek (mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow : 0, // Sunday is the first day of the week.\n        doy : 6  // The week that contains Jan 6th is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek () {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear () {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek (input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek (input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PRIORITY\n    addUnitPriority('day', 11);\n    addUnitPriority('weekday', 11);\n    addUnitPriority('isoWeekday', 11);\n\n    // PARSING\n\n    addRegexToken('d',    match1to2);\n    addRegexToken('e',    match1to2);\n    addRegexToken('E',    match1to2);\n    addRegexToken('dd',   function (isStrict, locale) {\n        return locale.weekdaysMinRegex(isStrict);\n    });\n    addRegexToken('ddd',   function (isStrict, locale) {\n        return locale.weekdaysShortRegex(isStrict);\n    });\n    addRegexToken('dddd',   function (isStrict, locale) {\n        return locale.weekdaysRegex(isStrict);\n    });\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    function parseIsoWeekday(input, locale) {\n        if (typeof input === 'string') {\n            return locale.weekdaysParse(input) % 7 || 7;\n        }\n        return isNaN(input) ? null : input;\n    }\n\n    // LOCALES\n\n    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\n    function localeWeekdays (m, format) {\n        if (!m) {\n            return isArray(this._weekdays) ? this._weekdays :\n                this._weekdays['standalone'];\n        }\n        return isArray(this._weekdays) ? this._weekdays[m.day()] :\n            this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];\n    }\n\n    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\n    function localeWeekdaysShort (m) {\n        return (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;\n    }\n\n    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\n    function localeWeekdaysMin (m) {\n        return (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;\n    }\n\n    function handleStrictParse$1(weekdayName, format, strict) {\n        var i, ii, mom, llc = weekdayName.toLocaleLowerCase();\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._minWeekdaysParse = [];\n\n            for (i = 0; i < 7; ++i) {\n                mom = createUTC([2000, 1]).day(i);\n                this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();\n                this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();\n                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeWeekdaysParse (weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (this._weekdaysParseExact) {\n            return handleStrictParse$1.call(this, weekdayName, format, strict);\n        }\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = createUTC([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$', 'i');\n            }\n            if (!this._weekdaysParse[i]) {\n                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n\n        if (input != null) {\n            var weekday = parseIsoWeekday(input, this.localeData());\n            return this.day(this.day() % 7 ? weekday : weekday - 7);\n        } else {\n            return this.day() || 7;\n        }\n    }\n\n    var defaultWeekdaysRegex = matchWord;\n    function weekdaysRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysStrictRegex;\n            } else {\n                return this._weekdaysRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                this._weekdaysRegex = defaultWeekdaysRegex;\n            }\n            return this._weekdaysStrictRegex && isStrict ?\n                this._weekdaysStrictRegex : this._weekdaysRegex;\n        }\n    }\n\n    var defaultWeekdaysShortRegex = matchWord;\n    function weekdaysShortRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysShortStrictRegex;\n            } else {\n                return this._weekdaysShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n                this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n            }\n            return this._weekdaysShortStrictRegex && isStrict ?\n                this._weekdaysShortStrictRegex : this._weekdaysShortRegex;\n        }\n    }\n\n    var defaultWeekdaysMinRegex = matchWord;\n    function weekdaysMinRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysMinStrictRegex;\n            } else {\n                return this._weekdaysMinRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n                this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n            }\n            return this._weekdaysMinStrictRegex && isStrict ?\n                this._weekdaysMinStrictRegex : this._weekdaysMinRegex;\n        }\n    }\n\n\n    function computeWeekdaysParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var minPieces = [], shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom, minp, shortp, longp;\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, 1]).day(i);\n            minp = this.weekdaysMin(mom, '');\n            shortp = this.weekdaysShort(mom, '');\n            longp = this.weekdays(mom, '');\n            minPieces.push(minp);\n            shortPieces.push(shortp);\n            longPieces.push(longp);\n            mixedPieces.push(minp);\n            mixedPieces.push(shortp);\n            mixedPieces.push(longp);\n        }\n        // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n        // will match the longer piece.\n        minPieces.sort(cmpLenRev);\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 7; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._weekdaysShortRegex = this._weekdaysRegex;\n        this._weekdaysMinRegex = this._weekdaysRegex;\n\n        this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n        this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    function kFormat() {\n        return this.hours() || 24;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n    addFormatToken('k', ['kk', 2], 0, kFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    function meridiem (token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PRIORITY\n    addUnitPriority('hour', 13);\n\n    // PARSING\n\n    function matchMeridiem (isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a',  matchMeridiem);\n    addRegexToken('A',  matchMeridiem);\n    addRegexToken('H',  match1to2);\n    addRegexToken('h',  match1to2);\n    addRegexToken('k',  match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n    addRegexToken('kk', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['k', 'kk'], function (input, array, config) {\n        var kInput = toInt(input);\n        array[HOUR] = kInput === 24 ? 0 : kInput;\n    });\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM (input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return ((input + '').toLowerCase().charAt(0) === 'p');\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\n    function localeMeridiem (hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n\n    // MOMENTS\n\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour they want. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    var getSetHour = makeGetSet('Hours', true);\n\n    var baseConfig = {\n        calendar: defaultCalendar,\n        longDateFormat: defaultLongDateFormat,\n        invalidDate: defaultInvalidDate,\n        ordinal: defaultOrdinal,\n        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n        relativeTime: defaultRelativeTime,\n\n        months: defaultLocaleMonths,\n        monthsShort: defaultLocaleMonthsShort,\n\n        week: defaultLocaleWeek,\n\n        weekdays: defaultLocaleWeekdays,\n        weekdaysMin: defaultLocaleWeekdaysMin,\n        weekdaysShort: defaultLocaleWeekdaysShort,\n\n        meridiemParse: defaultLocaleMeridiemParse\n    };\n\n    // internal storage for locale config files\n    var locales = {};\n    var localeFamilies = {};\n    var globalLocale;\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0, j, next, locale, split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return globalLocale;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (!locales[name] && (typeof module !== 'undefined') &&\n                module && module.exports) {\n            try {\n                oldLocale = globalLocale._abbr;\n                var aliasedRequire = require;\n                aliasedRequire('./locale/' + name);\n                getSetGlobalLocale(oldLocale);\n            } catch (e) {}\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function getSetGlobalLocale (key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = getLocale(key);\n            }\n            else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            }\n            else {\n                if ((typeof console !==  'undefined') && console.warn) {\n                    //warn user if arguments are passed but the locale could not be set\n                    console.warn('Locale ' + key +  ' not found. Did you forget to load it?');\n                }\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale (name, config) {\n        if (config !== null) {\n            var locale, parentConfig = baseConfig;\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple('defineLocaleOverride',\n                        'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale ' +\n                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');\n                parentConfig = locales[name]._config;\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    parentConfig = locales[config.parentLocale]._config;\n                } else {\n                    locale = loadLocale(config.parentLocale);\n                    if (locale != null) {\n                        parentConfig = locale._config;\n                    } else {\n                        if (!localeFamilies[config.parentLocale]) {\n                            localeFamilies[config.parentLocale] = [];\n                        }\n                        localeFamilies[config.parentLocale].push({\n                            name: name,\n                            config: config\n                        });\n                        return null;\n                    }\n                }\n            }\n            locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n            if (localeFamilies[name]) {\n                localeFamilies[name].forEach(function (x) {\n                    defineLocale(x.name, x.config);\n                });\n            }\n\n            // backwards compat for now: also set the locale\n            // make sure we set the locale AFTER all child locales have been\n            // created, so we won't end up with the child locale set.\n            getSetGlobalLocale(name);\n\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale, tmpLocale, parentConfig = baseConfig;\n            // MERGE\n            tmpLocale = loadLocale(name);\n            if (tmpLocale != null) {\n                parentConfig = tmpLocale._config;\n            }\n            config = mergeConfigs(parentConfig, config);\n            locale = new Locale(config);\n            locale.parentLocale = locales[name];\n            locales[name] = locale;\n\n            // backwards compat for now: also set the locale\n            getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function getLocale (key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function listLocales() {\n        return keys(locales);\n    }\n\n    function checkOverflow (m) {\n        var overflow;\n        var a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n                -1;\n\n            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(hooks.now());\n        if (config._useUTC) {\n            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray (config) {\n        var i, date, input = [], currentDate, expectedWeekday, yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear != null) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (config._a[HOUR] === 24 &&\n                config._a[MINUTE] === 0 &&\n                config._a[SECOND] === 0 &&\n                config._a[MILLISECOND] === 0) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n        expectedWeekday = config._useUTC ? config._d.getUTCDay() : config._d.getDay();\n\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n\n        // check for mismatching day of week\n        if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== expectedWeekday) {\n            getParsingFlags(config).weekdayMismatch = true;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            var curWeek = weekOfYear(createLocal(), dow, doy);\n\n            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n            // Default to current week.\n            week = defaults(w.w, curWeek.week);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from beginning of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to beginning of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n    var basicIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n\n    var tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/;\n\n    var isoDates = [\n        ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n        ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n        ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n        ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n        ['YYYY-DDD', /\\d{4}-\\d{3}/],\n        ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n        ['YYYYYYMMDD', /[+-]\\d{10}/],\n        ['YYYYMMDD', /\\d{8}/],\n        // YYYYMM is NOT allowed by the standard\n        ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n        ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n        ['YYYYDDD', /\\d{7}/]\n    ];\n\n    // iso time formats and regexes\n    var isoTimes = [\n        ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n        ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n        ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n        ['HH:mm', /\\d\\d:\\d\\d/],\n        ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n        ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n        ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n        ['HHmm', /\\d\\d\\d\\d/],\n        ['HH', /\\d\\d/]\n    ];\n\n    var aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n    // date from iso format\n    function configFromISO(config) {\n        var i, l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime, dateFormat, timeFormat, tzFormat;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n\n            for (i = 0, l = isoDates.length; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimes.length; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n    var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/;\n\n    function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {\n        var result = [\n            untruncateYear(yearStr),\n            defaultLocaleMonthsShort.indexOf(monthStr),\n            parseInt(dayStr, 10),\n            parseInt(hourStr, 10),\n            parseInt(minuteStr, 10)\n        ];\n\n        if (secondStr) {\n            result.push(parseInt(secondStr, 10));\n        }\n\n        return result;\n    }\n\n    function untruncateYear(yearStr) {\n        var year = parseInt(yearStr, 10);\n        if (year <= 49) {\n            return 2000 + year;\n        } else if (year <= 999) {\n            return 1900 + year;\n        }\n        return year;\n    }\n\n    function preprocessRFC2822(s) {\n        // Remove comments and folding whitespace and replace multiple-spaces with a single space\n        return s.replace(/\\([^)]*\\)|[\\n\\t]/g, ' ').replace(/(\\s\\s+)/g, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    }\n\n    function checkWeekday(weekdayStr, parsedInput, config) {\n        if (weekdayStr) {\n            // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.\n            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n                weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();\n            if (weekdayProvided !== weekdayActual) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var obsOffsets = {\n        UT: 0,\n        GMT: 0,\n        EDT: -4 * 60,\n        EST: -5 * 60,\n        CDT: -5 * 60,\n        CST: -6 * 60,\n        MDT: -6 * 60,\n        MST: -7 * 60,\n        PDT: -7 * 60,\n        PST: -8 * 60\n    };\n\n    function calculateOffset(obsOffset, militaryOffset, numOffset) {\n        if (obsOffset) {\n            return obsOffsets[obsOffset];\n        } else if (militaryOffset) {\n            // the only allowed military tz is Z\n            return 0;\n        } else {\n            var hm = parseInt(numOffset, 10);\n            var m = hm % 100, h = (hm - m) / 100;\n            return h * 60 + m;\n        }\n    }\n\n    // date and time from ref 2822 format\n    function configFromRFC2822(config) {\n        var match = rfc2822.exec(preprocessRFC2822(config._i));\n        if (match) {\n            var parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);\n            if (!checkWeekday(match[1], parsedArray, config)) {\n                return;\n            }\n\n            config._a = parsedArray;\n            config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n            config._d = createUTCDate.apply(null, config._a);\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n            getParsingFlags(config).rfc2822 = true;\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from iso format or fallback\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        configFromRFC2822(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        // Final attempt, use Input Fallback\n        hooks.createFromInputFallback(config);\n    }\n\n    hooks.createFromInputFallback = deprecate(\n        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n        'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n        'discouraged and will be removed in an upcoming major release. Please refer to ' +\n        'http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // constant that refers to the ISO standard\n    hooks.ISO_8601 = function () {};\n\n    // constant that refers to the RFC 2822 form\n    hooks.RFC_2822 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n        if (config._f === hooks.RFC_2822) {\n            configFromRFC2822(config);\n            return;\n        }\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i, parsedInput, tokens, token, skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0;\n\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n            // console.log('token', token, 'parsedInput', parsedInput,\n            //         'regex', getParseRegexForToken(token, config));\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                }\n                else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            }\n            else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (config._a[HOUR] <= 12 &&\n            getParsingFlags(config).bigHour === true &&\n            config._a[HOUR] > 0) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n\n        getParsingFlags(config).parsedDateParts = config._a.slice(0);\n        getParsingFlags(config).meridiem = config._meridiem;\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n\n    function meridiemFixWrap (locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n\n            scoreToBeat,\n            i,\n            currentScore;\n\n        if (config._f.length === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < config._f.length; i++) {\n            currentScore = 0;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (!isValid(tempConfig)) {\n                continue;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i);\n        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {\n            return obj && parseInt(obj, 10);\n        });\n\n        configFromArray(config);\n    }\n\n    function createFromConfig (config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig (config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return createInvalid({nullInput: true});\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isDate(input)) {\n            config._d = input;\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        }  else {\n            configFromInput(config);\n        }\n\n        if (!isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (isUndefined(input)) {\n            config._d = new Date(hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(input.valueOf());\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (isObject(input)) {\n            configFromObject(config);\n        } else if (isNumber(input)) {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC (input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (locale === true || locale === false) {\n            strict = locale;\n            locale = undefined;\n        }\n\n        if ((isObject(input) && isObjectEmpty(input)) ||\n                (isArray(input) && input.length === 0)) {\n            input = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function createLocal (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n        'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other < this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    var prototypeMax = deprecate(\n        'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other > this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +(new Date());\n    };\n\n    var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];\n\n    function isDurationValid(m) {\n        for (var key in m) {\n            if (!(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {\n                return false;\n            }\n        }\n\n        var unitHasDecimal = false;\n        for (var i = 0; i < ordering.length; ++i) {\n            if (m[ordering[i]]) {\n                if (unitHasDecimal) {\n                    return false; // only allow non-integers for smallest unit\n                }\n                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                    unitHasDecimal = true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function isValid$1() {\n        return this._isValid;\n    }\n\n    function createInvalid$1() {\n        return createDuration(NaN);\n    }\n\n    function Duration (duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        this._isValid = isDurationValid(normalizedInput);\n\n        // representation for dateAddRemove\n        this._milliseconds = +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days +\n            weeks * 7;\n        // It is impossible to translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months +\n            quarters * 3 +\n            years * 12;\n\n        this._data = {};\n\n        this._locale = getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration (obj) {\n        return obj instanceof Duration;\n    }\n\n    function absRound (number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // FORMATTING\n\n    function offset (token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset();\n            var sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z',  matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = (string || '').match(matcher);\n\n        if (matches === null) {\n            return null;\n        }\n\n        var chunk   = matches[matches.length - 1] || [];\n        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return minutes === 0 ?\n          0 :\n          parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(res._d.valueOf() + diff);\n            hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return createLocal(input).local();\n        }\n    }\n\n    function getDateOffset (m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset (input, keepLocalTime, keepMinutes) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n                if (input === null) {\n                    return this;\n                }\n            } else if (Math.abs(input) < 16 && !keepMinutes) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone (input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC (keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal (keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset () {\n        if (this._tzm != null) {\n            this.utcOffset(this._tzm, false, true);\n        } else if (typeof this._i === 'string') {\n            var tZone = offsetFromString(matchOffset, this._i);\n            if (tZone != null) {\n                this.utcOffset(tZone);\n            }\n            else {\n                this.utcOffset(0, true);\n            }\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset (input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime () {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted () {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {};\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n            this._isDSTShifted = this.isValid() &&\n                compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal () {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset () {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc () {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(\\-|\\+)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/;\n\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    // and further modified to allow for strings containing both week and day\n    var isoRegex = /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\n    function createDuration (input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms : input._milliseconds,\n                d  : input._days,\n                M  : input._months\n            };\n        } else if (isNumber(input)) {\n            duration = {};\n            if (key) {\n                duration[key] = input;\n            } else {\n                duration.milliseconds = input;\n            }\n        } else if (!!(match = aspNetRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y  : 0,\n                d  : toInt(match[DATE])                         * sign,\n                h  : toInt(match[HOUR])                         * sign,\n                m  : toInt(match[MINUTE])                       * sign,\n                s  : toInt(match[SECOND])                       * sign,\n                ms : toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match\n            };\n        } else if (!!(match = isoRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y : parseIso(match[2], sign),\n                M : parseIso(match[3], sign),\n                w : parseIso(match[4], sign),\n                d : parseIso(match[5], sign),\n                h : parseIso(match[6], sign),\n                m : parseIso(match[7], sign),\n                s : parseIso(match[8], sign)\n            };\n        } else if (duration == null) {// checks for null or undefined\n            duration = {};\n        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n            diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        return ret;\n    }\n\n    createDuration.fn = Duration.prototype;\n    createDuration.invalid = createInvalid$1;\n\n    function parseIso (inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {milliseconds: 0, months: 0};\n\n        res.months = other.month() - base.month() +\n            (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return {milliseconds: 0, months: 0};\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +\n                'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');\n                tmp = val; val = period; period = tmp;\n            }\n\n            val = typeof val === 'string' ? +val : val;\n            dur = createDuration(val, period);\n            addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addSubtract (mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (months) {\n            setMonth(mom, get(mom, 'Month') + months * isAdding);\n        }\n        if (days) {\n            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n        }\n        if (milliseconds) {\n            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n        }\n        if (updateOffset) {\n            hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add      = createAdder(1, 'add');\n    var subtract = createAdder(-1, 'subtract');\n\n    function getCalendarFormat(myMoment, now) {\n        var diff = myMoment.diff(now, 'days', true);\n        return diff < -6 ? 'sameElse' :\n                diff < -1 ? 'lastWeek' :\n                diff < 0 ? 'lastDay' :\n                diff < 1 ? 'sameDay' :\n                diff < 2 ? 'nextDay' :\n                diff < 7 ? 'nextWeek' : 'sameElse';\n    }\n\n    function calendar$1 (time, formats) {\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            format = hooks.calendarFormat(this, sod) || 'sameElse';\n\n        var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);\n\n        return this.format(output || this.localeData().calendar(format, this, createLocal(now)));\n    }\n\n    function clone () {\n        return new Moment(this);\n    }\n\n    function isAfter (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() > localInput.valueOf();\n        } else {\n            return localInput.valueOf() < this.clone().startOf(units).valueOf();\n        }\n    }\n\n    function isBefore (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() < localInput.valueOf();\n        } else {\n            return this.clone().endOf(units).valueOf() < localInput.valueOf();\n        }\n    }\n\n    function isBetween (from, to, units, inclusivity) {\n        var localFrom = isMoment(from) ? from : createLocal(from),\n            localTo = isMoment(to) ? to : createLocal(to);\n        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {\n            return false;\n        }\n        inclusivity = inclusivity || '()';\n        return (inclusivity[0] === '(' ? this.isAfter(localFrom, units) : !this.isBefore(localFrom, units)) &&\n            (inclusivity[1] === ')' ? this.isBefore(localTo, units) : !this.isAfter(localTo, units));\n    }\n\n    function isSame (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() === localInput.valueOf();\n        } else {\n            inputMs = localInput.valueOf();\n            return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();\n        }\n    }\n\n    function isSameOrAfter (input, units) {\n        return this.isSame(input, units) || this.isAfter(input, units);\n    }\n\n    function isSameOrBefore (input, units) {\n        return this.isSame(input, units) || this.isBefore(input, units);\n    }\n\n    function diff (input, units, asFloat) {\n        var that,\n            zoneDelta,\n            output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        switch (units) {\n            case 'year': output = monthDiff(this, that) / 12; break;\n            case 'month': output = monthDiff(this, that); break;\n            case 'quarter': output = monthDiff(this, that) / 3; break;\n            case 'second': output = (this - that) / 1e3; break; // 1000\n            case 'minute': output = (this - that) / 6e4; break; // 1000 * 60\n            case 'hour': output = (this - that) / 36e5; break; // 1000 * 60 * 60\n            case 'day': output = (this - that - zoneDelta) / 864e5; break; // 1000 * 60 * 60 * 24, negate dst\n            case 'week': output = (this - that - zoneDelta) / 6048e5; break; // 1000 * 60 * 60 * 24 * 7, negate dst\n            default: output = this - that;\n        }\n\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff (a, b) {\n        // difference in months\n        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2, adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        //check for negative zero, return zero if negative zero\n        return -(wholeMonthDiff + adjust) || 0;\n    }\n\n    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\n    function toString () {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function toISOString(keepOffset) {\n        if (!this.isValid()) {\n            return null;\n        }\n        var utc = keepOffset !== true;\n        var m = utc ? this.clone().utc() : this;\n        if (m.year() < 0 || m.year() > 9999) {\n            return formatMoment(m, utc ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');\n        }\n        if (isFunction(Date.prototype.toISOString)) {\n            // native implementation is ~50x faster, use it when we can\n            if (utc) {\n                return this.toDate().toISOString();\n            } else {\n                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000).toISOString().replace('Z', formatMoment(m, 'Z'));\n            }\n        }\n        return formatMoment(m, utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ');\n    }\n\n    /**\n     * Return a human readable representation of a moment that can\n     * also be evaluated to get a new moment which is the same\n     *\n     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n     */\n    function inspect () {\n        if (!this.isValid()) {\n            return 'moment.invalid(/* ' + this._i + ' */)';\n        }\n        var func = 'moment';\n        var zone = '';\n        if (!this.isLocal()) {\n            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n            zone = 'Z';\n        }\n        var prefix = '[' + func + '(\"]';\n        var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';\n        var datetime = '-MM-DD[T]HH:mm:ss.SSS';\n        var suffix = zone + '[\")]';\n\n        return this.format(prefix + year + datetime + suffix);\n    }\n\n    function format (inputString) {\n        if (!inputString) {\n            inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;\n        }\n        var output = formatMoment(this, inputString);\n        return this.localeData().postformat(output);\n    }\n\n    function from (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow (withoutSuffix) {\n        return this.from(createLocal(), withoutSuffix);\n    }\n\n    function to (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow (withoutSuffix) {\n        return this.to(createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale (key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData () {\n        return this._locale;\n    }\n\n    function startOf (units) {\n        units = normalizeUnits(units);\n        // the following switch intentionally omits break keywords\n        // to utilize falling through the cases.\n        switch (units) {\n            case 'year':\n                this.month(0);\n                /* falls through */\n            case 'quarter':\n            case 'month':\n                this.date(1);\n                /* falls through */\n            case 'week':\n            case 'isoWeek':\n            case 'day':\n            case 'date':\n                this.hours(0);\n                /* falls through */\n            case 'hour':\n                this.minutes(0);\n                /* falls through */\n            case 'minute':\n                this.seconds(0);\n                /* falls through */\n            case 'second':\n                this.milliseconds(0);\n        }\n\n        // weeks are a special case\n        if (units === 'week') {\n            this.weekday(0);\n        }\n        if (units === 'isoWeek') {\n            this.isoWeekday(1);\n        }\n\n        // quarters are also special\n        if (units === 'quarter') {\n            this.month(Math.floor(this.month() / 3) * 3);\n        }\n\n        return this;\n    }\n\n    function endOf (units) {\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond') {\n            return this;\n        }\n\n        // 'date' is an alias for 'day', so it should be considered as such.\n        if (units === 'date') {\n            units = 'day';\n        }\n\n        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\n    }\n\n    function valueOf () {\n        return this._d.valueOf() - ((this._offset || 0) * 60000);\n    }\n\n    function unix () {\n        return Math.floor(this.valueOf() / 1000);\n    }\n\n    function toDate () {\n        return new Date(this.valueOf());\n    }\n\n    function toArray () {\n        var m = this;\n        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n    }\n\n    function toObject () {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds()\n        };\n    }\n\n    function toJSON () {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function isValid$2 () {\n        return isValid(this);\n    }\n\n    function parsingFlags () {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt () {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict\n        };\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken (token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg',     'weekYear');\n    addWeekYearFormatToken('ggggg',    'weekYear');\n    addWeekYearFormatToken('GGGG',  'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PRIORITY\n\n    addUnitPriority('weekYear', 1);\n    addUnitPriority('isoWeekYear', 1);\n\n\n    // PARSING\n\n    addRegexToken('G',      matchSigned);\n    addRegexToken('g',      matchSigned);\n    addRegexToken('GG',     match1to2, match2);\n    addRegexToken('gg',     match1to2, match2);\n    addRegexToken('GGGG',   match1to4, match4);\n    addRegexToken('gggg',   match1to4, match4);\n    addRegexToken('GGGGG',  match1to6, match6);\n    addRegexToken('ggggg',  match1to6, match6);\n\n    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n        week[token.substr(0, 2)] = toInt(input);\n    });\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input,\n                this.week(),\n                this.weekday(),\n                this.localeData()._week.dow,\n                this.localeData()._week.doy);\n    }\n\n    function getSetISOWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input, this.isoWeek(), this.isoWeekday(), 1, 4);\n    }\n\n    function getISOWeeksInYear () {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getWeeksInYear () {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PRIORITY\n\n    addUnitPriority('quarter', 7);\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter (input) {\n        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PRIORITY\n    addUnitPriority('date', 9);\n\n    // PARSING\n\n    addRegexToken('D',  match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        return isStrict ?\n          (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :\n          locale._dayOfMonthOrdinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0]);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PRIORITY\n    addUnitPriority('dayOfYear', 4);\n\n    // PARSING\n\n    addRegexToken('DDD',  match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear (input) {\n        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PRIORITY\n\n    addUnitPriority('minute', 14);\n\n    // PARSING\n\n    addRegexToken('m',  match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PRIORITY\n\n    addUnitPriority('second', 15);\n\n    // PARSING\n\n    addRegexToken('s',  match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PRIORITY\n\n    addUnitPriority('millisecond', 16);\n\n    // PARSING\n\n    addRegexToken('S',    match1to3, match1);\n    addRegexToken('SS',   match1to3, match2);\n    addRegexToken('SSS',  match1to3, match3);\n\n    var token;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n    // MOMENTS\n\n    var getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z',  0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr () {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName () {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var proto = Moment.prototype;\n\n    proto.add               = add;\n    proto.calendar          = calendar$1;\n    proto.clone             = clone;\n    proto.diff              = diff;\n    proto.endOf             = endOf;\n    proto.format            = format;\n    proto.from              = from;\n    proto.fromNow           = fromNow;\n    proto.to                = to;\n    proto.toNow             = toNow;\n    proto.get               = stringGet;\n    proto.invalidAt         = invalidAt;\n    proto.isAfter           = isAfter;\n    proto.isBefore          = isBefore;\n    proto.isBetween         = isBetween;\n    proto.isSame            = isSame;\n    proto.isSameOrAfter     = isSameOrAfter;\n    proto.isSameOrBefore    = isSameOrBefore;\n    proto.isValid           = isValid$2;\n    proto.lang              = lang;\n    proto.locale            = locale;\n    proto.localeData        = localeData;\n    proto.max               = prototypeMax;\n    proto.min               = prototypeMin;\n    proto.parsingFlags      = parsingFlags;\n    proto.set               = stringSet;\n    proto.startOf           = startOf;\n    proto.subtract          = subtract;\n    proto.toArray           = toArray;\n    proto.toObject          = toObject;\n    proto.toDate            = toDate;\n    proto.toISOString       = toISOString;\n    proto.inspect           = inspect;\n    proto.toJSON            = toJSON;\n    proto.toString          = toString;\n    proto.unix              = unix;\n    proto.valueOf           = valueOf;\n    proto.creationData      = creationData;\n    proto.year       = getSetYear;\n    proto.isLeapYear = getIsLeapYear;\n    proto.weekYear    = getSetWeekYear;\n    proto.isoWeekYear = getSetISOWeekYear;\n    proto.quarter = proto.quarters = getSetQuarter;\n    proto.month       = getSetMonth;\n    proto.daysInMonth = getDaysInMonth;\n    proto.week           = proto.weeks        = getSetWeek;\n    proto.isoWeek        = proto.isoWeeks     = getSetISOWeek;\n    proto.weeksInYear    = getWeeksInYear;\n    proto.isoWeeksInYear = getISOWeeksInYear;\n    proto.date       = getSetDayOfMonth;\n    proto.day        = proto.days             = getSetDayOfWeek;\n    proto.weekday    = getSetLocaleDayOfWeek;\n    proto.isoWeekday = getSetISODayOfWeek;\n    proto.dayOfYear  = getSetDayOfYear;\n    proto.hour = proto.hours = getSetHour;\n    proto.minute = proto.minutes = getSetMinute;\n    proto.second = proto.seconds = getSetSecond;\n    proto.millisecond = proto.milliseconds = getSetMillisecond;\n    proto.utcOffset            = getSetOffset;\n    proto.utc                  = setOffsetToUTC;\n    proto.local                = setOffsetToLocal;\n    proto.parseZone            = setOffsetToParsedOffset;\n    proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    proto.isDST                = isDaylightSavingTime;\n    proto.isLocal              = isLocal;\n    proto.isUtcOffset          = isUtcOffset;\n    proto.isUtc                = isUtc;\n    proto.isUTC                = isUtc;\n    proto.zoneAbbr = getZoneAbbr;\n    proto.zoneName = getZoneName;\n    proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\n    proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\n    proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\n    proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);\n    proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);\n\n    function createUnix (input) {\n        return createLocal(input * 1000);\n    }\n\n    function createInZone () {\n        return createLocal.apply(null, arguments).parseZone();\n    }\n\n    function preParsePostFormat (string) {\n        return string;\n    }\n\n    var proto$1 = Locale.prototype;\n\n    proto$1.calendar        = calendar;\n    proto$1.longDateFormat  = longDateFormat;\n    proto$1.invalidDate     = invalidDate;\n    proto$1.ordinal         = ordinal;\n    proto$1.preparse        = preParsePostFormat;\n    proto$1.postformat      = preParsePostFormat;\n    proto$1.relativeTime    = relativeTime;\n    proto$1.pastFuture      = pastFuture;\n    proto$1.set             = set;\n\n    proto$1.months            =        localeMonths;\n    proto$1.monthsShort       =        localeMonthsShort;\n    proto$1.monthsParse       =        localeMonthsParse;\n    proto$1.monthsRegex       = monthsRegex;\n    proto$1.monthsShortRegex  = monthsShortRegex;\n    proto$1.week = localeWeek;\n    proto$1.firstDayOfYear = localeFirstDayOfYear;\n    proto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n    proto$1.weekdays       =        localeWeekdays;\n    proto$1.weekdaysMin    =        localeWeekdaysMin;\n    proto$1.weekdaysShort  =        localeWeekdaysShort;\n    proto$1.weekdaysParse  =        localeWeekdaysParse;\n\n    proto$1.weekdaysRegex       =        weekdaysRegex;\n    proto$1.weekdaysShortRegex  =        weekdaysShortRegex;\n    proto$1.weekdaysMinRegex    =        weekdaysMinRegex;\n\n    proto$1.isPM = localeIsPM;\n    proto$1.meridiem = localeMeridiem;\n\n    function get$1 (format, index, field, setter) {\n        var locale = getLocale();\n        var utc = createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function listMonthsImpl (format, index, field) {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return get$1(format, index, field, 'month');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 12; i++) {\n            out[i] = get$1(format, i, field, 'month');\n        }\n        return out;\n    }\n\n    // ()\n    // (5)\n    // (fmt, 5)\n    // (fmt)\n    // (true)\n    // (true, 5)\n    // (true, fmt, 5)\n    // (true, fmt)\n    function listWeekdaysImpl (localeSorted, format, index, field) {\n        if (typeof localeSorted === 'boolean') {\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        } else {\n            format = localeSorted;\n            index = format;\n            localeSorted = false;\n\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        }\n\n        var locale = getLocale(),\n            shift = localeSorted ? locale._week.dow : 0;\n\n        if (index != null) {\n            return get$1(format, (index + shift) % 7, field, 'day');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 7; i++) {\n            out[i] = get$1(format, (i + shift) % 7, field, 'day');\n        }\n        return out;\n    }\n\n    function listMonths (format, index) {\n        return listMonthsImpl(format, index, 'months');\n    }\n\n    function listMonthsShort (format, index) {\n        return listMonthsImpl(format, index, 'monthsShort');\n    }\n\n    function listWeekdays (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n    }\n\n    function listWeekdaysShort (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n    }\n\n    function listWeekdaysMin (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n    }\n\n    getSetGlobalLocale('en', {\n        dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal : function (number) {\n            var b = number % 10,\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n            return number + output;\n        }\n    });\n\n    // Side effect imports\n\n    hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);\n    hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);\n\n    var mathAbs = Math.abs;\n\n    function abs () {\n        var data           = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days         = mathAbs(this._days);\n        this._months       = mathAbs(this._months);\n\n        data.milliseconds  = mathAbs(data.milliseconds);\n        data.seconds       = mathAbs(data.seconds);\n        data.minutes       = mathAbs(data.minutes);\n        data.hours         = mathAbs(data.hours);\n        data.months        = mathAbs(data.months);\n        data.years         = mathAbs(data.years);\n\n        return this;\n    }\n\n    function addSubtract$1 (duration, input, value, direction) {\n        var other = createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days         += direction * other._days;\n        duration._months       += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function add$1 (input, value) {\n        return addSubtract$1(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function subtract$1 (input, value) {\n        return addSubtract$1(this, input, value, -1);\n    }\n\n    function absCeil (number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble () {\n        var milliseconds = this._milliseconds;\n        var days         = this._days;\n        var months       = this._months;\n        var data         = this._data;\n        var seconds, minutes, hours, years, monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0))) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds           = absFloor(milliseconds / 1000);\n        data.seconds      = seconds % 60;\n\n        minutes           = absFloor(seconds / 60);\n        data.minutes      = minutes % 60;\n\n        hours             = absFloor(minutes / 60);\n        data.hours        = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days   = days;\n        data.months = months;\n        data.years  = years;\n\n        return this;\n    }\n\n    function daysToMonths (days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return days * 4800 / 146097;\n    }\n\n    function monthsToDays (months) {\n        // the reverse of daysToMonths\n        return months * 146097 / 4800;\n    }\n\n    function as (units) {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        var days;\n        var months;\n        var milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'year') {\n            days   = this._days   + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            return units === 'month' ? months : months / 12;\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week'   : return days / 7     + milliseconds / 6048e5;\n                case 'day'    : return days         + milliseconds / 864e5;\n                case 'hour'   : return days * 24    + milliseconds / 36e5;\n                case 'minute' : return days * 1440  + milliseconds / 6e4;\n                case 'second' : return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n                default: throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function valueOf$1 () {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs (alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms');\n    var asSeconds      = makeAs('s');\n    var asMinutes      = makeAs('m');\n    var asHours        = makeAs('h');\n    var asDays         = makeAs('d');\n    var asWeeks        = makeAs('w');\n    var asMonths       = makeAs('M');\n    var asYears        = makeAs('y');\n\n    function clone$1 () {\n        return createDuration(this);\n    }\n\n    function get$2 (units) {\n        units = normalizeUnits(units);\n        return this.isValid() ? this[units + 's']() : NaN;\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this.isValid() ? this._data[name] : NaN;\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds');\n    var seconds      = makeGetter('seconds');\n    var minutes      = makeGetter('minutes');\n    var hours        = makeGetter('hours');\n    var days         = makeGetter('days');\n    var months       = makeGetter('months');\n    var years        = makeGetter('years');\n\n    function weeks () {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round;\n    var thresholds = {\n        ss: 44,         // a few seconds to seconds\n        s : 45,         // seconds to minute\n        m : 45,         // minutes to hour\n        h : 22,         // hours to day\n        d : 26,         // days to month\n        M : 11          // months to year\n    };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime$1 (posNegDuration, withoutSuffix, locale) {\n        var duration = createDuration(posNegDuration).abs();\n        var seconds  = round(duration.as('s'));\n        var minutes  = round(duration.as('m'));\n        var hours    = round(duration.as('h'));\n        var days     = round(duration.as('d'));\n        var months   = round(duration.as('M'));\n        var years    = round(duration.as('y'));\n\n        var a = seconds <= thresholds.ss && ['s', seconds]  ||\n                seconds < thresholds.s   && ['ss', seconds] ||\n                minutes <= 1             && ['m']           ||\n                minutes < thresholds.m   && ['mm', minutes] ||\n                hours   <= 1             && ['h']           ||\n                hours   < thresholds.h   && ['hh', hours]   ||\n                days    <= 1             && ['d']           ||\n                days    < thresholds.d   && ['dd', days]    ||\n                months  <= 1             && ['M']           ||\n                months  < thresholds.M   && ['MM', months]  ||\n                years   <= 1             && ['y']           || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set the rounding function for relative time strings\n    function getSetRelativeTimeRounding (roundingFunction) {\n        if (roundingFunction === undefined) {\n            return round;\n        }\n        if (typeof(roundingFunction) === 'function') {\n            round = roundingFunction;\n            return true;\n        }\n        return false;\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function getSetRelativeTimeThreshold (threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        if (threshold === 's') {\n            thresholds.ss = limit - 1;\n        }\n        return true;\n    }\n\n    function humanize (withSuffix) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var locale = this.localeData();\n        var output = relativeTime$1(this, !withSuffix, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var abs$1 = Math.abs;\n\n    function sign(x) {\n        return ((x > 0) - (x < 0)) || +x;\n    }\n\n    function toISOString$1() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var seconds = abs$1(this._milliseconds) / 1000;\n        var days         = abs$1(this._days);\n        var months       = abs$1(this._months);\n        var minutes, hours, years;\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes           = absFloor(seconds / 60);\n        hours             = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years  = absFloor(months / 12);\n        months %= 12;\n\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        var Y = years;\n        var M = months;\n        var D = days;\n        var h = hours;\n        var m = minutes;\n        var s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n        var total = this.asSeconds();\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        var totalSign = total < 0 ? '-' : '';\n        var ymSign = sign(this._months) !== sign(total) ? '-' : '';\n        var daysSign = sign(this._days) !== sign(total) ? '-' : '';\n        var hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n        return totalSign + 'P' +\n            (Y ? ymSign + Y + 'Y' : '') +\n            (M ? ymSign + M + 'M' : '') +\n            (D ? daysSign + D + 'D' : '') +\n            ((h || m || s) ? 'T' : '') +\n            (h ? hmsSign + h + 'H' : '') +\n            (m ? hmsSign + m + 'M' : '') +\n            (s ? hmsSign + s + 'S' : '');\n    }\n\n    var proto$2 = Duration.prototype;\n\n    proto$2.isValid        = isValid$1;\n    proto$2.abs            = abs;\n    proto$2.add            = add$1;\n    proto$2.subtract       = subtract$1;\n    proto$2.as             = as;\n    proto$2.asMilliseconds = asMilliseconds;\n    proto$2.asSeconds      = asSeconds;\n    proto$2.asMinutes      = asMinutes;\n    proto$2.asHours        = asHours;\n    proto$2.asDays         = asDays;\n    proto$2.asWeeks        = asWeeks;\n    proto$2.asMonths       = asMonths;\n    proto$2.asYears        = asYears;\n    proto$2.valueOf        = valueOf$1;\n    proto$2._bubble        = bubble;\n    proto$2.clone          = clone$1;\n    proto$2.get            = get$2;\n    proto$2.milliseconds   = milliseconds;\n    proto$2.seconds        = seconds;\n    proto$2.minutes        = minutes;\n    proto$2.hours          = hours;\n    proto$2.days           = days;\n    proto$2.weeks          = weeks;\n    proto$2.months         = months;\n    proto$2.years          = years;\n    proto$2.humanize       = humanize;\n    proto$2.toISOString    = toISOString$1;\n    proto$2.toString       = toISOString$1;\n    proto$2.toJSON         = toISOString$1;\n    proto$2.locale         = locale;\n    proto$2.localeData     = localeData;\n\n    proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);\n    proto$2.lang = lang;\n\n    // Side effect imports\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input, 10) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    // Side effect imports\n\n\n    hooks.version = '2.23.0';\n\n    setHookCallback(createLocal);\n\n    hooks.fn                    = proto;\n    hooks.min                   = min;\n    hooks.max                   = max;\n    hooks.now                   = now;\n    hooks.utc                   = createUTC;\n    hooks.unix                  = createUnix;\n    hooks.months                = listMonths;\n    hooks.isDate                = isDate;\n    hooks.locale                = getSetGlobalLocale;\n    hooks.invalid               = createInvalid;\n    hooks.duration              = createDuration;\n    hooks.isMoment              = isMoment;\n    hooks.weekdays              = listWeekdays;\n    hooks.parseZone             = createInZone;\n    hooks.localeData            = getLocale;\n    hooks.isDuration            = isDuration;\n    hooks.monthsShort           = listMonthsShort;\n    hooks.weekdaysMin           = listWeekdaysMin;\n    hooks.defineLocale          = defineLocale;\n    hooks.updateLocale          = updateLocale;\n    hooks.locales               = listLocales;\n    hooks.weekdaysShort         = listWeekdaysShort;\n    hooks.normalizeUnits        = normalizeUnits;\n    hooks.relativeTimeRounding  = getSetRelativeTimeRounding;\n    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\n    hooks.calendarFormat        = getCalendarFormat;\n    hooks.prototype             = proto;\n\n    // currently HTML5 input type only supports 24-hour formats\n    hooks.HTML5_FMT = {\n        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm',             // <input type=\"datetime-local\" />\n        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss',  // <input type=\"datetime-local\" step=\"1\" />\n        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS',   // <input type=\"datetime-local\" step=\"0.001\" />\n        DATE: 'YYYY-MM-DD',                             // <input type=\"date\" />\n        TIME: 'HH:mm',                                  // <input type=\"time\" />\n        TIME_SECONDS: 'HH:mm:ss',                       // <input type=\"time\" step=\"1\" />\n        TIME_MS: 'HH:mm:ss.SSS',                        // <input type=\"time\" step=\"0.001\" />\n        WEEK: 'GGGG-[W]WW',                             // <input type=\"week\" />\n        MONTH: 'YYYY-MM'                                // <input type=\"month\" />\n    };\n\n    return hooks;\n\n})));\n","/*!\n * Pikaday\n *\n * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        if (opts.isEmpty) {\n            return '<td class=\"is-empty\"></td>';\n        }\n        var arr = [];\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL)\n    {\n        return '<tr>' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div class=\"pika-title\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (hasMoment) {\n                date = moment(opts.field.value, opts.format);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            return !isDate(this._d) ? '' : hasMoment ? moment(this._d).format(format || this._o.format) : this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            setToStartOfDay(value);\n            this._o.minDate = value;\n            this._o.minYear  = value.getFullYear();\n            this._o.minMonth = value.getMonth();\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            setToStartOfDay(value);\n            this._o.maxDate = value;\n            this._o.maxYear = value.getFullYear();\n            this._o.maxMonth = value.getMonth();\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '';\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year) + this.render(this.calendars[c].year, this.calendars[c].month) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                var self = this;\n                sto(function() {\n                    self._o.onDraw.call(self);\n                }, 0);\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    isEmpty = i < before || i >= (days + before),\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day)),\n                    dayConfig = {\n                        day: 1 + (i - before),\n                        month: month,\n                        year: year,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange\n                    };\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL));\n                    row = [];\n                    r = 0;\n                }\n            }\n            return renderTable(opts, data);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this._v) {\n                removeClass(this.el, 'is-hidden');\n                this._v = true;\n                this.draw();\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            if (this._o.field) {\n                removeEvent(this._o.field, 'change', this._onInputChange);\n                if (this._o.bound) {\n                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n\n}));\n","/* global Promise */\r\n\r\n;(function (global, factory) { // eslint-disable-line\r\n\t\"use strict\"\r\n\t/* eslint-disable no-undef */\r\n\tvar m = factory(global)\r\n\t/*\tSet dependencies when no window for isomorphic compatibility */\r\n\tif(typeof window === \"undefined\") {\r\n\t\tm.deps({\r\n\t\t\tdocument: typeof document !== \"undefined\" ? document : {},\r\n\t\t\tlocation: typeof location !== \"undefined\" ? location : {},\r\n\t\t\tclearTimeout: clearTimeout,\r\n\t\t\tsetTimeout: setTimeout\r\n\t\t})\r\n\t}\r\n\tif (typeof module === \"object\" && module != null && module.exports) {\r\n\t\tmodule.exports = m\r\n\t} else if (typeof define === \"function\" && define.amd) {\r\n\t\tdefine(function () { return m })\r\n\t} else {\r\n\t\tglobal.m = m\r\n\t}\r\n\t/* eslint-enable no-undef */\r\n})(typeof window !== \"undefined\" ? window : this, function factory(global, undefined) { // eslint-disable-line\r\n\t\"use strict\"\r\n\r\n\tm.version = function () {\r\n\t\treturn \"v0.2.8\"\r\n\t}\r\n\r\n\tvar hasOwn = {}.hasOwnProperty\r\n\tvar type = {}.toString\r\n\r\n\tfunction isFunction(object) {\r\n\t\treturn typeof object === \"function\"\r\n\t}\r\n\r\n\tfunction isObject(object) {\r\n\t\treturn type.call(object) === \"[object Object]\"\r\n\t}\r\n\r\n\tfunction isString(object) {\r\n\t\treturn type.call(object) === \"[object String]\"\r\n\t}\r\n\r\n\tvar isArray = Array.isArray || function (object) {\r\n\t\treturn type.call(object) === \"[object Array]\"\r\n\t}\r\n\r\n\tfunction noop() {}\r\n\r\n\tvar voidElements = {\r\n\t\tAREA: 1,\r\n\t\tBASE: 1,\r\n\t\tBR: 1,\r\n\t\tCOL: 1,\r\n\t\tCOMMAND: 1,\r\n\t\tEMBED: 1,\r\n\t\tHR: 1,\r\n\t\tIMG: 1,\r\n\t\tINPUT: 1,\r\n\t\tKEYGEN: 1,\r\n\t\tLINK: 1,\r\n\t\tMETA: 1,\r\n\t\tPARAM: 1,\r\n\t\tSOURCE: 1,\r\n\t\tTRACK: 1,\r\n\t\tWBR: 1\r\n\t}\r\n\r\n\t// caching commonly used variables\r\n\tvar $document, $location, $requestAnimationFrame, $cancelAnimationFrame\r\n\r\n\t// self invoking function needed because of the way mocks work\r\n\tfunction initialize(mock) {\r\n\t\t$document = mock.document\r\n\t\t$location = mock.location\r\n\t\t$cancelAnimationFrame = mock.cancelAnimationFrame || mock.clearTimeout\r\n\t\t$requestAnimationFrame = mock.requestAnimationFrame || mock.setTimeout\r\n\t}\r\n\r\n\t// testing API\r\n\tm.deps = function (mock) {\r\n\t\tinitialize(global = mock || window)\r\n\t\treturn global\r\n\t}\r\n\r\n\tm.deps.factory = m.factory = factory\r\n\r\n\tm.deps(global)\r\n\r\n\t/**\r\n\t * @typedef {String} Tag\r\n\t * A string that looks like -> div.classname#id[param=one][param2=two]\r\n\t * Which describes a DOM node\r\n\t */\r\n\r\n\tfunction parseTagAttrs(cell, tag) {\r\n\t\tvar classes = []\r\n\t\t/* eslint-disable max-len */\r\n\t\tvar parser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\r\n\t\t/* eslint-enable max-len */\r\n\t\tvar match\r\n\r\n\t\twhile ((match = parser.exec(tag))) {\r\n\t\t\tif (match[1] === \"\" && match[2]) {\r\n\t\t\t\tcell.tag = match[2]\r\n\t\t\t} else if (match[1] === \"#\") {\r\n\t\t\t\tcell.attrs.id = match[2]\r\n\t\t\t} else if (match[1] === \".\") {\r\n\t\t\t\tclasses.push(match[2])\r\n\t\t\t} else if (match[3].charAt(0) === \"[\") { // #1195\r\n\t\t\t\tvar attrValue = match[6]\r\n\t\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\")\r\n\t\t\t\tif (match[4] === \"class\") classes.push(attrValue)\r\n\t\t\t\telse cell.attrs[match[4]] = attrValue || true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn classes\r\n\t}\r\n\r\n\tfunction getVirtualChildren(args, hasAttrs) {\r\n\t\tvar children = hasAttrs ? args.slice(1) : args\r\n\r\n\t\tif (children.length === 1 && isArray(children[0])) {\r\n\t\t\treturn children[0]\r\n\t\t} else {\r\n\t\t\treturn children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction assignAttrs(target, attrs, classes) {\r\n\t\tvar classAttr = \"class\" in attrs ? \"class\" : \"className\"\r\n\r\n\t\tfor (var attrName in attrs) {\r\n\t\t\tif (hasOwn.call(attrs, attrName)) {\r\n\t\t\t\tif (attrName === classAttr &&\r\n\t\t\t\t\t\tattrs[attrName] != null &&\r\n\t\t\t\t\t\tattrs[attrName] !== \"\") {\r\n\t\t\t\t\tclasses.push(attrs[attrName])\r\n\t\t\t\t\t// create key in correct iteration order\r\n\t\t\t\t\ttarget[attrName] = \"\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[attrName] = attrs[attrName]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (classes.length) target[classAttr] = classes.join(\" \")\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {Tag} The DOM node tag\r\n\t * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs\r\n\t * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array,\r\n\t *                      or splat (optional)\r\n\t */\r\n\tfunction m(tag, pairs) {\r\n\t\tvar args = []\r\n\r\n\t\tfor (var i = 1, length = arguments.length; i < length; i++) {\r\n\t\t\targs[i - 1] = arguments[i]\r\n\t\t}\r\n\r\n\t\tif (tag && isFunction(tag.view)) return parameterize(tag, args)\r\n\r\n\t\tif (!isString(tag)) {\r\n\t\t\tthrow new Error(\"selector in m(selector, attrs, children) should \" +\r\n\t\t\t\t\"be a string\")\r\n\t\t}\r\n\r\n\t\tvar hasAttrs = pairs != null && isObject(pairs) &&\r\n\t\t\t!(\"tag\" in pairs || \"view\" in pairs || \"subtree\" in pairs)\r\n\r\n\t\tvar attrs = hasAttrs ? pairs : {}\r\n\t\tvar cell = {\r\n\t\t\ttag: \"div\",\r\n\t\t\tattrs: {},\r\n\t\t\tchildren: getVirtualChildren(args, hasAttrs)\r\n\t\t}\r\n\r\n\t\tassignAttrs(cell.attrs, attrs, parseTagAttrs(cell, tag))\r\n\t\treturn cell\r\n\t}\r\n\r\n\tfunction forEach(list, f) {\r\n\t\tfor (var i = 0; i < list.length && !f(list[i], i++);) {\r\n\t\t\t// function called in condition\r\n\t\t}\r\n\t}\r\n\r\n\tfunction forKeys(list, f) {\r\n\t\tforEach(list, function (attrs, i) {\r\n\t\t\treturn (attrs = attrs && attrs.attrs) &&\r\n\t\t\t\tattrs.key != null &&\r\n\t\t\t\tf(attrs, i)\r\n\t\t})\r\n\t}\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction dataToString(data) {\r\n\t\t// data.toString() might throw or return null if data is the return\r\n\t\t// value of Console.log in some versions of Firefox (behavior depends on\r\n\t\t// version)\r\n\t\ttry {\r\n\t\t\tif (typeof data !== \"boolean\" &&\r\n\t\t\t\t\tdata != null &&\r\n\t\t\t\t\tdata.toString() != null) return data\r\n\t\t} catch (e) {\r\n\t\t\t// silently ignore errors\r\n\t\t}\r\n\t\treturn \"\"\r\n\t}\r\n\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction injectTextNode(parentElement, first, index, data) {\r\n\t\ttry {\r\n\t\t\tinsertNode(parentElement, first, index)\r\n\t\t\tfirst.nodeValue = data\r\n\t\t} catch (e) {\r\n\t\t\t// IE erroneously throws error when appending an empty text node\r\n\t\t\t// after a null\r\n\t\t}\r\n\t}\r\n\r\n\tfunction flatten(list) {\r\n\t\t// recursively flatten array\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (isArray(list[i])) {\r\n\t\t\t\tlist = list.concat.apply([], list)\r\n\t\t\t\t// check current index again and flatten until there are no more\r\n\t\t\t\t// nested arrays at that index\r\n\t\t\t\ti--\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list\r\n\t}\r\n\r\n\tfunction insertNode(parentElement, node, index) {\r\n\t\tparentElement.insertBefore(node,\r\n\t\t\tparentElement.childNodes[index] || null)\r\n\t}\r\n\r\n\tvar DELETION = 1\r\n\tvar INSERTION = 2\r\n\tvar MOVE = 3\r\n\r\n\tfunction handleKeysDiffer(data, existing, cached, parentElement) {\r\n\t\tforKeys(data, function (key, i) {\r\n\t\t\texisting[key = key.key] = existing[key] ? {\r\n\t\t\t\taction: MOVE,\r\n\t\t\t\tindex: i,\r\n\t\t\t\tfrom: existing[key].index,\r\n\t\t\t\telement: cached.nodes[existing[key].index] ||\r\n\t\t\t\t\t$document.createElement(\"div\")\r\n\t\t\t} : {action: INSERTION, index: i}\r\n\t\t})\r\n\r\n\t\tvar actions = []\r\n\t\tfor (var prop in existing) {\r\n\t\t\tif (hasOwn.call(existing, prop)) {\r\n\t\t\t\tactions.push(existing[prop])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar changes = actions.sort(sortChanges)\r\n\t\tvar newCached = new Array(cached.length)\r\n\r\n\t\tnewCached.nodes = cached.nodes.slice()\r\n\r\n\t\tforEach(changes, function (change) {\r\n\t\t\tvar index = change.index\r\n\t\t\tif (change.action === DELETION) {\r\n\t\t\t\tclear(cached[index].nodes, cached[index])\r\n\t\t\t\tnewCached.splice(index, 1)\r\n\t\t\t}\r\n\t\t\tif (change.action === INSERTION) {\r\n\t\t\t\tvar dummy = $document.createElement(\"div\")\r\n\t\t\t\tdummy.key = data[index].attrs.key\r\n\t\t\t\tinsertNode(parentElement, dummy, index)\r\n\t\t\t\tnewCached.splice(index, 0, {\r\n\t\t\t\t\tattrs: {key: data[index].attrs.key},\r\n\t\t\t\t\tnodes: [dummy]\r\n\t\t\t\t})\r\n\t\t\t\tnewCached.nodes[index] = dummy\r\n\t\t\t}\r\n\r\n\t\t\tif (change.action === MOVE) {\r\n\t\t\t\tvar changeElement = change.element\r\n\t\t\t\tvar maybeChanged = parentElement.childNodes[index]\r\n\t\t\t\tif (maybeChanged !== changeElement && changeElement !== null) {\r\n\t\t\t\t\tparentElement.insertBefore(changeElement,\r\n\t\t\t\t\t\tmaybeChanged || null)\r\n\t\t\t\t}\r\n\t\t\t\tnewCached[index] = cached[change.from]\r\n\t\t\t\tnewCached.nodes[index] = changeElement\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newCached\r\n\t}\r\n\r\n\tfunction diffKeys(data, cached, existing, parentElement) {\r\n\t\tvar keysDiffer = data.length !== cached.length\r\n\r\n\t\tif (!keysDiffer) {\r\n\t\t\tforKeys(data, function (attrs, i) {\r\n\t\t\t\tvar cachedCell = cached[i]\r\n\t\t\t\treturn keysDiffer = cachedCell &&\r\n\t\t\t\t\tcachedCell.attrs &&\r\n\t\t\t\t\tcachedCell.attrs.key !== attrs.key\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (keysDiffer) {\r\n\t\t\treturn handleKeysDiffer(data, existing, cached, parentElement)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction diffArray(data, cached, nodes) {\r\n\t\t// diff the array itself\r\n\r\n\t\t// update the list of DOM nodes by collecting the nodes from each item\r\n\t\tforEach(data, function (_, i) {\r\n\t\t\tif (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)\r\n\t\t})\r\n\t\t// remove items from the end of the array if the new array is shorter\r\n\t\t// than the old one. if errors ever happen here, the issue is most\r\n\t\t// likely a bug in the construction of the `cached` data structure\r\n\t\t// somewhere earlier in the program\r\n\t\tforEach(cached.nodes, function (node, i) {\r\n\t\t\tif (node.parentNode != null && nodes.indexOf(node) < 0) {\r\n\t\t\t\tclear([node], [cached[i]])\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (data.length < cached.length) cached.length = data.length\r\n\t\tcached.nodes = nodes\r\n\t}\r\n\r\n\tfunction buildArrayKeys(data) {\r\n\t\tvar guid = 0\r\n\t\tforKeys(data, function () {\r\n\t\t\tforEach(data, function (attrs) {\r\n\t\t\t\tif ((attrs = attrs && attrs.attrs) && attrs.key == null) {\r\n\t\t\t\t\tattrs.key = \"__mithril__\" + guid++\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn 1\r\n\t\t})\r\n\t}\r\n\r\n\tfunction isDifferentEnough(data, cached, dataAttrKeys) {\r\n\t\tif (data.tag !== cached.tag) return true\r\n\r\n\t\tif (dataAttrKeys.sort().join() !==\r\n\t\t\t\tObject.keys(cached.attrs).sort().join()) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.id !== cached.attrs.id) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.key !== cached.attrs.key) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"all\") {\r\n\t\t\treturn !cached.configContext || cached.configContext.retain !== true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\") {\r\n\t\t\treturn cached.configContext && cached.configContext.retain === false\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tfunction maybeRecreateObject(data, cached, dataAttrKeys) {\r\n\t\t// if an element is different enough from the one in cache, recreate it\r\n\t\tif (isDifferentEnough(data, cached, dataAttrKeys)) {\r\n\t\t\tif (cached.nodes.length) clear(cached.nodes)\r\n\r\n\t\t\tif (cached.configContext &&\r\n\t\t\t\t\tisFunction(cached.configContext.onunload)) {\r\n\t\t\t\tcached.configContext.onunload()\r\n\t\t\t}\r\n\r\n\t\t\tif (cached.controllers) {\r\n\t\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\t\tif (controller.onunload) {\r\n\t\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getObjectNamespace(data, namespace) {\r\n\t\tif (data.attrs.xmlns) return data.attrs.xmlns\r\n\t\tif (data.tag === \"svg\") return \"http://www.w3.org/2000/svg\"\r\n\t\tif (data.tag === \"math\") return \"http://www.w3.org/1998/Math/MathML\"\r\n\t\treturn namespace\r\n\t}\r\n\r\n\tvar pendingRequests = 0\r\n\tm.startComputation = function () { pendingRequests++ }\r\n\tm.endComputation = function () {\r\n\t\tif (pendingRequests > 1) {\r\n\t\t\tpendingRequests--\r\n\t\t} else {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tm.redraw()\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unloadCachedControllers(cached, views, controllers) {\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t\tforEach(controllers, function (controller) {\r\n\t\t\t\tif (controller.onunload && controller.onunload.$old) {\r\n\t\t\t\t\tcontroller.onunload = controller.onunload.$old\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pendingRequests && controller.onunload) {\r\n\t\t\t\t\tvar onunload = controller.onunload\r\n\t\t\t\t\tcontroller.onunload = function (){}\r\n\t\t\t\t\tcontroller.onunload.$old = onunload\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scheduleConfigsToBeCalled(configs, data, node, isNew, cached) {\r\n\t\t// schedule configs to be called. They are called after `build` finishes\r\n\t\t// running\r\n\t\tif (isFunction(data.attrs.config)) {\r\n\t\t\tvar context = cached.configContext = cached.configContext || {}\r\n\r\n\t\t\t// bind\r\n\t\t\tconfigs.push(function () {\r\n\t\t\t\treturn data.attrs.config.call(data, node, !isNew, context,\r\n\t\t\t\t\tcached)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildUpdatedNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\teditable,\r\n\t\thasKeys,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tconfigs,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar node = cached.nodes[0]\r\n\r\n\t\tif (hasKeys) {\r\n\t\t\tsetAttributes(node, data.tag, data.attrs, cached.attrs, namespace)\r\n\t\t}\r\n\r\n\t\tcached.children = build(\r\n\t\t\tnode,\r\n\t\t\tdata.tag,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tdata.children,\r\n\t\t\tcached.children,\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\tnamespace,\r\n\t\t\tconfigs\r\n\t\t)\r\n\r\n\t\tcached.nodes.intact = true\r\n\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\tfunction handleNonexistentNodes(data, parentElement, index) {\r\n\t\tvar nodes\r\n\t\tif (data.$trusted) {\r\n\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t} else {\r\n\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\tif (!(parentElement.nodeName in voidElements)) {\r\n\t\t\t\tinsertNode(parentElement, nodes[0], index)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar cached\r\n\r\n\t\tif (typeof data === \"string\" ||\r\n\t\t\t\ttypeof data === \"number\" ||\r\n\t\t\t\ttypeof data === \"boolean\") {\r\n\t\t\tcached = new data.constructor(data)\r\n\t\t} else {\r\n\t\t\tcached = data\r\n\t\t}\r\n\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction reattachNodes(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\teditable,\r\n\t\tindex,\r\n\t\tparentTag\r\n\t) {\r\n\t\tvar nodes = cached.nodes\r\n\t\tif (!editable || editable !== $document.activeElement ||\r\n\t\t\t\tdata !== cached) {\r\n\t\t\tif (data.$trusted) {\r\n\t\t\t\tclear(nodes, cached)\r\n\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t} else if (parentTag === \"textarea\") {\r\n\t\t\t\t// <textarea> uses `value` instead of `nodeValue`.\r\n\t\t\t\tparentElement.value = data\r\n\t\t\t} else if (editable) {\r\n\t\t\t\t// contenteditable nodes use `innerHTML` instead of `nodeValue`.\r\n\t\t\t\teditable.innerHTML = data\r\n\t\t\t\tnodes = [].slice.call(editable.childNodes)\r\n\t\t\t} else {\r\n\t\t\t\t// was a trusted string\r\n\t\t\t\tif (nodes[0].nodeType === 1 || nodes.length > 1 ||\r\n\t\t\t\t\t\t(nodes[0].nodeValue.trim &&\r\n\t\t\t\t\t\t\t!nodes[0].nodeValue.trim())) {\r\n\t\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinjectTextNode(parentElement, nodes[0], index, data)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcached = new data.constructor(data)\r\n\t\tcached.nodes = nodes\r\n\t\tcached.$trusted = data.$trusted\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction handleTextNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\tindex,\r\n\t\tparentElement,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tparentTag\r\n\t) {\r\n\t\tif (!cached.nodes.length) {\r\n\t\t\treturn handleNonexistentNodes(data, parentElement, index)\r\n\t\t} else if (cached.valueOf() !== data.valueOf() || shouldReattach) {\r\n\t\t\treturn reattachNodes(data, cached, parentElement, editable, index,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn (cached.nodes.intact = true, cached)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getSubArrayCount(item) {\r\n\t\tif (item.$trusted) {\r\n\t\t\t// fix offset of next element if item was a trusted string w/ more\r\n\t\t\t// than one html element\r\n\t\t\treturn item.nodes.length\r\n\t\t} else if (isArray(item)) {\r\n\t\t\treturn item.length\r\n\t\t}\r\n\t\treturn 1\r\n\t}\r\n\r\n\tfunction buildArray(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tparentTag,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tdata = flatten(data)\r\n\t\tvar nodes = []\r\n\t\tvar intact = cached.length === data.length\r\n\t\tvar subArrayCount = 0\r\n\r\n\t\t// keys algorithm: sort elements without recreating them if keys are\r\n\t\t// present\r\n\t\t//\r\n\t\t// 1) create a map of all existing keys, and mark all for deletion\r\n\t\t// 2) add new keys to map and mark them for addition\r\n\t\t// 3) if key exists in new list, change action from deletion to a move\r\n\t\t// 4) for each key, handle its corresponding action as marked in\r\n\t\t//    previous steps\r\n\r\n\t\tvar existing = {}\r\n\t\tvar shouldMaintainIdentities = false\r\n\r\n\t\tforKeys(cached, function (attrs, i) {\r\n\t\t\tshouldMaintainIdentities = true\r\n\t\t\texisting[cached[i].attrs.key] = {action: DELETION, index: i}\r\n\t\t})\r\n\r\n\t\tbuildArrayKeys(data)\r\n\t\tif (shouldMaintainIdentities) {\r\n\t\t\tcached = diffKeys(data, cached, existing, parentElement)\r\n\t\t}\r\n\t\t// end key algorithm\r\n\r\n\t\tvar cacheCount = 0\r\n\t\t// faster explicitly written\r\n\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t// diff each item in the array\r\n\t\t\tvar item = build(\r\n\t\t\t\tparentElement,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tcached,\r\n\t\t\t\tindex,\r\n\t\t\t\tdata[i],\r\n\t\t\t\tcached[cacheCount],\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tindex + subArrayCount || subArrayCount,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\r\n\t\t\tif (item !== undefined) {\r\n\t\t\t\tintact = intact && item.nodes.intact\r\n\t\t\t\tsubArrayCount += getSubArrayCount(item)\r\n\t\t\t\tcached[cacheCount++] = item\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!intact) diffArray(data, cached, nodes)\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction makeCache(data, cached, index, parentIndex, parentCache) {\r\n\t\tif (cached != null) {\r\n\t\t\tif (type.call(cached) === type.call(data)) return cached\r\n\r\n\t\t\tif (parentCache && parentCache.nodes) {\r\n\t\t\t\tvar offset = index - parentIndex\r\n\t\t\t\tvar end = offset + (isArray(data) ? data : cached.nodes).length\r\n\t\t\t\tclear(\r\n\t\t\t\t\tparentCache.nodes.slice(offset, end),\r\n\t\t\t\t\tparentCache.slice(offset, end))\r\n\t\t\t} else if (cached.nodes) {\r\n\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcached = new data.constructor()\r\n\t\t// if constructor creates a virtual dom element, use a blank object as\r\n\t\t// the base cached node instead of copying the virtual el (#277)\r\n\t\tif (cached.tag) cached = {}\r\n\t\tcached.nodes = []\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction constructNode(data, namespace) {\r\n\t\tif (data.attrs.is) {\r\n\t\t\tif (namespace == null) {\r\n\t\t\t\treturn $document.createElement(data.tag, data.attrs.is)\r\n\t\t\t} else {\r\n\t\t\t\treturn $document.createElementNS(namespace, data.tag,\r\n\t\t\t\t\tdata.attrs.is)\r\n\t\t\t}\r\n\t\t} else if (namespace == null) {\r\n\t\t\treturn $document.createElement(data.tag)\r\n\t\t} else {\r\n\t\t\treturn $document.createElementNS(namespace, data.tag)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructAttrs(data, node, namespace, hasKeys) {\r\n\t\tif (hasKeys) {\r\n\t\t\treturn setAttributes(node, data.tag, data.attrs, {}, namespace)\r\n\t\t} else {\r\n\t\t\treturn data.attrs\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructChildren(\r\n\t\tdata,\r\n\t\tnode,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tif (data.children != null && data.children.length > 0) {\r\n\t\t\treturn build(\r\n\t\t\t\tnode,\r\n\t\t\t\tdata.tag,\r\n\t\t\t\tundefined,\r\n\t\t\t\tundefined,\r\n\t\t\t\tdata.children,\r\n\t\t\t\tcached.children,\r\n\t\t\t\ttrue,\r\n\t\t\t\t0,\r\n\t\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else {\r\n\t\t\treturn data.children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reconstructCached(\r\n\t\tdata,\r\n\t\tattrs,\r\n\t\tchildren,\r\n\t\tnode,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar cached = {\r\n\t\t\ttag: data.tag,\r\n\t\t\tattrs: attrs,\r\n\t\t\tchildren: children,\r\n\t\t\tnodes: [node]\r\n\t\t}\r\n\r\n\t\tunloadCachedControllers(cached, views, controllers)\r\n\r\n\t\tif (cached.children && !cached.children.nodes) {\r\n\t\t\tcached.children.nodes = []\r\n\t\t}\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction getController(views, view, cachedControllers, controller) {\r\n\t\tvar controllerIndex\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\" && views) {\r\n\t\t\tcontrollerIndex = views.indexOf(view)\r\n\t\t} else {\r\n\t\t\tcontrollerIndex = -1\r\n\t\t}\r\n\r\n\t\tif (controllerIndex > -1) {\r\n\t\t\treturn cachedControllers[controllerIndex]\r\n\t\t} else if (isFunction(controller)) {\r\n\t\t\treturn new controller()\r\n\t\t} else {\r\n\t\t\treturn {}\r\n\t\t}\r\n\t}\r\n\r\n\tvar unloaders = []\r\n\r\n\tfunction updateLists(views, controllers, view, controller) {\r\n\t\tif (controller.onunload != null &&\r\n\t\t\t\tunloaders.map(function (u) { return u.handler })\r\n\t\t\t\t\t.indexOf(controller.onunload) < 0) {\r\n\t\t\tunloaders.push({\r\n\t\t\t\tcontroller: controller,\r\n\t\t\t\thandler: controller.onunload\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tviews.push(view)\r\n\t\tcontrollers.push(controller)\r\n\t}\r\n\r\n\tvar forcing = false\r\n\tfunction checkView(\r\n\t\tdata,\r\n\t\tview,\r\n\t\tcached,\r\n\t\tcachedControllers,\r\n\t\tcontrollers,\r\n\t\tviews\r\n\t) {\r\n\t\tvar controller = getController(\r\n\t\t\tcached.views,\r\n\t\t\tview,\r\n\t\t\tcachedControllers,\r\n\t\t\tdata.controller)\r\n\r\n\t\tvar key = data && data.attrs && data.attrs.key\r\n\r\n\t\tif (pendingRequests === 0 ||\r\n\t\t\t\tforcing ||\r\n\t\t\t\tcachedControllers &&\r\n\t\t\t\t\tcachedControllers.indexOf(controller) > -1) {\r\n\t\t\tdata = data.view(controller)\r\n\t\t} else {\r\n\t\t\tdata = {tag: \"placeholder\"}\r\n\t\t}\r\n\r\n\t\tif (data.subtree === \"retain\") return data\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tdata.attrs.key = key\r\n\t\tupdateLists(views, controllers, view, controller)\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction markViews(data, cached, views, controllers) {\r\n\t\tvar cachedControllers = cached && cached.controllers\r\n\r\n\t\twhile (data.view != null) {\r\n\t\t\tdata = checkView(\r\n\t\t\t\tdata,\r\n\t\t\t\tdata.view.$original || data.view,\r\n\t\t\t\tcached,\r\n\t\t\t\tcachedControllers,\r\n\t\t\t\tcontrollers,\r\n\t\t\t\tviews)\r\n\t\t}\r\n\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction buildObject( // eslint-disable-line max-statements\r\n\t\tdata,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tshouldReattach,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tvar views = []\r\n\t\tvar controllers = []\r\n\r\n\t\tdata = markViews(data, cached, views, controllers)\r\n\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\r\n\t\tif (!data.tag && controllers.length) {\r\n\t\t\tthrow new Error(\"Component template must return a virtual \" +\r\n\t\t\t\t\"element, not an array, string, etc.\")\r\n\t\t}\r\n\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tcached.attrs = cached.attrs || {}\r\n\r\n\t\tvar dataAttrKeys = Object.keys(data.attrs)\r\n\t\tvar hasKeys = dataAttrKeys.length > (\"key\" in data.attrs ? 1 : 0)\r\n\r\n\t\tmaybeRecreateObject(data, cached, dataAttrKeys)\r\n\r\n\t\tif (!isString(data.tag)) return\r\n\r\n\t\tvar isNew = cached.nodes.length === 0\r\n\r\n\t\tnamespace = getObjectNamespace(data, namespace)\r\n\r\n\t\tvar node\r\n\t\tif (isNew) {\r\n\t\t\tnode = constructNode(data, namespace)\r\n\t\t\t// set attributes first, then create children\r\n\t\t\tvar attrs = constructAttrs(data, node, namespace, hasKeys)\r\n\r\n\t\t\t// add the node to its parent before attaching children to it\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\r\n\t\t\tvar children = constructChildren(data, node, cached, editable,\r\n\t\t\t\tnamespace, configs)\r\n\r\n\t\t\tcached = reconstructCached(\r\n\t\t\t\tdata,\r\n\t\t\t\tattrs,\r\n\t\t\t\tchildren,\r\n\t\t\t\tnode,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tcontrollers)\r\n\t\t} else {\r\n\t\t\tnode = buildUpdatedNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\teditable,\r\n\t\t\t\thasKeys,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tconfigs,\r\n\t\t\t\tcontrollers)\r\n\t\t}\r\n\r\n\t\t// edge case: setting value on <select> doesn't work before children\r\n\t\t// exist, so set it again after children have been created/updated\r\n\t\tif (data.tag === \"select\" && \"value\" in data.attrs) {\r\n\t\t\tsetAttributes(node, data.tag, {value: data.attrs.value}, {},\r\n\t\t\t\tnamespace)\r\n\t\t}\r\n\r\n\t\tif (!isNew && shouldReattach === true && node != null) {\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\t\t}\r\n\r\n\t\t// The configs are called after `build` finishes running\r\n\t\tscheduleConfigsToBeCalled(configs, data, node, isNew, cached)\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction build(\r\n\t\tparentElement,\r\n\t\tparentTag,\r\n\t\tparentCache,\r\n\t\tparentIndex,\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tshouldReattach,\r\n\t\tindex,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\t/*\r\n\t\t * `build` is a recursive function that manages creation/diffing/removal\r\n\t\t * of DOM elements based on comparison between `data` and `cached` the\r\n\t\t * diff algorithm can be summarized as this:\r\n\t\t *\r\n\t\t * 1 - compare `data` and `cached`\r\n\t\t * 2 - if they are different, copy `data` to `cached` and update the DOM\r\n\t\t *     based on what the difference is\r\n\t\t * 3 - recursively apply this algorithm for every array and for the\r\n\t\t *     children of every virtual element\r\n\t\t *\r\n\t\t * The `cached` data structure is essentially the same as the previous\r\n\t\t * redraw's `data` data structure, with a few additions:\r\n\t\t * - `cached` always has a property called `nodes`, which is a list of\r\n\t\t *    DOM elements that correspond to the data represented by the\r\n\t\t *    respective virtual element\r\n\t\t * - in order to support attaching `nodes` as a property of `cached`,\r\n\t\t *    `cached` is *always* a non-primitive object, i.e. if the data was\r\n\t\t *    a string, then cached is a String instance. If data was `null` or\r\n\t\t *    `undefined`, cached is `new String(\"\")`\r\n\t\t * - `cached also has a `configContext` property, which is the state\r\n\t\t *    storage object exposed by config(element, isInitialized, context)\r\n\t\t * - when `cached` is an Object, it represents a virtual element; when\r\n\t\t *    it's an Array, it represents a list of elements; when it's a\r\n\t\t *    String, Number or Boolean, it represents a text node\r\n\t\t *\r\n\t\t * `parentElement` is a DOM element used for W3C DOM API calls\r\n\t\t * `parentTag` is only used for handling a corner case for textarea\r\n\t\t * values\r\n\t\t * `parentCache` is used to remove nodes in some multi-node cases\r\n\t\t * `parentIndex` and `index` are used to figure out the offset of nodes.\r\n\t\t * They're artifacts from before arrays started being flattened and are\r\n\t\t * likely refactorable\r\n\t\t * `data` and `cached` are, respectively, the new and old nodes being\r\n\t\t * diffed\r\n\t\t * `shouldReattach` is a flag indicating whether a parent node was\r\n\t\t * recreated (if so, and if this node is reused, then this node must\r\n\t\t * reattach itself to the new parent)\r\n\t\t * `editable` is a flag that indicates whether an ancestor is\r\n\t\t * contenteditable\r\n\t\t * `namespace` indicates the closest HTML namespace as it cascades down\r\n\t\t * from an ancestor\r\n\t\t * `configs` is a list of config functions to run after the topmost\r\n\t\t * `build` call finishes running\r\n\t\t *\r\n\t\t * there's logic that relies on the assumption that null and undefined\r\n\t\t * data are equivalent to empty strings\r\n\t\t * - this prevents lifecycle surprises from procedural helpers that mix\r\n\t\t *   implicit and explicit return statements (e.g.\r\n\t\t *   function foo() {if (cond) return m(\"div\")}\r\n\t\t * - it simplifies diffing code\r\n\t\t */\r\n\t\tdata = dataToString(data)\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\t\tcached = makeCache(data, cached, index, parentIndex, parentCache)\r\n\r\n\t\tif (isArray(data)) {\r\n\t\t\treturn buildArray(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (data != null && isObject(data)) {\r\n\t\t\treturn buildObject(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (!isFunction(data)) {\r\n\t\t\treturn handleTextNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sortChanges(a, b) {\r\n\t\treturn a.action - b.action || a.index - b.index\r\n\t}\r\n\r\n\tfunction copyStyleAttrs(node, dataAttr, cachedAttr) {\r\n\t\tif (cachedAttr === dataAttr) {\r\n\t\t\tnode.style = \"\"\r\n\t\t\tcachedAttr = {}\r\n\t\t}\r\n\t\tfor (var rule in dataAttr) {\r\n\t\t\tif (hasOwn.call(dataAttr, rule)) {\r\n\t\t\t\tif (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) {\r\n\t\t\t\t\tnode.style[rule] = dataAttr[rule]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (rule in cachedAttr) {\r\n\t\t\tif (hasOwn.call(cachedAttr, rule)) {\r\n\t\t\t\tif (!hasOwn.call(dataAttr, rule)) node.style[rule] = \"\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar shouldUseSetAttribute = {\r\n\t\tlist: 1,\r\n\t\tstyle: 1,\r\n\t\tform: 1,\r\n\t\ttype: 1,\r\n\t\twidth: 1,\r\n\t\theight: 1\r\n\t}\r\n\r\n\tfunction setSingleAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (attrName === \"config\" || attrName === \"key\") {\r\n\t\t\t// `config` isn't a real attribute, so ignore it\r\n\t\t\treturn true\r\n\t\t} else if (isFunction(dataAttr) && attrName.slice(0, 2) === \"on\") {\r\n\t\t\t// hook event handlers to the auto-redrawing system\r\n\t\t\tnode[attrName] = autoredraw(dataAttr, node)\r\n\t\t} else if (attrName === \"style\" && dataAttr != null &&\r\n\t\t\t\tisObject(dataAttr)) {\r\n\t\t\t// handle `style: {...}`\r\n\t\t\tcopyStyleAttrs(node, dataAttr, cachedAttr)\r\n\t\t} else if (namespace != null) {\r\n\t\t\t// handle SVG\r\n\t\t\tif (attrName === \"href\") {\r\n\t\t\t\tnode.setAttributeNS(\"http://www.w3.org/1999/xlink\",\r\n\t\t\t\t\t\"href\", dataAttr)\r\n\t\t\t} else {\r\n\t\t\t\tnode.setAttribute(\r\n\t\t\t\t\tattrName === \"className\" ? \"class\" : attrName,\r\n\t\t\t\t\tdataAttr)\r\n\t\t\t}\r\n\t\t} else if (attrName in node && !shouldUseSetAttribute[attrName]) {\r\n\t\t\t// handle cases that are properties (but ignore cases where we\r\n\t\t\t// should use setAttribute instead)\r\n\t\t\t//\r\n\t\t\t// - list and form are typically used as strings, but are DOM\r\n\t\t\t//   element references in js\r\n\t\t\t//\r\n\t\t\t// - when using CSS selectors (e.g. `m(\"[style='']\")`), style is\r\n\t\t\t//   used as a string, but it's an object in js\r\n\t\t\t//\r\n\t\t\t// #348 don't set the value if not needed - otherwise, cursor\r\n\t\t\t// placement breaks in Chrome\r\n\t\t\t// #1252 likewise when `contenteditable` is set on an element.\r\n\t\t\ttry {\r\n\t\t\t\tif (\r\n\t\t\t\t\ttag !== \"input\" && !node.isContentEditable ||\r\n\t\t\t\t\tnode[attrName] != dataAttr // eslint-disable-line eqeqeq\r\n\t\t\t\t) {\r\n\t\t\t\t\tnode[attrName] = dataAttr\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tnode.setAttribute(attrName, dataAttr)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tnode.setAttribute(attrName, dataAttr)\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// IE8 doesn't allow change input attributes and throws\r\n\t\t\t\t// an exception. Unfortunately it cannot be handled, because\r\n\t\t\t\t// error code is not informative.\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction trySetAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\tcachedAttrs,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (!(attrName in cachedAttrs) ||\r\n\t\t\t\t(cachedAttr !== dataAttr) ||\r\n\t\t\t\ttypeof dataAttr === \"object\" ||\r\n\t\t\t\t($document.activeElement === node)) {\r\n\t\t\tcachedAttrs[attrName] = dataAttr\r\n\t\t\ttry {\r\n\t\t\t\treturn setSingleAttr(\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tattrName,\r\n\t\t\t\t\tdataAttr,\r\n\t\t\t\t\tcachedAttr,\r\n\t\t\t\t\ttag,\r\n\t\t\t\t\tnamespace)\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// swallow IE's invalid argument errors to mimic HTML's\r\n\t\t\t\t// fallback-to-doing-nothing-on-invalid-attributes behavior\r\n\t\t\t\tif (e.message.indexOf(\"Invalid argument\") < 0) throw e\r\n\t\t\t}\r\n\t\t} else if (attrName === \"value\" && tag === \"input\" &&\r\n\t\t\t\t\t\t\t\t/* eslint-disable eqeqeq */\r\n\t\t\t\t\t\t\t\tnode.value != dataAttr) {\r\n\t\t\t\t\t\t\t\t// #348 dataAttr may not be a string,\r\n\t\t\t\t\t\t\t\t// so use loose comparison\r\n\t\t\t\t\t\t\t\t/* eslint-enable eqeqeq */\r\n\t\t\tnode.value = dataAttr\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {\r\n\t\tfor (var attrName in dataAttrs) {\r\n\t\t\tif (hasOwn.call(dataAttrs, attrName)) {\r\n\t\t\t\tif (trySetAttr(\r\n\t\t\t\t\t\tnode,\r\n\t\t\t\t\t\tattrName,\r\n\t\t\t\t\t\tdataAttrs[attrName],\r\n\t\t\t\t\t\tcachedAttrs[attrName],\r\n\t\t\t\t\t\tcachedAttrs,\r\n\t\t\t\t\t\ttag,\r\n\t\t\t\t\t\tnamespace)) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cachedAttrs\r\n\t}\r\n\r\n\tfunction clear(nodes, cached) {\r\n\t\tfor (var i = nodes.length - 1; i > -1; i--) {\r\n\t\t\tif (nodes[i] && nodes[i].parentNode) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tnodes[i].parentNode.removeChild(nodes[i])\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t/* eslint-disable max-len */\r\n\t\t\t\t\t// ignore if this fails due to order of events (see\r\n\t\t\t\t\t// http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)\r\n\t\t\t\t\t/* eslint-enable max-len */\r\n\t\t\t\t}\r\n\t\t\t\tcached = [].concat(cached)\r\n\t\t\t\tif (cached[i]) unload(cached[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\t// release memory if nodes is an array. This check should fail if nodes\r\n\t\t// is a NodeList (see loop above)\r\n\t\tif (nodes.length) {\r\n\t\t\tnodes.length = 0\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unload(cached) {\r\n\t\tif (cached.configContext && isFunction(cached.configContext.onunload)) {\r\n\t\t\tcached.configContext.onunload()\r\n\t\t\tcached.configContext.onunload = null\r\n\t\t}\r\n\t\tif (cached.controllers) {\r\n\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\tif (isFunction(controller.onunload)) {\r\n\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (cached.children) {\r\n\t\t\tif (isArray(cached.children)) forEach(cached.children, unload)\r\n\t\t\telse if (cached.children.tag) unload(cached.children)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction appendTextFragment(parentElement, data) {\r\n\t\ttry {\r\n\t\t\tparentElement.appendChild(\r\n\t\t\t\t$document.createRange().createContextualFragment(data))\r\n\t\t} catch (e) {\r\n\t\t\tparentElement.insertAdjacentHTML(\"beforeend\", data)\r\n\t\t\treplaceScriptNodes(parentElement)\r\n\t\t}\r\n\t}\r\n\r\n\t// Replace script tags inside given DOM element with executable ones.\r\n\t// Will also check children recursively and replace any found script\r\n\t// tags in same manner.\r\n\tfunction replaceScriptNodes(node) {\r\n\t\tif (node.tagName === \"SCRIPT\") {\r\n\t\t\tnode.parentNode.replaceChild(buildExecutableNode(node), node)\r\n\t\t} else {\r\n\t\t\tvar children = node.childNodes\r\n\t\t\tif (children && children.length) {\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\treplaceScriptNodes(children[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\t// Replace script element with one whose contents are executable.\r\n\tfunction buildExecutableNode(node){\r\n\t\tvar scriptEl = document.createElement(\"script\")\r\n\t\tvar attrs = node.attributes\r\n\r\n\t\tfor (var i = 0; i < attrs.length; i++) {\r\n\t\t\tscriptEl.setAttribute(attrs[i].name, attrs[i].value)\r\n\t\t}\r\n\r\n\t\tscriptEl.text = node.innerHTML\r\n\t\treturn scriptEl\r\n\t}\r\n\r\n\tfunction injectHTML(parentElement, index, data) {\r\n\t\tvar nextSibling = parentElement.childNodes[index]\r\n\t\tif (nextSibling) {\r\n\t\t\tvar isElement = nextSibling.nodeType !== 1\r\n\t\t\tvar placeholder = $document.createElement(\"span\")\r\n\t\t\tif (isElement) {\r\n\t\t\t\tparentElement.insertBefore(placeholder, nextSibling || null)\r\n\t\t\t\tplaceholder.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t\tparentElement.removeChild(placeholder)\r\n\t\t\t} else {\r\n\t\t\t\tnextSibling.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tappendTextFragment(parentElement, data)\r\n\t\t}\r\n\r\n\t\tvar nodes = []\r\n\r\n\t\twhile (parentElement.childNodes[index] !== nextSibling) {\r\n\t\t\tnodes.push(parentElement.childNodes[index])\r\n\t\t\tindex++\r\n\t\t}\r\n\r\n\t\treturn nodes\r\n\t}\r\n\r\n\tfunction autoredraw(callback, object) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || event\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t\tm.startComputation()\r\n\t\t\ttry {\r\n\t\t\t\treturn callback.call(object, e)\r\n\t\t\t} finally {\r\n\t\t\t\tendFirstComputation()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar html\r\n\tvar documentNode = {\r\n\t\tappendChild: function (node) {\r\n\t\t\tif (html === undefined) html = $document.createElement(\"html\")\r\n\t\t\tif ($document.documentElement &&\r\n\t\t\t\t\t$document.documentElement !== node) {\r\n\t\t\t\t$document.replaceChild(node, $document.documentElement)\r\n\t\t\t} else {\r\n\t\t\t\t$document.appendChild(node)\r\n\t\t\t}\r\n\r\n\t\t\tthis.childNodes = $document.childNodes\r\n\t\t},\r\n\r\n\t\tinsertBefore: function (node) {\r\n\t\t\tthis.appendChild(node)\r\n\t\t},\r\n\r\n\t\tchildNodes: []\r\n\t}\r\n\r\n\tvar nodeCache = []\r\n\tvar cellCache = {}\r\n\r\n\tm.render = function (root, cell, forceRecreation) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Ensure the DOM element being passed to \" +\r\n\t\t\t\t\"m.route/m.mount/m.render is not undefined.\")\r\n\t\t}\r\n\t\tvar configs = []\r\n\t\tvar id = getCellCacheKey(root)\r\n\t\tvar isDocumentRoot = root === $document\r\n\t\tvar node\r\n\r\n\t\tif (isDocumentRoot || root === $document.documentElement) {\r\n\t\t\tnode = documentNode\r\n\t\t} else {\r\n\t\t\tnode = root\r\n\t\t}\r\n\r\n\t\tif (isDocumentRoot && cell.tag !== \"html\") {\r\n\t\t\tcell = {tag: \"html\", attrs: {}, children: cell}\r\n\t\t}\r\n\r\n\t\tif (cellCache[id] === undefined) clear(node.childNodes)\r\n\t\tif (forceRecreation === true) reset(root)\r\n\r\n\t\tcellCache[id] = build(\r\n\t\t\tnode,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tcell,\r\n\t\t\tcellCache[id],\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tconfigs)\r\n\r\n\t\tforEach(configs, function (config) { config() })\r\n\t}\r\n\r\n\tfunction getCellCacheKey(element) {\r\n\t\tvar index = nodeCache.indexOf(element)\r\n\t\treturn index < 0 ? nodeCache.push(element) - 1 : index\r\n\t}\r\n\r\n\tm.trust = function (value) {\r\n\t\tvalue = new String(value) // eslint-disable-line no-new-wrappers\r\n\t\tvalue.$trusted = true\r\n\t\treturn value\r\n\t}\r\n\r\n\tfunction gettersetter(store) {\r\n\t\tfunction prop() {\r\n\t\t\tif (arguments.length) store = arguments[0]\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\tprop.toJSON = function () {\r\n\t\t\tif (store && isFunction(store.toJSON)) return store.toJSON()\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\treturn prop\r\n\t}\r\n\r\n\tm.prop = function (store) {\r\n\t\tif ((store != null && (isObject(store) || isFunction(store)) ||\r\n\t\t\t\t\t((typeof Promise !== \"undefined\") &&\r\n\t\t\t\t\t\t(store instanceof Promise))) &&\r\n\t\t\t\tisFunction(store.then)) {\r\n\t\t\treturn propify(store)\r\n\t\t}\r\n\r\n\t\treturn gettersetter(store)\r\n\t}\r\n\r\n\tvar roots = []\r\n\tvar components = []\r\n\tvar controllers = []\r\n\tvar lastRedrawId = null\r\n\tvar lastRedrawCallTime = 0\r\n\tvar computePreRedrawHook = null\r\n\tvar computePostRedrawHook = null\r\n\tvar topComponent\r\n\tvar FRAME_BUDGET = 16 // 60 frames per second = 1 call per 16 ms\r\n\r\n\tfunction parameterize(component, args) {\r\n\t\tfunction controller() {\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\treturn (component.controller || noop).apply(this, args) || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t}\r\n\r\n\t\tif (component.controller) {\r\n\t\t\tcontroller.prototype = component.controller.prototype\r\n\t\t}\r\n\r\n\t\tfunction view(ctrl) {\r\n\t\t\tvar currentArgs = [ctrl].concat(args)\r\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\t\tcurrentArgs.push(arguments[i])\r\n\t\t\t}\r\n\r\n\t\t\treturn component.view.apply(component, currentArgs)\r\n\t\t}\r\n\r\n\t\tview.$original = component.view\r\n\t\tvar output = {controller: controller, view: view}\r\n\t\tif (args[0] && args[0].key != null) output.attrs = {key: args[0].key}\r\n\t\treturn output\r\n\t}\r\n\r\n\tm.component = function (component) {\r\n\t\tvar args = new Array(arguments.length - 1)\r\n\r\n\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\targs[i - 1] = arguments[i]\r\n\t\t}\r\n\r\n\t\treturn parameterize(component, args)\r\n\t}\r\n\r\n\tvar currentRoute, previousRoute\r\n\r\n\tfunction checkPrevented(component, root, index, isPrevented) {\r\n\t\tif (!isPrevented) {\r\n\t\t\tm.redraw.strategy(\"all\")\r\n\t\t\tm.startComputation()\r\n\t\t\troots[index] = root\r\n\t\t\tvar currentComponent\r\n\r\n\t\t\tif (component) {\r\n\t\t\t\tcurrentComponent = topComponent = component\r\n\t\t\t} else {\r\n\t\t\t\tcurrentComponent = topComponent = component = {controller: noop}\r\n\t\t\t}\r\n\r\n\t\t\tvar controller = new (component.controller || noop)()\r\n\r\n\t\t\t// controllers may call m.mount recursively (via m.route redirects,\r\n\t\t\t// for example)\r\n\t\t\t// this conditional ensures only the last recursive m.mount call is\r\n\t\t\t// applied\r\n\t\t\tif (currentComponent === topComponent) {\r\n\t\t\t\tcontrollers[index] = controller\r\n\t\t\t\tcomponents[index] = component\r\n\t\t\t}\r\n\t\t\tendFirstComputation()\r\n\t\t\tif (component === null) {\r\n\t\t\t\tremoveRootElement(root, index)\r\n\t\t\t}\r\n\t\t\treturn controllers[index]\r\n\t\t} else {\r\n\t\t\tif (component == null) {\r\n\t\t\t\tremoveRootElement(root, index)\r\n\t\t\t}\r\n\r\n\t\t\tif (previousRoute) {\r\n\t\t\t\tcurrentRoute = previousRoute\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm.mount = m.module = function (root, component) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Ensure the DOM element being passed to \" +\r\n\t\t\t\t\"m.route/m.mount/m.render is not undefined.\")\r\n\t\t}\r\n\r\n\t\tvar index = roots.indexOf(root)\r\n\t\tif (index < 0) index = roots.length\r\n\r\n\t\tvar isPrevented = false\r\n\t\tvar event = {\r\n\t\t\tpreventDefault: function () {\r\n\t\t\t\tisPrevented = true\r\n\t\t\t\tcomputePreRedrawHook = computePostRedrawHook = null\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tforEach(unloaders, function (unloader) {\r\n\t\t\tunloader.handler.call(unloader.controller, event)\r\n\t\t\tunloader.controller.onunload = null\r\n\t\t})\r\n\r\n\t\tif (isPrevented) {\r\n\t\t\tforEach(unloaders, function (unloader) {\r\n\t\t\t\tunloader.controller.onunload = unloader.handler\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tunloaders = []\r\n\t\t}\r\n\r\n\t\tif (controllers[index] && isFunction(controllers[index].onunload)) {\r\n\t\t\tcontrollers[index].onunload(event)\r\n\t\t}\r\n\r\n\t\treturn checkPrevented(component, root, index, isPrevented)\r\n\t}\r\n\r\n\tfunction removeRootElement(root, index) {\r\n\t\troots.splice(index, 1)\r\n\t\tcontrollers.splice(index, 1)\r\n\t\tcomponents.splice(index, 1)\r\n\t\treset(root)\r\n\t\tnodeCache.splice(getCellCacheKey(root), 1)\r\n\t\tunloaders = []\r\n\t}\r\n\r\n\tvar redrawing = false\r\n\tm.redraw = function (force) {\r\n\t\tif (redrawing) return\r\n\t\tredrawing = true\r\n\t\tif (force) forcing = true\r\n\r\n\t\ttry {\r\n\t\t\t// lastRedrawId is a positive number if a second redraw is requested\r\n\t\t\t// before the next animation frame\r\n\t\t\t// lastRedrawId is null if it's the first redraw and not an event\r\n\t\t\t// handler\r\n\t\t\tif (lastRedrawId && !force) {\r\n\t\t\t\t// when setTimeout: only reschedule redraw if time between now\r\n\t\t\t\t// and previous redraw is bigger than a frame, otherwise keep\r\n\t\t\t\t// currently scheduled timeout\r\n\t\t\t\t// when rAF: always reschedule redraw\r\n\t\t\t\tif ($requestAnimationFrame === global.requestAnimationFrame ||\r\n\t\t\t\t\t\tnew Date() - lastRedrawCallTime > FRAME_BUDGET) {\r\n\t\t\t\t\tif (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId)\r\n\t\t\t\t\tlastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tredraw()\r\n\t\t\t\tlastRedrawId = $requestAnimationFrame(function () {\r\n\t\t\t\t\tlastRedrawId = null\r\n\t\t\t\t}, FRAME_BUDGET)\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tredrawing = forcing = false\r\n\t\t}\r\n\t}\r\n\r\n\tm.redraw.strategy = m.prop()\r\n\tfunction redraw() {\r\n\t\tif (computePreRedrawHook) {\r\n\t\t\tcomputePreRedrawHook()\r\n\t\t\tcomputePreRedrawHook = null\r\n\t\t}\r\n\t\tforEach(roots, function (root, i) {\r\n\t\t\tvar component = components[i]\r\n\t\t\tif (controllers[i]) {\r\n\t\t\t\tvar args = [controllers[i]]\r\n\t\t\t\tm.render(root,\r\n\t\t\t\t\tcomponent.view ? component.view(controllers[i], args) : \"\")\r\n\t\t\t}\r\n\t\t})\r\n\t\t// after rendering within a routed context, we need to scroll back to\r\n\t\t// the top, and fetch the document title for history.pushState\r\n\t\tif (computePostRedrawHook) {\r\n\t\t\tcomputePostRedrawHook()\r\n\t\t\tcomputePostRedrawHook = null\r\n\t\t}\r\n\t\tlastRedrawId = null\r\n\t\tlastRedrawCallTime = new Date()\r\n\t\tm.redraw.strategy(\"diff\")\r\n\t}\r\n\r\n\tfunction endFirstComputation() {\r\n\t\tif (m.redraw.strategy() === \"none\") {\r\n\t\t\tpendingRequests--\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t} else {\r\n\t\t\tm.endComputation()\r\n\t\t}\r\n\t}\r\n\r\n\tm.withAttr = function (prop, withAttrCallback, callbackThis) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || window.event\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\tvar currentTarget = e.currentTarget || this\r\n\t\t\tvar _this = callbackThis || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t\tvar target = prop in currentTarget ?\r\n\t\t\t\tcurrentTarget[prop] :\r\n\t\t\t\tcurrentTarget.getAttribute(prop)\r\n\t\t\twithAttrCallback.call(_this, target)\r\n\t\t}\r\n\t}\r\n\r\n\t// routing\r\n\tvar modes = {pathname: \"\", hash: \"#\", search: \"?\"}\r\n\tvar redirect = noop\r\n\tvar isDefaultRoute = false\r\n\tvar routeParams\r\n\r\n\tm.route = function (root, arg1, arg2, vdom) { // eslint-disable-line\r\n\t\t// m.route()\r\n\t\tif (arguments.length === 0) return currentRoute\r\n\t\t// m.route(el, defaultRoute, routes)\r\n\t\tif (arguments.length === 3 && isString(arg1)) {\r\n\t\t\tredirect = function (source) {\r\n\t\t\t\tvar path = currentRoute = normalizeRoute(source)\r\n\t\t\t\tif (!routeByValue(root, arg2, path)) {\r\n\t\t\t\t\tif (isDefaultRoute) {\r\n\t\t\t\t\t\tthrow new Error(\"Ensure the default route matches \" +\r\n\t\t\t\t\t\t\t\"one of the routes defined in m.route\")\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tisDefaultRoute = true\r\n\t\t\t\t\tm.route(arg1, true)\r\n\t\t\t\t\tisDefaultRoute = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar listener = m.route.mode === \"hash\" ?\r\n\t\t\t\t\"onhashchange\" :\r\n\t\t\t\t\"onpopstate\"\r\n\r\n\t\t\tglobal[listener] = function () {\r\n\t\t\t\tvar path = $location[m.route.mode]\r\n\t\t\t\tif (m.route.mode === \"pathname\") path += $location.search\r\n\t\t\t\tif (currentRoute !== normalizeRoute(path)) redirect(path)\r\n\t\t\t}\r\n\r\n\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\tglobal[listener]()\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// config: m.route\r\n\t\tif (root.addEventListener || root.attachEvent) {\r\n\t\t\tvar base = m.route.mode !== \"pathname\" ? $location.pathname : \"\"\r\n\t\t\troot.href = base + modes[m.route.mode] + vdom.attrs.href\r\n\t\t\tif (root.addEventListener) {\r\n\t\t\t\troot.removeEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t\troot.addEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t} else {\r\n\t\t\t\troot.detachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t\troot.attachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t}\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// m.route(route, params, shouldReplaceHistoryEntry)\r\n\t\tif (isString(root)) {\r\n\t\t\tpreviousRoute = currentRoute\r\n\t\t\tcurrentRoute = root\r\n\r\n\t\t\tvar args = arg1 || {}\r\n\t\t\tvar queryIndex = currentRoute.indexOf(\"?\")\r\n\t\t\tvar params\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tparams = parseQueryString(currentRoute.slice(queryIndex + 1))\r\n\t\t\t} else {\r\n\t\t\t\tparams = {}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i in args) {\r\n\t\t\t\tif (hasOwn.call(args, i)) {\r\n\t\t\t\t\tparams[i] = args[i]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar querystring = buildQueryString(params)\r\n\t\t\tvar currentPath\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tcurrentPath = currentRoute.slice(0, queryIndex)\r\n\t\t\t} else {\r\n\t\t\t\tcurrentPath = currentRoute\r\n\t\t\t}\r\n\r\n\t\t\tif (querystring) {\r\n\t\t\t\tcurrentRoute = currentPath +\r\n\t\t\t\t\t(currentPath.indexOf(\"?\") === -1 ? \"?\" : \"&\") +\r\n\t\t\t\t\tquerystring\r\n\t\t\t}\r\n\r\n\t\t\tvar replaceHistory =\r\n\t\t\t\t(arguments.length === 3 ? arg2 : arg1) === true ||\r\n\t\t\t\tpreviousRoute === currentRoute\r\n\r\n\t\t\tif (global.history.pushState) {\r\n\t\t\t\tvar method = replaceHistory ? \"replaceState\" : \"pushState\"\r\n\t\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\t\tcomputePostRedrawHook = function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tglobal.history[method](null, $document.title,\r\n\t\t\t\t\t\t\tmodes[m.route.mode] + currentRoute)\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t// In the event of a pushState or replaceState failure,\r\n\t\t\t\t\t\t// fallback to a standard redirect. This is specifically\r\n\t\t\t\t\t\t// to address a Safari security error when attempting to\r\n\t\t\t\t\t\t// call pushState more than 100 times.\r\n\t\t\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t} else {\r\n\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t}\r\n\r\n\t\t\tpreviousRoute = null\r\n\t\t}\r\n\t}\r\n\r\n\tm.route.param = function (key) {\r\n\t\tif (!routeParams) {\r\n\t\t\tthrow new Error(\"You must call m.route(element, defaultRoute, \" +\r\n\t\t\t\t\"routes) before calling m.route.param()\")\r\n\t\t}\r\n\r\n\t\tif (!key) {\r\n\t\t\treturn routeParams\r\n\t\t}\r\n\r\n\t\treturn routeParams[key]\r\n\t}\r\n\r\n\tm.route.mode = \"search\"\r\n\r\n\tfunction normalizeRoute(route) {\r\n\t\treturn route.slice(modes[m.route.mode].length)\r\n\t}\r\n\r\n\tfunction routeByValue(root, router, path) {\r\n\t\trouteParams = {}\r\n\r\n\t\tvar queryStart = path.indexOf(\"?\")\r\n\t\tif (queryStart !== -1) {\r\n\t\t\trouteParams = parseQueryString(\r\n\t\t\t\tpath.substr(queryStart + 1, path.length))\r\n\t\t\tpath = path.substr(0, queryStart)\r\n\t\t}\r\n\r\n\t\t// Get all routes and check if there's\r\n\t\t// an exact match for the current path\r\n\t\tvar keys = Object.keys(router)\r\n\t\tvar index = keys.indexOf(path)\r\n\r\n\t\tif (index !== -1){\r\n\t\t\tm.mount(root, router[keys [index]])\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tfor (var route in router) {\r\n\t\t\tif (hasOwn.call(router, route)) {\r\n\t\t\t\tif (route === path) {\r\n\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar matcher = new RegExp(\"^\" + route\r\n\t\t\t\t\t.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\")\r\n\t\t\t\t\t.replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\r\n\r\n\t\t\t\tif (matcher.test(path)) {\r\n\t\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\t\tpath.replace(matcher, function () {\r\n\t\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || []\r\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\r\n\t\t\t\t\t\tforEach(keys, function (key, i) {\r\n\t\t\t\t\t\t\trouteParams[key.replace(/:|\\./g, \"\")] =\r\n\t\t\t\t\t\t\t\tdecodeURIComponent(values[i])\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction routeUnobtrusive(e) {\r\n\t\te = e || event\r\n\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\r\n\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault()\r\n\t\t} else {\r\n\t\t\te.returnValue = false\r\n\t\t}\r\n\r\n\t\tvar currentTarget = e.currentTarget || e.srcElement\r\n\t\tvar args\r\n\r\n\t\tif (m.route.mode === \"pathname\" && currentTarget.search) {\r\n\t\t\targs = parseQueryString(currentTarget.search.slice(1))\r\n\t\t} else {\r\n\t\t\targs = {}\r\n\t\t}\r\n\r\n\t\twhile (currentTarget && !/a/i.test(currentTarget.nodeName)) {\r\n\t\t\tcurrentTarget = currentTarget.parentNode\r\n\t\t}\r\n\r\n\t\t// clear pendingRequests because we want an immediate route change\r\n\t\tpendingRequests = 0\r\n\t\tm.route(currentTarget[m.route.mode]\r\n\t\t\t.slice(modes[m.route.mode].length), args)\r\n\t}\r\n\r\n\tfunction setScroll() {\r\n\t\tif (m.route.mode !== \"hash\" && $location.hash) {\r\n\t\t\t$location.hash = $location.hash\r\n\t\t} else {\r\n\t\t\tglobal.scrollTo(0, 0)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildQueryString(object, prefix) {\r\n\t\tvar duplicates = {}\r\n\t\tvar str = []\r\n\r\n\t\tfor (var prop in object) {\r\n\t\t\tif (hasOwn.call(object, prop)) {\r\n\t\t\t\tvar key = prefix ? prefix + \"[\" + prop + \"]\" : prop\r\n\t\t\t\tvar value = object[prop]\r\n\r\n\t\t\t\tif (value === null) {\r\n\t\t\t\t\tstr.push(encodeURIComponent(key))\r\n\t\t\t\t} else if (isObject(value)) {\r\n\t\t\t\t\tstr.push(buildQueryString(value, key))\r\n\t\t\t\t} else if (isArray(value)) {\r\n\t\t\t\t\tvar keys = []\r\n\t\t\t\t\tduplicates[key] = duplicates[key] || {}\r\n\t\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\t\tforEach(value, function (item) {\r\n\t\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\t\tif (!duplicates[key][item]) {\r\n\t\t\t\t\t\t\tduplicates[key][item] = true\r\n\t\t\t\t\t\t\tkeys.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\t\t\tencodeURIComponent(item))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tstr.push(keys.join(\"&\"))\r\n\t\t\t\t} else if (value !== undefined) {\r\n\t\t\t\t\tstr.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\tencodeURIComponent(value))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn str.join(\"&\")\r\n\t}\r\n\r\n\tfunction parseQueryString(str) {\r\n\t\tif (str === \"\" || str == null) return {}\r\n\t\tif (str.charAt(0) === \"?\") str = str.slice(1)\r\n\r\n\t\tvar pairs = str.split(\"&\")\r\n\t\tvar params = {}\r\n\r\n\t\tforEach(pairs, function (string) {\r\n\t\t\tvar pair = string.split(\"=\")\r\n\t\t\tvar key = decodeURIComponent(pair[0])\r\n\t\t\tvar value = pair.length === 2 ? decodeURIComponent(pair[1]) : null\r\n\t\t\tif (params[key] != null) {\r\n\t\t\t\tif (!isArray(params[key])) params[key] = [params[key]]\r\n\t\t\t\tparams[key].push(value)\r\n\t\t\t} else params[key] = value\r\n\t\t})\r\n\r\n\t\treturn params\r\n\t}\r\n\r\n\tm.route.buildQueryString = buildQueryString\r\n\tm.route.parseQueryString = parseQueryString\r\n\r\n\tfunction reset(root) {\r\n\t\tvar cacheKey = getCellCacheKey(root)\r\n\t\tclear(root.childNodes, cellCache[cacheKey])\r\n\t\tcellCache[cacheKey] = undefined\r\n\t}\r\n\r\n\tm.deferred = function () {\r\n\t\tvar deferred = new Deferred()\r\n\t\tdeferred.promise = propify(deferred.promise)\r\n\t\treturn deferred\r\n\t}\r\n\r\n\tfunction propify(promise, initialValue) {\r\n\t\tvar prop = m.prop(initialValue)\r\n\t\tpromise.then(prop)\r\n\t\tprop.then = function (resolve, reject) {\r\n\t\t\treturn propify(promise.then(resolve, reject), initialValue)\r\n\t\t}\r\n\r\n\t\tprop[\"catch\"] = prop.then.bind(null, null)\r\n\t\treturn prop\r\n\t}\r\n\t// Promiz.mithril.js | Zolmeister | MIT\r\n\t// a modified version of Promiz.js, which does not conform to Promises/A+\r\n\t// for two reasons:\r\n\t//\r\n\t// 1) `then` callbacks are called synchronously (because setTimeout is too\r\n\t//    slow, and the setImmediate polyfill is too big\r\n\t//\r\n\t// 2) throwing subclasses of Error cause the error to be bubbled up instead\r\n\t//    of triggering rejection (because the spec does not account for the\r\n\t//    important use case of default browser error handling, i.e. message w/\r\n\t//    line number)\r\n\r\n\tvar RESOLVING = 1\r\n\tvar REJECTING = 2\r\n\tvar RESOLVED = 3\r\n\tvar REJECTED = 4\r\n\r\n\tfunction Deferred(onSuccess, onFailure) {\r\n\t\tvar self = this\r\n\t\tvar state = 0\r\n\t\tvar promiseValue = 0\r\n\t\tvar next = []\r\n\r\n\t\tself.promise = {}\r\n\r\n\t\tself.resolve = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = RESOLVING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.reject = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = REJECTING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.promise.then = function (onSuccess, onFailure) {\r\n\t\t\tvar deferred = new Deferred(onSuccess, onFailure)\r\n\r\n\t\t\tif (state === RESOLVED) {\r\n\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t} else if (state === REJECTED) {\r\n\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t} else {\r\n\t\t\t\tnext.push(deferred)\r\n\t\t\t}\r\n\r\n\t\t\treturn deferred.promise\r\n\t\t}\r\n\r\n\t\tfunction finish(type) {\r\n\t\t\tstate = type || REJECTED\r\n\t\t\tnext.map(function (deferred) {\r\n\t\t\t\tif (state === RESOLVED) {\r\n\t\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfunction thennable(then, success, failure, notThennable) {\r\n\t\t\tif (((promiseValue != null && isObject(promiseValue)) ||\r\n\t\t\t\t\tisFunction(promiseValue)) && isFunction(then)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// count protects against abuse calls from spec checker\r\n\t\t\t\t\tvar count = 0\r\n\t\t\t\t\tthen.call(promiseValue, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tsuccess()\r\n\t\t\t\t\t}, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tfailure()\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\tfailure()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnotThennable()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fire() {\r\n\t\t\t// check if it's a thenable\r\n\t\t\tvar then\r\n\t\t\ttry {\r\n\t\t\t\tthen = promiseValue && promiseValue.then\r\n\t\t\t} catch (e) {\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\tpromiseValue = e\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\treturn fire()\r\n\t\t\t}\r\n\r\n\t\t\tif (state === REJECTING) {\r\n\t\t\t\tm.deferred.onerror(promiseValue)\r\n\t\t\t}\r\n\r\n\t\t\tthennable(then, function () {\r\n\t\t\t\tstate = RESOLVING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state === RESOLVING && isFunction(onSuccess)) {\r\n\t\t\t\t\t\tpromiseValue = onSuccess(promiseValue)\r\n\t\t\t\t\t} else if (state === REJECTING && isFunction(onFailure)) {\r\n\t\t\t\t\t\tpromiseValue = onFailure(promiseValue)\r\n\t\t\t\t\t\tstate = RESOLVING\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\treturn finish()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (promiseValue === self) {\r\n\t\t\t\t\tpromiseValue = TypeError()\r\n\t\t\t\t\tfinish()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthennable(then, function () {\r\n\t\t\t\t\t\tfinish(RESOLVED)\r\n\t\t\t\t\t}, finish, function () {\r\n\t\t\t\t\t\tfinish(state === RESOLVING && RESOLVED)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tm.deferred.onerror = function (e) {\r\n\t\tif (type.call(e) === \"[object Error]\" &&\r\n\t\t\t\t!/ Error/.test(e.constructor.toString())) {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tthrow e\r\n\t\t}\r\n\t}\r\n\r\n\tm.sync = function (args) {\r\n\t\tvar deferred = m.deferred()\r\n\t\tvar outstanding = args.length\r\n\t\tvar results = []\r\n\t\tvar method = \"resolve\"\r\n\r\n\t\tfunction synchronizer(pos, resolved) {\r\n\t\t\treturn function (value) {\r\n\t\t\t\tresults[pos] = value\r\n\t\t\t\tif (!resolved) method = \"reject\"\r\n\t\t\t\tif (--outstanding === 0) {\r\n\t\t\t\t\tdeferred.promise(results)\r\n\t\t\t\t\tdeferred[method](results)\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (args.length > 0) {\r\n\t\t\tforEach(args, function (arg, i) {\r\n\t\t\t\targ.then(synchronizer(i, true), synchronizer(i, false))\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdeferred.resolve([])\r\n\t\t}\r\n\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\tfunction identity(value) { return value }\r\n\r\n\tfunction handleJsonp(options) {\r\n\t\tvar callbackKey = options.callbackName || \"mithril_callback_\" +\r\n\t\t\tnew Date().getTime() + \"_\" +\r\n\t\t\t(Math.round(Math.random() * 1e16)).toString(36)\r\n\r\n\t\tvar script = $document.createElement(\"script\")\r\n\r\n\t\tglobal[callbackKey] = function (resp) {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\t\t\toptions.onload({\r\n\t\t\t\ttype: \"load\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tresponseText: resp\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\t\t}\r\n\r\n\t\tscript.onerror = function () {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\r\n\t\t\toptions.onerror({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tstatus: 500,\r\n\t\t\t\t\tresponseText: JSON.stringify({\r\n\t\t\t\t\t\terror: \"Error making jsonp request\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.onload = function () {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.src = options.url +\r\n\t\t\t(options.url.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\r\n\t\t\t(options.callbackKey ? options.callbackKey : \"callback\") +\r\n\t\t\t\"=\" + callbackKey +\r\n\t\t\t\"&\" + buildQueryString(options.data || {})\r\n\r\n\t\t$document.body.appendChild(script)\r\n\t}\r\n\r\n\tfunction createXhr(options) {\r\n\t\tvar xhr = new global.XMLHttpRequest()\r\n\t\txhr.open(options.method, options.url, true, options.user,\r\n\t\t\toptions.password)\r\n\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\r\n\t\t\t\t\toptions.onload({type: \"load\", target: xhr})\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.onerror({type: \"error\", target: xhr})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.serialize === JSON.stringify &&\r\n\t\t\t\toptions.data &&\r\n\t\t\t\toptions.method !== \"GET\") {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\",\r\n\t\t\t\t\"application/json; charset=utf-8\")\r\n\t\t}\r\n\r\n\t\tif (options.deserialize === JSON.parse) {\r\n\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\r\n\t\t}\r\n\r\n\t\tif (isObject(options.headers)) {\r\n\t\t\tfor (var header in options.headers) {\r\n\t\t\t\tif (hasOwn.call(options.headers, header)) {\r\n\t\t\t\t\txhr.setRequestHeader(header, options.headers[header])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isFunction(options.config)) {\r\n\t\t\tvar maybeXhr = options.config(xhr, options)\r\n\t\t\tif (maybeXhr != null) xhr = maybeXhr\r\n\t\t}\r\n\r\n\t\tvar data = options.method === \"GET\" || !options.data ? \"\" : options.data\r\n\r\n\t\tif (data && !isString(data) && data.constructor !== global.FormData) {\r\n\t\t\tthrow new Error(\"Request data should be either be a string or \" +\r\n\t\t\t\t\"FormData. Check the `serialize` option in `m.request`\")\r\n\t\t}\r\n\r\n\t\txhr.send(data)\r\n\t\treturn xhr\r\n\t}\r\n\r\n\tfunction ajax(options) {\r\n\t\tif (options.dataType && options.dataType.toLowerCase() === \"jsonp\") {\r\n\t\t\treturn handleJsonp(options)\r\n\t\t} else {\r\n\t\t\treturn createXhr(options)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bindData(options, data, serialize) {\r\n\t\tif (options.method === \"GET\" && options.dataType !== \"jsonp\") {\r\n\t\t\tvar prefix = options.url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\r\n\t\t\tvar querystring = buildQueryString(data)\r\n\t\t\toptions.url += (querystring ? prefix + querystring : \"\")\r\n\t\t} else {\r\n\t\t\toptions.data = serialize(data)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parameterizeUrl(url, data) {\r\n\t\tif (data) {\r\n\t\t\turl = url.replace(/:[a-z]\\w+/gi, function (token){\r\n\t\t\t\tvar key = token.slice(1)\r\n\t\t\t\tvar value = data[key] || token\r\n\t\t\t\tdelete data[key]\r\n\t\t\t\treturn value\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn url\r\n\t}\r\n\r\n\tm.request = function (options) {\r\n\t\tif (options.background !== true) m.startComputation()\r\n\t\tvar deferred = new Deferred()\r\n\t\tvar isJSONP = options.dataType &&\r\n\t\t\toptions.dataType.toLowerCase() === \"jsonp\"\r\n\r\n\t\tvar serialize, deserialize, extract\r\n\r\n\t\tif (isJSONP) {\r\n\t\t\tserialize = options.serialize =\r\n\t\t\tdeserialize = options.deserialize = identity\r\n\r\n\t\t\textract = function (jsonp) { return jsonp.responseText }\r\n\t\t} else {\r\n\t\t\tserialize = options.serialize = options.serialize || JSON.stringify\r\n\r\n\t\t\tdeserialize = options.deserialize =\r\n\t\t\t\toptions.deserialize || JSON.parse\r\n\t\t\textract = options.extract || function (xhr) {\r\n\t\t\t\tif (xhr.responseText.length || deserialize !== JSON.parse) {\r\n\t\t\t\t\treturn xhr.responseText\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toptions.method = (options.method || \"GET\").toUpperCase()\r\n\t\toptions.url = parameterizeUrl(options.url, options.data)\r\n\t\tbindData(options, options.data, serialize)\r\n\t\toptions.onload = options.onerror = function (ev) {\r\n\t\t\ttry {\r\n\t\t\t\tev = ev || event\r\n\t\t\t\tvar response = deserialize(extract(ev.target, options))\r\n\t\t\t\tif (ev.type === \"load\") {\r\n\t\t\t\t\tif (options.unwrapSuccess) {\r\n\t\t\t\t\t\tresponse = options.unwrapSuccess(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isArray(response) && options.type) {\r\n\t\t\t\t\t\tforEach(response, function (res, i) {\r\n\t\t\t\t\t\t\tresponse[i] = new options.type(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (options.type) {\r\n\t\t\t\t\t\tresponse = new options.type(response)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.resolve(response)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (options.unwrapError) {\r\n\t\t\t\t\t\tresponse = options.unwrapError(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.reject(response)\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdeferred.reject(e)\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t} finally {\r\n\t\t\t\tif (options.background !== true) m.endComputation()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tajax(options)\r\n\t\tdeferred.promise = propify(deferred.promise, options.initialValue)\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\treturn m\r\n}); // eslint-disable-line\r\n","import 'utils/polyfills';\nimport 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\nimport pikaday from 'pikaday';\nimport m from 'mithril';\nwindow.m = m;\nwindow.Pikaday = pikaday;\n","export let checkStatus = response => {\n\n    if (response.status >= 200 && response.status < 300) {\n        return response;\n    }\n\n    let error = new Error(response.statusText);\n\n    error.response = response;\n\n    throw error;\n};\n\nexport let checkFullStatus = response => {\n    if (response.status >= 200 && response.status < 300) {\n        return response;\n    }\n    throw response;\n};\n\nexport let toJSON = response => response\n    .json()\n    .catch( );\n\n// extract info from status error\nexport let catchJSON = err => (err.response ? err.response.json() : Promise.reject())\n    .catch(() => Promise.reject(err))\n    .then(json => Promise.reject(json));\n\n\nexport function fetchVoid(url, options = {}){\n    let opts = Object.assign({\n        credentials: 'include',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n    }, options);\n\n    opts.body = JSON.stringify(options.body);\n    return fetch(url, opts)\n        .then(checkStatus)\n        .catch(catchJSON);\n}\n\nexport function fetchFullJson(url, options = {}){\n    let opts = Object.assign({\n        credentials: 'same-origin',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n    }, options);\n\n    opts.body = JSON.stringify(options.body);\n    return fetch(url, opts)\n        .then(checkFullStatus)\n        .then(toJSON)\n        .catch();\n}\n\nexport function fetchJson(url, options){\n    return fetchVoid(url, options)\n        .then(toJSON);\n}\n\nexport function fetchText(url, options){\n    return fetchVoid(url, options)\n        .then(response => response.text());\n}\n\nexport function fetchUpload(url, options){\n    const opts = Object.assign({\n        credentials: 'same-origin'\n    }, options);\n\n    return fetch(url, opts)\n        .then(checkStatus)\n        .then(toJSON)\n        .catch(catchJSON);\n}\n","/**/\n// const urlPrefix = 'http://app-prod-03.implicit.harvard.edu/openserver'; // first pathname section with slashes\n\n// const urlPrefix = window.location.origin; // first pathname section with slashes\n\nconst urlPrefix = '..';//location.pathname.match(/^(?=\\/)(.+?\\/|$)/)[1]; // first pathname section with slashes\n\n\n// console.log(location.href);\nexport const baseUrl            = `${urlPrefix}`;\nexport const studyUrl           = `${urlPrefix}/studies`;\nexport const launchUrl          = `${urlPrefix}/launch`;\nexport const templatesUrl       = `${urlPrefix}/templates`;\nexport const tagsUrl            = `${urlPrefix}/tags`;\nexport const translateUrl       = `${urlPrefix}/translate`;\nexport const poolUrl            = `${urlPrefix}/StudyData`;\nexport const statisticsUrl      = `${urlPrefix}/PITracking`;\nexport const downloadsUrl       = `${urlPrefix}/DashboardData`;\nexport const activationUrl      = `${urlPrefix}/activation`;\nexport const collaborationUrl   = `${urlPrefix}/collaboration`;\nexport const downloadsAccessUrl = `${urlPrefix}/DownloadsAccess`;\n","// import $ from 'jquery';\nlet Pikaday = window.Pikaday;\n\nexport let datePicker = (prop, options) => m.component(pikaday, {prop,options});\nexport let dateRangePicker = args => m.component(pikadayRange, args);\n\nlet pikaday = {\n    view(ctrl, {prop, options}){\n        return m('div', {config: pikaday.config(prop, options)});\n    },\n    config(prop, options){\n        return (element, isInitialized, ctx) => {\n            if (!isInitialized){\n                ctx.picker = new Pikaday(Object.assign({\n                    onSelect: prop,\n                    container: element\n                },options));\n\n                element.appendChild(ctx.picker.el);\n            }\n\n            ctx.picker.setDate(prop());\n        };\n    }\n};\n\n/**\n * args = {\n *  startValue: m.prop,\n *  endValue: m.prop,\n *  options: Object // specific daterange plugin options\n * }\n */\n\nlet pikadayRange = {\n    view: function(ctrl, args){\n        return m('.row.form-group.date-range', {config: pikadayRange.config(args)}, [\n            m('.col-sm-6', [\n                m('label','Start Date'),\n                m('label.input-group',[\n                    m('.input-group-addon', m('i.fa.fa-fw.fa-calendar')),\n                    m('input.form-control')\n                ])\n            ]),\n            m('.col-sm-6', [\n                m('label','End Date'),\n                m('label.input-group',[\n                    m('.input-group-addon', m('i.fa.fa-fw.fa-calendar')),\n                    m('input.form-control')\n                ])\n            ])\n        ]);\n    },\n    config({startDate, endDate}){\n        return (element, isInitialized, ctx) => {\n            let startPicker = ctx.startPicker;\n            let endPicker = ctx.endPicker;\n\n            if (!isInitialized) setup();\n\n            // external date change\n            if (!areDatesEqual(startDate, startPicker) || !areDatesEqual(endDate, endPicker)) update(); \n\n            function setup(){\n                let startElement = element.children[0].children[1].children[1];\n                startPicker = ctx.startPicker = new Pikaday({\n                    onSelect: onSelect(startDate),\n                    field: startElement \n                });\n                startElement.addEventListener('keyup', onKeydown(startPicker));\n                \n                let endElement = element.children[1].children[1].children[1];\n                endPicker = ctx.endPicker = new Pikaday({\n                    onSelect: onSelect(endDate),\n                    field: endElement\n                });\n                endElement.addEventListener('keyup', onKeydown(endPicker));\n\n                startPicker.setDate(startDate());\n                endPicker.setDate(endDate());\n\n                ctx.onunload = () => {\n                    startPicker.destroy();\n                    endPicker.destroy();\n                };\n            }\n\n            function onKeydown(picker){\n                return e => {\n                    if (e.keyCode === 13 && picker.isVisible()) e.stopPropagation();\n                    if (e.keyCode === 27 && picker.isVisible()) {\n                        e.stopPropagation();\n                        picker.hide();\n                    }\n                };\n            }\n\n            function onSelect(prop){\n                return date => {\n                    prop(date); // update start/end\n\n                    update();\n                    m.redraw();\n                };\n            }\n\n            function update(){\n                startPicker.setDate(startDate(),true);\n                endPicker.setDate(endDate(),true);\n\n                startPicker.setStartRange(startDate());\n                startPicker.setEndRange(endDate());\n                endPicker.setStartRange(startDate());\n                endPicker.setEndRange(endDate());\n                startPicker.setMaxDate(endDate());\n                endPicker.setMinDate(startDate());\n            }\n\n            function areDatesEqual(prop, picker){\n                return prop().getTime() === picker.getDate().getTime();\n            }\n        };\n    }\n};\n","export default inputWrapper;\nlet inputWrapper = (view) => (ctrl, args) => {\n    let isValid = !ctrl.validity || ctrl.validity();\n    let groupClass;\n    let inputClass;\n    let form = args.form;\n    let colWidth = args.colWidth || 2;\n\n    if (!form) throw new Error('Inputs require a form');\n        \n    if (form.showValidation()){\n        groupClass = isValid ? 'has-success' : 'has-danger';\n        inputClass = isValid ? 'form-control-success' : 'form-control-error';\n    }\n\n    return m('.form-group.row', {class: groupClass}, [\n        args.isStack\n            ? [ \n                m('.col-sm-12', [\n                    args.label != null ? m('label', {class: 'strong'}, args.label) : '',\n                    view(ctrl, args, {groupClass, inputClass}),\n                    args.help && m('small.text-muted.m-y-0', args.help )\n                ])\n            ]\n            : [\n                m(`.col-sm-${colWidth}`, [\n                    m('label.form-control-label', args.label)\n                ]),\n                m(`.col-sm-${12 - colWidth}`, [\n                    view(ctrl, args, {groupClass, inputClass})\n                ]),\n                args.help && m('small.text-muted.col-sm-offset-2.col-sm-10.m-y-0', args.help )\n            ]\n    ]);\n};\n","import inputWrapper from './inputWrapper';\nexport default textInputComponent;\n\nconst textInputComponent  = {\n    controller({prop, form, required = false}) {\n        let validity = () => !required || prop().length;\n        form.register(validity);\n\n        return {validity};\n    },\n\n    view: inputWrapper((ctrl, {prop, isArea = false, isFirst = false, placeholder = '', rows = 3}, {inputClass}) => {\n        return !isArea\n            ? m('input.form-control', {\n                class: inputClass,\n                placeholder: placeholder,\n                value: prop(),\n                oninput: m.withAttr('value', prop),\n                config: (element, isInit) => isFirst && isInit && element.focus()\n            })\n            : m('textarea.form-control', {\n                class: inputClass,\n                placeholder: placeholder,\n                oninput: m.withAttr('value', prop),\n                rows,\n                config: (element, isInit) => isFirst && isInit && element.focus()\n            } , [prop()]);\n    })\n};\n","import inputWrapper from './inputWrapper';\nexport default maybeInputComponent;\n\nlet  maybeInputComponent = {\n    controller({prop, form, required, dflt}){\n        if (!form) throw new Error('Inputs require a form');\n\n        let text = m.prop(typeof prop() == 'boolean' ? dflt || '' : prop());\n        let checked = m.prop(!!prop()); \n        let validity = () => !required || prop();\n        form.register(validity);\n\n        return {validity, showValidation: form.showValidation,\n            text: function(value){\n                if (arguments.length){\n                    text(value);\n                    prop(value || true);\n                }\n                return text();\n            },\n            checked: function(value){\n                if (arguments.length) {\n                    checked(value);\n                    if (checked() && text()) prop(text());\n                    else prop(checked());\n                }\n                return checked();\n            }   \n        };\n    },\n    view: inputWrapper(({text, checked}, args) => {\n        let placeholder = args.placeholder || '';\n        return m('.input-group', [\n            m('span.input-group-addon', [\n                m('input', {\n                    type:'checkbox',\n                    onclick: m.withAttr('checked', checked),\n                    checked: checked()\n                })\n            ]),\n            m('input.form-control', {\n                placeholder: placeholder,\n                value: text(),\n                oninput: m.withAttr('value', text),\n                disabled: !checked()\n            })\n        ]);\n    })\n};\n","import inputWrapper from './inputWrapper';\nexport default checkboxInputComponent;\n\nlet  checkboxInputComponent = {\n    controller({prop, form, required}){\n        let validity = () => !required || prop();\n        form.register(validity);\n\n        return {validity, showValidation: form.showValidation};\n    },\n    view: inputWrapper((ctrl, {prop, description = ''}, {groupClass, inputClass}) => {\n        return m('.checkbox.checkbox-input-group', {class: groupClass}, [\n            m('label.c-input.c-checkbox', {class: inputClass}, [\n                m('input.form-control', {\n                    type: 'checkbox',\n                    onclick: m.withAttr('checked', prop),\n                    checked: prop()\n                }),\n                m('span.c-indicator'),\n                m.trust('&nbsp;'),\n                description\n            ])\n        ]);\n    })\n};\n","import inputWrapper from './inputWrapper';\nexport default selectInputComponent;\n\nlet selectInputComponent = {\n    controller({prop, form, required}){\n        if (!form) throw new Error('Inputs require a form');\n\n        let validity = () => !required || prop();\n        form.register(validity);\n\n        return {validity, showValidation: form.showValidation};\n    },\n    view: inputWrapper((ctrl, {prop, isFirst = false, values = {}}, {inputClass}) => {\n        const value = prop();\n        return m('.input-group', [\n            m('select.c-select.form-control', {\n                class: inputClass, \n                onchange: e => prop(values[e.target.value]),\n                config: (element, isInit) => isFirst && isInit && element.focus()\n            }, Object.keys(values).map(key => m('option', {selected:value === values[key]}, key)))\n        ]);\n    })\n};\n\n","import inputWrapper from './inputWrapper';\nexport default selectInputComponent;\n\nlet selectInputComponent = {\n    controller({prop, form, required}){\n        if (!form) throw new Error('Inputs require a form');\n\n        let validity = () => !required || prop();\n        form.register(validity);\n\n        return {validity, showValidation: form.showValidation};\n    },\n    view: inputWrapper((ctrl, {prop, values = {}}) => {\n        const keys = Object.keys(values);\n        if (keys.length === 1)\n            prop(values[keys[0]]);\n        return m('.c-inputs-stacked', keys\n            .map(key => m('label.c-input.c-radio', [\n                m('input', {type:'radio', checked: values[key] === prop(), onchange: prop.bind(null, values[key])}),\n                m('span.c-indicator'),\n                key\n            ])));\n    })\n};\n\n","import textInputComponent from './forms/textInput';\nimport maybeInputComponent from './forms/maybeInput';\nimport checkboxInputComponent from './forms/checkboxInput';\nimport selectInputComponent from './forms/selectInput';\nimport arrayInputSrc from './forms/arrayInput';\nimport radioInputComponent from './forms/radioInput';\n\nexport function formFactory(){\n    let validationHash = [];\n    return {\n        register(fn){\n            validationHash.push(fn);\n        },\n        isValid() {\n            return validationHash.every(fn => fn.call());\n        },\n        showValidation: m.prop(false)\n    };\n}\n\nexport let textInput = args => m.component(textInputComponent, args);\nexport let maybeInput = args => m.component(maybeInputComponent, args);\nexport let checkboxInput = args => m.component(checkboxInputComponent, args);\nexport let selectInput = args => m.component(selectInputComponent, args);\nexport let radioInput = args => m.component(radioInputComponent, args);\nexport let arrayInput = arrayInputSrc;\n","import textInputComponent from './textInput';\nimport transformProp from 'utils/transformProp';\nexport default arrayInput;\n\nlet arrayInput = args => {\n    let identity = arg => arg;\n    let fixedArgs = Object.assign(args);\n    fixedArgs.prop = transformProp({\n        prop: args.prop,\n        output: arr => arr.map(args.fromArr || identity).join('\\n'),\n        input: str => str === '' ? [] : str.replace(/\\n*$/, '').split('\\n').map(args.toArr || identity)\n    });\n\n    return m.component(textInputComponent, fixedArgs);\n};\n\n","export default transformProp;\n\n/**\n * TransformedProp transformProp(Prop prop, Map input, Map output)\n * \n * where:\n *  Prop :: m.prop\n *  Map  :: any Function(any)\n *\n *  Creates a Transformed prop that pipes the prop through transformation functions.\n **/\nlet transformProp = ({prop, input, output}) => {\n    let p = (...args) => {\n        if (args.length) prop(input(args[0]));\n        return output(prop());\n    };\n\n    p.toJSON = () => output(prop());\n\n    return p;\n};\n","import {dateRangePicker} from 'utils/dateRange';\nimport {formFactory, textInput, selectInput} from 'utils/formHelpers';\nexport default statisticsForm;\n\nlet statisticsForm = args => m.component(statisticsFormComponent, args);\nconst colWidth = 3;\nconst SOURCES = {\n    'Research pool - Current studies'   : 'Pool:Current',\n    //    'Research pool - Past studies'      : 'Research:History',\n    'All research - Pool and lab'       : 'Research:Any',\n    'Demo studies'                      : 'Demo:Any',\n    'All studies'                       : 'Both:Any'\n};\n\nlet statisticsFormComponent = {\n    controller(){\n        let form = formFactory();\n\n        return {form};\n    },\n    view({form}, {query}){\n        return m('.col-sm-12', [\n            selectInput({label: 'Source', prop: query.source, values: SOURCES, form, colWidth}),\n            textInput({label:'Study', prop: query.study , form, colWidth}),\n            m('div', {style: 'padding: .375rem'},\n                [\n                    dateRangePicker({startDate:query.startDate, endDate: query.endDate})\n                    ,m('small.text-muted',  'The data for the study statistics by day is saved in 24 hour increments by date in USA eastern time (EST).')\n                ]\n            ),\n\n            m('.form-group.row', [\n                m('.col-sm-3', [\n                    m('label.form-control-label', 'Show by')\n                ]),\n                m('.col-sm-9.pull-right', [\n                    m('.btn-group.btn-group-sm', [\n                        button(query.sortstudy, 'Study'),\n                        button(query.sorttask, 'Task'),\n                        m('a.btn.btn-secondary.statistics-time-button', {class: query.sorttime() !== 'All' ? 'active' : ''}, [\n                            'Time',\n                            m('.time-card', [\n                                m('.card', [\n                                    m('.card-header', 'Time filter'),\n                                    m('.card-block.c-inputs-stacked', [\n                                        radioButton(query.sorttime, 'None'),\n                                        radioButton(query.sorttime, 'Days'),\n                                        radioButton(query.sorttime, 'Weeks'),\n                                        radioButton(query.sorttime, 'Months'),\n                                        radioButton(query.sorttime, 'Years')\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    m('.btn-group.btn-group-sm.pull-right', [\n                        button(query.showEmpty, 'Hide Empty', 'Hide Rows with Zero Started Sessions'),\n                        button(query.sortgroup, 'Show Data Group')\n\n                    ])\n                ])\n            ]),\n            m('.form-group.row', [\n                m('.col-sm-3', [\n                    m('label.form-control-label', 'Compute completions')\n                ]),\n                m('.col-sm-9', [\n                    m('.row', [\n                        m('.col-sm-5', [\n                            m('input.form-control', {placeholder: 'First task', value: query.firstTask(), onchange: m.withAttr('value', query.firstTask)})\n                        ]),\n                        m('.col-sm-1', [\n                            m('.form-control-static', 'to')\n                        ]),\n                        m('.col-sm-5', [\n                            m('input.form-control', {placeholder: 'Last task', value: query.lastTask(), onchange: m.withAttr('value', query.lastTask)})\n                        ])\n                    ])\n                ])\n            ])\n        ]);\n    \n    \n    }\n};\n\nlet button = (prop, text, title = '') => m('a.btn.btn-secondary', {\n    class: prop() ? 'active' : '',\n    onclick: () => prop(!prop()),\n    title\n}, text);\n\nlet radioButton = (prop, text) => m('label.c-input.c-radio', [\n    m('input.form-control[type=radio]', {\n        onclick: prop.bind(null, text),\n        checked: prop() == text\n    }),\n    m('span.c-indicator'),\n    text\n]);\n","export default function sortTable(listProp, sortByProp) {\n    return function(e) {\n        let prop = e.target.getAttribute('data-sort-by');\n        let list = listProp();\n        if (prop) {\n            if (typeof sortByProp == 'function') sortByProp(prop); // record property so that we can change style accordingly\n            let first = list[0];\n            list.sort(function(a, b) {\n                return a[prop] > b[prop] ? 1 : a[prop] < b[prop] ? -1 : 0;\n            });\n            if (first === list[0]) list.reverse();\n        }\n    };\n}\n","export default function formatDate(date){\n    let pad = num => num < 10 ? '0' + num : num;\n    return `${pad(date.getMonth() + 1)}\\\\${pad(date.getDate())}\\\\${date.getFullYear()}`;\n}\n","import sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\n\nexport default statisticsTable;\n\nlet statisticsTable = args => m.component(statisticsTableComponent, args);\n\nlet statisticsTableComponent = {\n    controller(){\n        return {sortBy: m.prop()};\n    },\n    view({sortBy}, {tableContent, query}){\n        if (query.error())\n            return m('.alert.alert-warning', m('strong', 'Error: '), query.error());\n        let content = tableContent();\n        if (!content) return m('div');\n        if (!content.data) return m('.col-sm-12', [\n            m('.alert.alert-info', 'There was no data found for this request')\n        ]);\n\n        let list = m.prop(content.data);\n        return m('.col-sm-12',[\n            m('table.table.table-sm', {onclick: sortTable(list, sortBy)}, [\n                m('thead', [\n                    m('tr.table-default', [\n                        th_option(sortBy, 'studyName', 'Study Name'),\n                        !query.sorttask_sent() ? '' : th_option(sortBy, 'taskName', 'Task Name'),\n                        query.sorttime_sent()==='All' ? '' : th_option(sortBy, 'date', 'Date'),\n                        th_option(sortBy, 'starts', 'Starts'),\n                        th_option(sortBy, 'completes', 'Completes'),\n                        th_option(sortBy, 'completion_rate', 'Completion Rate %'),\n                        !query.sortgroup() ? '' : th_option(sortBy, 'schema', 'Schema')\n                    ])\n                ]),\n                m('tbody', [\n                    list().map(row =>\n                        query.showEmpty() && row.starts===0\n                            ?\n                            ''\n                            :\n                            m('tr.table-default', [\n                                m('td', row.studyName),\n                                !query.sorttask_sent() ? '' : m('td', row.taskName),\n                                query.sorttime_sent()==='All' ? '' : m('td', formatDate(new Date(row.date))),\n                                m('td', row.starts),\n                                m('td', row.completes),\n                                m('td', row.completion_rate = row.starts===0 ? 0 : (row.completes/row.starts).toFixed(2)),\n                                !query.sortgroup() ? '' : m('td', row.schema)\n                            ])\n                    )\n                ])\n            ])\n        ]);\n    }\n};\n\nlet th_option = (sortBy, sortByTxt, text) => m('th', {\n    'data-sort-by':sortByTxt, class: sortBy() === sortByTxt ? 'active' : ''\n}, text);\n\n","import {getStatistics} from './statisticsModel';\nimport statisticsForm from './statisticsFormComponent';\nimport statisticsTable from './statisticsTableComponent';\nimport statisticsInstructions from './instructions';\nexport default statisticsComponent;\n\nlet statisticsComponent = {\n    controller(){\n        let displayHelp = m.prop(false);\n        let tableContent = m.prop('');\n\n        let loading = m.prop(false);\n        let query = {\n            source: m.prop('Pool:Current'),\n            startDate: m.prop(firstDayInPreviousMonth(new Date())),\n            endDate: m.prop(new Date()),\n            study: m.prop(''),\n            task: m.prop(''),\n            studyType: m.prop('Both'),\n            studydb: m.prop('Any'),\n            sortstudy: m.prop(true),\n            sorttask: m.prop(false),\n            sorttask_sent: m.prop(false),\n            sortgroup: m.prop(false),\n            sorttime: m.prop('None'),\n            sorttime_sent: m.prop('None'),\n            showEmpty: m.prop(false),\n            firstTask: m.prop(''),\n            lastTask: m.prop(''),\n            error: m.prop(''),\n            rows:m.prop([])\n        };\n\n        return {query, submit, displayHelp, tableContent,loading};\n\n        function submit(){\n            loading(true);\n            getStatistics(query)\n                .then(tableContent)\n                .catch(response => {\n                    query.error(response.message);\n                })\n                .then(loading.bind(null, false))\n                .then(query.sorttask_sent(query.sorttask()))\n                .then(query.sorttime_sent(query.sorttime()))\n                .then(m.redraw);\n        }\n\n        function firstDayInPreviousMonth(yourDate) {\n            return new Date(yourDate.getFullYear(), yourDate.getMonth() - 1, 1);\n        }\n    },\n    view: ({query, tableContent, submit, displayHelp, loading}) => m('.container.statistics', [\n        m('h3', 'Statistics'),\n        m('.row', [\n            statisticsForm({query})\n        ]),\n        m('.row', [\n            m('.col-sm-12',[\n                m('button.btn.btn-secondary.btn-sm', {onclick: ()=>displayHelp(!displayHelp())}, ['Toggle help ', m('i.fa.fa-question-circle')]),\n                m('a.btn.btn-primary.pull-right', {onclick:submit}, 'Submit'),\n                !tableContent()  ? '' : m('a.btn.btn-secondary.pull-right.m-r-1', {config:downloadFile(query.study() ? `${query.study()}.csv` : 'stats.csv', tableContent(), query)}, 'Download CSV')\n            ])\n        ]),\n        !displayHelp() ? '' : m('.row', [\n            m('.col-sm-12.p-a-2', statisticsInstructions())\n        ]),\n        m('.row.m-t-1', [\n            loading()\n                ? m('.loader')\n                : statisticsTable({tableContent, query})\n        ])\n    ])\n};\n\nlet downloadFile = (filename, text, query) => element => {\n    let json = text.data;\n    json = !query.showEmpty() ? json : json.filter(row => row.starts !== 0);\n\n    let fields = ['studyName', !query.sorttask_sent() ? '' : 'taskName', query.sorttime_sent()==='All' ? '' : 'date', 'starts', 'completes', !query.sortgroup() ? '' : 'schema'].filter(n => n);\n\n    let replacer = function(key, value) { return value === null ? '' : value;};\n    let csv = json.map(function(row){\n        return fields.map(function(fieldName){\n            return JSON.stringify(row[fieldName], replacer);\n        }).join(',');\n    });\n    csv.unshift(fields.join(',')); // add header column\n\n\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(csv.join('\\r\\n') ));\n    element.setAttribute('download', filename);\n};\n","import {fetchJson} from 'utils/modelHelpers';\nimport {statisticsUrl as STATISTICS_URL} from 'modelUrls';\n\nexport let getStatistics = query => {\n    return fetchJson(STATISTICS_URL, {method:'post', body: parseQuery(query)})\n        .then(response => {\n            return response;\n        });\n\n    /**\n     * Parses the query as we build it locally and creates an appropriate post for the server\n     **/\n    function parseQuery({source, study, sortstudy, sorttask, sorttime, startDate, endDate, firstTask, lastTask}){\n        let post = {\n            schema: source().match(/^(.*?):/)[1], // before colon\n            studyId: study(),\n            startDate: parseDate(startDate()),\n            endDate: parseDate(endDate()),\n            startTask: firstTask(),\n            sorttask: sorttask(),\n            sortstudy: sortstudy(),\n            endTask: lastTask(),\n            timeframe: sorttime()==='None' ? 'All' : sorttime(),\n            extended:sorttask()\n        };\n        return post;\n\n        function parseDate(date){\n            if (!date) return;\n            return `${date.getMonth()+1}/${date.getDate()}/${date.getYear() + 1900}`;\n        }\n    } \n};\n\n\n/* eslint-disable */\n\n// ref: http://stackoverflow.com/a/1293163/2343\n// This will parse a delimited string into an array of\n// arrays. The default delimiter is the comma, but this\n// can be overriden in the second argument.\nfunction CSVToArray( strData, strDelimiter ){\n    // Check to see if the delimiter is defined. If not,\n    // then default to comma.\n    strDelimiter = (strDelimiter || \",\");\n\n    // Create a regular expression to parse the CSV values.\n    var objPattern = new RegExp(\n        (\n            // Delimiters.\n            \"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n            // Quoted fields.\n            \"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n            // Standard fields.\n            \"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]*))\"\n        ),\n        \"gi\"\n        );\n\n\n    // Create an array to hold our data. Give the array\n    // a default empty first row.\n    var arrData = [[]];\n\n    // Create an array to hold our individual pattern\n    // matching groups.\n    var arrMatches = null;\n\n\n    // Keep looping over the regular expression matches\n    // until we can no longer find a match.\n    while (arrMatches = objPattern.exec( strData )){\n\n        // Get the delimiter that was found.\n        var strMatchedDelimiter = arrMatches[ 1 ];\n\n        // Check to see if the given delimiter has a length\n        // (is not the start of string) and if it matches\n        // field delimiter. If id does not, then we know\n        // that this delimiter is a row delimiter.\n        if (\n            strMatchedDelimiter.length &&\n            strMatchedDelimiter !== strDelimiter\n            ){\n\n            // Since we have reached a new row of data,\n            // add an empty row to our data array.\n            arrData.push( [] );\n\n        }\n\n        var strMatchedValue;\n\n        // Now that we have our delimiter out of the way,\n        // let's check to see which kind of value we\n        // captured (quoted or unquoted).\n        if (arrMatches[ 2 ]){\n\n            // We found a quoted value. When we capture\n            // this value, unescape any double quotes.\n            strMatchedValue = arrMatches[ 2 ].replace(\n                new RegExp( \"\\\"\\\"\", \"g\" ),\n                \"\\\"\"\n                );\n\n        } else {\n\n            // We found a non-quoted value.\n            strMatchedValue = arrMatches[ 3 ];\n\n        }\n\n\n        // Now that we have our value string, let's add\n        // it to the data array.\n        arrData[ arrData.length - 1 ].push( strMatchedValue );\n    }\n\n    // Return the parsed data.\n    return( arrData );\n}\n/* eslint-enable */\n","export default statisticsInstructions;\n\nlet statisticsInstructions = () => m('.text-muted', [\n    m('p', 'Choose whether you want participation data from demo studies, research pool, all research studies (including lab studies), or all studies (demo and research).'),\n    m('p', 'Enter the study id or any part of the study id (the study name that that appears in an .expt file). Note that the study id search feature is case-sensitive. If you leave this box blank you will get data from all studies.'),\n    m('p', 'You can also use the Task box to enter a task name or part of a task name (e.g., realstart) if you only want participation data from certain tasks.'),\n    m('p', 'You can also choose how you want the data displayed, using the \"Show by\" options. If you click \"Study\", you will see data from each study that meets your search criteria. If you also check \"Task\" you will see data from any study that meets your search criteria separated by task.  The \"Data Group\" option will allow you to see whether a given study is coming from the demo or research site.  '),\n    m('p', 'You can define how completion rate is calculated by entering text to \"First task\" and \"Last task\". Only sessions that visited those tasks would be used for the calculation.'),\n    m('p', 'When you choose to show the results by date, you will see all the studies that have at least one session in the requested date range, separated by day, week, month or year. This will also show dates with zero sessions. If you want to hide rows with zero sessions, select the \"Hide empty\" option.')\n]);\n","import {fetchText} from 'utils/modelHelpers';\nimport {statisticsUrl as STATISTICS_URL} from 'modelUrls';\n\nexport let getStatistics = query => {\n    return fetchText(STATISTICS_URL, {method:'post', body: parseQuery(query)})\n        .then(response => {\n            let csv = response ? CSVToArray(response) : [[]];\n            return {\n                study: query.study(),\n                file: response,\n                headers: csv.shift(),\n                data: csv,\n                query: Object.assign(query) // clone the query so that we can get back to it in the future\n            };\n        });\n\n    /**\n     * Parses the query as we build it locally and creates an appropriate post for the server\n     **/\n    function parseQuery({source, study, task, sortstudy, sorttask, sortgroup, sorttime, showEmpty, startDate, endDate, firstTask, lastTask}){\n        let baseUrl = `${location.origin}/implicit`;\n        let post = {\n            db: source().match(/^(.*?):/)[1], // before colon\n            current: source().match(/:(.*?)$/)[1], // after colon\n            testDB:'newwarehouse',\n            study: study(),\n            task: task(),\n            since: parseDate(startDate()),\n            until: parseDate(endDate()),\n            refresh: 'no',\n            startTask: firstTask(),\n            endTask: lastTask(),\n            filter:'',\n            studyc:sortstudy(),\n            taskc:sorttask(),\n            datac:sortgroup(),\n            timec:sorttime() !== 'None',\n            dayc:sorttime() === 'Days',\n            weekc:sorttime() === 'Weeks',\n            monthc:sorttime() === 'Months',\n            yearc:sorttime() === 'Years',\n            method:'3',\n            cpath:'',\n            hpath:'',\n            tasksM:'3',\n            threads:'yes',\n            threadsNum:'1',\n            zero: showEmpty(),\n            curl:`${baseUrl}/research/library/randomStudiesConfig/RandomStudiesConfig.xml`,\n            hurl:`${baseUrl}/research/library/randomStudiesConfig/HistoryRand.xml`,\n            baseURL:baseUrl\n        };\n        return post;\n\n        function parseDate(date){\n            if (!date) return;\n            return `${date.getMonth()+1}/${date.getDate()}/${date.getYear() + 1900}`;\n        }\n    } \n};\n\n\n/* eslint-disable */\n\n// ref: http://stackoverflow.com/a/1293163/2343\n// This will parse a delimited string into an array of\n// arrays. The default delimiter is the comma, but this\n// can be overriden in the second argument.\nfunction CSVToArray( strData, strDelimiter ){\n    // Check to see if the delimiter is defined. If not,\n    // then default to comma.\n    strDelimiter = (strDelimiter || \",\");\n\n    // Create a regular expression to parse the CSV values.\n    var objPattern = new RegExp(\n        (\n            // Delimiters.\n            \"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n            // Quoted fields.\n            \"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n            // Standard fields.\n            \"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]*))\"\n        ),\n        \"gi\"\n        );\n\n\n    // Create an array to hold our data. Give the array\n    // a default empty first row.\n    var arrData = [[]];\n\n    // Create an array to hold our individual pattern\n    // matching groups.\n    var arrMatches = null;\n\n\n    // Keep looping over the regular expression matches\n    // until we can no longer find a match.\n    while (arrMatches = objPattern.exec( strData )){\n\n        // Get the delimiter that was found.\n        var strMatchedDelimiter = arrMatches[ 1 ];\n\n        // Check to see if the given delimiter has a length\n        // (is not the start of string) and if it matches\n        // field delimiter. If id does not, then we know\n        // that this delimiter is a row delimiter.\n        if (\n            strMatchedDelimiter.length &&\n            strMatchedDelimiter !== strDelimiter\n            ){\n\n            // Since we have reached a new row of data,\n            // add an empty row to our data array.\n            arrData.push( [] );\n\n        }\n\n        var strMatchedValue;\n\n        // Now that we have our delimiter out of the way,\n        // let's check to see which kind of value we\n        // captured (quoted or unquoted).\n        if (arrMatches[ 2 ]){\n\n            // We found a quoted value. When we capture\n            // this value, unescape any double quotes.\n            strMatchedValue = arrMatches[ 2 ].replace(\n                new RegExp( \"\\\"\\\"\", \"g\" ),\n                \"\\\"\"\n                );\n\n        } else {\n\n            // We found a non-quoted value.\n            strMatchedValue = arrMatches[ 3 ];\n\n        }\n\n\n        // Now that we have our value string, let's add\n        // it to the data array.\n        arrData[ arrData.length - 1 ].push( strMatchedValue );\n    }\n\n    // Return the parsed data.\n    return( arrData );\n}\n/* eslint-enable */\n","import {dateRangePicker} from 'utils/dateRange';\nimport {formFactory, textInput, selectInput} from 'utils/formHelpers';\nexport default statisticsForm;\n\nlet statisticsForm = args => m.component(statisticsFormComponent, args);\nconst colWidth = 3;\nconst SOURCES = {\n    'Research pool - Current studies'   : 'Research:Current',\n    //    'Research pool - Past studies'      : 'Research:History',\n    'All research - Pool and lab'       : 'Research:Any',\n    'Demo studies'                      : 'Demo:Any',\n    'All studies'                       : 'Both:Any'\n};\n\nlet statisticsFormComponent = {\n    controller(){\n        let form = formFactory();\n\n        return {form};\n    },\n    view({form}, {query}){\n        return m('.col-sm-12', [\n            selectInput({label: 'Source', prop: query.source, values: SOURCES, form, colWidth}),\n            textInput({label:'Study', prop: query.study , form, colWidth}),\n            textInput({label:'Task', prop: query.task , form, colWidth}),\n            m('div', {style: 'padding: .375rem .75rem'}, dateRangePicker({startDate:query.startDate, endDate: query.endDate})),\n            m('.form-group.row', [\n                m('.col-sm-3', [\n                    m('label.form-control-label', 'Show by')\n                ]),\n                m('.col-sm-9.pull-right', [\n                    m('.btn-group.btn-group-sm', [\n                        button(query.sortstudy, 'Study'),\n                        button(query.sorttask, 'Task'),\n                        m('a.btn.btn-secondary.statistics-time-button', {class: query.sorttime() !== 'None' ? 'active' : ''}, [\n                            'Time',\n                            m('.time-card', [\n                                m('.card', [\n                                    m('.card-header', 'Time filter'),\n                                    m('.card-block.c-inputs-stacked', [\n                                        radioButton(query.sorttime, 'None'),\n                                        radioButton(query.sorttime, 'Days'),\n                                        radioButton(query.sorttime, 'Weeks'),\n                                        radioButton(query.sorttime, 'Months'),\n                                        radioButton(query.sorttime, 'Years')\n                                    ])\n                                ])\n                            ])\n                        ]),\n                        button(query.sortgroup, 'Data Group')\n                    ]),\n                    m('.btn-group.btn-group-sm.pull-right', [\n                        button(query.showEmpty, 'Hide empty', 'Hide Rows with Zero Started Sessions')\n                    ])\n                ])\n            ]),\n            m('.form-group.row', [\n                m('.col-sm-3', [\n                    m('label.form-control-label', 'Compute completions')\n                ]),\n                m('.col-sm-9', [\n                    m('.row', [\n                        m('.col-sm-5', [\n                            m('input.form-control', {placeholder: 'First task', value: query.firstTask(), onchange: m.withAttr('value', query.firstTask)})\n                        ]),\n                        m('.col-sm-1', [\n                            m('.form-control-static', 'to')\n                        ]),\n                        m('.col-sm-5', [\n                            m('input.form-control', {placeholder: 'Last task', value: query.lastTask(), onchange: m.withAttr('value', query.lastTask)})\n                        ])\n                    ])\n                ])\n            ])\n        ]);\n    \n    \n    }\n};\n\nlet button = (prop, text, title = '') => m('a.btn.btn-secondary', {\n    class: prop() ? 'active' : '',\n    onclick: () => prop(!prop()),\n    title\n}, text);\n\nlet radioButton = (prop, text) => m('label.c-input.c-radio', [\n    m('input.form-control[type=radio]', {\n        onclick: prop.bind(null, text),\n        checked: prop() == text\n    }),\n    m('span.c-indicator'),\n    text\n]);\n","import sortTable from 'utils/sortTable';\nexport default statisticsTable;\n\nlet statisticsTable = args => m.component(statisticsTableComponent, args);\n\nlet statisticsTableComponent = {\n    controller(){\n        return {sortBy: m.prop()};\n    },\n    view({sortBy}, {tableContent}){\n        let content = tableContent();\n        if (!content) return m('div'); \n        if (!content.file) return m('.col-sm-12', [\n            m('.alert.alert-info', 'There was no data found for this request')            \n        ]);\n\n        let list = m.prop(content.data);\n        \n        return m('.col-sm-12', [\n            m('table.table.table-sm', {onclick: sortTable(list, sortBy)}, [\n                m('thead', [\n                    m('tr.table-default', tableContent().headers.map((header,index) => m('th',{'data-sort-by':index, class: sortBy() === index ? 'active' : ''}, header)))\n                ]),\n                m('tbody', tableContent().data.map(row => m('tr', !row.length ? '' : row.map(column => m('td', column)))))\n            ])\n        ]);\n    }\n};\n","import {getStatistics} from './statisticsModel';\nimport statisticsForm from './statisticsFormComponent';\nimport statisticsTable from './statisticsTableComponent';\nimport statisticsInstructions from './instructions';\nexport default statisticsComponent;\n\nlet statisticsComponent = {\n    controller(){\n        let displayHelp = m.prop(false);\n        let tableContent = m.prop();\n        let loading = m.prop(false);\n        let query = {\n            source: m.prop('Research:Current'),\n            startDate: m.prop(firstDayInPreviousMonth(new Date())),\n            endDate: m.prop(new Date()),\n            study: m.prop(''),\n            task: m.prop(''),\n            studyType: m.prop('Both'),\n            studydb: m.prop('Any'),\n            sortstudy: m.prop(true),\n            sorttask: m.prop(false),\n            sortgroup: m.prop(false),\n            sorttime: m.prop('None'),\n            showEmpty: m.prop(false),\n            firstTask: m.prop(''),\n            lastTask: m.prop('')\n        };\n\n        return {query, submit, displayHelp, tableContent,loading};\n\n        function submit(){\n            loading(true);\n            getStatistics(query)\n                .then(tableContent)\n                .then(loading.bind(null, false))\n                .then(m.redraw);\n        }\n\n        function firstDayInPreviousMonth(yourDate) {\n            return new Date(yourDate.getFullYear(), yourDate.getMonth() - 1, 1);\n        }\n    },\n    view: ({query, tableContent, submit, displayHelp, loading}) => m('.container.statistics', [\n        m('h3', 'Statistics'),\n        m('.row', [\n            statisticsForm({query})\n        ]),\n        m('.row', [\n            m('.col-sm-12',[\n                m('button.btn.btn-secondary.btn-sm', {onclick: ()=>displayHelp(!displayHelp())}, ['Toggle help ', m('i.fa.fa-question-circle')]),\n                m('a.btn.btn-primary.pull-right', {onclick:submit}, 'Submit'),\n                !tableContent() || !tableContent().file ? '' : m('a.btn.btn-secondary.pull-right.m-r-1', {config:downloadFile(`${tableContent().study}.csv`, tableContent().file)}, 'Download CSV')\n            ])\n        ]),\n        !displayHelp() ? '' : m('.row', [\n            m('.col-sm-12.p-a-2', statisticsInstructions())\n        ]),\n        m('.row.m-t-1', [\n            loading()\n                ? m('.loader')\n                : statisticsTable({tableContent})\n        ])\n    ])\n};\n\nlet downloadFile = (filename, text) => element => {\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    element.setAttribute('download', filename);\n};\n","export default statisticsInstructions;\n\nlet statisticsInstructions = () => m('.text-muted', [\n    m('p', 'Choose whether you want participation data from demo studies, research pool, all research studies (including lab studies), or all studies (demo and research).'),\n    m('p', 'Enter the study id or any part of the study id (the study name that that appears in an .expt file). Note that the study id search feature is case-sensitive. If you leave this box blank you will get data from all studies.'),\n    m('p', 'You can also use the Task box to enter a task name or part of a task name (e.g., realstart) if you only want participation data from certain tasks.'),\n    m('p', 'You can also choose how you want the data displayed, using the \"Show by\" options. If you click \"Study\", you will see data from each study that meets your search criteria. If you also check \"Task\" you will see data from any study that meets your search criteria separated by task.  The \"Data Group\" option will allow you to see whether a given study is coming from the demo or research site.  '),\n    m('p', 'You can define how completion rate is calculated by entering text to \"First task\" and \"Last task\". Only sessions that visited those tasks would be used for the calculation.'),\n    m('p', 'When you choose to show the results by date, you will see all the studies that have at least one session in the requested date range, separated by day, week, month or year. This will also show dates with zero sessions. If you want to hide rows with zero sessions, select the \"Hide empty\" option.')\n]);\n","import {fetchJson} from 'utils/modelHelpers';\nimport {poolUrl as url} from 'modelUrls';\n\nexport const STATUS_RUNNING = 'R';\nexport const STATUS_PAUSED = 'P';\nexport const STATUS_STOP = 'S';\n\nexport function createStudy(study){\n    let body = Object.assign({\n        action:'insertRulesTable',\n        creationDate: new Date(),\n        studyStatus: STATUS_RUNNING\n    }, study);\n\n    return fetchJson(url, {method: 'post', body: body})\n        .then(interceptErrors);\n}\n\nexport function updateStudy(study){\n    let body = Object.assign({\n        action:'updateRulesTable'\n    }, study);\n\n    return  fetchJson(url, {method: 'post',body:body})\n        .then(interceptErrors);\n}\n\nexport function updateStatus(study, status){\n    let body = Object.assign({\n        action:'updateStudyStatus'\n    }, study,{studyStatus: status});\n\n    return  fetchJson(url, {method: 'post',body:body})\n        .then(interceptErrors);\n}\n\nexport function getAllPoolStudies(){\n    return fetchJson(url, {method:'post', body: {action:'getAllPoolStudies'}})\n        .then(interceptErrors);\n}\n\nexport function getLast100PoolUpdates(){\n    return fetchJson(url, {method:'post', body: {action:'getLast100PoolUpdates'}})\n        .then(interceptErrors);\n}\n\nexport function getStudyId(study){\n    let body = Object.assign({\n        action:'getStudyId'\n    }, study);\n\n    return  fetchJson(url, {method: 'post',body:body});\n}\n\nexport function resetStudy(study){\n    return fetchJson(url, {method:'post', body: Object.assign({action:'resetCompletions'}, study)})\n        .then(interceptErrors);\n}\n\nfunction interceptErrors(response){\n    if (!response.error){\n        return response;\n    }\n\n    let errors = {\n        1: 'This ID already exists.',\n        2: 'The study could not be found.',\n        3: 'The rule file could not be found.',\n        4: 'The rules file does not fit the \"research\" schema.'\n    };\n\n    return Promise.reject({message: errors[response.error]});\n}\n","export default messages;\n\nlet noop = ()=>{};\n\nlet messages = {\n    vm: {isOpen: false},\n\n    open: (type, opts={}) => {\n        let promise = new Promise((resolve, reject) => {\n            messages.vm = {resolve,reject,type, opts, isOpen:true};\n        });\n        m.redraw();\n\n        return promise;\n    },\n\n    close: response => {\n        let vm = messages.vm;\n        vm.isOpen = false;\n        if (typeof vm.resolve === 'function') vm.resolve(response);\n        m.redraw();\n    },\n\n    custom: opts=>messages.open('custom', opts),\n    alert: opts => messages.open('alert', opts),\n    confirm: opts => messages.open('confirm', opts),\n    prompt: opts => messages.open('prompt', opts),\n\n    view: () => {\n        let vm = messages.vm;\n        let close = messages.close.bind(null, null);\n        let stopPropagation = e => e.stopPropagation();\n        return m('#messages.backdrop', [\n            !vm || !vm.isOpen\n                ? ''\n                :[\n                    m('.overlay', {config:messages.config(vm.opts)}),\n                    m('.backdrop-content', {onclick:close}, [\n                        m('.card', {class: vm.opts.wide ? 'col-sm-8' : 'col-sm-5', config:maxHeight}, [\n                            m('.card-block', {onclick: stopPropagation}, [\n                                messages.views[vm.type](vm.opts)\n                            ])\n                        ])\n                    ])\n                ]\n        ]);\n\n    },\n\n    config: (opts) => {\n        return (element, isInitialized, context) => {\n            if (!isInitialized) {\n                let handleKey = function(e) {\n                    if (e.keyCode == 27) {\n                        messages.close(null);\n                    }\n                    if (e.keyCode == 13 && !opts.preventEnterSubmits) {\n                        messages.close(true);\n                    }\n                };\n\n                document.body.addEventListener('keyup', handleKey);\n\n                context.onunload = function() {\n                    document.body.removeEventListener('keyup', handleKey);\n                };\n            }\n        };\n    },\n\n    views: {\n        custom: (opts={}) => opts.content,\n\n        alert: (opts={}) => {\n            let close = response => messages.close.bind(null, response);\n            return [\n                m('h4', opts.header),\n                m('p.card-text', opts.content),\n                m('.text-xs-right.btn-toolbar',[\n                    m('button.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n                ])\n            ];\n        },\n\n        confirm: (opts={}) => {\n            let close = response => messages.close.bind(null, response);\n            return [\n                m('h4', opts.header),\n                m('p.card-text', opts.content),\n                m('.text-xs-right.btn-toolbar',[\n                    m('button.btn.btn-secondary.btn-sm', {onclick:close(null)}, opts.cancelText || 'Cancel'),\n                    m('button.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n                ])\n            ];\n        },\n\n        /**\n         * Promise prompt(Object opts{header: String, content: String, name: Prop})\n         *\n         * where:\n         *   any Prop(any value)\n         */\n        prompt: ({prop, header, content, postContent, okText, cancelText}={prop:noop}) => {\n            let close = response => messages.close.bind(null, response);\n            return [\n                m('h4', header),\n                m('.card-text', content),\n                m('.card-block', [\n                    m('input.form-control', {\n                        key: 'prompt',\n                        value: prop(),\n                        onchange: m.withAttr('value', prop),\n                        config: (element, isInitialized) => {\n                            if (!isInitialized) setTimeout(() => element.focus());\n                        }\n                    })\n                ]),\n                m('.card-text', postContent),\n                m('.text-xs-right.btn-toolbar',[\n                    m('button.btn.btn-secondary.btn-sm', {onclick:close(null)}, cancelText || 'Cancel'),\n                    m('button.btn.btn-primary.btn-sm', {onclick:close(true)}, okText || 'OK')\n                ])\n            ];\n        }\n    }\n};\n\n// set message max height, so that content can scroll within it.\nlet maxHeight = (element, isInitialized, ctx) => {\n    if (!isInitialized){\n        onResize();\n\n        window.addEventListener('resize', onResize, true);\n\n        ctx.onunload = function(){\n            window.removeEventListener('resize', onResize);\n        };\n\n    }\n\n    function onResize(){\n        element.style.maxHeight = document.documentElement.clientHeight * 0.9 + 'px';\n    }\n};\n","export default spinner;\n\nconst spinner = {\n    display: m.prop(false),\n    show(response){\n        spinner.display(true);\n        m.redraw();\n        return response;\n    },\n    hide(response){\n        spinner.display(false);\n        m.redraw();\n        return response;\n    },\n    view(){\n        return m('.backdrop', {hidden:!spinner.display()}, // spinner.show()\n            m('.overlay'),\n            m('.backdrop-content.spinner.icon.fa.fa-cog.fa-spin')\n        );\n    }\n};\n","// taken from here:\n// https://github.com/JedWatson/classnames/blob/master/index.js\nlet hasOwn = {}.hasOwnProperty;\n\nfunction classNames () {\n    let classes = '';\n\n    for (let i = 0; i < arguments.length; i++) {\n        let arg = arguments[i];\n        if (!arg) continue;\n\n        let argType = typeof arg;\n\n        if (argType === 'string' || argType === 'number') {\n            classes += ' ' + arg;\n        } else if (Array.isArray(arg)) {\n            classes += ' ' + classNames.apply(null, arg);\n        } else if (argType === 'object') {\n            for (let key in arg) {\n                if (hasOwn.call(arg, key) && arg[key]) {\n                    classes += ' ' + key;\n                }\n            }\n        }\n    }\n\n    return classes.substr(1);\n}\n\nexport default classNames;\n","import classNames from 'utils/classNames';\nimport messages from 'utils/messagesComponent';\nexport default editMessage;\n\n/**\n * Create edit component\n * Promise editMessage({input:Object, output:Prop})\n */\nlet editMessage = args => messages.custom({\n    content: m.component(editComponent, Object.assign({close:messages.close}, args)),\n    wide: true\n});\n\nlet editComponent = {\n    controller({input, output, close}){\n        let study = ['rulesUrl', 'targetCompletions', 'autopauseUrl', 'userEmail'].reduce((study, prop)=>{\n            study[prop] = m.prop(input[prop] || '');\n            return study;\n        }, {});\n\n        // export study to calling component\n        output(study);\n\n\n        let ctrl = {\n            study,\n            submitAttempt: false,\n            validity(){\n                let isEmail = str  => /\\S+@\\S+\\.\\S+/.test(str);\n                let isNormalInteger = str => /^\\+?(0|[1-9]\\d*)$/.test(str);\n\n                let response = {\n                    rulesUrl: study.rulesUrl(),\n                    targetCompletions: isNormalInteger(study.targetCompletions()),\n                    autopauseUrl: study.autopauseUrl(),\n                    userEmail: isEmail(study.userEmail())\n\n                };\n                return response;\n            },\n            ok(){\n                ctrl.submitAttempt = true;\n                let response = ctrl.validity();\n                let isValid = Object.keys(response).every(key => response[key]);\n\n                if (isValid) {\n                    study.targetCompletions(+study.targetCompletions());// targetCompletions should be cast as a number\n                    close(true);\n                }\n            },\n            cancel() {\n                close(null);\n            }\n        };\n\n        return ctrl;\n    },\n    view(ctrl, {input}){\n        let study = ctrl.study;\n        let validity = ctrl.validity();\n        let miniButtonView = (prop, name, url) => m('button.btn.btn-secondary.btn-sm', {onclick: prop.bind(null,url)}, name);\n        let validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n        let groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'has-danger': !valid,\n            'has-success' : valid\n        });\n        let inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'form-control-danger': !valid,\n            'form-control-success': valid\n        });\n\n        return m('div',[\n            m('h4', 'Study Editor'),\n            m('.card-block', [\n                m('.form-group', [\n                    m('label', 'Study ID'),\n                    m('p',[\n                        m('strong.form-control-static', input.studyId)\n                    ])\n\n                ]),\n                m('.form-group', [\n                    m('label', 'Study URL'),\n                    m('p',[\n                        m('strong.form-control-static', input.studyUrl)\n                    ])\n                ]),\n\n                m('.form-group', {class:groupClasses(validity.rulesUrl)}, [\n                    m('label', 'Rules File URL'),\n                    m('input.form-control', {\n                        config: focusConfig,\n                        placeholder:'Rules file URL',\n                        value: study.rulesUrl(),\n                        oninput: m.withAttr('value', study.rulesUrl),\n                        class:inputClasses(validity.rulesUrl)\n                    }),\n                    m('p.text-muted.btn-toolbar', [\n                        miniButtonView(study.rulesUrl, 'Priority26', '/research/library/rules/Priority26.xml')\n                    ]),\n                    validationView(validity.rulesUrl, 'This row is required')\n                ]),\n                m('.form-group', {class:groupClasses(validity.autopauseUrl)}, [\n                    m('label', 'Auto-pause file URL'),\n                    m('input.form-control', {\n                        placeholder:'Auto pause file URL',\n                        value: study.autopauseUrl(),\n                        oninput: m.withAttr('value', study.autopauseUrl),\n                        class:inputClasses(validity.autopauseUrl)\n                    }),\n                    m('p.text-muted.btn-toolbar', [\n                        miniButtonView(study.autopauseUrl, 'Default', '/research/library/pausefiles/pausedefault.xml'),\n                        miniButtonView(study.autopauseUrl, 'Never', '/research/library/pausefiles/neverpause.xml'),\n                        miniButtonView(study.autopauseUrl, 'Low restrictions', '/research/library/pausefiles/pauselowrestrictions.xml')\n                    ]),\n                    validationView(validity.autopauseUrl, 'This row is required')\n                ]),\n                m('.form-group', {class:groupClasses(validity.targetCompletions)}, [\n                    m('label','Target number of sessions'),\n                    m('input.form-control', {\n                        type:'number',\n                        placeholder:'Target Sessions',\n                        value: study.targetCompletions(),\n                        oninput: m.withAttr('value', study.targetCompletions),\n                        onclick: m.withAttr('value', study.targetCompletions),\n                        class:inputClasses(validity.targetCompletions)\n                    }),\n                    validationView(validity.targetCompletions, 'This row is required and has to be an integer above 0')\n                ]),\n                m('.form-group', {class:groupClasses(validity.userEmail)}, [\n                    m('label','User Email'),\n                    m('input.form-control', {\n                        type:'email',\n                        placeholder:'Email',\n                        value: study.userEmail(),\n                        oninput: m.withAttr('value', study.userEmail),\n                        class:inputClasses(validity.userEmail)\n                    }),\n                    validationView(validity.userEmail, 'This row is required and must be a valid Email')\n                ])\n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'OK')\n            ])\n        ]);\n    }\n};\n\nlet focusConfig = (element, isInitialized) => {\n    if (!isInitialized) element.focus();\n};\n","import classNames from 'utils/classNames';\nimport messages from 'utils/messagesComponent';\nexport default createMessage;\n\n/**\n * Create edit component\n * Promise editMessage({output:Prop})\n */\nlet createMessage = args => messages.custom({\n    content: m.component(createComponent, Object.assign({close:messages.close}, args)),\n    wide: true\n});\n\nlet createComponent = {\n    controller({output, close}){\n        let study = output({\n            studyUrl: m.prop('')\n        });\n\n        let ctrl = {\n            study,\n            submitAttempt: false,\n            validity(){\n                let response = {\n                    studyUrl: study.studyUrl()\n                };\n                return response;\n            },\n            ok(){\n                ctrl.submitAttempt = true;\n                let response = ctrl.validity();\n                let isValid = Object.keys(response).every(key => response[key]);\n                if (isValid) close(true);\n            },\n            cancel() {\n                close(null);\n            }\n        };\n\n        return ctrl;\n    },\n    view(ctrl){\n        let study = ctrl.study;\n        let validity = ctrl.validity();\n        let validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n        let groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'has-danger': !valid,\n            'has-success' : valid\n        });\n        let inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'form-control-danger': !valid,\n            'form-control-success': valid\n        });\n\n        return m('div',[\n            m('h4', 'Create Study'),\n            m('.card-block', [\n                m('.form-group', {class:groupClasses(validity.studyUrl)}, [\n                    m('label', 'Study URL'),\n                    m('input.form-control', {\n                        config: focusConfig,\n                        placeholder:'Study URL',\n                        value: study.studyUrl(),\n                        oninput: m.withAttr('value', study.studyUrl),\n                        class:inputClasses(validity.studyUrl)\n                    }),\n                    validationView(validity.studyUrl, 'This row is required')\n                ])\n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'Proceed')\n            ])\n        ]);\n    }\n};\n\nlet focusConfig = (element, isInitialized) => {\n    if (!isInitialized) element.focus();\n};","import {updateStudy, createStudy, updateStatus, getStudyId, resetStudy, STATUS_RUNNING, STATUS_PAUSED, STATUS_STOP} from './poolModel';\nimport messages from 'utils/messagesComponent';\nimport spinner from 'utils/spinnerComponent';\nimport editMessage from './poolEditComponent';\nimport createMessage from './poolCreateComponent';\n\n\nexport function play(study){\n    return messages.confirm({\n        header: 'Continue Study:',\n        content: `Are you sure you want to continue \"${study.studyId}\"?`\n    })\n        .then(response => {\n            if(response) {\n                studyPending(study, true)();\n                return updateStatus(study, STATUS_RUNNING)\n                    .then(()=>study.studyStatus = STATUS_RUNNING)\n                    .catch(reportError('Continue Study'))\n                    .then(studyPending(study, false));\n            }\n        });\n}\n\nexport function pause(study){\n    return messages.confirm({\n        header: 'Pause Study:',\n        content: `Are you sure you want to pause \"${study.studyId}\"?`\n    })\n        .then(response => {\n            if(response) {\n                studyPending(study, true)();\n                return updateStatus(study, STATUS_PAUSED)\n                    .then(()=>study.studyStatus = STATUS_PAUSED)\n                    .catch(reportError('Pause Study'))\n                    .then(studyPending(study, false));\n            }\n        });\n}\n\nexport let remove  = (study, list) => {\n    return messages.confirm({\n        header: 'Remove Study:',\n        content: `Are you sure you want to remove \"${study.studyId}\" from the pool?`\n    })\n        .then(response => {\n            if(response) {\n                studyPending(study, true)();\n                return updateStatus(study, STATUS_STOP)\n                    .then(() => list(list().filter(el => el !== study)))\n                    .catch(reportError('Remove Study'))\n                    .then(studyPending(study, false));\n            }\n        });\n};\n\nexport let edit  = (input) => {\n    let output = m.prop();\n    return editMessage({input, output})\n        .then(response => {\n            if (response) {\n                studyPending(input, true)();\n                let study = Object.assign({}, input, unPropify(output()));\n                return updateStudy(study)\n                    .then(() => Object.assign(input, study)) // update study in view\n                    .catch(reportError('Study Editor'))\n                    .then(studyPending(input, false));\n            }\n        });\n};\n\nexport let create = (list) => {\n    let output = m.prop();\n    return createMessage({output})\n        .then(response => {\n            if (response) {\n                spinner.show();\n                getStudyId(output())\n                    .then(response => Object.assign(unPropify(output()), response)) // add response data to \"newStudy\"\n                    .then(spinner.hide)\n                    .then(editNewStudy);\n            }\n        });\n\n    function editNewStudy(input){\n        let output = m.prop();\n        return editMessage({input, output})\n            .then(response => {\n                if (response) {\n                    let study = Object.assign({\n                        startedSessions: 0,\n                        completedSessions: 0,\n                        creationDate:new Date(),\n                        studyStatus: STATUS_RUNNING\n                    }, input, unPropify(output()));\n                    return createStudy(study)\n                        .then(() => list().push(study))\n                        .then(m.redraw)\n                        .catch(reportError('Create Study'));\n                }\n            });\n    }\n};\n\nexport let reset = study => {\n    messages.confirm({\n        header: 'Restart study',\n        content: 'Are you sure you want to restart this study? This action will reset all started and completed sessions.'\n    }).then(response => {\n        if (response) {\n            let old = {\n                startedSessions: study.startedSessions,\n                completedSessions: study.completedSessions\n            };\n            study.startedSessions = study.completedSessions = 0;\n            m.redraw();\n            return resetStudy(study)\n                .catch(response => {\n                    Object.assign(study, old);\n                    return Promise.reject(response);\n                })\n                .catch(reportError('Restart study'));\n        }\n    });\n};\n\nlet reportError = header => err => messages.alert({header, content: err.message});\n\nlet studyPending = (study, state) => () => {\n    study.$pending = state;\n    m.redraw();\n};\n\nlet unPropify = obj => Object.keys(obj).reduce((result, key) => {\n    result[key] = obj[key]();\n    return result;\n}, {});","import {fetchJson,fetchVoid} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst loginUrl = `${baseUrl}/connect`;\nconst logoutUrl = `${baseUrl}/logout`;\nconst is_logedinUrl = `${baseUrl}/is_loggedin`;\n\nexport let login = (username, password) => fetchJson(loginUrl, {\n    method: 'post',\n    body: {username, password}\n});\n\nexport let logout = () => fetchVoid(logoutUrl, {method:'post'}).then(getAuth);\n\nexport let getAuth = () => fetchJson(is_logedinUrl, {\n    method: 'get'\n});","import {getAllPoolStudies, STATUS_PAUSED, STATUS_RUNNING} from './poolModel';\nimport {play, pause, remove, edit, create, reset} from './poolActions';\nimport {getAuth} from 'login/authModel';\nimport sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\nexport default poolComponent;\n\nconst PRODUCTION_URL = 'https://implicit.harvard.edu/implicit/';\nconst TABLE_WIDTH = 8;\n\nlet poolComponent = {\n    controller: () => {\n        const ctrl = {\n            play, pause, remove, edit, reset, create,\n            canCreate: false,\n            list: m.prop([]),\n            globalSearch: m.prop(''),\n            sortBy: m.prop(),\n            error: m.prop(''),\n            loaded: m.prop()\n        };\n\n        getAuth().then((response) => {ctrl.canCreate = response.role === 'SU';});\n        getAllPoolStudies()\n            .then(ctrl.list)\n            .then(ctrl.loaded)\n            .catch(ctrl.error)\n            .then(m.redraw);\n        return ctrl;\n    },\n    view: ctrl => {\n        let list = ctrl.list;\n        return m('.pool', [\n            m('h2', 'Study pool'),\n            ctrl.error()\n                ?\n                m('.alert.alert-warning',\n                    m('strong', 'Warning!! '), ctrl.error().message\n                )\n                :\n                m('table', {class:'table table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n                    m('thead', [\n                        m('tr', [\n                            m('th', {colspan:TABLE_WIDTH - 1}, [\n                                m('input.form-control', {placeholder: 'Global Search ...', oninput: m.withAttr('value', ctrl.globalSearch)})\n                            ]),\n                            m('th', [\n                                m('a.btn.btn-secondary', {href:'/pool/history', config:m.route}, [\n                                    m('i.fa.fa-history'), '  History'\n                                ])\n                            ])\n                        ]),\n                        ctrl.canCreate ? m('tr', [\n                            m('th.text-xs-center', {colspan:TABLE_WIDTH}, [\n                                m('button.btn.btn-secondary', {onclick:ctrl.create.bind(null, list)}, [\n                                    m('i.fa.fa-plus'), '  Add new study'\n                                ])\n                            ])\n                        ]) : '',\n                        m('tr', [\n                            m('th', thConfig('studyId',ctrl.sortBy), 'ID'),\n                            m('th', thConfig('studyUrl',ctrl.sortBy), 'Study'),\n                            m('th', thConfig('rulesUrl',ctrl.sortBy), 'Rules'),\n                            m('th', thConfig('autopauseUrl',ctrl.sortBy), 'Autopause'),\n                            m('th', thConfig('completedSessions',ctrl.sortBy), 'Completion'),\n                            m('th', thConfig('creationDate',ctrl.sortBy), 'Date'),\n                            m('th','Status'),\n                            m('th','Actions')\n                        ])\n                    ]),\n                    m('tbody', [\n                        list().length === 0\n                            ?\n                            m('tr.table-info',\n                                m('td.text-xs-center', {colspan: TABLE_WIDTH},\n                                    m('strong', 'Heads up! '), \n                                    ctrl.loaded()\n                                        ? 'None of your studies is in the Research Pool right now'\n                                        : 'Loading...'\n                                )\n                            )\n                            :\n                            list().filter(studyFilter(ctrl)).map(study => m('tr', [\n                                // ### ID\n                                m('td', study.studyId),\n\n                                // ### Study url\n                                m('td', [\n                                    m('a', {href:PRODUCTION_URL + study.studyUrl, target: '_blank'}, 'Study')\n                                ]),\n\n                                // ### Rules url\n                                m('td', [\n                                    m('a', {href:PRODUCTION_URL + study.rulesUrl, target: '_blank'}, 'Rules')\n                                ]),\n\n                                // ### Autopause url\n                                m('td', [\n                                    m('a', {href:PRODUCTION_URL + study.autopauseUrl, target: '_blank'}, 'Autopause')\n                                ]),\n\n                                // ### Completions\n                                m('td', [\n                                    study.startedSessions ? (100 * study.completedSessions / study.startedSessions).toFixed(1) + '% ' : 'n/a ',\n                                    m('i.fa.fa-info-circle'),\n                                    m('.info-box', [\n                                        m('.card', [\n                                            m('.card-header', 'Completion Details'),\n                                            m('ul.list-group.list-group-flush',[\n                                                m('li.list-group-item', [\n                                                    m('strong', 'Target Completions: '), study.targetCompletions\n                                                ]),\n                                                m('li.list-group-item', [\n                                                    m('strong', 'Started Sessions: '), study.startedSessions\n                                                ]),\n                                                m('li.list-group-item', [\n                                                    m('strong', 'Completed Sessions: '), study.completedSessions\n                                                ])\n                                            ])\n                                        ])\n                                    ])\n                                ]),\n\n                                // ### Date\n                                m('td', formatDate(new Date(study.creationDate))),\n\n                                // ### Status\n                                m('td', [\n                                    {\n                                        R: m('span.label.label-success', 'Running'),\n                                        P: m('span.label.label-info', 'Paused'),\n                                        S: m('span.label.label-danger', 'Stopped')\n                                    }[study.studyStatus]\n                                ]),\n\n                                // ### Actions\n                                m('td', [\n                                    study.$pending\n                                        ?\n                                        m('.l', 'Loading...')\n                                        :\n                                        m('.btn-group', [\n                                            study.canUnpause && study.studyStatus === STATUS_PAUSED ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.play.bind(null, study)}, [\n                                                m('i.fa.fa-play')\n                                            ]) : '',\n                                            study.canPause && study.studyStatus === STATUS_RUNNING ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.pause.bind(null, study)}, [\n                                                m('i.fa.fa-pause')\n                                            ]) : '',\n                                            study.canReset ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.edit.bind(null, study)}, [\n                                                m('i.fa.fa-edit')\n                                            ]): '',\n                                            study.canReset ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.reset.bind(null, study)}, [\n                                                m('i.fa.fa-refresh')\n                                            ]) : '',\n                                            study.canStop ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.remove.bind(null, study, list)}, [\n                                                m('i.fa.fa-close')\n                                            ]) : ''\n                                        ])\n                                ])\n                            ]))\n                    ])\n                ])\n        ]);\n    }\n};\n\n// @TODO: bad idiom! should change things within the object, not the object itself.\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nfunction studyFilter(ctrl){\n    return study =>\n        includes(study.studyId, ctrl.globalSearch()) ||\n        includes(study.studyUrl, ctrl.globalSearch()) ||\n        includes(study.rulesUrl, ctrl.globalSearch());\n\n    function includes(val, search){\n        return typeof val === 'string' && val.includes(search);\n    }\n}\n","import {getLast100PoolUpdates} from './poolModel';\nimport {dateRangePicker} from 'utils/dateRange';\nimport sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\nexport default poolComponent;\n\nconst PRODUCTION_URL = 'https://implicit.harvard.edu/implicit/';\nlet poolComponent = {\n    controller: () => {\n        const ctrl = {\n            list: m.prop([]),\n            globalSearch: m.prop(''),\n            startDate: m.prop(new Date(0)),\n            endDate: m.prop(new Date()),\n            sortBy: m.prop()\n        };\n\n        getLast100PoolUpdates()\n            .then(ctrl.list)\n            .then(m.redraw);\n\n        return ctrl;\n    },\n    view: ctrl => {\n        let list = ctrl.list;\n        return m('.pool', [\n            m('h2', 'Pool history'),\n            m('.row', {colspan:8}, [\n                m('.col-sm-3',[\n                    m('label', 'Search'),\n                    m('input.form-control', {placeholder: 'Search ...', oninput: m.withAttr('value', ctrl.globalSearch)})\n                ]),\n                m('.col-sm-4',[\n                    dateRangePicker(ctrl)\n                ]),\n                m('.col-sm-5',[\n                    m('label', m.trust('&nbsp')),\n                    m('.text-muted.btn-toolbar', [\n                        dayButtonView(ctrl, 'Last 7 Days', 7),\n                        dayButtonView(ctrl, 'Last 30 Days', 30),\n                        dayButtonView(ctrl, 'Last 90 Days', 90),\n                        dayButtonView(ctrl, 'All time', 3650)\n                    ])\n                ])\n            ]) ,\n            m('table', {class:'table table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n                m('thead', [\n                    m('tr', [\n                        m('th', thConfig('studyId',ctrl.sortBy), 'ID'),\n                        m('th', thConfig('studyUrl',ctrl.sortBy), 'Study'),\n                        m('th', thConfig('rulesUrl',ctrl.sortBy), 'Rules'),\n                        m('th', thConfig('autopauseUrl',ctrl.sortBy), 'Autopause'),     \n                        m('th', thConfig('creationDate',ctrl.sortBy), 'Creation Date'),\n                        m('th', thConfig('completedSessions',ctrl.sortBy), 'Completion'),\n                        m('th','New Status'),\n                        m('th','Old Status'),\n                        m('th', thConfig('updaterId',ctrl.sortBy), 'Updater')\n                    ])\n                ]),\n                m('tbody', [\n                    list().filter(studyFilter(ctrl)).map(study => m('tr', [\n                        // ### ID\n                        m('td', study.studyId),\n\n                        // ### Study url\n                        m('td', [\n                            m('a', {href:PRODUCTION_URL + study.studyUrl, target: '_blank'}, 'Study')\n                        ]),\n\n                        // ### Rules url\n                        m('td', [\n                            m('a', {href:PRODUCTION_URL + study.rulesUrl, target: '_blank'}, 'Rules')\n                        ]),\n\n                        // ### Autopause url\n                        m('td', [\n                            m('a', {href:PRODUCTION_URL + study.autopauseUrl, target: '_blank'}, 'Autopause')\n                        ]),\n                        \n                    \n\n                        // ### Date\n                        m('td', formatDate(new Date(study.creationDate))),\n                        \n                        // ### Target Completionss\n                        m('td', [\n                            study.startedSessions ? (100 * study.completedSessions / study.startedSessions).toFixed(1) + '% ' : 'n/a ',\n                            m('i.fa.fa-info-circle'),\n                            m('.card.info-box', [\n                                m('.card-header', 'Completion Details'),\n                                m('ul.list-group.list-group-flush',[\n                                    m('li.list-group-item', [\n                                        m('strong', 'Target Completions: '), study.targetCompletions\n                                    ]),\n                                    m('li.list-group-item', [\n                                        m('strong', 'Started Sessions: '), study.startedSessions\n                                    ]),\n                                    m('li.list-group-item', [\n                                        m('strong', 'Completed Sessions: '), study.completedSessions\n                                    ])\n                                ])\n                            ])\n                        ]),\n\n                        // ### New Status\n                        m('td', [\n                            {\n                                R: m('span.label.label-success', 'Running'),\n                                P: m('span.label.label-info', 'Paused'),\n                                S: m('span.label.label-danger', 'Stopped')\n                            }[study.newStatus]\n                        ]),\n                        // ### Old Status\n                        m('td', [\n                            {\n                                R: m('span.label.label-success', 'Running'),\n                                P: m('span.label.label-info', 'Paused'),\n                                S: m('span.label.label-danger', 'Stopped')\n                            }[study.studyStatus]\n                        ]),\n                        m('td', study.updaterId)\n                    ]))\n                ])\n            ])\n        ]);\n    }\n};\n\n// @TODO: bad idiom! should change things within the object, not the object itself.\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nfunction studyFilter(ctrl){\n    return study =>\n        (includes(study.studyId, ctrl.globalSearch()) ||    includes(study.updaterId, ctrl.globalSearch()) || includes(study.rulesUrl, ctrl.globalSearch())\n            || includes(study.targetCompletions, ctrl.globalSearch()))\n        && (new Date(study.creationDate)).getTime() >= ctrl.startDate().getTime()\n    && (new Date(study.creationDate)).getTime() <= ctrl.endDate().getTime()+86000000; //include the end day selected\n\n    function includes(val, search){\n        return typeof val === 'string' && val.includes(search);\n    }\n}\n\nlet dayButtonView = (ctrl, name, days) => m('button.btn.btn-secondary.btn-sm', {onclick: () => {\n    let d = new Date();\n    d.setDate(d.getDate() - days);\n    ctrl.startDate(d);\n    ctrl.endDate(new Date());\n}}, name);\n","import {fetchJson, fetchVoid} from 'utils/modelHelpers';\nimport {downloadsUrl as url} from 'modelUrls';\n\nexport const STATUS_RUNNING = 'R';\nexport const STATUS_COMPLETE = 'C';\nexport const STATUS_ERROR = 'X';\n\nexport let getAllDownloads = () => fetchJson(url, {\n    method:'post',\n    body: {action:'getAllDownloads'}\n}).then(interceptErrors);\n\nexport let removeDownload = download => fetchVoid(url, {\n    method:'post',\n    body: Object.assign({action:'removeDownload'}, download)\n}).then(interceptErrors);\n\nexport let createDownload = download => fetchVoid(url, {\n    method: 'post',\n    body: Object.assign({action:'download'}, download)\n}).then(interceptErrors);\n\nfunction interceptErrors(response){\n    if (!response || !response.error){\n        return response;\n    }\n\n    return Promise.reject({message: response.msg});\n}\n","import messages from 'utils/messagesComponent';\nimport {dateRangePicker} from 'utils/dateRange';\nimport classNames from 'utils/classNames';\n\nexport default args => messages.custom({\n    content: m.component(createComponent, Object.assign({close:messages.close}, args)),\n    wide: true\n});\n\n\nlet createComponent = {\n    controller({output, close}){\n        let download ={\n            studyId: m.prop(''),\n            db: m.prop('test'),\n            startDate: m.prop(daysAgo(3650)),\n            endDate: m.prop(new Date())\n        };\n\n        // export study to calling component\n        output(download);\n\n        let ctrl = {\n            download,\n            submitAttempt: false,\n            validity(){\n                let response = {\n                    studyId: download.studyId()\n                };\n                return response;\n            },\n            ok(){\n                ctrl.submitAttempt = true;\n                let response = ctrl.validity();\n                let isValid = Object.keys(response).every(key => response[key]);\n\n                if (isValid) {\n                    download.endDate(endOfDay(download.endDate())); \n                    close(true);\n                }\n            },\n            cancel() {\n                close(null);\n            }\n        };\n\n        return ctrl;\n\n        function endOfDay(date){\n            if (date) return new Date(date.setHours(23,59,59,999));\n        }\n    },\n    view(ctrl){\n        let download = ctrl.download;\n        let validity = ctrl.validity();\n        let validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n        let groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'has-danger': !valid,\n            'has-success' : valid\n        });\n        let inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'form-control-danger': !valid,\n            'form-control-success': valid\n        });\n\n        return m('div',[\n            m('h4', 'Request Data'),\n            m('.card-block', [\n                m('.row', [\n                    m('.col-sm-6', [\n                        m('.form-group', {class:groupClasses(validity.studyId)}, [\n                            m('label', 'Study ID'),\n                            m('input.form-control', {\n                                config: focusConfig,\n                                placeholder:'Study Id',\n                                value: download.studyId(),\n                                oninput: m.withAttr('value', download.studyId),\n                                class:inputClasses(validity.studyId)\n                            }),\n                            validationView(validity.studyId, 'The study ID is required in order to request a download.')\n                        ])   \n                    ]),\n                    m('.col-sm-6', [\n                        m('.form-group', [\n                            m('label','Database'),\n                            m('select.form-control.c-select', {onchange: m.withAttr('value',download.db)}, [\n                                m('option',{value:'test', selected: download.db() === 'test'}, 'Development'),\n                                m('option',{value:'warehouse', selected: download.db() === 'warehouse'}, 'Production')\n                            ])\n                        ])\n                    ])\n                ]),\n                m('.row', [\n                    m('.col-sm-12', [\n                        m('.form-group', [\n                            dateRangePicker(download),\n                            m('p.text-muted.btn-toolbar', [\n                                dayButtonView(download, 'Last 7 Days', 7),\n                                dayButtonView(download, 'Last 30 Days', 30),\n                                dayButtonView(download, 'Last 90 Days', 90),\n                                dayButtonView(download, 'All time', 3650)\n                            ])\n                        ])\n                    ])\n                ])\n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'OK')\n            ])\n        ]);\n    }\n};\n\nlet focusConfig = (element, isInitialized) => {\n    if (!isInitialized) element.focus();\n};\n\n// helper functions for the day buttons\nlet daysAgo = (days) => {\n    let d = new Date();\n    d.setDate(d.getDate() - days);\n    return d;\n};\nlet equalDates = (date1, date2) => date1.getDate() === date2.getDate();\nlet activeDate = ({startDate, endDate}, days) => equalDates(startDate(), daysAgo(days)) && equalDates(endDate(), new Date());\n\nlet dayButtonView = (download, name, days) => m('button.btn.btn-secondary.btn-sm', {\n    class: activeDate(download, days)? 'active' : '',\n    onclick: () => {\n        download.startDate(daysAgo(days));\n        download.endDate(new Date());\n    }\n}, name);\n","import {getAllDownloads, removeDownload, createDownload, STATUS_RUNNING} from './downloadsModel';\nimport createMessage from './downloadsCreate';\nimport messages from 'utils/messagesComponent';\nconst DURATION = 5000;\n\n/**\n * Get all downloads\n */\n\nexport let recursiveGetAll = debounce(getAll, DURATION);\nexport function getAll({list, cancel, error, loaded}){\n    return getAllDownloads()\n        .then(list)\n        .then(response => {\n            if (!cancel() && response.some(download => download.studyStatus === STATUS_RUNNING)) {\n                recursiveGetAll({list, cancel, error, loaded});\n            }\n        })\n        .catch(error)\n        .then(function(){loaded(true);})\n        .then(m.redraw);\n}\n\n\n// debounce but call at first iteration\nfunction debounce(func, wait) {\n    let first = true;\n    let timeout;\n    return function() {\n        let context = this, args = arguments;\n        let later = function() {\n            timeout = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (first) {\n            func.apply(context, args);\n            first = false;\n        }\n    };\n}\n\n\n/**\n * Remove download\n */\n\nexport function remove(download, list) {\n    return messages.confirm({\n        header: 'Delete Request:',\n        content: [\n            'Are you sure you want to delete this request from your queue?',\n            m('.text-xs-center',\n                m('small.muted-text','(Don\\'t worry, the data will stay on our servers and you can request it again in the future)')\n            )\n        ]\n    })\n        .then(function(response){\n            if (response) return doRemove(download, list);\n        });\n}\n\nfunction doRemove(download, list){\n    list(list().filter(el => el !== download));\n    m.redraw();\n    removeDownload(download)\n        .catch(err => {\n            list().push(download);\n            return messages.alert({\n                header: 'Delete Request',\n                content: err.message\n            });\n        });\n}\n\n/**\n * Create download\n */\n\nexport function create(list, cancel, loaded){\n    let output = m.prop();\n    return createMessage({output})\n        .then(response => {\n            if (response){\n                let download = unPropify(output());\n                list().unshift(Object.assign({\n                    studyStatus: STATUS_RUNNING,\n                    creationDate: new Date()\n                },download));\n                cancel(true);\n                return createDownload(download)\n                    .catch(reportError('Error creating download'))\n                    .then(cancel.bind(null, false))\n                    .then(() => {\n                        getAll({list, cancel, loaded});\n                    });\n            }\n        });\n}\n\nlet unPropify = obj => Object.keys(obj).reduce((result, key) => {\n    result[key] = obj[key]();\n    return result;\n}, {});\n\nlet reportError = header => err => messages.alert({header, content: err.message});\n","import {STATUS_RUNNING, STATUS_COMPLETE, STATUS_ERROR} from './downloadsModel';\nimport sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\nimport {getAll, remove, create} from './downloadsActions';\nexport default downloadsComponent;\n\nconst TABLE_WIDTH = 7;\nconst statusLabelsMap = {}; // defined at the bottom of this file\n\nconst downloadsComponent = {\n    controller(){\n        let list = m.prop([]);\n        let loaded = m.prop(false);\n\n        let cancelDownload = m.prop(false);\n\n        const ctrl = {\n            loaded,\n            list,\n            cancelDownload,\n            create,\n            remove,\n            globalSearch: m.prop(''),\n            sortBy: m.prop('studyId'),\n            onunload(){\n                cancelDownload(true);\n            },\n            error: m.prop('')\n        };\n\n        getAll({list:ctrl.list, cancel: cancelDownload, error: ctrl.error, loaded:ctrl.loaded});\n        return ctrl;\n    },\n\n    view(ctrl) {\n\n        if (!ctrl.loaded())\n            return m('.loader');\n\n        let list = ctrl.list;\n\n        if (ctrl.error()) return m('.downloads', [\n            m('h3', 'Data Download'),\n            m('.alert.alert-warning', [\n                m('strong', 'Warning!! '), ctrl.error().message\n            ])\n        ]);\n\n        return m('.downloads', [\n            m('.row.m-b-1', [\n                m('.col-sm-6', [\n                    m('h3', 'Data Download')\n                ]),\n                m('.col-sm-3',[\n                    m('button.btn.btn-secondary.pull-right', {onclick:ctrl.create.bind(null, list, ctrl.cancelDownload, ctrl.loaded)}, [\n                        m('i.fa.fa-plus'), ' Request Data'\n                    ])\n                ]),\n                m('.col-sm-3',[\n                    m('input.form-control', {placeholder: 'Search ...', oninput: m.withAttr('value', ctrl.globalSearch)})\n                ])\n            ]),\n\n            m('table', {class:'table table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n                m('thead', [\n                    m('tr', [\n                        m('th', thConfig('studyId',ctrl.sortBy), 'ID'),\n                        m('th', 'Data file'),\n                        m('th', thConfig('db',ctrl.sortBy), 'Database'),\n                        m('th', thConfig('fileSize',ctrl.sortBy), 'File Size'),\n                        m('th', thConfig('creationDate',ctrl.sortBy), 'Date Added'),\n                        m('th','Status'),\n                        m('th','Actions')\n                    ])\n                ]),\n                m('tbody', [\n                    list().length === 0\n                        ? m('tr.table-info', [\n                            m('td.text-xs-center', {colspan: TABLE_WIDTH}, 'There are no downloads running yet')\n                        ])\n                        : list().filter(studyFilter(ctrl)).map(download => m('tr', [\n                            // ### ID\n                            m('td', download.studyId),\n\n                            // ### Study url\n                            m('td', download.studyStatus == STATUS_RUNNING\n                                ? m('i.text-muted', 'Loading...')\n                                : download.fileSize\n                                    ? m('a', {href:download.studyUrl, download:download.studyId + '.zip', target: '_blank'}, 'Download')\n                                    : m('i.text-muted', 'No Data')\n                            ),\n\n                            // ### Database\n                            m('td', download.db),\n\n                            // ### Filesize\n                            m('td', download.fileSize !== 'unknown'\n                                ? download.fileSize\n                                : m('i.text-muted', 'Unknown')\n                            ),\n\n                            // ### Date Added\n                            m('td', [\n                                formatDate(new Date(download.creationDate)),\n                                '  ',\n                                m('i.fa.fa-info-circle'),\n                                m('.info-box', [\n                                    m('.card', [\n                                        m('.card-header', 'Creation Details'),\n                                        m('ul.list-group.list-group-flush',[\n                                            m('li.list-group-item', [\n                                                m('strong', 'Creation Date: '), formatDate(new Date(download.creationDate))\n                                            ]),\n                                            m('li.list-group-item', [\n                                                m('strong', 'Start Date: '), formatDate(new Date(download.startDate))\n                                            ]),\n                                            m('li.list-group-item', [\n                                                m('strong', 'End Date: '), formatDate(new Date(download.endDate))\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ]),\n\n                            // ### Status\n                            m('td', [\n                                statusLabelsMap[download.studyStatus]\n                            ]),\n\n                            // ### Actions\n                            m('td', [\n                                m('.btn-group', [\n                                    m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.remove.bind(null, download, list)}, [\n                                        m('i.fa.fa-close')\n                                    ])\n                                ])\n                            ])\n                        ]))\n                ])\n            ])\n        ]);\n    }\n};\n\n// @TODO: bad idiom! should change things within the object, not the object itself.\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nfunction studyFilter(ctrl){\n    let search = ctrl.globalSearch();\n    return study =>\n        includes(study.studyId, search) ||\n        includes(study.studyUrl, search);\n\n    function includes(val, search){\n        return typeof val === 'string' && val.includes(search);\n    }\n}\n\nstatusLabelsMap[STATUS_COMPLETE] = m('span.label.label-success', 'Complete');\nstatusLabelsMap[STATUS_RUNNING] = m('span.label.label-info', 'Running');\nstatusLabelsMap[STATUS_ERROR] = m('span.label.label-danger', 'Error');\n","import {fetchJson} from 'utils/modelHelpers';\nimport {downloadsAccessUrl as url} from 'modelUrls';\n\nexport const STATUS_APPROVED = true;\nexport const STATUS_SUBMITTED = false;\n\nexport function createDataAccessRequest(dataAccessRequest){\n    let body = Object.assign({\n        action:'createDataAccessRequest'\n    }, dataAccessRequest);\n\n    return fetchJson(url, {method: 'post', body: body})\n        .then(interceptErrors);\n}\n\nexport function deleteDataAccessRequest(dataAccessRequest){\n    let body = Object.assign({\n        action:'deleteDataAccessRequest'\n    }, dataAccessRequest);\n\n    return  fetchJson(url, {method: 'post',body:body})\n        .then(interceptErrors);\n}\n\nexport function updateApproved(dataAccessRequest, approved){\n    let body = Object.assign({\n        action:'updateApproved'\n    }, dataAccessRequest,{approved: approved});\n\n    return  fetchJson(url, {method: 'post',body:body})\n        .then(interceptErrors);\n}\n\nexport function getAllOpenRequests(){\n    return fetchJson(url, {method:'post', body: {action:'getAllOpenRequests'}})\n        .then(interceptErrors);\n}\n\n\n\nfunction interceptErrors(response){\n    if (!response.error){\n        return response;\n    }\n\n    let errors = {\n        1: 'This ID already exists.',\n        2: 'The study could not be found.',\n        3: 'The rule file could not be found.',\n        4: 'The rules file does not fit the \"research\" schema.'\n    };\n\n    return Promise.reject({message: errors[response.error]});\n}\n","import messages from 'utils/messagesComponent';\nimport classNames from 'utils/classNames';\nexport default createMessage;\n\nlet createMessage = args => messages.custom({\n    content: m.component(createComponent, Object.assign({close:messages.close}, args)),\n    wide: true\n});\n\nlet createComponent = {\n    controller({output, close}){\n        let downloadAccess ={\n            studyId: m.prop('')\n        };\n\n        // export study to calling component\n        output(downloadAccess);\n\n\n        let ctrl = {\n            downloadAccess,\n            submitAttempt: false,\n            validity(){\n                let response = {\n                    studyId: downloadAccess.studyId()\n                };\n                return response;\n            },\n            ok(){\n                ctrl.submitAttempt = true;\n                let response = ctrl.validity();\n                let isValid = Object.keys(response).every(key => response[key]);\n\n                if (isValid) close(true);\n            },\n            cancel() {\n                close(null);\n            }\n        };\n\n        return ctrl;\n    },\n    view(ctrl){\n        let downloadAccess = ctrl.downloadAccess;\n        let validity = ctrl.validity();\n        let validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n        let groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'has-danger': !valid,\n            'has-success' : valid\n        });\n        let inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'form-control-danger': !valid,\n            'form-control-success': valid\n        });\n\n        return m('div',[\n            m('h4', 'Request Download Access From Admin'),\n            m('p', 'This page will request access to a study from admin.  For studies created by users you should instead email them directly for access.'),\n            m('.card-block', [\n                m('.form-group', {class:groupClasses(validity.studyId)}, [\n                    m('label', 'Study Id'),\n                    m('input.form-control', {\n                        config: focusConfig,\n                        placeholder:'Study Id',\n                        value: downloadAccess.studyId(),\n                        oninput: m.withAttr('value', downloadAccess.studyId),\n                        class:inputClasses(validity.studyId)\n                    }),\n                    validationView(validity.studyId, 'The study ID is required in order to request access.')\n                ])\n                \n                \n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'OK')\n            ])\n        ]);\n    }\n};\n\nlet focusConfig = (element, isInitialized) => {\n    if (!isInitialized) element.focus();\n};\n","import messages from 'utils/messagesComponent';\nimport classNames from 'utils/classNames';\nexport default grantMessage;\n\nlet grantMessage = args => messages.custom({\n    content: m.component(grantComponent, Object.assign({close:messages.close}, args)),\n    wide: true\n});\n\nlet grantComponent = {\n    controller({output, close}){\n        let downloadAccess ={\n            studyId: m.prop(''),\n            username: m.prop('')\n        };\n\n        // export study to calling component\n        output(downloadAccess);\n\n\n        let ctrl = {\n            downloadAccess,\n            submitAttempt: false,\n            validity(){\n                let response = {\n                    studyId: downloadAccess.studyId(),\n                    username: downloadAccess.username()\n                };\n                return response;\n            },\n            ok(){\n                ctrl.submitAttempt = true;\n                let response = ctrl.validity();\n                let isValid = Object.keys(response).every(key => response[key]);\n\n                if (isValid) close(true);\n            },\n            cancel() {\n                close(null);\n            }\n        };\n\n        return ctrl;\n    },\n    view(ctrl){\n        let downloadAccess = ctrl.downloadAccess;\n        let validity = ctrl.validity();\n        let validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n        let groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'has-danger': !valid,\n            'has-success' : valid\n        });\n        let inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'form-control-danger': !valid,\n            'form-control-success': valid\n        });\n\n        return m('div',[\n            m('h4', 'Grant Data Access'),\n            m('.card-block', [\n                m('.form-group', {class:groupClasses(validity.studyId)}, [\n                    m('label', 'Study Id'),\n                    m('input.form-control', {\n                        config: focusConfig,\n                        placeholder:'Study Id',\n                        value: downloadAccess.studyId(),\n                        oninput: m.withAttr('value', downloadAccess.studyId),\n                        class:inputClasses(validity.studyId)\n                    }),\n                    m('label', 'Username'),\n                    m('input.form-control', {\n                        config: focusConfig,\n                        placeholder:'Username',\n                        value: downloadAccess.username(),\n                        oninput: m.withAttr('value', downloadAccess.username),\n                        class:inputClasses(validity.username)\n                    }),\n                    validationView(validity.studyId, 'The study ID is required in order to grant access.'),\n                    validationView(validity.username, 'The username is required in order to grant access.')\n                ])\n                \n                \n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'OK')\n            ])\n        ]);\n    }\n};\n\nlet focusConfig = (element, isInitialized) => {\n    if (!isInitialized) element.focus();\n};\n\n","import messages from 'utils/messagesComponent';\nimport classNames from 'utils/classNames';\nexport default revokeMessage;\n\nlet revokeMessage = args => messages.custom({\n    content: m.component(revokeComponent, Object.assign({close:messages.close}, args)),\n    wide: true\n});\n\nlet revokeComponent = {\n    controller({output, close}){\n        let downloadAccess ={\n            studyId: m.prop(''),\n            username: m.prop('')\n        };\n\n        // export study to calling component\n        output(downloadAccess);\n\n\n        let ctrl = {\n            downloadAccess,\n            submitAttempt: false,\n            validity(){\n                let response = {\n                    studyId: downloadAccess.studyId(),\n                    username: downloadAccess.username()\n                };\n                return response;\n            },\n            ok(){\n                ctrl.submitAttempt = true;\n                let response = ctrl.validity();\n                let isValid = Object.keys(response).every(key => response[key]);\n\n                if (isValid) close(true);\n            },\n            cancel() {\n                close(null);\n            }\n        };\n\n        return ctrl;\n    },\n    view(ctrl){\n        let downloadAccess = ctrl.downloadAccess;\n        let validity = ctrl.validity();\n        let validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n        let groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'has-danger': !valid,\n            'has-success' : valid\n        });\n        let inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n            'form-control-danger': !valid,\n            'form-control-success': valid\n        });\n\n        return m('div',[\n            m('h4', 'Revoke Data Access'),\n            m('.card-block', [\n                m('.form-group', {class:groupClasses(validity.studyId)}, [\n                    m('label', 'Study Id'),\n                    m('input.form-control', {\n                        config: focusConfig,\n                        placeholder:'Study Id',\n                        value: downloadAccess.studyId(),\n                        oninput: m.withAttr('value', downloadAccess.studyId),\n                        class:inputClasses(validity.studyId)\n                    }),\n                    m('label', 'Username'),\n                    m('input.form-control', {\n                        config: focusConfig,\n                        placeholder:'Username',\n                        value: downloadAccess.username(),\n                        oninput: m.withAttr('value', downloadAccess.username),\n                        class:inputClasses(validity.username)\n                    }),\n                    validationView(validity.studyId, 'The study ID is required in order to revoke access.'),\n                    validationView(validity.username, 'The username is required in order to revoke access.')\n                ])\n                \n                \n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'OK')\n            ])\n        ]);\n    }\n};\n\nlet focusConfig = (element, isInitialized) => {\n    if (!isInitialized) element.focus();\n};\n\n","import {createDataAccessRequest, deleteDataAccessRequest, updateApproved, STATUS_APPROVED} from './downloadsAccessModel';\nimport messages from 'utils/messagesComponent';\nimport createMessage from './downloadsAccessCreateComponent';\nimport grantMessage from './downloadsAccessGrantComponent';\nimport revokeMessage from './downloadsAccessRevokeComponent';\n\nexport function play(downloadAccess, list){\n    return messages.confirm({\n        header: 'Approve Access Request:',\n        content: `Are you sure you want to grant access of '${downloadAccess.studyId}' to '${downloadAccess.username}'?`\n    })\n        .then(response => {\n            if(response) {\n                return updateApproved(downloadAccess, STATUS_APPROVED)\n                    .then(() => list(list().filter(el => el !== downloadAccess)))\n                    .then(messages.alert({header:'Grant access completed', content: 'Access granted'}))\n                    .catch(reportError('Grant Access'))\n                    .then(m.redraw());\n            }\n        });\n}\n\n\nexport let remove  = (downloadAccess, list) => {\n    return messages.confirm({\n        header: 'Delete request:',\n        content: `Are you sure you want to delete the access request for'${downloadAccess.studyId}'? If access has already been granted you will lose it`\n    })\n        .then(response => {\n            if(response) {\n            \n                return deleteDataAccessRequest(downloadAccess)\n                    .then(() => list(list().filter(el => el !== downloadAccess)))\n                    .then(messages.alert({header:'Deletion complete', content: 'Access has been deleted'}))\n                    .catch(reportError('Remove Download Request'))\n                    .then(m.redraw());\n\n            }\n        });\n};\nexport let grant = () => {\n    let output = m.prop();\n    return grantMessage({output})\n        .then(response => {\n            if (response) {\n                let now = new Date();\n                let downloadAccess = Object.assign({\n                    approved: STATUS_APPROVED,\n                    creationDate: now\n                }, null, unPropify(output()));\n                return createDataAccessRequest(downloadAccess)\n                    .then(messages.alert({header:'Grant access completed', content: 'Access granted'}))\n                    .catch(reportError('Grant Access'));\n            }\n        });\n};\nexport let revoke = () => {\n    let output = m.prop();\n    return revokeMessage({output})\n        .then(response => {\n            if (response) {\n                let now = new Date();\n                let downloadAccess = Object.assign({\n                    creationDate: now\n                }, null, unPropify(output()));\n                return deleteDataAccessRequest(downloadAccess)\n                    .then(messages.alert({header:'Revoke access completed', content: 'Access revoked'}))\n                    .catch(reportError('Revoke Access'));\n            }\n        });\n};\nexport let create = (list) => {\n    let output = m.prop();\n    return createMessage({output})\n        .then(response => {\n            if (response) {\n                let now = new Date();\n                let downloadAccess = Object.assign({\n                    creationDate: now,\n                    approved: 'access pending'\n                }, null, unPropify(output()));\n                return createDataAccessRequest(downloadAccess)\n                    .then(() => list().unshift(downloadAccess))\n                    .then(m.redraw)\n                    .catch(reportError('Data Access Request'));\n            }\n        });\n};\n\nlet reportError = header => err => messages.alert({header, content: err.message});\n\nlet unPropify = obj => Object.keys(obj).reduce((result, key) => {\n    result[key] = obj[key]();\n    return result;\n}, {});\n","import {getAllOpenRequests, STATUS_APPROVED, STATUS_SUBMITTED} from './downloadsAccessModel';\nimport {play, remove, create, grant, revoke} from './downloadsAccessActions';\nimport {getAuth} from 'login/authModel';\nimport sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\nexport default downloadsAccessComponent;\n\nconst TABLE_WIDTH = 6;\n\nlet downloadsAccessComponent = {\n    controller: () => {\n        const ctrl = {\n            play: play,\n            loaded: m.prop(false),\n            remove: remove,\n            create: create,\n            grant: grant,\n            revoke: revoke,\n            list: m.prop([]),\n            globalSearch: m.prop(''),\n            sortBy: m.prop(),\n            error: m.prop(''),\n            isAdmin: false\n        };\n        getAuth().then((response) => {ctrl.isAdmin = response.role === 'SU';});\n\n        getAllOpenRequests()\n            .then(ctrl.list)\n            .catch(ctrl.error)\n            .then(function(){ctrl.loaded(true);})\n            .then(m.redraw);\n\n        return ctrl;\n    },\n    view: ctrl => {\n        if (!ctrl.loaded())\n            return m('.loader');\n\n        let list = ctrl.list;\n        return m('.downloadAccess', [\n            m('h3', 'Data Download Access Requests'),\n            m('p.col-xs-12.text-muted', [\n                m('small', [\n                    ctrl.isAdmin\n                        ? 'Approve requests by clicking the Play button; Reject requests by clicking the X button; To grant permission without a request: hit the Grant Access button; For all actions: The user will be notified by email.'\n                        : 'You will receive an email when your request is approved or rejected; To cancel a request, click the X button next to the request'\n                ])\n            ]),\n            ctrl.error()\n                ?\n                m('.alert.alert-warning',\n                    m('strong', 'Warning!! '), ctrl.error().message\n                )\n                :\n                m('table', {class:'table table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n                    m('thead', [\n                        m('tr', [ \n                            m('th', {colspan: TABLE_WIDTH}, [ \n                                m('.row', [\n                                    m('.col-xs-3.text-xs-left', [\n                                        m('button.btn.btn-secondary', {disabled: ctrl.isAdmin, onclick:ctrl.isAdmin || ctrl.create.bind(null, list)}, [\n                                            m('i.fa.fa-plus'), '  Request Access From Admin'\n                                        ])\n                                    ]),\n                                    m('.col-xs-2.text-xs-left', [\n                                        m('button.btn.btn-secondary', {onclick:ctrl.grant.bind(null, list)}, [\n                                            m('i.fa.fa-plus'), '  Grant Access'\n                                        ])\n                                    ])\n                                    ,m('.col-xs-2.text-xs-left', [\n                                        ctrl.isAdmin ? m('button.btn.btn-secondary', {onclick:ctrl.revoke.bind(null, list)}, [\n                                            m('i.fa.fa-plus'), '  Revoke Access'\n                                        ]) : ''\n                                    ]),\n                                    m('.col-xs-5.text-xs-left', [\n                                        m('input.form-control', {placeholder: 'Global Search ...', oninput: m.withAttr('value', ctrl.globalSearch)})\n                                    ])\n                                ])\n                            ])\n                        ]),\n\n                        m('tr', [\n                            m('th', thConfig('studyId',ctrl.sortBy), 'ID'),\n                            m('th', thConfig('username',ctrl.sortBy), 'Username'),\n                            m('th', thConfig('email',ctrl.sortBy), 'Email'),\n                            m('th', thConfig('creationDate',ctrl.sortBy), 'Date'),\n                            m('th','Status'),\n                            m('th','Actions')\n                        ])\n                    ]),\n                    m('tbody', [\n                        list().length === 0\n                            ?\n                            m('tr.table-info',\n                                m('td.text-xs-center', {colspan: TABLE_WIDTH},\n                                    m('strong', 'Heads up! '), 'There are no requests yet'\n                                )\n                            )\n                            :\n                            list().filter(dataRequestFilter(ctrl)).map(dataRequest => m('tr', [\n                                // ### ID\n                                m('td', dataRequest.studyId),\n                                \n                                // ### USERNAME\n                                m('td', dataRequest.username),\n                                \n                                // ### EMAIL\n                                m('td', dataRequest.email),\n\n                                // ### Date\n                                m('td', formatDate(new Date(dataRequest.creationDate))),\n                                dataRequest.approved=== STATUS_APPROVED\n                                    ?\n                                    m('td', {style:'color:green'},'access granted')\n                                    :\n                                    m('td', {style:'color:red'},'access pending'),\n\n                                // ### Actions\n                                m('td', [\n                                    m('.btn-group', [\n                                        dataRequest.canApprove && dataRequest.approved === STATUS_SUBMITTED ? m('button.btn.btn-sm.btn-secondary', {title:'Approve request, and auto email requester',onclick: ctrl.play.bind(null, dataRequest,list)}, [\n                                            m('i.fa.fa-play')\n                                        ]) : '',\n                                        dataRequest.canDelete ? m('button.btn.btn-sm.btn-secondary', {title:'Delete request.  If this is a granted request owner will lose access to it',onclick: ctrl.remove.bind(null, dataRequest, list)}, [\n                                            m('i.fa.fa-close')\n                                        ]) : ''\n                                    ])\n                                ])\n                            ]))\n                    ])\n                ])\n        ]);\n    }\n};\n\n// @TODO: bad idiom! should change things within the object, not the object itself.\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nfunction dataRequestFilter(ctrl){\n    return dataRequest =>\n        includes(dataRequest.studyId, ctrl.globalSearch()) ||\n        includes(dataRequest.username, ctrl.globalSearch()) ||\n        includes(dataRequest.email, ctrl.globalSearch());\n\n    function includes(val, search){\n        return typeof val === 'string' && val.includes(search);\n    }\n}\n","export default fullHeight;\nlet fullHeight = (element, isInitialized, ctx) => {\n    if (!isInitialized){\n        onResize();\n\n        window.addEventListener('resize', onResize, true);\n\n        ctx.onunload = function(){\n            window.removeEventListener('resize', onResize);\n        };\n\n    }\n\n    function onResize(){\n        element.style.height = document.documentElement.clientHeight - element.getBoundingClientRect().top + 'px';\n    }\n};\n","import {login, getAuth} from './authModel';\nimport fullHeight from 'utils/fullHeight';\nexport default loginComponent;\n\nlet loginComponent = {\n    controller(){\n        const ctrl = {\n            username:m.prop(''),\n            password:m.prop(''),\n            isloggedin: false,\n            loginAction,\n            error: m.prop('')\n        };\n        is_loggedin();\n        return ctrl;\n\n        function loginAction(){\n            if(ctrl.username() && ctrl.password())\n                login(ctrl.username, ctrl.password)\n                    .then(() => {\n                        m.route(!location.hash ? './' : decodeURIComponent(location.hash).substring(1));\n                    })\n                    .catch(response => {\n                        ctrl.error(response.message);\n                        m.redraw();\n                    })\n                ;\n        }\n\n        function is_loggedin(){\n            getAuth().then((response) => {\n                if(response.isloggedin)\n                    m.route('./');\n            });\n        }\n    },\n    view(ctrl){\n        return m('.login.centrify', {config:fullHeight},[\n            m('.card.card-inverse.col-md-4', [\n                m('.card-block',[\n                    m('h4', 'Please sign in'),\n\n                    m('form', {onsubmit:ctrl.loginAction}, [\n                        m('input.form-control', {\n                            type:'username',\n                            placeholder: 'Username / Email',\n                            value: ctrl.username(),\n                            name: 'username',\n                            autofocus:true,\n                            oninput: m.withAttr('value', ctrl.username),\n                            onkeydown: (e)=>{(e.keyCode == 13) ? ctrl.loginAction(): false;},\n                            onchange: m.withAttr('value', ctrl.username),\n                            config: getStartValue(ctrl.username)\n                        }),\n                        m('input.form-control', {\n                            type:'password',\n                            name:'password',\n                            placeholder: 'Password',\n                            value: ctrl.password(),\n                            oninput: m.withAttr('value', ctrl.password),\n                            onkeydown: (e)=>{(e.keyCode == 13) ? ctrl.loginAction(): false;},\n                            onchange: m.withAttr('value', ctrl.password),\n                            config: getStartValue(ctrl.password)\n                        })\n                    ]),\n\n                    !ctrl.error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.error()),\n                    m('button.btn.btn-primary.btn-block', {onclick: ctrl.loginAction},'Sign in'),\n                    m('p.text-center',\n                        m('small.text-muted',  m('a', {href:'index.html?/recovery'}, 'Lost your password?'))\n                    )\n                ])\n            ])\n        ]);\n    }\n};\n\nfunction getStartValue(prop){\n    return (element, isInit) => {// !isInit && prop(element.value);\n        if (!isInit) setTimeout(()=>prop(element.value), 30);\n    };\n}\n","export default jshintOptions;\nlet jshintOptions = {\n    // JSHint Default Configuration File (as on JSHint website)\n    // See http://jshint.com/docs/ for more details\n\n    'curly'         : false,    // true: Require {} for every new block or scope\n    'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n    'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n    'unused'        : 'vars',   // Unused variables:\n    'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n    'browser'       : true,     // Web Browser (window, document, etc)\n    'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n    esversion   : 3,        // Require es3 syntax for backward compatibility\n\n    // Custom Globals\n    predef: ['piGlobal','define','require','requirejs','angular']\n};\n","import jshintOptions from './editors/jshintOptions';\nimport {fetchVoid, fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\nexport default fileFactory;\n\nconst filePrototype = {\n    apiUrl(){\n        return `${baseUrl}/files/${encodeURIComponent(this.studyId)}/file/${encodeURIComponent(this.id)}`;\n    },\n\n    get(){\n        return fetchJson(this.apiUrl())\n            .then(response => {\n                const content = response.content\n                    .replace(/\\r\\n/g, '\\n') // Replace carriage returns \n                    .replace(/([^\\n])$/,'$1\\n'); //  Make sure all files are unix EOF encoded...\n\n                this.sourceContent(content);\n                this.content(content);\n                this.loaded = true;\n                this.error = false;\n                this.last_modify = response.last_modify;\n\n            })\n            .catch(reason => {\n                this.loaded = true;\n                this.error = true;\n                return Promise.reject(reason); // do not swallow error\n            });\n    },\n\n    save(){\n        return fetchJson(this.apiUrl(), {\n            method:'put',\n            body: {content: this.content, last_modify:this.last_modify}\n        })\n            .then(response => {\n                this.sourceContent(this.content()); // update source content\n                this.last_modify = response.last_modify;\n                return response;\n            });\n    },\n\n    copy(path, study_id, new_study_id){\n        return fetchJson(this.apiUrl() + `/copy/`, {\n            method:'put',\n            body: {new_study_id}\n        })\n            .catch(response => {\n                return Promise.reject(response);\n            });\n    },\n\n    del(){\n        return fetchVoid(this.apiUrl(), {method:'delete'});\n    },\n\n    hasChanged() {\n        return this.sourceContent() !== this.content();\n    },\n\n    define(context = window){\n        console.warn('This should be deprecated!!!');\n        const requirejs = context.requirejs;\n        const name = this.url;\n        const content = this.content();\n\n        return new Promise((resolve) => {\n            requirejs.undef(name);\n            context.eval(content.replace(`define(`,`define('` + name + `',`));\n            resolve();\n        });\n    },\n\n    require(context = window){\n        const requirejs = context.requirejs;\n        return new Promise((resolve, reject) => {\n            requirejs([this.url], resolve,reject);\n        });\n    },\n\n    checkSyntax(){\n        const jshint = window.JSHINT;\n        this.syntaxValid = jshint(this.content(), jshintOptions);\n        this.syntaxData = jshint.data();\n        return this.syntaxValid;\n    },\n\n    setPath(path = ''){\n        this.path = path;\n        this.name = path.substring(path.lastIndexOf('/')+1);\n        this.basePath = (path.substring(0, path.lastIndexOf('/'))) + '/';\n        this.type = path.substring(path.lastIndexOf('.')+1).toLowerCase();\n    }\n};\n\n/**\n * fileObj = {\n *  id: #hash,\n *  path: path,     \n *  url: URL\n * }\n */\n\nconst fileFactory = fileObj => {\n    let file = Object.create(filePrototype);\n    let path = decodeURIComponent(fileObj.path);\n\n\n    file.setPath(path);\n\n    Object.assign(file, fileObj, {\n        id          : fileObj.id,\n        sourceContent       : m.prop(fileObj.content || ''),\n        content         : contentProvider.call(file, fileObj.content || ''), // custom m.prop, alows checking syntax on change\n\n        // keep track of loaded state\n        loaded          : false,\n        error           : false,\n\n        // these are defined when calling checkSyntax\n        syntaxValid     : undefined,\n        syntaxData      : undefined,\n\n        undoManager     : m.prop(), // a prop to keep track of the ace-editor undo manager for this file\n        position        : m.prop() // a prop to keep track of the ace-editor position in this file\n    });\n\n    file.content(fileObj.content || '');\n\n    if (fileObj.files) file.files = fileObj.files.map(fileFactory).map(file => Object.assign(file, {studyId: fileObj.studyId}));\n\n    return file;\n\n    function contentProvider (store) {\n        let prop = (...args) => {\n            if (args.length) {\n                store = args[0];\n                this.type === 'js' && this.checkSyntax();\n            }\n            return store;\n        };\n        prop.toJSON = () => store;\n        return prop;\n    }\n};\n","import {fetchJson, fetchVoid, fetchUpload} from 'utils/modelHelpers';\nimport fileFactory from './fileModel';\nexport default studyFactory;\nimport {baseUrl} from 'modelUrls';\n\nconst studyPrototype = {\n    loaded: false,\n    isUploading: false,\n    apiURL(path = ''){\n        return `${baseUrl}/files/${encodeURIComponent(this.id)}${path}`;\n    },\n\n    get(){\n\n        return fetchJson(this.apiURL())\n            .then(study => {\n\n                const files = this.parseFiles(study.files);\n                this.loaded = true;\n                this.isReadonly = study.is_readonly;\n                this.istemplate = study.is_template;\n                this.is_locked = study.is_locked;\n                this.is_published = study.is_published;\n                this.is_public = study.is_public;\n                this.name = study.study_name;\n                this.type = study.type || 'minno02';\n                this.base_url = study.base_url;\n                this.versions = study.versions ? study.versions : [];\n                this.files(files);\n                this.sort();\n            })\n            .catch(reason => {\n                this.error = true;\n                return Promise.reject(reason); // do not swallow error\n            });\n\n\n    },\n\n    parseFiles(files){\n        const study = this;\n\n        return ensureArray(files)\n            .map(fileFactory)\n            .map(spreadFile)\n            .reduce(flattenDeep, [])\n            .map(assignStudyId);\n\n        function ensureArray(arr){ return arr || []; }\n        function assignStudyId(file){ return Object.assign(file, {studyId: study.id}); }\n        function flattenDeep(acc, val) { return Array.isArray(val) ? acc.concat(val.reduce(flattenDeep,[])) : acc.concat(val); }\n\n        // create an array including file and all its children\n        function spreadFile(file){ \n            const children = ensureArray(file.files).map(spreadFile);\n            return [file].concat(children);\n        }\n    },\n\n    mergeFiles(files){\n        const newfiles = this.parseFiles(files);\n        const oldfiles = this.files();\n\n        const toRemove = oldfiles.filter(oldfile => !newfiles.some(newfile => oldfile.id == newfile.id));\n        const toAdd = newfiles.filter(newfile => !oldfiles.some(oldfile => oldfile.id == newfile.id));\n\n        toAdd.forEach(this.addFile.bind(this));\n        toRemove.forEach(this.removeFile.bind(this));\n\n        this.sort();\n    },\n\n    getFile(id){\n        return this.files().find(f => f.id === id);\n    },\n\n    // makes sure not to return both a folder and its contents.\n    // This is important mainly for server side clarity (don't delete or download both a folder and its content)\n    // We go recurse through all the files, starting with those sitting in root (we don't have a root node, so we need to get them manually).\n    getChosenFiles(){\n        const vm = this.vm;\n        const rootFiles = this.files().filter(f => f.basePath === '/');\n        return getChosen(rootFiles);\n\n        function getChosen(files){\n            return files.reduce((response, file) => {\n                // a chosen file/dir does not need sub files to be checked\n                if (vm(file.id).isChosen() === 1) response.push(file);\n                // if not chosen, we need to look deeper\n                else response = response.concat(getChosen(file.files || []));\n                return response;\n            }, []);\n        }\n    },\n\n    addFile(file){\n        this.files().push(file);\n\n        const parent = this.getParent(file);\n        if (parent) {\n            parent.files || (parent.files = []);\n            parent.files.push(file);\n        }\n    },\n\n    removeFile(file){\n        const parent = this.getParent(file);\n\n        remove(this.files(), file);\n        if (parent && parent.files) remove(parent.files, file);\n\n        function remove(arr, file){\n            const index = arr.indexOf(file);\n            arr.splice(index, 1);\n        }\n    },\n\n    createFile({name, content='',isDir}){\n        // validation (make sure there are no invalid characters)\n        if(/[^/-_.A-Za-z0-9]/.test(name)) return Promise.reject({message: `The file name \"${name}\" is not valid`});\n\n        // validation (make sure file does not already exist)\n        const exists = this.files().some(file => file.path === name);\n        if (exists) return Promise.reject({message: `The file \"${name}\" already exists`});\n\n        // validateion (make sure direcotry exists)\n        const basePath = (name.substring(0, name.lastIndexOf('/'))).replace(/^\\//, '');\n        const dirExists = basePath === '' || this.files().some(file => file.isDir && file.path === basePath);\n        if (!dirExists) return Promise.reject({message: `The directory \"${basePath}\" does not exist`});\n        return fetchJson(this.apiURL('/file'), {method:'post', body: {name, content, isDir}})\n            .then(response => {\n                Object.assign(response, {studyId: this.id, content, path:name, isDir});\n                const file = fileFactory(response);\n                file.loaded = true;\n                this.addFile(file);\n                return response;\n            })\n            .then(this.sort.bind(this));\n    },\n\n    sort(response){\n        let files = this.files().sort(sort);\n        this.files(files);\n        return response;\n\n        function sort(a,b){\n            // sort by isDir then name\n            let nameA= +!a.isDir + a.name.toLowerCase(), nameB=+!b.isDir + b.name.toLowerCase();\n            if (nameA < nameB) return -1;//sort string ascending\n            if (nameA > nameB) return 1;\n            return 0; //default return value (no sorting)\n        }\n    },\n\n    move(newpath, file){\n        const study = this;\n        const files = study.files();\n\n        const basePath = (newpath.substring(0, newpath.lastIndexOf('/')));\n        const folderExists = basePath === '' || files.some(f => f.isDir && f.path === basePath);\n        const fileExists = files.some(f=>f.path === newpath);\n        const hasChangedChildren = study\n            .getChildren(file)\n            .some(file => file.hasChanged());\n\n\n        if (!folderExists) return Promise.reject({message: `Target folder ${basePath} does not exist.`});\n        if (fileExists) return Promise.reject({message: `Target file ${newpath} already exists.`});\n        if (hasChangedChildren) return Promise.reject({message: `You have unsaved changes in one of the files please save, then try again.`});\n\n        return fetchJson(file.apiUrl() + `/move/` , {\n            method:'put',\n            body: {path:newpath, url:file.url}\n        })\n            .then(study.mergeFiles.bind(study));\n    },\n\n    uploadFiles({path, fd, force}){\n        fd.append('forceUpload', +force);\n        this.isUploading = true;\n        m.redraw();\n\n        return fetchUpload(this.apiURL(`/upload/${path === '/' ? '' : encodeURIComponent(path)}`), {method:'post', body:fd})\n            .then(this.mergeFiles.bind(this))\n            .then(() => this.isUploading = false)\n            .catch((err) => {\n                this.isUploading = false;\n                return Promise.reject(err);\n            });\n    },\n\n    /*\n     * @param files [Array] a list of file.path to download\n     * @returns url [String] the download url\n     */\n    downloadFiles(files){\n        return fetchJson(this.apiURL(), {method: 'post', body: {files}})\n            .then(response => `${baseUrl}/download?path=${response.zip_file}&study=_PATH`);\n    },\n\n    delFiles(files){\n        const paths = files.map(f=>f.path);\n        return fetchJson(this.apiURL(), {method: 'delete', body: {files:paths}})\n            .then(this.mergeFiles.bind(this));\n    },\n\n    make_experiment(file, descriptive_id){\n        return fetchJson(this.apiURL(`/file/${file.id}/experiment`),\n            {method: 'post', body: {descriptive_id:descriptive_id}}).then((exp_data)=>file.exp_data=exp_data);\n    },\n\n    delete_experiment(file){\n        return fetchVoid(this.apiURL(`/file/${file.id}/experiment`),\n            {method: 'delete'});\n    },\n\n    update_experiment(file, descriptive_id){\n        return fetchVoid(this.apiURL(`/file/${file.id}/experiment`),\n            {method: 'put', body: {descriptive_id:descriptive_id}});\n    },\n\n    getParents(file){\n        return this.files().filter(f => f.isDir && file.basePath.indexOf(f.path) === 0);\n    },\n\n    getParent(file){\n        return this\n            .getParents(file)\n            .reduce((result, f) => result && (result.path.length > f.path.length) ? result : f , null); \n    },\n\n    // returns array of children for this file, including itself\n    getChildren(file){\n        return children(file);\n       \n        function children(file){\n            if (!file.files) return [file];\n            return file.files\n                .map(children) // harvest children\n                .reduce((result, files) => result.concat(files), [file]); // flatten\n        }\n    }\n};\n\nconst studyFactory =  id =>{\n    const study = Object.create(studyPrototype);\n\n    Object.assign(study, {\n        id      : id,\n        files   : m.prop([]),\n        loaded  : false,\n        error   :false,\n        vm      : viewModelMap({\n            isOpen: m.prop(false),\n            isChanged: m.prop(false),\n            isChosen: m.prop(0)\n        })\n    });\n\n    return study;\n};\n\n// http://lhorie.github.io/mithril-blog/mapping-view-models.html\nconst viewModelMap = function(signature) {\n    const map = {};\n    return function(key) {\n        if (!map[key]) {\n            map[key] = {};\n            for (let prop in signature) map[key][prop] = m.prop(signature[prop]());\n        }\n        return map[key];\n    };\n};\n","export default imgEditor;\n\nlet imgEditor = ({file}) => m('div.img-editor.centrify', [\n    m('img', {src:file.url})\n]);","export default unknownComponent;\n\nlet unknownComponent = () => m('.centrify', [\n    m('i.fa.fa-file.fa-5x'),\n    m('h5', 'Unknow file type')\n]);","// download support according to modernizer\nconst downloadSupport = !window.externalHost && 'download' in document.createElement('a');\n\nexport default downloadLink;\n\nconst downloadLink = (url, name) => {\n    if (downloadSupport){\n        let link = document.createElement('a');\n        link.href = url;\n        link.download = name;\n        link.target = '_blank';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    } else {\n        let win = window.open(url, '_blank');\n        win.focus();\n    }\n};\n","import classNames from 'utils/classNames';\nexport default moveFileComponent;\n\nconst moveFileComponent = args => m.component(component, args);\n\n\nconst component = {\n    controller({file, study}){\n        const dirs = study\n            .files()\n            .filter(f => f.isDir)\n            .filter(f => f !== file)\n            .map(({name, basePath, path, id}) => ({name, basePath, path, id, isOpen: m.prop(study.vm(id).isOpen())}))\n            .reduce((hash, dir)=>{\n                const path = dir.basePath;\n                if (!hash[path]) hash[path] = [];\n                hash[path].push(dir);\n                return hash;\n            }, {'/': []});\n\n\n        const root = {isOpen: m.prop(true), name:'/', path: '/'};\n        return {root, dirs};\n    },\n    view({dirs, root}, {newPath}){\n        return m('.card-block', [\n            m('p.card-text', [\n                m('strong', 'Moving to: '),\n                dirName(newPath())\n            ]),\n            m('.folders-well', [\n                m('ul.list-unstyled', dirNode(root, dirs, newPath) )\n            ])\n        ]);\n    }\n};\n\n\nfunction dirNode(dir, dirs, newPath){\n    const children = dirs[dir.path.replace(/\\/?$/, '/')]; // optionally add a backslash at the end\n    return m('li', [\n        m('i.fa.fa-fw', {\n            onclick: () => dir.isOpen(!dir.isOpen()),\n            class: classNames({\n                'fa-caret-right' : children && !dir.isOpen(),\n                'fa-caret-down': children && dir.isOpen()\n            })\n        }),\n        m('span', {onclick: () => newPath(dir.path)}, [\n            m('i.fa.fa-folder-o.m-r-1'),\n            dirName(dir.name)\n        ]),\n        !children || !dir.isOpen() ? '' : m('ul.bulletless', children.map(d => dirNode(d, dirs, newPath)))\n    ]);\n}\n\nfunction dirName(name){\n    return name === '/' ? m('span.text-muted', 'Root Directory') : name;\n}\n","import {fetchJson} from 'utils/modelHelpers';\nimport {templatesUrl, studyUrl as baseUrl} from 'modelUrls';\n\n\nfunction get_url(study_id) {\n    return `${baseUrl}/${encodeURIComponent(study_id)}`;\n}\n\nfunction get_duplicate_url(study_id) {\n    return `${baseUrl}/${encodeURIComponent(study_id)}/copy`;\n}\n\n\nfunction get_exps_url(study_id) {\n    return `${baseUrl}/${encodeURIComponent(study_id)}/experiments`;\n}\n\nfunction get_lock_url(study_id , lock) {\n\n    if (lock)\n        return `${baseUrl}/${encodeURIComponent(study_id)}/lock`;\n    return `${baseUrl}/${encodeURIComponent(study_id)}/unlock`;\n}\n\nfunction get_publish_url(study_id) {\n    return `${baseUrl}/${encodeURIComponent(study_id)}/publish`;\n}\n\n/*CRUD*/\nexport let load_studies = () => fetchJson(baseUrl);\n\nexport let load_templates = () => fetchJson(templatesUrl);\n\nexport let create_study = body => fetchJson(baseUrl, { method: 'post', body });\n\nexport let get_exps = (study_id) => fetchJson(get_exps_url(study_id));\n\nexport let get_data = (study_id, exp_id, version_id, file_format, file_split, start_date, end_date) => fetchJson(get_exps_url(study_id), {\n    method: 'post',\n    body: {exp_id, version_id, file_format, file_split, start_date, end_date}\n})\n;\n\nexport const update_study = (study_id, body) => fetchJson(get_url(study_id), {\n    method: 'put',\n    body\n});\n\nexport const rename_study = (study_id, study_name) => fetchJson(`${get_url(study_id)}/rename`, {\n    method: 'put',\n    body: {study_name}\n});\n\nexport let duplicate_study = (study_id, study_name) => fetchJson(get_duplicate_url(study_id), {\n    method: 'put',\n    body: {study_name}\n});\n\nexport let lock_study = (study_id, lock) => fetchJson(get_lock_url(study_id, lock), {\n    method: 'post'\n});\n\nexport let publish_study = (study_id, publish, update_url) => fetchJson(get_publish_url(study_id), {\n    method: 'post',\n    body: {publish, update_url}\n});\n\nexport let delete_study = (study_id) => fetchJson(get_url(study_id), {method: 'delete'});\n\n","import {load_studies} from 'study/studyModel';\n\nexport default args => m.component(copyFileComponent, args);\n\nlet copyFileComponent = {\n    controller({new_study_id, study_id}){\n        let studies = m.prop([]);\n        let loaded = m.prop(false);\n        let error = m.prop(null);\n        load_studies()\n            .then(response => studies(response.studies.sort(sort_studies_by_name2).filter(template_filter())))\n            .catch(error)\n            .then(loaded.bind(null, true))\n            .then(m.redraw);\n        return {studies, study_id, new_study_id, loaded, error};\n    },\n    view: ({studies, study_id, new_study_id, loaded, error}) => m('div', [\n        loaded() ? '' : m('.loader'),\n        error() ? m('.alert.alert-warning', error().message): '',\n\n        loaded() && !studies().length ? m('.alert.alert-info', 'You have no studies yet') : '',\n\n        m('select.form-control', {value:new_study_id(), onchange: m.withAttr('value',new_study_id)}, [\n            m('option',{value:'', disabled: true}, 'Select Study'),\n            studies()\n                .filter(study => !study.is_locked && !study.is_public && !study.isReadonly && study.permission!=='read only' && study.id!=study_id())\n                .map(study => m('option',{value:study.id, selected: new_study_id() === study.id}, study.name))\n        ])\n    ])\n};\n\n\n\nfunction sort_studies_by_name2(study1, study2){\n    return study1.name.toLowerCase() === study2.name.toLowerCase() ? 0 : study1.name.toLowerCase() > study2.name.toLowerCase() ? 1 : -1;\n}\n\nlet template_filter = () => study => {\n    return study.study_type === 'regular' && !study.is_template;\n};\n","import messages from 'utils/messagesComponent';\nimport downloadUrl from 'utils/downloadUrl';\nimport moveFileComponent from './moveFileComponent';\nimport copyFileComponent from './copyFileComponent';\nimport {baseUrl} from 'modelUrls';\n\nexport const uploadFiles = (path,study) => (fd, files) => {\n    // validation (make sure files do not already exist)\n    const filePaths = files.map(file => path === '/' ? file : path + '/' + file);\n    const exist = study.files().filter(file => filePaths.includes(file.path)).map(f => f.path);\n\n    if (!exist.length) return upload({force:false});\n    else return messages.confirm({\n        header: 'Upload Files', \n        content: `The file${exist.length > 1 ? 's' : ''} \"${exist.join(', ')}\" already exists, do you want to overwrite ${exist.length > 1 ? 'them' : 'it'}?`,\n        okText: 'Overwrite'\n    })\n        .then(response => response && upload({force:true}));\n\n    function upload({force} = {force:false}) {\n        return study.uploadFiles({path, fd, force})\n            .catch(response => messages.alert({\n                header: 'Upload File',\n                content: m('p.alert.alert-danger', response.message)\n            }))\n            .then(m.redraw);\n    }\n};\n\nexport const moveFile = (file, study) => () => {\n    const newPath = m.prop(file.basePath);\n    messages.confirm({\n        header: 'Move File',\n        content: moveFileComponent({newPath, file, study})\n    })\n        .then(response => {\n            const targetPath = newPath().replace(/\\/$/, '') + '/' + file.name;\n            if (response && newPath() !== file.basePath) return moveAction(targetPath, file, study);\n        });\n};\n\nexport let duplicateFile = (file,study) => () => {\n    let newPath = m.prop(file.path);\n    return messages.prompt({\n        header: 'Duplicate File',\n        postContent: m('p.text-muted', 'You can move a file to a specific folder be specifying the full path. For example \"images/img.jpg\"'),\n        prop: newPath\n    })\n        .then(response => {\n            if (response && newPath() !== file.name) return createFile(study, newPath, file.content);\n        });\n};\n\nexport let copyFile = (file, study) => () => {\n    let filePath = m.prop(file.basePath);\n    let study_id = m.prop(study.id);\n    let new_study_id = m.prop('');\n    messages.confirm({\n        header: 'Copy File',\n        content: copyFileComponent({new_study_id, study_id})\n    })\n        .then(response => {\n            if (response && study_id() !== new_study_id) return copyAction(filePath() +'/'+ file.name, file, study_id, new_study_id);\n        })\n    ;\n};\n\nexport let renameFile = (file,study) => () => {\n    let newPath = m.prop(file.path);\n    return messages.prompt({\n        header: 'Rename File',\n        postContent: m('p.text-muted', 'You can move a file to a specific folder be specifying the full path. For example \"images/img.jpg\"'),\n        prop: newPath\n    })\n        .then(response => {\n            if (response && newPath() !== file.name) return moveAction(newPath(), file,study);\n        });\n};\n\nexport let make_experiment = (file, study) => () => {\n    let descriptive_id = m.prop(file.path);\n    let error = m.prop('');\n    return messages.confirm({\n        header:'New Name',\n        content: m('div', [\n            m('input.form-control',  {placeholder: 'Enter Descriptive Id', onchange: m.withAttr('value', descriptive_id)}),\n            !error() ? '' : m('p.alert.alert-danger', error())\n        ])}).then(response => response && study.make_experiment(file, descriptive_id()).then(()=>m.redraw()));\n};\n\nexport let update_experiment = (file, study) => () => {\n    let descriptive_id = m.prop(file.exp_data.descriptive_id);\n    let error = m.prop('');\n    return messages.confirm({\n        header:'New Name',\n        content: m('div', [\n            m('input.form-control',  {placeholder: 'Enter new descriptive id', value: descriptive_id(), onchange: m.withAttr('value', descriptive_id)}),\n            !error() ? '' : m('p.alert.alert-danger', error())\n        ])}).then(response => response && study.update_experiment(file, descriptive_id()))\n        .then(()=>{file.exp_data.descriptive_id=descriptive_id; m.redraw();});\n};\n\nexport let delete_experiment = (file, study) => () => {\n    messages.confirm({\n        header: 'Remove Experiment',\n        content: 'Are you sure you want to remove this experiment? This is a permanent change.'\n    })\n        .then(response => {\n            if (response) study.delete_experiment(file);})\n        .then(()=>{delete file.exp_data; m.redraw();});\n\n};\n\nfunction moveAction(newPath, file, study){\n    const isFocused = file.id === m.route.param('fileId');\n\n    const def = study\n        .move(newPath,file) // the actual movement\n        .then(redirect)\n        .catch(response => messages.alert({\n            header: 'Move/Rename File',\n            content: m('p.alert.alert-danger', response.message)\n        }))\n        .then(m.redraw); // redraw after server response\n\n    m.redraw();\n    return def;\n\n    function redirect(response){\n        // redirect only if the file is chosen, otherwise we can stay right here...\n        if (isFocused) m.route(`/editor/${study.id}/file/${encodeURI(file.id)}`);\n        return response;\n    }\n}\n\nfunction copyAction(path, file, study_id, new_study_id){\n    let def = file\n        .copy(path, study_id, new_study_id) // the actual movement\n        .catch(response => messages.alert({\n\n            header: 'Copy File',\n            content: m('p.alert.alert-danger', response.message)\n        }))\n        .then(m.redraw); // redraw after server response\n\n    return def;\n}\n\nlet playground;\nexport const play = (file,study) => () => {\n    const isSaved = study.files().every(file => !file.hasChanged());  \n    const isOpenServer = true;\n    const open = isOpenServer ? openNew : openOld;\n\n    if (isSaved) open();\n    else messages.confirm({\n        header: 'Play task',\n        content: 'You have unsaved files, the player will use the saved version, are you sure you want to proceed?' \n    }).then(response => response && open());\n\n    function openNew(){\n        if (playground && !playground.closed) playground.close();\n\n        playground = window.open(`${baseUrl}/play/${study.id}/${file.id}`, 'Playground');\n        playground.onload = function(){\n            playground.addEventListener('unload', function() {\n                window.focus();\n            });\n            playground.focus();\n        };\n    }\n\n    function openOld(){\n        // this is important, if we don't close the original window we get problems with onload\n        if (playground && !playground.closed) playground.close();\n\n        playground = window.open('playground.html', 'Playground');\n        playground.onload = function(){\n            // first set the unload listener\n            playground.addEventListener('unload', function() {\n                // get focus back here\n                window.focus();\n            });\n\n            // then activate the player (this ensures that when )\n            playground.activate(file);\n            playground.focus();\n        };\n    }\n};\n\nexport let save = file => () => {\n    file.save()\n        .then(m.redraw)\n        .catch(err => messages.alert({\n            header: 'Error Saving:',\n            content: err.message\n        }));\n};\n\n\n// add trailing slash if needed, and then remove proceeding slash\n// return prop\nlet pathProp = path => m.prop(path.replace(/\\/?$/, '/').replace(/^\\//, ''));\n\nexport let  createFile = (study, name, content) => {\n    study.createFile({name:name(), content:content()})\n        .then(response => {\n            m.route(`/editor/${study.id}/file/${encodeURIComponent(response.id)}`);\n            return response;\n        })\n        .catch(err => messages.alert({\n            header: 'Failed to create file:',\n            content: err.message\n        }));\n};\n\nexport let createDir = (study, path='') => () => {\n    let name = pathProp(path);\n\n    messages.prompt({\n        header: 'Create Directory',\n        content: 'Please insert directory name',\n        prop: name\n    })\n        .then(response => {\n            if (response) return study.createFile({name:name(), isDir:true});\n        })\n        .then(m.redraw)\n        .catch(err => messages.alert({\n            header: 'Failed to create directory:',\n            content: err.message\n        }));\n};\n\nexport let createEmpty = (study, path = '') => () => {\n    let name = pathProp(path);\n    let content = ()=>'';\n\n    messages.prompt({\n        header: 'Create file',\n        content: 'Please insert the file name:',\n        prop: name\n    }).then(response => {\n        if (response) return createFile(study, name,content);\n    });\n};\n\nexport let deleteFiles = study => () => {\n    let chosenFiles = study.getChosenFiles();\n    let isFocused = chosenFiles.some(file => file.id === m.route.param('fileId'));\n\n    if (!chosenFiles.length) {\n        messages.alert({\n            header:'Remove Files',\n            content: 'There are no files selected'\n        });\n        return;\n    }\n\n    messages.confirm({\n        header: 'Remove Files',\n        content: 'Are you sure you want to remove all checked files? This is a permanent change.'\n    })\n        .then(response => {\n            if (response) doDelete();\n        });\n\n    function doDelete(){\n        study.delFiles(chosenFiles)\n            .then(redirect)\n            .catch(err => messages.alert({\n                header: 'Failed to delete files:',\n                content: err.message\n            }))\n            .then(m.redraw);\n    }\n\n    function redirect(response){\n        // redirect only if the file is chosen, otherwise we can stay right here...\n        if (isFocused) m.route(`/editor/${study.id}`); \n        return response;\n    }\n};\n\nexport const downloadChosenFiles = (study) => () => {\n    const chosenFiles = study.getChosenFiles().map(f=>f.path);\n    if (!chosenFiles.length) {\n        messages.alert({\n            header:'Download Files',\n            content: 'There are no files selected'\n        });\n        return;\n    }\n\n    study.downloadFiles(chosenFiles)\n        .then(url => downloadUrl(url, study.name))\n        .catch(err => messages.alert({\n            header: 'Failed to download files:',\n            content: err.message\n        }));\n};\n\nexport const downloadFile = (study, file) => () => {\n    if (!file.isDir) return downloadUrl(file.url, file.name);\n\n    study.downloadFiles([file.path])\n        .then(url => downloadUrl(url, study.name))\n        .catch(err => messages.alert({\n            header: 'Failed to download files:',\n            content: err.message\n        }));\n};\n\nexport let resetFile = file => () => file.content(file.sourceContent());\n","import fullHeight from 'utils/fullHeight';\nexport default ace;\n\nlet ace = args => m.component(aceComponent, args);\n\nlet noop = function(){};\n\nlet aceComponent = {\n    controller: function(){\n        const editorCache = m.prop();\n        return {editorCache, onunload};\n\n        function onunload(){\n            if (editorCache()){\n                editorCache().destroy();\n            }\n        }\n    },\n    view: function editorView(ctrl, args){\n        return m('.editor', {id:'text-editor', config: aceComponent.config(ctrl, args)});\n    },\n\n    config: function({editorCache},{content, observer, settings = {}}){\n        return function(element, isInitialized, ctx){\n            let editor = editorCache();\n            const mode = settings.mode || 'javascript';\n            if (editor) editor.setReadOnly(!!settings.isReadonly);\n\n            // paster with padding\n            let paste = text => {\n                if (!editor) return false;\n                let pos = editor.getSelectionRange().start; \n                let line = editor.getSession().getLine(pos.row);\n                let padding = line.match(/^\\s*/);\n                // replace all new lines with padding\n                if (padding) text = text.replace(/(?:\\r\\n|\\r|\\n)/g, '\\n' + padding[0]);\n                \n                editor.insert(text);\n                editor.focus();\n            };\n\n            if (!isInitialized){\n                fullHeight(element, isInitialized, ctx);\n\n                require(['ace/ace'], function(ace){\n                    const undoManager = settings.undoManager || (u => u);\n                    const position = settings.position || (u => u);\n                    ace.config.set('packaged', true);\n                    ace.config.set('basePath', require.toUrl('ace'));\n\n                    editor = ace.edit(element);\n                    editorCache(editor);\n\n                    let session = editor.getSession();\n                    let commands = editor.commands;\n\n                    editor.setReadOnly(!!settings.isReadonly);\n                    editor.setTheme('ace/theme/cobalt');\n                    session.setMode('ace/mode/' + mode);\n                    if (mode !== 'javascript') session.setUseWorker(false);\n                    editor.setHighlightActiveLine(true);\n                    editor.setShowPrintMargin(false);\n                    editor.setFontSize('18px');\n                    editor.$blockScrolling = Infinity; // scroll to top\n\n                    // set jshintOptions\n                    session.on('changeMode', function(e, session){\n                        if (session.getMode().$id === 'ace/mode/javascript' && !!session.$worker && settings.jshintOptions) {\n                            session.$worker.send('setOptions', [settings.jshintOptions]);\n                        }\n                    });\n\n                    session.on('change', function(){\n                        content(editor.getValue());\n                        m.redraw();\n                    });\n\n                    commands.addCommand({\n                        name: 'save',\n                        bindKey: {win: 'Ctrl-S', mac: 'Command-S'},\n                        exec: settings.onSave || noop\n                    });\n                    \n                    if(observer) observer.on('paste',paste );\n                    if(observer) observer.on('settings',() => editor.execCommand('showSettingsMenu'));\n                    \n                    setContent();\n\n                    // return to the last position when reinitializing an editor\n                    if (position()) {\n                        let {scroll, row, column} = position();\n                        editor.session.setScrollTop(scroll);\n                        editor.moveCursorTo(row, column);\n                        editor.clearSelection();\n                    }\n\n                    // reset undo manager so that ctrl+z doesn't erase file\n                    // save it so that it doesn't get lost when users navigate away\n                    session.setUndoManager(undoManager() || undoManager(new ace.UndoManager())); \n                    editor.focus();\n                    editor.on('destroy', () => {\n                        position(Object.assign({scroll: editor.session.getScrollTop()},editor.getCursorPosition()));\n                        if(observer) observer.off(paste );\n                    });\n                });\n            }\n            \n            // each redraw set content from model (the function makes sure that this is not done when not needed...)\n            setContent();\n\n            function setContent(){\n                let editor = editorCache();\n                if (!editor) return;\n                \n                // this should trigger only drastic changes such as the first time the editor is set\n                if (editor.getValue() !== content()){\n                    editor.setValue(content());\n                    editor.moveCursorTo(0,0);\n                    editor.focus();\n                }\n            }\n        };\n    }\n};\n","export default syntax;\n\nlet syntax = args => m.component(syntaxComponent, args);\n\n/**\n * Syntax component\n * Takes an argument as follows:\n *\n * {valid: Boolean, data: jshint(script).data()}\n */\nlet syntaxComponent = {\n\n    /**\n     * Analyze script\n     * @param  {String} script A script to analyze\n     * @return {Object}\n     * {\n     *      isValid: Boolean,\n     *      data: Object, // raw data\n     *      errors: Array, // an array of analyzed errors\n     *      errorCount: Number, // the number of errors\n     *      warningCount: Number // the number of warnings\n     * }\n     */\n    analize: (isValid, data) => {\n        let errorCount = 0;\n        let warningCount = 0;\n        let errors = isValid ? [] : data.errors\n            .filter(e => e) // clean null values\n            .map(err => {\n                let isError = err.code && (err.code[0] === 'E');\n\n                isError ? errorCount++ : warningCount++;\n\n                return {\n                    isError: isError,\n                    line: err.line,\n                    col: err.character,\n                    reason: err.reason,\n                    evidence: err.evidence\n                };\n            });\n        return {\n            isValid: isValid,\n            data: data,\n            errors : errors,\n            errorCount: errorCount,\n            warningCount: warningCount\n        };\n    },\n\n    controller:  args => {\n        let file = args.file;\n        return syntaxComponent.analize(file.syntaxValid, file.syntaxData);\n    },\n\n    view: ctrl => {\n        return m('div', [\n            ctrl.isValid\n                ?\n                m('div', {class:'alert alert-success'}, [\n                    m('strong','Well done!'),\n                    'Your script is squeaky clean'\n                ])\n                :\n                m('div', [\n                    m('table.table', [\n                        m('tbody', ctrl.errors.map(err => {\n                            return m('tr',[\n                                m('td.text-muted', `line ${err.line}`),\n                                m('td.text-muted', `col ${err.col}`),\n                                m('td', {class: err.isError ? 'text-danger' : 'text-info'}, err.reason),\n                                m('td',err.evidence)\n                            ]);\n                        }))\n                    ]),\n\n                    m('.row',[\n                        m('.col-md-6', [\n                            m('div', {class:'alert alert-danger'}, [\n                                m('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n                                `You have ${ctrl.errorCount} critical errors.`\n                            ])\n                        ]),\n                        m('.col-md-6', [\n                            m('div', {class:'alert alert-info'}, [\n                                m('strong',{class:'glyphicon glyphicon-warning-sign'}),\n                                `You have ${ctrl.warningCount} non standard syntax errors.`\n                            ])\n                        ])\n                    ])\n\n                ])\n        ]);\n    }\n};\n","export function warn(message, test){\n    return {level:'warn', message: message, test:test};\n}\n\nexport function error(message, test){\n    return {level:'error', message: message, test:test};\n}\n\nexport function row(element, testArr){\n    let messages = flatten(testArr)\n        .filter(msg => msg) // clean empty\n        .filter(msg => typeof msg.test == 'function' ? msg.test(element) : !!msg.test); // run test...\n\n    return !messages.length ? null : {\n        element: element,\n        messages: messages\n    };\n}\n\nfunction flatten(arr) {\n    return arr.reduce(function (flat, toFlatten) {\n        return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n    }, []);\n}","function multiPick(arr, propArr){\n    return arr\n        .map(e=> e && [].concat(e[propArr[0]], e[propArr[1]], e[propArr[2]])) // gather all stim arrays\n        .reduce((previous, current)=>previous.concat(current),[]) // flatten arrays\n        .filter(t=>t); // remove all undefined stim\n}\n\nfunction flattenSequence(sequence){\n    function unMix(e){\n        return flattenSequence([].concat(e.data, e.elseData, (e.branches || []).map(e=>e.data)));\n    }\n\n    return sequence\n        .reduce((previous, current) => {return previous.concat(current && current.mixer ? unMix(current) : current);},[])\n        .filter(t=>t); // remove all undefined stim;\n}\n\nfunction concatClean(){\n    let args = [].splice.call(arguments,0);\n    return [].concat.apply([], args).filter(e=>e);\n}\n\nexport function pipElements(script){\n    let trials, stimuli, media;\n\n    trials = concatClean(flattenSequence(script.sequence), script.trialSets);\n    stimuli = concatClean(\n        script.stimulusSets,\n        multiPick(trials,['stimuli', 'layout'])\n    );\n    media = concatClean(\n        script.mediaSets,\n        multiPick(stimuli,['media','touchMedia'])\n    );\n\n    return {trials:trials, stimuli:stimuli, media:media};\n}\n\nexport function questElements(script){\n    let pages, questions;\n\n    pages = [].concat(\n        flattenSequence(script.sequence),\n        script.pagesSets\n    ).filter(t=>t);\n\n    questions = [].concat(\n        script.questionsSets,\n        flattenSequence(multiPick(pages,['questions']))\n    ).filter(t=>t);\n\n    return {pages:pages, questions:questions};\n}\n\nexport function managerElements(script){\n    let tasks;\n\n    tasks = [].concat(\n        flattenSequence(script.sequence),\n        script.pagesSets\n    ).filter(t=>t);\n\n    return {tasks:tasks};\n}","import {warn, error, row} from './messages';\nimport {pipElements} from './parser';\n\nexport default pipValidator;\n\nfunction pipValidator(script, url){\n    let errors = [];\n    let elements = pipElements(script);\n\n    errors.push({type:'Settings',errors: checkSettings(script, url)});\n    errors.push({type:'Trials',errors: filterMap(elements.trials, trialTest)});\n    // errors.push({type:'Stimuli',errors: filterMap(elements.stimuli, stimuliTest)});\n    // errors.push({type:'Media',errors: filterMap(elements.media, mediaTest)});\n\n    return errors;\n}\n\nfunction filterMap(arr, fn){\n    return arr.map(fn).filter(e=>e);\n}\n\n/**\n * Check settings\n * @param  {Object} script The script to be tested\n * @param  {String} url    The script origin URL\n * @return {Array}        Array of error rows\n */\nfunction checkSettings(script, url){\n    let settings = script.settings || {};\n\n    let w = byProp(warn);\n    // var e = byProp(error);\n\n    let errors = [\n        r('base_url', [\n            w('Your base_url is not in the same directory as your script.', e => {\n                // use this!!!\n                // http://stackoverflow.com/questions/4497531/javascript-get-url-path\n                let getPath = url => {\n                    let a = document.createElement('a');\n                    a.href = url;\n                    return a.pathname;\n                };\n\n                let path = getPath(url).substring(0, url.lastIndexOf('/') + 1); // get path but remove file name\n                let t = s => (!s || getPath(s).indexOf(path) !== 0);\n\n                return (typeof e == 'object') ? t(e.image) && t(e.template) : t(e);\n            })\n        ])\n    ];\n\n    return errors.filter(function(err){return !!err;});\n\n    function r(prop, arr){\n        let el = {};\n        el[prop] = settings[prop];\n        return prop in settings && row(el, arr);\n    }\n\n    // wrap warn/error so that I don't have to individually\n    function byProp(fn){\n        return function(msg, test){\n            return fn(msg, e => {\n                for (let prop in e) {\n                    return test(e[prop]);\n                }\n            });\n        };\n    }\n}\n\nfunction trialTest(trial) {\n    let tests = [\n        testInteractions(trial.interactions),\n        testInput(trial.input)\n    ];\n\n    return row(trial, tests);\n\n    function testInteractions(interactions){\n        if (!interactions) {return;}\n\n        if (!Array.isArray(interactions)){\n            return [error('Interactions must be an array.', true)];\n        }\n\n        return  interactions.map((interaction, index) => {\n            return [\n                !interaction.conditions ? error(`Interaction [${index}] must have conditions`, true) : [\n                    error(`Interaction conditon [${index}] must have a type`, toArray(interaction.conditions).some(c=>!c.type))\n                ],\n                !interaction.actions ? error(`Interaction [${index}] must have actions`, true) : [\n                    error(`Interaction action [${index}] must have a type`, toArray(interaction.actions).some(a=>!a.type))\n                ]\n            ];\n        });\n\n\n        function toArray(arr){\n            return Array.isArray(arr) ? arr : [arr];\n        }\n\n    }\n\n    function testInput(input){\n        if (!input) {return;}\n\n        if (!Array.isArray(trial.input)){\n            return [error('Input must be an Array', true)];\n        }\n\n        return [\n            error('Input must always have a handle', input.some(i=>!i.handle)),\n            error('Input must always have an on attribute', input.some(i=>!i.on))\n        ];\n    }\n}\n","import validator from './parser/validator';\nexport default validate;\n\nlet validate = args => m.component(validateComponent, args);\n\nlet validateComponent = {\n    controller: args => {\n        let file = args.file;\n        let ctrl = {\n            validations : m.prop([]),\n            isError: false\n        };\n\n        m.startComputation();\n        file\n            .define()\n            .then(()=>{\n                return file.require();\n            })\n            .then(script => {\n                ctrl.validations(validator(script, file.url));\n                m.endComputation();\n            })\n            .catch(() => {\n                ctrl.isError = true;\n                m.endComputation();\n            });\n\n        return ctrl;\n    },\n    view: ctrl => {\n        return  m('div', [\n            !ctrl.isError ? '' :    m('div', {class:'alert alert-danger'}, [\n                m('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n                `There was a problem parsing this script. Are you sure that it is a valid PI script? Make sure you fix all syntax errors.`\n            ]),\n\n            ctrl.validations().map(validationReport => {\n                return [\n                    m('h4', validationReport.type),\n                    !validationReport.errors.length\n                        ?\n                        m('div', {class:'alert alert-success'}, [\n                            m('strong','Well done!'),\n                            'Your script is squeaky clean'\n                        ])\n                        :\n                        validationReport.errors.map(err => {\n                            return m('.row',[\n                                m('.col-md-4.stringified',\n                                    m('div', {class:'pre'}, m.trust(stringify(err.element)))\n                                ),\n                                m('.col-md-8',[\n                                    m('ul', err.messages.map(msg => {\n                                        return m('li.list-unstyled', {class: msg.level == 'error' ? 'text-danger' : 'text-info'}, [\n                                            m('strong', msg.level),\n                                            msg.message\n                                        ]);\n                                    }))\n                                ])\n                            ]);\n                        })\n                ];\n            })\n\n        ]);\n    }\n};\n\n\nfunction stringify(value) {\n    if (value == null) { // null || undefined\n        return '<i class=\"text-muted\">undefined</i>';\n    }\n    if (value === '') {\n        return '<i class=\"text-muted\">an empty string</i>';\n    }\n\n    switch (typeof value) {\n        case 'string':\n            break;\n        case 'number':\n            value = '' + value;\n            break;\n        case 'object':\n            // display the error message not the full thing...\n            if (value instanceof Error){\n                value = value.message;\n                break;\n            }\n        /* fall through */\n        default:\n            // @TODO: implement this: http://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript\n            value = syntaxHighlight(JSON.stringify(value, null, 4));\n    }\n\n    return value;\n}\n\n\nfunction syntaxHighlight(json) {\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n    // eslint-disable-next-line no-useless-escape\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        let cls = 'number';\n        if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n                cls = 'key';\n            } else {\n                cls = 'string';\n            }\n        } else if (/true|false/.test(match)) {\n            cls = 'boolean';\n        } else if (/null/.test(match)) {\n            cls = 'null';\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n}\n","import pipValidate from './pipValidator';\nimport questValidate from './questValidator';\nimport managerValidate from './managerValidator';\n\nexport default function validate(script){\n    let type = script.type && script.type.toLowerCase();\n    switch (type){\n        case 'pip' : return pipValidate.apply(null, arguments);\n        case 'quest' : return questValidate.apply(null, arguments);\n        case 'manager' : return managerValidate.apply(null, arguments);\n        default:\n            throw new Error('Unknown script.type: ' + type);\n    }\n}\n\nexport function dd(){\n    return [\n        {\n            type: 'task',\n            errosrs:[],\n            errors: [\n                {\n                    element: {name:'myName', content: [1,2,3]},\n                    messages: [\n                        {level:'error', message: 'error message1'},\n                        {level:'warn', message: 'warn message2'},\n                        {level:'warn', message: 'warn message3'},\n                        {level:'error', message: 'error message4'}\n                    ]\n                },\n                {\n                    element: {name:'otherName', content: [1,2,3]},\n                    messages: [\n                        {level:'warn', message: 'warn message1'},\n                        {level:'error', message: 'error message2'}\n                    ]\n                }\n            ]\n        }\n\n    ];\n}\n","export default function questValidator(){\n    let errors = [];\n\n    errors.push({type:'Settings', errors:[]});\n    errors.push({type:'Pages', errors:[]});\n    errors.push({type:'Questions', errors:[]});\n\n    return errors;\n}\n","export default function managerValidator(){\n    let errors = [];\n\n    errors.push({type:'Settings', errors:[]});\n    errors.push({type:'Tasks', errors:[]});\n\n    return errors;\n}\n\n\n\n","import messages from 'utils/messagesComponent';\n\n\n\nexport const copyUrlContent = (url) => () =>\n    m.component(copyComponent, getAbsoluteUrl(url));\n\n\nexport const copyUrl = (url, launch) => () =>\n{\n        messages.alert({\n        header: 'Copy URL',\n        content: m.component(copyComponent, getAbsoluteUrl(url), launch),\n        okText: 'Done'\n    });\n};\n\nlet copyComponent = {\n    controller: (url) => {\n        let copyFail = m.prop(false);\n        let autoCopy = () => copy(url).catch(() => copyFail(true)).then(m.redraw);\n        return {autoCopy, copyFail};\n    },\n    view: ({autoCopy, copyFail}, url, launch) => m('.card-block', [\n        m('.form-group', [\n            m('label', 'Copy Url by clicking Ctrl + C, or click the copy button.'),\n            m('label.input-group',[\n                m('.input-group-addon', {onclick: autoCopy}, m('i.fa.fa-fw.fa-copy')),\n                m('input.form-control', { config: el => el.select(), value: url })\n\n            ]),\n            !launch ? '' : [\n                m('input-group-addon', ['Right-click ', m('a', {href: url}, 'HERE'), ' to launch']),\n                m('label', 'You can use this option to play that study in a private or incognito window to bypass cached content.'),\n            ],\n            !copyFail() ? '' : m('small.text-muted', 'Auto copy will not work on your browser, you need to manually copy this url')\n        ])\n    ])\n};\n\nfunction getAbsoluteUrl(url) {\n    const a = document.createElement('a');\n    a.href=url;\n    return a.href;\n}\n\nfunction copy(text){\n    return new Promise((resolve, reject) => {\n        let input = document.createElement('input');\n        input.value = text;\n        document.body.appendChild(input);\n        input.select();\n\n        try {\n            document.execCommand('copy');\n        } catch(err){\n            reject(err);\n        }\n\n        input.parentNode.removeChild(input);\n    });\n}\n","const END_LINE = '\\n';\nconst TAB = '\\t';\nexport let indent = (str, tab = TAB) => str.replace(/^/gm, tab);\n\nexport let print = obj => {\n    switch (typeof obj) {\n        case 'boolean': return obj ? 'true' : 'false';\n        case 'string' : return printString(obj); \n        case 'number' : return obj + '';\n        case 'undefined' : return 'undefined';\n        case 'function': \n            if (obj.toJSON) return print(obj()); // Support m.prop\n            else return obj.toString();\n    }\n\n    if (obj === null) return 'null';\n\n    if (Array.isArray(obj)) return printArray(obj);\n    \n    return printObj(obj);\n\n    function printString(str){\n        return str === '' ? str : str\n            // escape string\n            .replace(/[\\\\\"']/g, '\\\\$&')\n            // eslint-disable-next-line no-control-regex\n            .replace(/\\u0000/g, '\\\\0')\n            // manage rows separately\n            .split(END_LINE)\n            .map(str => `'${str}'`)\n            .join(` +${END_LINE}${TAB}`);\n    }\n    \n    function printArray(arr){\n        let isShort = arr.every(element => ['string', 'number', 'boolean'].includes(typeof element) && (element.length === undefined || element.length < 15) );\n        let content = arr\n            .map(value => print(value))\n            .join(isShort ? ', ' : ',\\n');\n\n        return isShort\n            ? `[${content}]`\n            : `[\\n${indent(content)}\\n]`;\n    }\n\n    function printObj(obj){\n        let content = Object.keys(obj)\n            .map(key => `${escapeKey(key)} : ${print(obj[key])}`)\n            .map(row => indent(row))\n            .join(',' + END_LINE);\n        return `{\\n${content}\\n}`;\n\n        function escapeKey(key){\n            return /[^1-9a-zA-Z$_]/.test(key) ? `'${key}'` : key;\n        }\n    }\n};\n","import inputWrapper from 'utils/forms/inputWrapper';\nexport default inheritInput;\n\nlet inheritInput = args => m.component(inheritInputComponent, args);\n\nlet inheritInputComponent = {\n    controller({prop}){\n        let value = prop();\n        let rawType = m.prop(typeof value === 'string' ? 'random' : value.type);\n        let rawSet = m.prop(typeof value === 'string' ? value : value.set);\n\n        return {type, set};\n\n        function update(){\n            let type = rawType();\n            let set = rawSet();\n            prop(type === 'random' ? set : {type, set});\n        }\n        \n        function type(value){\n            if (arguments){\n                rawType(value);\n                update();\n            }\n\n            return rawType();\n        }\n        \n        function set(value){\n            if (arguments){\n                rawSet(value);\n                update();\n            }\n\n            return rawSet();\n        }\n    },\n\n    view: inputWrapper(({type,set}) => {\n\n        return m('.form-inline', [\n            m('.form-group.input-group', [\n                m('input.form-control', {\n                    placeholder:'Set',\n                    onchange: m.withAttr('value', set)\n                }),\n                m('span.input-group-addon', {style:'display:none'}) // needed to make the corners of the input square...\n            ]),\n            m('select.c-select', {\n                onchange: m.withAttr('value', type)\n            }, TYPES.map(key => m('option', {value:key},key)))\n        ]);\n    })\n};\n\nconst TYPES = ['random', 'exRandom', 'sequential'];\n","import {formFactory, textInput, selectInput} from 'utils/formHelpers';\nimport inheritInput from './inheritInput';\nexport default taskComponent;\n\nconst taskComponent = {\n    controller({output,close}){\n        const form = formFactory();\n        \n        const type = m.prop('message');\n        const common = {\n            inherit: m.prop(''),\n            name: m.prop(''),\n            title: m.prop('')\n        };\n        const task = m.prop({});\n            \n        return {type, common, task, form, close, proceed};\n\n        function proceed(){\n            output(Object.assign({type}, common, task()));\n            close(true)();\n        }       \n\n    },\n    view({type, common, task, form, close, proceed}){\n        return m('div', [   \n            m('h4', 'Add task'),\n            m('.card-block', [\n                inheritInput({label:'inherit', prop:common.inherit, form, help: 'Base this element off of an element from a set'}),\n                selectInput({label:'type', prop: type, form, values: {message: 'message', 'minno-time': 'time', 'minno-quest': 'minno', 'pip (old minno-time)': 'pip' }}),\n                textInput({label: 'name', prop: common.name, help: 'The name for the task',form}),\n                textInput({label: 'title', prop: common.title, help: 'The title to be displayed in the browsers tab',form}),\n                m.component(taskSwitch(type()), {task, form})\n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:close(false)}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:proceed}, 'Proceed')\n            ])\n        ]);\n    }\n};\n\nfunction taskSwitch(type){\n    switch (type) {\n        case 'message' : return messageComponent;\n        case 'pip' : return pipComponent;\n        case 'quest' : return questComponent;\n        case 'time' : return timeComponent;\n        default :\n            throw new Error(`Unknown task type: ${type}`);\n    }\n}\n\nconst messageComponent = {\n    controller({task}){\n        task({\n            //piTemplate: m.prop(true),\n            template: m.prop(''),\n            templateUrl: m.prop('')\n        });\n    },\n    view(ctrl, {task, form}){\n        let props = task();\n        return m('div', [\n            //selectInput({label:'piTemplate', prop: props.piTemplate, form, values: {'Active': true, 'Debriefing template': 'debrief', 'Don\\'t use': false}, help: 'Use the PI style templates'}),\n            textInput({label: 'templateUrl', prop: props.templateUrl, help: 'The URL for the task template file',form}),\n            textInput({label: 'template', prop: props.template, rows:6,  form, isArea:true, help: m.trust('You can manually create your template here <strong>instead</strong> of using a url')})\n        ]); \n    }\n};\n\nconst timeComponent = {\n    controller({task}){\n        const scriptUrl = m.prop('');\n        task({ scriptUrl });\n    },\n    view(ctrl, {task, form}){\n        const props = task();\n        return m('div', [\n            textInput({label: 'scriptUrl', prop: props.scriptUrl, help: 'The URL for the task script file',form}),\n        ]); \n    }\n};\n\nconst pipComponent = {\n    controller({task}){\n        const version = m.prop('0.3');\n        const scriptUrl = m.prop('');\n        const baseUrl = `//cdn.jsdelivr.net/gh/minnojs/minno-quest@${version()}/dist/js`;\n        task({ version, scriptUrl, baseUrl });\n    },\n    view(ctrl, {task, form}){\n        const props = task();\n        return m('div', [\n            textInput({label: 'scriptUrl', prop: props.scriptUrl, help: 'The URL for the task script file',form}),\n            selectInput({label:'version', prop: versionProp, form, values: {'0.3':0.3, '0.2':0.2}, help: 'The version of PIP that you want to use'})\n        ]); \n\n        function versionProp(){\n            if (arguments.length) {\n                props.version(arguments[0]);\n                props.baseUrl = `//cdn.jsdelivr.net/gh/minnojs/minno-quest@${props.version()}/dist/js`;\n            }\n\n            return props.version();\n        }\n    }\n};\n\nconst questComponent = {\n    controller({task}){\n        task({\n            scriptUrl: m.prop('')\n        });\n    },\n    view(ctrl, {task, form}){\n        let props = task();\n        return m('div', [\n            textInput({label: 'scriptUrl', prop: props.scriptUrl, help: 'The URL for the task script file',form})\n        ]); \n    }\n};\n","import {formFactory, textInput, checkboxInput, maybeInput} from 'utils/formHelpers';\nimport inheritInput from './inheritInput';\nexport default pageComponent;\n\nlet pageComponent = {\n    controller({output,close}){\n        let form = formFactory();\n        let page = {\n            inherit: m.prop(''),\n            header: m.prop(''),\n            decline: m.prop(false),\n            progressBar: m.prop('<%= pagesMeta.number %> out of <%= pagesMeta.outOf%>'),\n            autoFocus: true,\n            questions: []\n        };\n        output(page);\n\n        return {page,form, close};\n\n    },\n    view({page,form,close}){\n        return m('div', [   \n            m('h4', 'Add Page'),\n            m('.card-block', [\n                inheritInput({label:'inherit', prop:page.inherit, form, help: 'Base this element off of an element from a set'}),\n                textInput({label: 'header', prop: page.header, help: 'The header for the page',form}),\n                checkboxInput({label: 'decline', description: 'Allow declining to answer', prop: page.decline,form}),\n                maybeInput({label:'progressBar', help: 'If and when to display the  progress bar (use templates to control the when part)', prop: page.progressBar,form})\n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:close(false)}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:close(true)}, 'Proceed')\n            ])\n        ]);\n    }\n};\n\n","import {formFactory, textInput, checkboxInput, arrayInput, selectInput, maybeInput} from 'utils/formHelpers';\nimport inheritInput from './inheritInput';\nexport default questComponent;\n\nlet questComponent = {\n    controller({output,close}){\n        let form = formFactory();\n        let type = m.prop();\n        let common = {\n            inherit: m.prop(''),\n            name: m.prop(''),\n            stem: m.prop(''),\n            required: m.prop(false),\n            errorMsg: {\n                required: m.prop('')\n            }\n        };\n        let quest = m.prop({});\n        output(quest);\n\n        return {type, common, quest,form, close, proceed};\n\n        function proceed(){\n            let script = output(Object.assign({type}, common, quest()));\n            if (!script.required()) script.required = script.errorMsg = undefined;\n            if (!script.help || !script.help()) script.help = script.helpText = undefined;\n            \n            close(true)();\n        }       \n\n    },\n    view({type, common, quest,form,close, proceed}){\n        return m('div', [   \n            m('h4', 'Add Question'),\n            m('.card-block', [\n                selectInput({label:'type', prop: type, form, values: typeMap}),\n                inheritInput({label:'inherit', prop:common.inherit, form, help: 'Base this element off of an element from a set'}),\n                textInput({label: 'name', prop: common.name, help: 'The name by which this question will be recorded',form}),\n                textInput({label: 'stem', prop: common.stem, help: 'The question text',form}),\n                m.component(question(type()), {type,quest,form,common}),\n                checkboxInput({label: 'required', prop: common.required, description: 'Require this question to be answered', form}),\n                common.required()\n                    ? textInput({label:'requiredText',  help: 'The error message for when the question has not been answered', prop: common.errorMsg.required ,form})\n                    : ''\n            ]),\n            m('.text-xs-right.btn-toolbar',[\n                m('a.btn.btn-secondary.btn-sm', {onclick:close(false)}, 'Cancel'),\n                m('a.btn.btn-primary.btn-sm', {onclick:proceed}, 'Proceed')\n            ])\n        ]);\n    }\n};\n\nlet typeMap = {None: undefined, Text: 'text', 'Text Area': 'textarea', 'Select One': 'selectOne', 'Select Multiple': 'selectMulti', Slider: 'slider'};\n\nlet question = type => {\n    switch (type) {\n        case 'text' : return textComponent;\n        case 'textarea' : return textareaComponent;\n        case 'selectOne' : return selectOneComponent;\n        case 'selectMulti' : return selectOneComponent;\n        case 'slider' : return sliderComponent;\n        case undefined : return {view: () => m('div')};\n        default:\n            throw new Error('Unknown question type');\n    }\n};\n\nlet textComponent = {\n    controller({quest, common}){\n        common.errorMsg.required('This text field is required');\n        // setup unique properties\n        quest({\n            autoSubmit: m.prop(false)\n        });\n    },\n    view(ctrl, {quest, form}){\n        let props = quest();\n        return m('div', [\n            checkboxInput({label: 'autoSubmit', prop: props.autoSubmit, description: 'Submit on enter', form})\n        ]); \n    }\n};\n\nlet textareaComponent = {\n    controller({quest, common}){\n        common.errorMsg.required('This text field is required');\n        // setup unique properties\n        quest({\n            rows: m.prop(3),\n            columns: m.prop('')\n        });\n    },\n    view(ctrl, {quest, form}){\n        let props = quest();\n        return m('div', [\n            textInput({label: 'rows', prop: props.rows, help: 'The number of visible text lines', form})\n        ]); \n\n    }\n};\n\nlet selectOneComponent = {\n    controller({quest,common}){\n        common.errorMsg.required('Please select an answer, or click \\'decline to answer\\'');\n        // setup unique properties\n        quest({\n            autoSubmit: m.prop(true),\n            answers: m.prop([\n                'Very much',\n                'Somewhat',\n                'Undecided',\n                'Not realy',\n                'Not at all'\n            ]),\n            numericValues:true,\n            help: m.prop(false),\n            helpText: m.prop('Tip: For quick response, click to select your answer, and then click again to submit.')\n        });\n    },\n    view(ctrl, {quest, form}){\n        let props = quest();\n        return m('div', [\n            checkboxInput({label: 'autoSubmit', prop: props.autoSubmit, description: 'Submit on double click', form}),\n            arrayInput({label: 'answers', prop: props.answers, rows:7,  form, isArea:true, help: 'Each row here represents an answer option', required:true}),\n            maybeInput({label:'help', help: 'If and when to display the help text (use templates to control the when part)', prop: props.help,form, dflt: '<%= pagesMeta.number < 3 %>'}),\n            props.help()\n                ? textInput({label:'helpText',  help: 'The instruction text for using this type of question', prop: props.helpText,form, isArea: true})\n                : ''\n        ]); \n    }\n};\n\nlet sliderComponent = {\n    controller({quest,common}){\n        common.errorMsg.required('Please select an answer, or click \\'decline to answer\\'');\n        // setup unique properties\n        quest({\n            min: m.prop(0),\n            max: m.prop(100),\n            steps: m.prop(''),\n            hidePips: m.prop(false), \n            highlight: m.prop(true),\n            labels : m.prop(['Low', 'Medium', 'High']),\n            help: m.prop(false),\n            helpText: m.prop('Click on the gray line to indicate your judgment. After clicking the line, you can slide the circle to choose the exact judgment.')\n        });\n    },\n    view(ctrl, {quest, form}){\n        let props = quest();\n        return m('div', [\n            textInput({label: 'min', prop: props.min, help: 'The minimum value for the slider',form}),\n            textInput({label: 'max', prop: props.max, help: 'The maximum value for the slider',form}),\n            textInput({label: 'steps', prop: props.steps, help: 'Break the slider continuum to individual steps. Set to an integer or empty for a continuous slider',form}),\n            props.steps()\n                ? '' \n                : checkboxInput({label: 'hidePips', prop: props.hidePips, description: 'Hide the markers for the individual steps',form}),\n            arrayInput({label:'labels', prop: props.labels, help: 'A list of labels for the slider range', isArea: true, rows:5, form}),\n            maybeInput({label:'help', help: 'If and when to display the help text (use templates to control the when part)', prop: props.help,form, dflt: '<%= pagesMeta.number < 3 %>'}),\n            props.help()\n                ? textInput({label:'helpText',  help: 'The instruction text for using this type of question', prop: props.helpText,form, isArea: true})\n                : ''\n        ]); \n    }\n};\n","import messages from 'utils/messagesComponent';\nimport {print} from 'utils/prettyPrint';\nimport taskComponent from './snippets/task';\nimport pageComponent from './snippets/page';\nimport questComponent from './snippets/quest';\n\nexport let  snippetRunner = component => observer => () => {\n    let output = m.prop();\n    messages\n        .custom({\n            preventEnterSubmits: true,\n            content: m.component(component, {output, close}),\n            wide: true\n        })\n        .then(isOk => isOk && observer.trigger('paste', print(clearUnused(output()))));\n\n    function close(value) {return () => messages.close(value);}\n};\n\nexport let taskSnippet = snippetRunner(taskComponent);\nexport let pageSnippet = snippetRunner(pageComponent);\nexport let questSnippet = snippetRunner(questComponent);\n\nfunction clearUnused(obj){\n    return Object.keys(obj).reduce((result, key) => {\n        let value = obj[key];\n        if (typeof value === 'function' && value.toJSON) value = value();\n        \n        // check if is empty\n        if (value === '' || value === undefined) return result;\n        if (Array.isArray(value) && !value.length) return result;\n\n        result[key] = value;\n        return result;\n    }, {});\n}\n","import classNames from 'utils/classNames';\nimport {copyUrl} from 'utils/copyUrl';\nimport {play, save, resetFile} from '../sidebar/fileActions';\nimport {pageSnippet, questSnippet, taskSnippet} from './snippetActions';\n\nexport default textMenuView;\n\nconst amdReg = /(?:define\\(\\[['\"])(.*?)(?=['\"])/;\n\nconst textMenuView = ({mode, file, study, observer}) => {\n    const setMode = value => () => mode(value);\n    const modeClass = value => mode() === value ? 'active' : '';\n    const isJs = file.type === 'js';\n    const hasChanged = file.hasChanged();\n    const isExpt = /\\.expt\\.xml$/.test(file.path);\n    const isHtml = ['html', 'htm', 'jst', 'ejs'].includes(file.type);\n    const amdMatch = amdReg.exec(file.content());\n    const APItype = amdMatch && amdMatch[1];\n    const launchUrl = `https://app-prod-03.implicit.harvard.edu/implicit/Launch?study=${file.url.replace(/^.*?\\/implicit/, '')}&refresh=true`;\n\n    return m('.btn-toolbar.editor-menu', [\n        m('.file-name', {class: file.hasChanged() ? 'text-danger' : ''},\n            m('span',{class: file.hasChanged() ? '' : 'invisible'}, '*'),\n            file.path\n        ),\n\n        m('.btn-group.btn-group-sm.pull-xs-right', [\n            m('button.btn.btn-secondary', {onclick: resetFile(file), title:'Reset any chnages made to this file since the last change'},[\n                m('strong.fa.fa-refresh')\n            ]),\n            m('a.btn.btn-secondary', {onclick: ()=>observer.trigger('settings'), title:'Editor settings'},[\n                m('strong.fa.fa-cog')\n            ])\n        ]),\n\n        m('.btn-group.btn-group-sm.pull-xs-right', [\n            m('a.btn.btn-secondary', {href: `https://minnojs.github.io/minno-quest/0.2/basics/overview.html`, target: '_blank', title:'API documentation'},[\n                m('strong.fa.fa-book'),\n                m('strong', ' Docs')\n            ]),\n            m('a.btn.btn-secondary', {href: `https://github.com/ajaxorg/ace/wiki/Default-Keyboard-Shortcuts`, target: '_blank', title:'Editor help'},[\n                m('strong.fa.fa-info')\n            ])\n        ]),\n\n        !isJs ? '' : m('.btn-group.btn-group-sm.pull-xs-right', [\n            m('a.btn.btn-secondary', {onclick: setMode('edit'), class: modeClass('edit')},[\n                m('strong', study.isReadonly ? 'View' : 'Edit')\n            ]),\n            m('a.btn.btn-secondary', {onclick: setMode('syntax'), class: modeClass('syntax')},[\n                m('strong',\n                    'Syntax ',\n                    file.syntaxValid\n                        ? m('i.fa.fa-check-square.text-success')\n                        : m('span.label.label-danger', file.syntaxData.errors.length)\n                )\n            ])\n        ]),\n\n        /**\n         * Snippets\n         **/\n        study.isReadonly ? '' : m('.btn-group.btn-group-sm.pull-xs-right', [\n            !/^minno/.test(study.type) ? '' : [\n                APItype !== 'managerAPI' ? '' : [\n                    m('a.btn.btn-secondary', {onclick: taskSnippet(observer), title: 'Add task element'}, [\n                        m('strong','T') \n                    ])\n                ],\n                APItype !== 'questAPI' ? '' : [\n                    m('a.btn.btn-secondary', {onclick: questSnippet(observer), title: 'Add question element'}, [\n                        m('strong','Q') \n                    ]),\n                    m('a.btn.btn-secondary', {onclick: pageSnippet(observer), title: 'Add page element'}, [\n                        m('strong','P') \n                    ])\n                ],\n                m('a.btn.btn-secondary', {onclick:() => observer.trigger('paste', '{\\n<%= %>\\n}'), title:'Paste a template wizard'},[\n                    m('strong.fa.fa-percent')\n                ])\n            ],\n\n            study.type !== 'html' || !isHtml ? '' : [\n                m('a.btn.btn-secondary', {onclick:() => observer.trigger('paste', '<!-- os:base -->'), title:'Paste a base url template'},[\n                    m('strong','base')\n                ]),\n                m('a.btn.btn-secondary', {onclick:() => observer.trigger('paste', '<!-- os:vars -->'), title:'Paste a variables template'},[\n                    m('strong','vars')\n                ])\n            ]\n\n\n        ]),\n\n        /**\n         * Play\n         **/\n        m('.btn-group.btn-group-sm.pull-xs-right', [\n\n            !/^minno/.test(study.type) ? '' : [\n                !isJs ? '' :  m('a.btn.btn-secondary', {onclick: play(file,study), title:'Play this task'},[\n                    m('strong.fa.fa-play')\n                ]),\n\n                !isExpt ? '' :  [\n                    m('a.btn.btn-secondary', {href: launchUrl, target: '_blank', title:'Play this task'},[\n                        m('strong.fa.fa-play')\n                    ]),\n                    m('a.btn.btn-secondary', {onmousedown: copyUrl(launchUrl), title:'Copy Launch URL'},[\n                        m('strong.fa.fa-link')\n                    ])\n                ],\n\n                !isHtml ? '' :  m('a.btn.btn-secondary', {href: file.url, target: '_blank', title:'View this file'},[\n                    m('strong.fa.fa-eye')\n                ]),\n            ],\n\n            study.type !== 'html' ? '' : [\n                !isHtml ? '' :  m('a.btn.btn-secondary', {onclick: play(file,study), title:'Play this task'},[\n                    m('strong.fa.fa-play')\n                ]),\n            ],\n\n            m('a.btn.btn-secondary', {onclick: hasChanged && save(file), title:'Save (ctrl+s)',class: classNames({'btn-danger-outline' : hasChanged, 'disabled': !hasChanged || study.isReadonly})},[\n                m('strong.fa.fa-save')\n            ])\n        ])\n    ]);\n};\n\n","import {save} from '../sidebar/fileActions';\nimport ace from './ace/aceComponent';\nimport observerFactory from 'utils/observer';\n\nimport jshintOptions from './jshintOptions';\nimport syntaxComponent from './ace/syntaxComponent';\nimport validatorComponent from './ace/validatorComponent';\n\nimport textMenu from './textMenu';\n\nexport default textEditor;\n\nconst textEditor = args => m.component(textEditorComponent, args);\n\nconst textEditorComponent = {\n    controller: function({file}){\n        const err = m.prop();\n        file.loaded || file.get()\n            .catch(err)\n            .then(m.redraw);\n\n        const ctrl = {mode:m.prop('edit'), observer: observerFactory(), err};\n\n        return ctrl;\n    },\n\n    view: function(ctrl, {file,study}){\n        const {observer, err, mode} = ctrl;\n\n        if (!file.loaded) return m('.loader');\n\n        if (file.error) return m('div', {class:'alert alert-danger'}, [\n            m('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n            `The file \"${file.path}\" was not found (${err() ? err().message : 'please try to refresh the page'}).`\n        ]);\n\n        return m('.editor', [\n            textMenu({mode, file, study, observer}),\n            textContent(ctrl, {key: file.id, file,observer, study})\n        ]);\n    }\n};\n\nconst textContent = (ctrl, {file, study, observer}) => {\n    let textMode = modeMap[file.type] || 'javascript';\n    switch (ctrl.mode()){\n        case 'edit' : return ace({\n            content:file.content,\n            observer,\n            settings: {\n                onSave: save(file), \n                mode: textMode,\n                jshintOptions,\n                isReadonly: study.isReadonly||study.is_locked,\n                undoManager: file.undoManager,\n                position: file.position\n            }\n        });\n        case 'validator': return validatorComponent({file});\n        case 'syntax': return syntaxComponent({file});\n    }\n};\n\nlet modeMap = {\n    js: 'javascript',\n    json: 'json',\n    jsp: 'jsp',\n    jst: 'ejs',\n    html: 'ejs',\n    htm: 'ejs',\n    txt: 'ejs',\n    m: 'ejs',\n    c: 'ejs',\n    cs: 'ejs',\n    h: 'ejs',\n    py: 'ejs',\n    xml: 'xml'\n};\n","export  default observer;\n\nfunction observer(){\n    let channels = {};\n    return {\n        on(channel,cb){\n            channels[channel] || (channels[channel] = []);\n            channels[channel].push(cb);\n        },\n        off(cb){\n            for (let channel in channels) {\n                let index = channels[channel].indexOf(cb);\n                if (index > -1) channels[channel].splice(index, 1);\n            }\n        },\n        trigger(channel, ...args){\n            if (!channels[channel]) return;\n            channels[channel].forEach(cb => cb.apply(null, args));\n        }\n    };\n}\n","import fullHeight from 'utils/fullHeight';\nimport imgEditor from './editors/imgEditor';\nimport pdfEditor from './editors/pdfEditor';\nimport unknowEditor from './editors/unknownEditor';\nimport textEditor from './editors/textEditor';\n\nexport default fileEditorComponent;\n\nlet editors = {\n    js: textEditor,\n    jsp: textEditor,\n    json: textEditor,\n    html: textEditor,\n    htm: textEditor,\n    jst: textEditor,\n    txt: textEditor,\n    m: textEditor,\n    c: textEditor,\n    cs: textEditor,\n    css: textEditor,\n    h: textEditor,\n    py: textEditor,\n    xml: textEditor,\n\n    jpg: imgEditor,\n    jpeg: imgEditor,\n    bmp: imgEditor,\n    png: imgEditor,\n\n    pdf: pdfEditor\n};\n\nlet fileEditorComponent = {\n    controller: function({study}) {\n        return {study};\n    },\n\n    view: ({study}, args = {}) => {\n        const id = m.route.param('fileId');\n        const file = study.getFile(id);\n        let editor = file && editors[file.type] || unknowEditor;\n\n        return m('div', {config:fullHeight}, [\n            file\n                ? editor({file, study,  settings: args.settings, key:file.id})\n                : m('.centrify', [\n                    m('i.fa.fa-smile-o.fa-5x'),\n                    m('h5', 'Please select a file to start working')\n                ])\n        ]);\n    }\n};\n","export default pdfEditor;\n\nlet pdfEditor = ({file}) => m('object', {\n    data: file.url,\n    type: 'application/pdf',\n    width: '100%',\n    height: '100%'\n}, [\n    m('embed', {src: file.url, type: 'application/pdf'}, 'Your browser does not support PDF')\n]);\n\n","import {formFactory, textInput, checkboxInput, maybeInput, arrayInput} from 'utils/formHelpers';\nimport {createFile} from './sidebar/fileActions';\nimport ratingWizard from './wizards/ratingWizard';\nexport default wizardComponent;\n\nlet wizardComponent = {\n    controller({study}){\n        let path = m.prop('');\n        let form = formFactory();\n        let submit = () => {\n            form.showValidation(true);\n            if (form.isValid()){\n                createFile(study, path, compileScript(script) );\n            }\n            \n        };\n\n        let compileScript = script => () => {\n            script.basicPage.questions = [\n                {inherit: {type:script.randomize() ? 'exRandom' : 'sequential', set:'questionList'}}\n            ];\n            script.sequence = [\n                {\n                    mixer:'repeat',\n                    times: script.times() || script.questionList().length,\n                    data:[\n                        {inherit: 'basicPage'}\n                    ]\n                }\n            ];\n\n            return ratingWizard(script);\n        };\n\n\n        let script ={\n            basicPage: {\n                header: m.prop(''),\n                decline: m.prop(true),\n                autoFocus:true\n            },\n            basicSelect: {\n                type: 'selectOne',\n                autoSubmit: m.prop(false),\n                numericValues: m.prop(true),\n                help: m.prop('<%= pagesMeta.number < 3 %>'),\n                helpText: m.prop('Tip: For quick response, click to select your answer, and then click again to submit.'),\n                answers: m.prop([\n                    'Very much',\n                    'Somewhat',\n                    'Undecided',\n                    'Not realy',\n                    'Not at all'\n                ]) \n            },\n            questionList: m.prop([\n                {stem:'Do you like chocolate?', name:'q1', inherit:'basicSelect'},\n                {stem:'Do you like bannanas?', name:'q2', inherit:'basicSelect'}\n            ]),\n            times: m.prop(false),\n            randomize: m.prop(true),\n            sequence: [\n                {\n                    mixer: 'repeat',\n                    times: m.prop(10),\n                    data: [\n                        {inherit:'basicPage'}\n                    ]\n                }\n            ]\n        };\n        return {path, form, submit, script};\n    },\n    view({form,submit, script, path}){      \n        let basicPage = script.basicPage;\n        let basicSelect = script.basicSelect;\n\n        return m('.wizard.container', [\n            m('h3', 'Rating wizard'),\n            m('p', 'This wizard is responsible for rating stuff'),\n            textInput({label:'File Name',  placeholder: 'Path to file', prop: path ,form, required:true}), \n\n            m('h4', 'Basic Page'),\n            textInput({label:'Header',  placeholder: 'Page header', help: 'The header for all pages.', prop: basicPage.header,form}), \n            checkboxInput({label: 'Decline', description: 'Allow users to decline', prop: basicPage.decline, form}),\n\n            m('h4', 'Basic Select'),\n            checkboxInput({label: 'autoSubmit', description: 'Submit upon second click', prop: basicSelect.autoSubmit, form}),\n            arrayInput({label: 'answers', prop: (basicSelect.answers), rows:7,  form, isArea:true, help: 'Each row here represents an answer option', required:true}),\n            checkboxInput({label: 'numericValues', description: 'Responses are recorded as numbers', prop: basicSelect.numericValues, form}),\n            maybeInput({label:'help', help: 'If and when to display the help text (use templates to control the when part)', prop: basicSelect.help,form}),\n            basicSelect.help()\n                ? textInput({label:'helpText',  help: 'The instruction text for using this type of question', prop: basicSelect.helpText,form, isArea: true})\n                : '',\n\n            m('h4', 'Sequence'),\n            checkboxInput({label: 'Randomize', description: 'Randomize questions', prop: script.randomize, form}),\n            maybeInput({label: 'Choose', help:'Set a number of questions to choose from the pool. If this option is not selected all questions will be used.', form, prop: script.times}),\n            arrayInput({label: 'questions', prop: script.questionList, toArr: (stem, index) => ({stem, name: `q${index}`, inherit:'basicSelect'}), fromArr: q => q.stem, rows:20,  form, isArea:true, help: 'Each row here represents a questions', required:true}),\n            m('.row', [\n                m('.col-cs-12.text-xs-right', [\n                    !form.showValidation() || form.isValid()\n                        ? m('button.btn.btn-primary', {onclick: submit}, 'Create')  \n                        : m('button.btn.btn-danger', {disabled: true}, 'Not Valid')\n                ])\n            ])\n        ]); \n    } \n};\n","import {print, indent} from 'utils/prettyPrint';\n\nexport default function ratingWizard({basicPage, basicSelect, questionList, sequence}){\n    const NEW_LINE = '\\n';\n    let content = [\n        `var API = new Quest();`,\n\n        ``,\n        `// The structure for the basic questionnaire page`,\n        `API.addPagesSet('basicPage', ${print(basicPage)});`,\n\n        ``,\n        `// The structure for the basic question    `,\n        `API.addQuestionsSet('basicSelect', ${print(basicSelect)});`,\n\n        `// This is the question pool, the sequence picks the questions from here`,\n        `API.addQuestionsSet('questionList', ${print(questionList)});`,\n        ``,\n\n        `// This is the sequence of questions`,\n        `// Note that you may want to update the \"times\" property if you change the number of questions`,\n        `API.addSequence(${print(sequence)});`,\n\n        ``,\n        `return API.script;`\n    ].join(NEW_LINE);\n\n    return `define(['questAPI'], function(Quest){\\n${indent(content)}\\n});`;\n}\n","import classNames from './classNames';\nexport default contextMenuComponent;\n\n/**\n * Set this component into your layout then use any mouse event to open the context menu:\n * oncontextmenu: contextMenuComponent.open([...menu])\n *\n * Example menu:\n * [\n *  {icon:'fa-play', text:'begone'},\n *  {icon:'fa-play', text:'asdf'},\n *  {separator:true},\n *  {icon:'fa-play', text:'wertwert', menu: [\n *      {icon:'fa-play', text:'asdf'}\n *  ]}\n * ]\n */\n\nconst contextMenuComponent = {\n    vm: {\n        show: m.prop(false),\n        style: m.prop({}),\n        menu: m.prop([])\n    },\n    view: () => {\n        return m(\n            '.context-menu',\n            {\n                class: classNames({'show-context-menu': contextMenuComponent.vm.show()}),\n                style: contextMenuComponent.vm.style()\n            },\n            contextMenuComponent.vm.menu().map(menuNode)\n        );\n    },\n\n    open: menu => e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const left = e.pageX + 'px';\n        const top = e.pageY + 'px';\n        const bottom = (window.innerHeight - e.pageY) + 'px';\n        const style = window.innerHeight/2 > e.pageY ? {left,top} : {left,bottom};\n\n        contextMenuComponent.vm.menu(menu);\n        contextMenuComponent.vm.show(true);\n        contextMenuComponent.vm.style(style);\n\n        document.addEventListener('mousedown', onClick, false);\n        function onClick(){\n            contextMenuComponent.vm.show(false);\n            document.removeEventListener('mousedown', onClick);\n            m.redraw();\n        }\n    }\n};\n\nlet menuNode = (node, key) => {\n    if (!node) return '';\n    if (node.separator) return m('.context-menu-separator', {key:key});\n\n    let action = node.action;\n    if (node.href && !action) action = openTab;\n    if (node.disabled) action = null;\n    \n    return m('.context-menu-item', {class: classNames({disabled: node.disabled, submenu:node.menu, key: key})}, [\n        m('button.context-menu-btn',{onmousedown: action}, [\n            m('i.fa', {class:node.icon}),\n            m('span.context-menu-text', node.text)\n        ]),\n        node.menu ? m('.context-menu', node.menu.map(menuNode)) : ''\n    ]);\n\n    function openTab(){\n        let win = window.open(node.href, '_blank');\n        win.focus();\n    }\n};\n","import contextMenu from 'utils/contextMenuComponent';\nimport messages from 'utils/messagesComponent';\nimport {launchUrl} from 'modelUrls';\n\nimport {\n    createDir, createEmpty, moveFile, duplicateFile, copyFile, renameFile, downloadFile, resetFile,\n    make_experiment, update_experiment, delete_experiment\n} from './fileActions';\n\nimport {copyUrl} from 'utils/copyUrl';\nexport default fileContext;\n\n\nconst fileContext = (file, study) => {\n    let path = !file ? '/' : file.isDir ? file.path : file.basePath;\n    let isReadonly = study.isReadonly;\n    let menu = [];\n\n    if (!isReadonly) {\n        menu = menu.concat([\n            {icon:'fa-folder', text:'New Directory', action: createDir(study, path)},\n            {icon:'fa-file', text:'New File', action: createEmpty(study, path)},\n            // @TODO: we've decided to change the exports to be dynamic: to pull the wizard hash from somewhere external\n            // this requires some sort of external configuration\n            // {icon:'fa-file-text', text:'New from template', menu: mapWizardHash(wizardHash)},\n            {icon:'fa-magic', text:'New from wizard', menu: [\n                {text: 'Rating wizard', action: activateWizard(`rating`)}\n            ]}\n        ]);\n    }\n    let version_id = study.versions.length? study.versions[study.versions.length-1].id : '';\n\n\n    // Allows to use as a button without a specific file\n    if (file) {\n        // console.log(file);\n        // let isExpt = /\\.expt\\.xml$/.test(file.name) && file.exp_data;\n        let isExpt = file.exp_data && !file.exp_data.inactive;\n\n        if (!isReadonly) menu.push({separator:true});\n\n        menu = menu.concat([\n            {icon:'fa-refresh', text: 'Refresh/Reset', action: resetFile(file), disabled: isReadonly || file.content() == file.sourceContent()},\n            {icon:'fa-download', text:'Download', action: downloadFile(study, file)},\n            {icon:'fa-link', text: 'Copy URL', action: copyUrl(file.url)},\n\n            !isExpt ?  {icon:'fa-desktop', text:'Make Experiment', action: make_experiment(file,study), disabled: isReadonly }\n                :  {icon:'fa-desktop', text:'Experiment options', menu: [\n                    {icon:'fa-exchange', text:'Rename', action: update_experiment(file, study), disabled: isReadonly },\n                    {icon:'fa-close', text:'Cancel Experiment File', action: delete_experiment(file, study), disabled: isReadonly },\n                    { icon:'fa-play', href:`${launchUrl}/${file.exp_data.id}/${version_id}`, text:'Play this task'},\n                    {icon:'fa-link', text: 'Copy Launch URL', action: copyUrl(`${launchUrl}/${file.exp_data.id}/${version_id}`, true)}\n                ]},\n\n            //     isExpt ?  { icon:'fa-play', href:`https://app-prod-03.implicit.harvard.edu/implicit/Launch?study=${file.url.replace(/^.*?\\/implicit/, '')}`, text:'Play this task'} : '',\n            // isExpt ? {icon:'fa-link', text: 'Copy Launch URL', action: copyUrl(`https://app-prod-03.implicit.harvard.edu/implicit/Launch?study=${file.url.replace(/^.*?\\/implicit/, '')}`)} : '',\n            {icon:'fa-close', text:'Delete', action: deleteFile, disabled: isReadonly },\n            {icon:'fa-arrows-v', text:'Move', action: moveFile(file,study), disabled: isReadonly },\n            {icon:'fa-clone', text:'Duplicate', action: duplicateFile(file, study), disabled: isReadonly },\n            {icon:'fa-clone', text:'Copy to Different Study', action: copyFile(file,study), disabled: isReadonly },\n            {icon:'fa-exchange', text:'Rename...', action: renameFile(file,study), disabled: isReadonly }\n        ]);\n    }\n\n    return contextMenu.open(menu);\n\n    function activateWizard(route){\n        return () => m.route(`/editor/${study.id}/wizard/` + route);\n    }\n    \n    // function mapWizardHash(wizardHash){\n    //     return Object.keys(wizardHash).map((text) => {\n    //         let value = wizardHash[text];\n    //         return typeof value === 'string'\n    //             ? {text, action: createFromTemplate({study, path, url:value, templateName:text})}\n    //             : {text, menu: mapWizardHash(value)};\n    //     });\n    // }\n\n    function deleteFile(){\n        let isFocused = file.id === m.route.param('fileId');\n\n        messages.confirm({\n            header:['Delete ',m('small', file.name)],\n            content: 'Are you sure you want to delete this file? This action is permanent!'\n        })\n            .then(ok => {\n                if (ok) return doDelete();\n            });\n\n        function doDelete(){\n            study.delFiles([file])\n                .then(redirect)\n                .catch(err => messages.alert({\n                    header: 'Failed to delete file:',\n                    content: err.message\n                }))\n                .then(m.redraw);\n        }\n\n        function redirect(response){\n            // redirect only if the file is chosen, otherwise we can stay right here...\n            if (isFocused) m.route(`/editor/${study.id}`); \n            return response;\n        }\n    } // end delete file\n};\n","const DRAGOVER_CLASS = 'is-dragover';\nfunction dragdrop(element, options) {\n    options = options || {};\n\n    element.addEventListener('dragover', activate);\n    element.addEventListener('dragleave', deactivate);\n    element.addEventListener('dragend', deactivate);\n    element.addEventListener('drop', deactivate);\n    element.addEventListener('drop', update);\n\n    function activate(e) {\n        e.preventDefault();\n        e.stopPropagation(); // so that only the lowest level element gets focused\n        element.classList.add(DRAGOVER_CLASS);\n    }\n    function deactivate() {\n        element.classList.remove(DRAGOVER_CLASS);\n    }\n    function update(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        uploadonchange(options)(e);\n        m.redraw();\n    }\n}\n\nexport const uploadConfig = ctrl => (element, isInitialized) => {\n    if (!isInitialized) {\n        dragdrop(element, {onchange: ctrl.onchange});\n    }\n};\n\nexport const uploadBox = args => m('form.upload', {method:'post', enctype:'multipart/form-data', config:uploadConfig(args)},[\n    m('i.fa.fa-download .fa-3x.m-b-1'),\n    m('input.box__file', {id:'upload', type:'file', name:'files[]', 'data-multiple-caption':'{count} files selected', multiple:true, onchange: uploadonchange(args)}),\n    m('label', {for:'upload'},\n        m('strong', 'Choose a file'),\n        m('span', ' or drag it here')\n    )\n]);\n\n// call onchange with files\nexport const uploadonchange = args => e => {\n    const dt = e.dataTransfer || e.target;\n    const cb = args.onchange;\n\n    if (typeof cb !== 'function') return;\n\n    if (dt.items && dt.items.length && 'webkitGetAsEntry' in dt.items[0]) {\n        entriesApi(dt.items, cb);\n    } else if ('getFilesAndDirectories' in dt) {\n        newDirectoryApi(dt, cb);\n    } else if (dt.files) {\n        arrayApi(dt, cb);\n    } else cb();\n};\n\n// API implemented in Firefox 42+ and Edge\nfunction newDirectoryApi(input, cb) {\n    const fd = new FormData(), files = [];\n    const iterate = function(entries, path, resolve) {\n        const promises = [];\n        entries.forEach(function(entry) {\n            promises.push(new Promise(function(resolve) {\n                if ('getFilesAndDirectories' in entry) {\n                    entry.getFilesAndDirectories().then(function(entries) {\n                        iterate(entries, entry.path + '/', resolve);\n                    });\n                } else {\n                    if (entry.name) {\n                        const p = (path + entry.name).replace(/^[/\\\\]/, '');\n                        fd.append('files[]', entry, p);\n                        files.push(p);\n                    }\n                    resolve();\n                }\n            }));\n        });\n        Promise.all(promises).then(resolve);\n    };\n    input.getFilesAndDirectories().then(function(entries) {\n        new Promise(function(resolve) {\n            iterate(entries, '/', resolve);\n        }).then(cb.bind(null, fd, files));\n    });\n}\n\n// old prefixed API implemented in Chrome 11+ as well as array fallback\nfunction arrayApi(input, cb) {\n    const fd = new FormData(), files = [];\n    [].slice.call(input.files).forEach(function(file) {\n        fd.append('files[]', file, file.webkitRelativePath || file.name);\n        files.push(file.webkitRelativePath || file.name);\n    });\n    cb(fd, files);\n}\n\n// old drag and drop API implemented in Chrome 11+\nfunction entriesApi(items, cb) {\n    const fd = new FormData(), files = [], rootPromises = [];\n\n    function readEntries(entry, reader, oldEntries, cb) {\n        const dirReader = reader || entry.createReader();\n        dirReader.readEntries(function(entries) {\n            const newEntries = oldEntries ? oldEntries.concat(entries) : entries;\n            if (entries.length) {\n                setTimeout(readEntries.bind(null, entry, dirReader, newEntries, cb), 0);\n            } else {\n                cb(newEntries);\n            }\n        });\n    }\n\n    function readDirectory(entry, path, resolve) {\n        if (!path) path = entry.name;\n        readEntries(entry, 0, 0, function(entries) {\n            const promises = [];\n            entries.forEach(function(entry) {\n                promises.push(new Promise(function(resolve) {\n                    if (entry.isFile) {\n                        entry.file(function(file) {\n                            const p = path + '/' + file.name;\n                            fd.append('files[]', file, p);\n                            files.push(p);\n                            resolve();\n                        }, resolve.bind());\n                    } else readDirectory(entry, path + '/' + entry.name, resolve);\n                }));\n            });\n            Promise.all(promises).then(resolve.bind());\n        });\n    }\n\n    [].slice.call(items).forEach(function(entry) {\n        entry = entry.webkitGetAsEntry();\n        if (entry) {\n            rootPromises.push(new Promise(function(resolve) {\n                if (entry.isFile) {\n                    entry.file(function(file) {\n                        fd.append('files[]', file, file.name);\n                        files.push(file.name);\n                        resolve();\n                    }, resolve.bind());\n                } else if (entry.isDirectory) {\n                    readDirectory(entry, null, resolve);\n                }\n            }));\n        }\n    });\n    Promise.all(rootPromises).then(cb.bind(null, fd, files));\n}\n","import folder from './folderComponent';\nimport classNames from 'utils/classNames';\nimport fileContext from './fileContext';\nimport {uploadConfig} from 'utils/uploader';\nimport {uploadFiles} from './fileActions';\n\nexport default node;\n\nlet node = (args) => m.component(nodeComponent, args);\n\nlet nodeComponent = {\n    view: (ctrl, {file,folderHash, study}) => {\n        const vm = study.vm(file.id); // vm is created by the studyModel\n        const hasChildren = !!(file.isDir && file.files && file.files.length);\n        return m('li.file-node',\n            {\n                key: file.id,\n                class: classNames({\n                    open : vm.isOpen()\n                }),\n                onclick: file.isDir ? toggleOpen(vm) : select(file),\n                oncontextmenu: fileContext(file, study),\n                config: file.isDir ? uploadConfig({onchange:uploadFiles(file.path, study)}) : null\n            },\n            [\n                m('a.wholerow', {\n                    unselectable:'on',\n                    class:classNames({\n                        'current': m.route.param('fileId') === file.id\n                    })\n                }, m.trust('&nbsp;')),\n                m('i.fa.fa-fw', {\n                    class: classNames({\n                        'fa-caret-right' : hasChildren && !vm.isOpen(),\n                        'fa-caret-down': hasChildren && vm.isOpen()\n                    })\n                }),\n\n                m('a', {class:classNames({'text-primary': /\\.expt\\.xml$/.test(file.name)})}, [\n                    // checkbox\n                    m('i.fa.fa-fw', {\n                        onclick: choose({file,study}),\n                        class: classNames({\n                            'fa-check-square-o': vm.isChosen() === 1,\n                            'fa-square-o': vm.isChosen() === 0,\n                            'fa-minus-square-o': vm.isChosen() === -1\n                        })\n                    }),\n\n                    // icon\n                    m('i.fa.fa-fw.fa-file-o', {\n                        class: classNames({\n                            'fa-file-code-o': /(js)$/.test(file.type),\n                            'fa-file-text-o': /(jst|html|xml)$/.test(file.type),\n                            'fa-file-image-o': /(jpg|png|bmp)$/.test(file.type),\n                            'fa-file-pdf-o': /(pdf)$/.test(file.type),\n                            'fa-folder-o': file.isDir\n                        })\n                    }),\n\n                    // file name\n                    m('span',{class:classNames({'font-weight-bold':file.hasChanged()})},` ${file.name}`),\n\n                    // children\n                    hasChildren && vm.isOpen() ? folder({path: file.path + '/', folderHash, study}) : ''\n                ])\n            ]\n        );\n    }\n};\n\nconst toggleOpen = vm => e => {\n    vm.isOpen(!vm.isOpen());\n    e.preventDefault();\n    e.stopPropagation();\n};\n\n// select specific file and display it\nconst select = (file) => e => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (file.viewStudy) m.route(`/view/${m.route.param('code')}/file/${encodeURIComponent(file.id)}`);\n    else m.route(`/editor/${file.studyId}/file/${encodeURIComponent(file.id)}`);\n    m.redraw.strategy('diff'); // make sure that the route change is diffed as opposed to redraws\n};\n\n// checkmark a file/folder\nconst choose = ({file, study}) => e => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const currentState = isChosen(file)();\n    const newState = currentState === 1 ? 0 : 1;\n\n    // mark decendents (and the file itself\n    study\n        .getChildren(file)\n        .forEach(f => isChosen(f)(newState)); // update vm for each child\n\n    study\n        .getParents(file)\n        .forEach(file => {\n            const checked = study\n                .getChildren(file)\n                .filter(f => f !== file)\n                .map(f => isChosen(f)())\n                .reverse();\n\n            const state = checked.every(v => v === 0)\n                ? 0\n                : checked.every(v => v === 1)\n                    ? 1\n                    : -1;\n\n            isChosen(file)(state);\n        });\n\n    function isChosen(file){\n        return study.vm(file.id).isChosen;\n    }\n};\n","import node from './nodeComponent';\nexport default folder;\n\nlet folder = args => {\n    args.key = args.path;\n    return m.component(folderComponent, args);\n};\n\nlet folderComponent = {\n    view(ctrl, {path, folderHash, study}){\n        let files = folderHash[path] || [];\n\n        return m('.files', [\n            m('ul', files.map(file => node({key: file.id, file, folderHash, study})))\n        ]);\n    }\n};\n","import folderComponent from './folderComponent';\nimport classNames from 'utils/classNames';\nimport {uploadConfig} from 'utils/uploader';\nimport {uploadFiles} from './fileActions';\nexport default filesList;\n\nlet filesList = ({study}) => {\n    let folderHash = parseFiles(study.files());\n    let config = uploadConfig({onchange:uploadFiles('/', study)});\n    let chooseState = getCurrentState(study); \n\n    return m('.sidebar-files', {config}, [\n        m('h5', [\n            m('small', [\n                m('i.fa.fa-fw', {\n                    onclick: choose(chooseState, study),\n                    class: classNames({\n                        'fa-check-square-o': chooseState === 1,\n                        'fa-square-o': chooseState === 0,\n                        'fa-minus-square-o': chooseState === -1\n                    })\n                })\n            ]),\n            m('a.no-decoration', {href:`/editor/${study.id}`, config:m.route}, study.name)\n        ]),\n        study.isUploading\n            ? m('div', [\n                m('.loader'),\n                m('.text-sm-center', [\n                    m('strong', 'UPLOADING...')\n                ])\n            ])\n            : folderComponent({path:'/',folderHash, study})\n    ]);\n};\n\nconst parseFiles = files => files.reduce((hash, file)=>{\n    const path = file.basePath;\n    if (!hash[path]) hash[path] = [];\n    hash[path].push(file);\n    return hash;\n}, {});\n\nfunction choose(currentState, study){\n    return () => study.files().forEach(file => study.vm(file.id).isChosen(currentState === 1 ? 0 : 1));\n}\n\nfunction getCurrentState(study){\n    const vm = study.vm;\n    const filesCount = study.files().length;\n    const chosenCount = study.files().reduce((result, file) => vm(file.id).isChosen() ? result + 1 : result, 0);\n    return !chosenCount ? 0 : filesCount === chosenCount ? 1 : -1;\n}\n","import classNames from './classNames';\nexport default dropdown;\n\n/**\n * VirtualElement dropdown(Object {String toggleSelector, Element toggleContent, Element elements})\n *\n * where:\n *  Element String text | VirtualElement virtualElement | Component\n * \n * @param toggleSelector the selector for the toggle element\n * @param toggleContent the: content for the toggle element\n * @param elements: a list of dropdown items (http://v4-alpha.getbootstrap.com/components/dropdowns/)\n **/\nconst dropdown = args => m.component(dropdownComponent, args);\n\n\nconst dropdownComponent = {\n    controller(){\n        return {\n            isOpen : m.prop(false),\n            inLowerViewport: m.prop(true)\n        };\n    },\n\n    view({isOpen, inLowerViewport}, {toggleSelector, toggleContent, elements, right}){\n        return m('.dropdown.dropdown-component', { class: classNames({ open: isOpen()}), config: dropdownComponent.config(isOpen)}, [\n            m(toggleSelector, {onmousedown}, toggleContent), \n            m('.dropdown-menu', {class: classNames({'dropdown-menu-right' :right, 'dropdown-menu-up': inLowerViewport()})}, elements)\n        ]);\n\n        function onmousedown(e){\n            inLowerViewport(document.documentElement.clientHeight / 2 < e.target.getBoundingClientRect().top);\n            isOpen(!isOpen());\n        }\n    },\n\n    config: isOpen => (element, isInit, ctx) => {\n        if (!isInit) {\n            // this is a bit memory intensive, but lets not preemptively optimse\n            // bootstrap does this with a backdrop\n            document.addEventListener('mousedown', onClick, false);\n            ctx.onunload = () => document.removeEventListener('mousedown', onClick);\n        }\n\n        function onClick(e){\n            if (!isOpen()) return;\n\n            // if we are within the dropdown do not close it\n            // this is conditional to prevent IE problems\n            if (e.target.closest && e.target.closest('.dropdown') === element && !hasClass(e.target, 'dropdown-onclick')) return true;\n            isOpen(false);\n            m.redraw();\n        }\n\n        function hasClass(el, selector){\n            return ( (' ' + el.className + ' ').replace(/[\\n\\t\\r]/g, ' ').indexOf(' ' + selector + ' ') > -1 );\n        }\n    }\n};\n","import {} from '../studyModel';\nexport default args => m.component(studyTemplatesComponent, args);\n\nlet studyTemplatesComponent = {\n    controller({load_templates, studies, reuse_id, templates, template_id}){\n        let loaded = m.prop(false);\n        let error = m.prop(null);\n        load_templates()\n            .then(response => templates(response.templates))\n            .catch(error)\n            .then(loaded.bind(null, true))\n            .then(m.redraw);\n        return {studies, template_id, reuse_id, templates, loaded, error};\n    },\n    view: ({studies, template_id, reuse_id, templates, loaded, error}) => m('div.space', [\n        loaded() ? '' : m('.loader'),\n        error() ? m('.alert.alert-warning', error().message): '',\n        loaded() && !templates().length ? m('.alert.alert-info', 'There is no templates yet') : '',\n        m('select.form-control', {value:template_id(), onchange: m.withAttr('value',template_id)}, [\n            m('option',{value:'', disabled: true}, 'Select template'),\n            templates().filter(ownerFilter()).sort(sort_studies).map(study =>\n                m('option',{value:study.id}, study.name))\n        ]),\n        !template_id() ? '' :\n            m('div.space', [\n                m('select.form-control', {value:reuse_id(), onchange: m.withAttr('value',reuse_id)}, [\n                    m('option',{value:'', disabled: true}, 'Select template for reuse (optional)'),\n                    studies.map(study =>\n                        m('option',{value:study.id}, study.name))\n                ])])\n\n    ])\n};\n\nfunction sort_studies(study_1, study_2){return study_1.name.toLowerCase() === study_2.name.toLowerCase() ? 0 : study_1.name.toLowerCase() > study_2.name.toLowerCase() ? 1 : -1;}\n\nlet ownerFilter = () => study => {\n    return study.permission == 'owner';\n};\n","import {fetchJson} from 'utils/modelHelpers';\nimport {tagsUrl, studyUrl} from 'modelUrls';\n\n\n\nfunction tag_url(tag_id)\n{\n    return `${tagsUrl}/${encodeURIComponent(tag_id)}`;\n}\n\nfunction study_url(study_id) {\n    return `${studyUrl}/${encodeURIComponent(study_id)}/tags`;\n}\n\n\nfunction study_tag_url(study_id, tag_id) {\n    return `${studyUrl}/${encodeURIComponent(study_id)}/tags/${encodeURIComponent(tag_id)}`;\n}\n\nexport let toggle_tag_to_study = (study_id, tag_id, used) => {\n    if(used)\n        return add_tag_to_study(study_id, tag_id);\n    return delete_tag_from_study(study_id, tag_id);\n};\n\nexport let update_tags_in_study = (study_id, tags) => fetchJson(study_url(study_id), {\n    method: 'put',\n    body: {tags}\n});\n\n\nexport let add_tag_to_study = (study_id, tag_id) => fetchJson(study_tag_url(study_id, tag_id), {\n    method: 'post'\n});\n\nexport let delete_tag_from_study = (study_id, tag_id) => fetchJson(study_tag_url(study_id, tag_id), {\n    method: 'delete'\n});\n\nexport let get_tags = () => fetchJson(tagsUrl, {\n    method: 'get'\n});\n\n\nexport let get_tags_for_study = (study_id) => fetchJson(study_url(study_id), {\n    method: 'get'\n});\n\nexport let remove_tag = (tag_id) => fetchJson(tag_url(tag_id), {\n    method: 'delete'\n});\n\nexport let add_tag = (tag_text, tag_color) => fetchJson(tagsUrl, {\n    method: 'post',\n    body: {tag_text, tag_color}\n});\n\nexport let edit_tag = (tag_id, tag_text, tag_color) => fetchJson(tag_url(tag_id), {\n    method: 'put',\n    body: {tag_text, tag_color}\n});\n","import {add_tag, get_tags_for_study} from './tagsModel';\nexport default args => m.component(studyTagsComponent, args);\n\nlet studyTagsComponent = {\n    controller({tags, study_id}){\n        let tagName = m.prop('');\n        let loaded = m.prop(false);\n        let error = m.prop(null);\n        get_tags_for_study(study_id)\n            .then(response => tags(response.tags))\n            .catch(error)\n            .then(loaded.bind(null, true))\n            .then(m.redraw);\n\n        return {tagName, tags, loaded, error};\n    },\n    view: ({tagName, tags, loaded, error}, {study_id}) => m('div', [\n        m('.input-group', [\n            m('input.form-control', {\n                placeholder: 'Filter Tags',\n                value: tagName(),\n                oninput: m.withAttr('value', tagName)\n            }),\n            m('span.input-group-btn', [\n                m('button.btn.btn-secondary', {onclick: create_tag(study_id, tagName, tags, error), disabled: !tagName()}, [\n                    m('i.fa.fa-plus'),\n                    ' Create New'\n                ])\n            ])\n        ]),\n        m('.small.text-muted.m-b-1', 'Use this text field to filter your tags. Click \"Create New\" to turn a filter into a new tag'),\n\n        loaded() ? '' : m('.loader'),\n        error() ? m('.alert.alert-warning', error().message): '',\n        loaded() && !tags().length ? m('.alert.alert-info', 'You have no tags yet') : '',\n\n        m('.custom-controls-stacked.pre-scrollable', tags().sort(sort_tags).filter(filter_tags(tagName())).map(tag => m('label.custom-control.custom-checkbox', [\n            m('input.custom-control-input', {\n                type: 'checkbox',\n                checked: tag.used,\n                onclick: function(){\n                    tag.used = !tag.used;\n                    tag.changed = !tag.changed;\n                }\n            }), \n            m('span.custom-control-indicator'),\n            m('span.custom-control-description.m-l-1.study-tag',{style: {'background-color': '#' + tag.color}}, tag.text)\n        ])))\n    ])\n};\n\nfunction filter_tags(val){return tag => tag.text.indexOf(val) !== -1;}\nfunction sort_tags(tag_1, tag_2){return tag_1.text.toLowerCase() === tag_2.text.toLowerCase() ? 0 : tag_1.text.toLowerCase() > tag_2.text.toLowerCase() ? 1 : -1;}       \n\n\nfunction create_tag(study_id, tagName, tags, error){\n    return () => add_tag(tagName(), 'E7E7E7')\n        .then(response => tags().push(response))\n        .then(tagName.bind(null, ''))\n        .catch(error)\n        .then(m.redraw);\n}\n","export default args => m.component(createMessage, args);\nimport {dateRangePicker} from 'utils/dateRange';\nimport {get_exps, get_data} from '../study/studyModel';\nimport {baseUrl} from 'modelUrls';\n\nlet createMessage = {\n    controller({exps, dates, study_id, versions, close}){\n        let exp_id = m.prop('');\n        let version_id = m.prop('');\n        let all_exp_ids = m.prop('');\n        let all_versions = m.prop('');\n        let file_format = m.prop('csv');\n        let file_split = m.prop('taskName');\n\n        let loaded     = m.prop(false);\n        let downloaded = m.prop(true);\n        let link = m.prop('');\n        let error = m.prop(null);\n        dates ={\n            startDate: m.prop(daysAgo(3650)),\n            endDate: m.prop(daysAgo(-1))\n        };\n\n        get_exps(study_id)\n            .then(response => {\n                exps(response.experiments);\n                all_exp_ids(exps().map(exp=>exp.id));\n                exp_id(all_exp_ids());\n                let tmp_exps = [];\n                exps().forEach(exp=>{\n                    !tmp_exps.find(exp2find=>exp2find.descriptive_id === exp.descriptive_id)\n                        ?\n                        tmp_exps.push({ids:[exp.id], descriptive_id:exp.descriptive_id})\n                        :\n                        tmp_exps.map(exp2update=>exp2update.descriptive_id === exp.descriptive_id ? exp2update.ids.push(exp.id) : exp2update);\n                    exps(tmp_exps);\n                });\n            })\n            .then(()=> {all_versions(versions.map(version=>version.id)); version_id(all_versions());})\n            .catch(error)\n            .then(loaded.bind(null, true))\n            .then(m.redraw);\n\n        return {study_id, exp_id, version_id, file_format, exps, versions, file_split, all_exp_ids, all_versions, loaded, downloaded, link, error, dates, close};\n    },\n    view: ({study_id, exp_id, version_id, file_format, file_split, exps, versions, all_exp_ids, all_versions, loaded, downloaded, link, error, dates, close}) => m('div', [\n\n        m('.card-block', [\n            m('.row', [\n                m('.col-sm-4', [\n                    m('.input-group', [m('strong', 'Experimant id'),\n                        m('select.c-select.form-control',{onchange: e => exp_id(e.target.value)}, [\n                            exps().length<=1 ? '' : m('option', {selected:true, value:all_exp_ids()}, 'All experiments'),\n                            exps().map(exp=> m('option', {value:exp.ids} , exp.descriptive_id))\n                        ])\n                    ])\n                ]),\n                m('.col-sm-5', [\n                    m('.input-group', [m('strong', 'Version id'),\n                        m('select.c-select.form-control',{onchange: e => version_id(e.target.value)}, [\n                            versions.length<=1 ? '' : m('option', {selected:true, value:all_versions()}, 'All versions'),\n                            versions.map(version=> m('option', {value:version.id}, `${version.version} (${version.state})`))\n                        ])\n                    ])\n                ]),\n                m('p',exp_id),\n                m('.col-sm-3', [\n                    m('.input-group', [m('strong', 'Output type'),\n                        m('select.c-select.form-control',{onchange: e => file_format(e.target.value)}, [\n                            m('option', {value:'csv'}, 'csv'),\n                            m('option', {value:'tsv'}, 'tsv'),\n                            m('option', {value:'json'}, 'json')\n                        ])\n                    ])\n                ])\n            ]),\n            m('.row.space', [\n                m('.col-sm-9', [\n                    m('span', 'Split to files by (clear text to download in one file):'),\n                    m('input.form-control', {\n                        placeholder: 'File split variable',\n                        value: file_split(),\n                        oninput: m.withAttr('value', file_split)\n                    })\n                ])\n\n            ]),\n            m('.row.space', [\n                m('.col-sm-12', [\n                    m('.form-group', [\n                        dateRangePicker(dates),\n                        m('p.text-muted.btn-toolbar', [\n                            dayButtonView(dates, 'Last 7 Days', 7),\n                            dayButtonView(dates, 'Last 30 Days', 30),\n                            dayButtonView(dates, 'Last 90 Days', 90),\n                            dayButtonView(dates, 'All time', 3650)\n                        ])\n                    ])\n                ])\n            ])\n        ]),\n        loaded() ? '' : m('.loader'),\n        error() ? m('.alert.alert-warning', error()): '',\n        !loaded() && exps().length<1 ? m('.alert.alert-info', 'You have no experiments yet') : '',\n\n        !link() ? '' : m('input-group-addon', ['Your file is ready for downloading: ', m('a', {href: link()}, link())]),\n\n        downloaded() ? '' : m('.loader'),\n        m('.text-xs-right.btn-toolbar',[\n            m('a.btn.btn-secondary.btn-sm', {onclick:()=>{close(null);}}, 'Cancel'),\n            m('a.btn.btn-primary.btn-sm', {onclick:()=>{ask_get_data(study_id, exp_id, version_id, file_format, file_split, dates, downloaded, link, error); }}, 'OK')\n        ])\n    ])\n};\n\nfunction ask_get_data(study_id, exp_id, version_id, file_format, file_split, dates, downloaded, link, error){\n    error('');\n    if(exp_id() =='')\n        return error('Please select experiment id');\n\n    if(!Array.isArray(exp_id()))\n        exp_id(exp_id().split(','));\n    downloaded(false);\n\n    return get_data(study_id, exp_id(), version_id(), file_format(), file_split(), dates.startDate(), dates.endDate())\n        .then(response => {\n            const file_data = response.data_file;\n            if (file_data == null) return Promise.reject('There was a problem creating your file, please contact your administrator');\n            link(`${baseUrl}/download?path=${file_data}`, file_data);\n        })\n        .catch(err=>error(err.message))\n        .then(()=>downloaded(true))\n\n        .then(m.redraw);\n}\n\n// helper functions for the day buttons\nlet daysAgo = (days) => {\n    let d = new Date();\n    d.setDate(d.getDate() - days);\n    return d;\n};\nlet equalDates = (date1, date2) => date1.getDate() === date2.getDate() && date1.getMonth() === date2.getMonth();\nlet activeDate = ({startDate, endDate}, days) => equalDates(startDate(), daysAgo(days)) && equalDates(endDate(), new Date());\nlet dayButtonView = (dates, name, days) => m('button.btn.btn-secondary.btn-sm', {\n\n    class: activeDate(dates, days)? 'active' : '',\n    onclick: () => {\n        dates.startDate(daysAgo(days));\n        dates.endDate(new Date());\n    }\n}, name);\n","import {fetchJson} from 'utils/modelHelpers';\nimport {studyUrl} from 'modelUrls';\n\n\nfunction collaboration_url(study_id)\n{\n    return `${studyUrl}/${encodeURIComponent(study_id)}/collaboration`;\n}\n\nfunction link_url(study_id)\n{\n    return `${studyUrl}/${encodeURIComponent(study_id)}/link`;\n}\n\n\n\nfunction public_url(study_id)\n{\n    return `${studyUrl}/${encodeURIComponent(study_id)}/public`;\n}\n\nexport let get_collaborations = (study_id) => fetchJson(collaboration_url(study_id), {\n    method: 'get'\n});\n\nexport let remove_collaboration = (study_id, user_id) => fetchJson(collaboration_url(study_id), {\n    method: 'delete',\n    body: {user_id: user_id}\n});\n\n\nexport let add_collaboration = (study_id, user_name, permission, data_permission) => fetchJson(collaboration_url(study_id), {\n    method: 'post',\n    body: {user_name, permission, data_permission}\n});\n\n\nexport let add_link = (study_id) => fetchJson(link_url(study_id), {\n    method: 'post'\n});\n\nexport let revoke_link = (study_id) => fetchJson(link_url(study_id), {\n    method: 'delete'\n});\n\n\n\nexport let make_pulic = (study_id, is_public) => fetchJson(public_url(study_id), {\n    method: 'post',\n    body: {is_public}\n});","import messages from 'utils/messagesComponent';\n\nimport {lock_study, publish_study, duplicate_study, create_study, delete_study, rename_study, update_study, load_templates} from './studyModel';\nimport studyTemplatesComponent from './templates/studyTemplatesComponent';\nimport studyTagsComponent from '../tags/studyTagsComponent';\nimport createMessage from '../downloads/dataComp';\n\n\nimport {update_tags_in_study} from '../tags/tagsModel';\nimport {make_pulic} from './sharing/sharingModel';\nimport {copyUrl} from 'utils/copyUrl';\n\nexport let do_create = (type, studies) => {\n    const study_name = m.prop('');\n    const description = m.prop('');\n    let templates = m.prop([]);\n    let template_id = m.prop('');\n    let reuse_id = m.prop('');\n    let error = m.prop('');\n    const isOpenServer = true;\n    const study_type = m.prop('minno02');\n    const isTemplate = type !== 'regular';\n\n    let ask = () => messages.confirm({\n        header: isTemplate ? 'New Template Study' : 'New Study',\n        content: m.component({\n            view: () => m('p', [\n                m('.form-group', [\n                    m('label', 'Enter Study Name:'),\n                    m('input.form-control',  {oninput: m.withAttr('value', study_name)})\n                ]),\n                m('.form-group', [\n                    m('label', 'Enter Study Description:'),\n                    m('textarea.form-control',  {oninput: m.withAttr('value', description)})\n                ]),\n                isTemplate || !isOpenServer ? '' : m('.form-group', [\n                    m('label', 'Pick Study Player:'),\n                    m('select.c-select.form-control', { onchange: m.withAttr('value', study_type)}, [\n                        m('option', {value:'minno02'}, 'MinnoJS v0.2'),\n                        m('option', {value:'html'}, 'JSPysch (run any HTML)')\n                    ])\n                ]),\n                !error() ? '' : m('p.alert.alert-danger', error()),\n                !isTemplate ? '' : m('p', studyTemplatesComponent({load_templates, studies, reuse_id, templates, template_id}))\n            ])\n        })\n    }).then(response => response && create());\n\n    let create = () => create_study({study_name, study_type, description, type, template_id, reuse_id})\n        .then(response => m.route(type == 'regular' ? `/editor/${response.study_id}` : `/translate/${response.study_id}`))\n        .catch(e => {\n            error(e.message);\n            ask();\n        });\n    ask();\n};\n\nexport const do_tags = (study) => e => {\n    e.preventDefault();\n    const study_id = study.id;\n    const filter_tags = ()=>{return tag => tag.changed;};\n    const tags = m.prop([]);\n    messages.confirm({header:'Tags', content: studyTagsComponent({tags, study_id})})\n        .then(function (response) {\n            if (response){\n                const new_tags = tags().filter(tag=> tag.used);\n                study.tags = new_tags;\n                tags(tags().filter(filter_tags()).map(tag=>(({text: tag.text, id: tag.id, used: tag.used}))));\n                return update_tags_in_study(study_id, tags);\n            }\n        })\n        .then(m.redraw);\n};\n\nexport let do_data = (study) => e => {\n    e.preventDefault();\n    // let exps = get_exps[]);\n    // console.log(exps);\n\n    let study_id = study.id;\n    let versions = study.versions;\n    let exps = m.prop([]);\n    let tags = m.prop([]);\n    let dates = m.prop();\n\n    let close = messages.close;\n    messages.custom({header:'Data download', content: createMessage({tags, exps, dates, study_id, versions, close})})\n        .then(m.redraw);\n};\n\n\nexport let do_make_public = (study) => e =>\n{\n    e.preventDefault();\n    let error = m.prop('');\n    return messages.confirm({okText: ['Yes, make ', !study.is_public ? 'public' : 'private'], cancelText: ['No, keep ', !study.is_public ? 'private' : 'public' ], header:'Are you sure?', content:m('p', [m('p', !study.is_public\n        ?\n        'Making the study public will allow everyone to view the files. It will NOT allow others to modify the study or its files.'\n        :\n        'Making the study private will hide its files from everyone but you.'),\n    m('span', {class: error() ? 'alert alert-danger' : ''}, error())])})\n        .then(response => {\n            if (response) make_pulic(study.id, !study.is_public)\n                .then(study.is_public = !study.is_public)\n                .then(m.redraw);\n        });\n\n};\n\n\nexport let do_delete = (study) => e => {\n    e.preventDefault();\n    return messages.confirm({header:'Delete study', content:'Are you sure?'})\n        .then(response => {\n            if (response) delete_study(study.id)\n                .then(()=>study.deleted=true)\n                .catch(error => messages.alert({header: 'Delete study', content: m('p.alert.alert-danger', error.message)}))\n                .then(m.redraw)\n                .then(m.route('./'))\n            ;\n\n        });\n};\n\nexport const update_study_description = (study) => e => {\n    e.preventDefault();\n    const study_description = m.prop(!study.description ? '' : study.description);\n    const error = m.prop();\n\n    const ask = () => messages.confirm({\n        header:'Study Description',\n        content: {\n            view(){\n                return m('div', [\n                    m('textarea.form-control',  {placeholder: 'Enter description', value: study_description(), onchange: m.withAttr('value', study_description)}),\n                    !error() ? '' : m('p.alert.alert-danger', error())\n                ]);\n            }\n        }\n    }).then(response => response && rename());\n\n    const rename = () => update_study(study.id, {description:study_description()})\n        .then(()=>study.description=study_description())\n        .catch(e => {\n            error(e.message);\n            ask();\n        })\n        .then(m.redraw);\n\n    ask();\n};\n\nexport const do_rename = (study) => e => {\n    e.preventDefault();\n    let study_name = m.prop(study.name);\n    let error = m.prop('');\n\n    let ask = () => messages.confirm({\n        header:'New Name',\n        content: {\n            view(){\n                return m('div', [\n                    m('input.form-control',  {placeholder: 'Enter Study Name', value: study_name(), onchange: m.withAttr('value', study_name)}),\n                    !error() ? '' : m('p.alert.alert-danger', error())\n                ]);\n            }\n        }\n    }).then(response => response && rename());\n\n    let rename = () => rename_study(study.id, study_name)\n        .then(()=>study.name=study_name())\n        .then(m.redraw)\n        .catch(e => {\n            error(e.message);\n            ask();\n        }).then(m.redraw);\n\n    ask();\n};\n\nexport let do_duplicate= (study, callback) => e => {\n    e.preventDefault();\n    let study_name = m.prop(study.name);\n    let error = m.prop('');\n\n    let ask = () => messages.confirm({\n        header:'New Name',\n        content: m('div', [\n            m('input.form-control', {placeholder: 'Enter Study Name', onchange: m.withAttr('value', study_name)}),\n            !error() ? '' : m('p.alert.alert-danger', error())\n        ])\n    }).then(response => response && duplicate());\n\n    let duplicate= () => duplicate_study(study.id, study_name)\n        .then(response => m.route( study.type=='regular' ? `/editor/${response.study_id}`: `/editor/${response.study_id}` ))\n        .then(callback)\n        .then(m.redraw)\n        .catch(e => {\n            error(e.message);\n            ask();\n        });\n    ask();\n};\n\nexport let do_lock = (study, callback) => e => {\n    e.preventDefault();\n    let error = m.prop('');\n\n    let ask = () => messages.confirm({okText: ['Yes, ', study.is_locked ? 'unlock' : 'lock' , ' the study'], cancelText: 'Cancel', header:'Are you sure?', content:m('p', [m('p', study.is_locked\n        ?\n        !study.is_published\n            ?\n            'Unlocking the study will let you modifying the study. When a study is Unlocked, you can add files, delete files, rename files, edit files, rename the study, or delete the study.'\n            :\n            [\n                m('p','Unlocking the study will let you modifying the study. When a study is Unlocked, you can add files, delete files, rename files, edit files, rename the study, or delete the study.'),\n                m('p','However, the study is currently published so you might want to make sure participants are not taking it. We recommend unlocking a published study only if you know that participants are not taking it while you modify the files, or if you know exactly what you are going to change and you are confident that you will not make mistakes that will break the study.')\n            ]\n        :\n        'Are you sure you want to lock the study? This will prevent you from modifying the study until you unlock the study again. When a study is locked, you cannot add files, delete files, rename files, edit files, rename the study, or delete the study.'),\n    !error() ? '' : m('p.alert.alert-danger', error())])\n    })\n\n        .then(response => response && lock());\n\n    const lock= () => lock_study(study.id, !study.is_locked)\n        .then(() => study.is_locked = !study.is_locked)\n        .then(() => study.isReadonly = study.is_locked)\n        .then(callback)\n\n        .catch(e => {\n            error(e.message);\n            ask();\n        })\n        .then(m.redraw);\n    ask();\n};\n\nexport let do_publish = (study, callback) => e => {\n    e.preventDefault();\n    let error = m.prop('');\n    let update_url =m.prop('update');\n\n    let ask = () => messages.confirm({okText: ['Yes, ', study.is_published ? 'Unpublish' : 'Publish' , ' the study'], cancelText: 'Cancel', header:[study.is_published ? 'Unpublish' : 'Publish', ' the study?'],\n        content:m('p',\n            [m('p', study.is_published\n                ?\n                'The launch URL participants used to run the study will be removed. Participants using this link will see an error page. Use it if you completed running the study, or if you want to pause the study and prevent participants from taking it for a while. You will be able to publish the study again, if you want.'\n                :\n                [\n                    m('p', 'This will create a link that participants can use to launch the study.'),\n                    m('p', 'Publishing locks the study for editing to prevent you from modifying the files while participants take the study. To make changes to the study, you will be able to unpublish it later.'),\n                    m('p', 'Although it is strongly not recommended, you can also unlock the study after it is published by using Unlock Study in the Study menu.'),\n                    m('p', 'After you publish the study, you can obtain the new launch URL by right clicking on the experiment file and choosing Experiment options->Copy Launch URL')\n\n                    ,m('.input-group', [\n                        m('select.c-select.form-control',{onchange: e => update_url(e.target.value)}, [\n                            m('option', {value:'update', selected:true}, 'Update the launch URL'),\n                            m('option', {value:'keep'}, 'Keep the launch URL'),\n                            study.versions.length<2 ? '' : m('option', {value:'reuse'}, 'Use the launch URL from the previous published version')\n                        ])\n                    ])\n                ]),\n            !error() ? '' : m('p.alert.alert-danger', error())])\n    })\n\n        .then(response => response && publish());\n\n    let publish= () => publish_study(study.id, !study.is_published, update_url)\n        .then(res=>study.versions.push(res))\n        .then(study.is_published = !study.is_published)\n        .then(study.is_locked = study.is_published || study.is_locked)\n        .then(study.isReadonly = study.is_locked)\n        .then(callback)\n\n        .catch(e => {\n            error(e.message);\n            ask();\n        })\n        .then(m.redraw);\n    ask();\n};\n\nexport const do_copy_url = study => copyUrl(study.base_url);\n","import {update_study_description, do_delete, do_duplicate, do_rename, do_tags, do_data, do_lock, do_publish, do_copy_url, do_make_public} from './studyActions';\n\nconst can_edit = study => !study.isReadonly && study.permission !== 'read only';\n\nconst is_locked = study => study.is_locked;\nconst is_published = study => study.is_published;\nconst is_public = study => study.is_public;\n\nconst not = fn => study => !fn(study);\n\nconst settings = {\n    'tags':[],\n    'data':[],\n    'delete':[],\n    'rename':[],\n    'description':[],\n    'duplicate':[],\n    'publish':[],\n    'unpublish':[],\n    'lock':[],\n    'unlock':[],\n    // 'deploy':[],\n    // 'studyChangeRequest':[],\n    // 'studyRemoval':[],\n    'sharing':[],\n    'public':[],\n    'private':[],\n    // 'unpublic':[],\n    'copyUrl':[]\n};\n\nconst settings_hash = {\n    tags: {text: 'Tags',\n        config: {\n            display: [can_edit],\n            onmousedown: do_tags,\n            class: 'fa-tags'\n        }},\n    data: {text: 'Data',\n        config: {\n            display: [can_edit],\n            onmousedown: do_data,\n            class: 'fa-download'\n        }},\n    delete: {text: 'Delete Study',\n        config: {\n            display: [can_edit, not(is_locked)],\n            onmousedown: do_delete,\n            class: 'fa-remove'\n        }},\n    rename: {text: 'Rename Study',\n        config: {\n            display: [can_edit, not(is_locked)],\n            onmousedown: do_rename,\n            class: 'fa-exchange'\n        }},\n    description: {text: 'Change description',\n        config: {\n            display: [can_edit, not(is_locked)],\n            onmousedown: update_study_description,\n            class: 'fa-comment'\n        }},\n    duplicate: {text: 'Duplicate study',\n        config: {\n            onmousedown: do_duplicate,\n            class: 'fa-clone'\n        }},\n    lock: {text: 'Lock Study',\n        config: {\n            display: [can_edit, not(is_locked)],\n            onmousedown: do_lock,\n            class: 'fa-lock'\n        }},\n    publish: {text: 'Publish Study',\n        config: {\n            display: [can_edit, not(is_locked), not(is_published)],\n            onmousedown: do_publish,\n            class: 'fa-cloud-upload'\n        }},\n    unpublish: {text: 'Unpublish Study', config: {\n        display: [can_edit, is_published],\n        onmousedown: do_publish,\n        class: 'fa-cloud-upload'\n    }},\n\n    republish: {text: 'Republish Study', config: {\n        display: [can_edit, not(is_published)],\n        onmousedown: do_publish,\n        class: 'fa-cloud-upload'\n    }},\n\n    public: {text: 'Make public', config: {\n        display: [can_edit, not(is_locked), not(is_public)],\n        onmousedown: do_make_public,\n        class: 'fa-globe'\n    }},\n\n    private: {text: 'Make private', config: {\n        display: [can_edit, not(is_locked), is_public],\n        onmousedown: do_make_public,\n        class: 'fa-globe'\n    }},\n\n\n    unlock: {text: 'Unlock Study',\n        config: {\n            display: [can_edit, is_locked],\n            onmousedown: do_lock,\n            class: 'fa-unlock'\n        }},\n    deploy: {text: 'Request Deploy',\n        config: {\n            display: [can_edit, not(is_locked)],\n            href: `/deploy/`\n        }},\n    studyChangeRequest: {text: 'Request Change',\n        config: {\n            display: [can_edit, not(is_locked)],\n            href: `/studyChangeRequest/`\n        }},\n    studyRemoval: {text: 'Request Removal',\n        config: {\n            display: [can_edit, not(is_locked)],\n            href: `/studyRemoval/`\n        }},\n    sharing: {text: 'Sharing',\n        config: {\n            display: [can_edit],\n            href: `/sharing/`,\n            class: 'fa-user-plus'\n        }},\n    copyUrl: {text: 'Copy Base URL',\n        config: {\n            onmousedown: do_copy_url,\n            class: 'fa-link'\n        }}\n};\n\n\nexport const draw_menu = study => Object.keys(settings)\n    .map(comp => {\n        const config = settings_hash[comp].config;\n        return !should_display(config, study) \n            ? '' \n            : config.href\n                ? m('a.dropdown-item', { href: config.href+study.id, config: m.route }, [\n                    m('i.fa.fa-fw.'+config.class),\n                    settings_hash[comp].text\n                ])\n                : m('a.dropdown-item.dropdown-onclick', {onmousedown: config.onmousedown(study)}, [\n                    m('i.fa.fa-fw.'+config.class),\n                    settings_hash[comp].text\n                ]);\n    });\n\n\nfunction should_display(config, study){\n    return !config.display || config.display.every(fn => fn(study));\n}\n","import {deleteFiles, downloadChosenFiles} from './fileActions';\nimport fileContext from './fileContext';\nimport {uploadFiles} from './fileActions';\nimport {uploadonchange} from 'utils/uploader';\nimport dropdown from 'utils/dropdown';\nimport {draw_menu} from '../../studyMenu';\n\nexport default sidebarButtons;\n\nconst sidebarButtons = ({study}) => {\n    const readonly = study.isReadonly;\n\n    return m('.sidebar-buttons.btn-toolbar', [\n        m('.btn-group.btn-group-sm', [\n            dropdown({toggleSelector:'a.btn.btn-secondary.btn-sm.dropdown-menu-right', toggleContent: m('i.fa.fa-bars'), elements: [\n                draw_menu(study)\n            ]})\n        ]),\n        m('.btn-group.btn-group-sm', [\n            m('a.btn.btn-secondary.btn-sm', {class: readonly ? 'disabled' : '', onclick: readonly || fileContext(null, study), title: 'Create new files'}, [\n                m('i.fa.fa-plus')\n            ]),\n            m('a.btn.btn-secondary.btn-sm', {class: readonly ? 'disabled' : '', onclick: readonly || deleteFiles(study), title: 'Delete selected files'}, [\n                m('i.fa.fa-close')\n            ]),\n            m('a.btn.btn-secondary.btn-sm', {onclick: downloadChosenFiles(study), title: 'Download selected files'}, [\n                m('i.fa.fa-download')\n            ]),\n            m('label.btn.btn-secondary.btn-sm', {class: readonly ? 'disabled' : '', title: 'Drag files over the file list in order to upload easily'}, [\n                m('i.fa.fa-upload'),\n                readonly ? '' : m('input[type=\"file\"]', {style: 'display:none', multiple:'true', onchange: uploadonchange({onchange:uploadFiles('/', study)})})\n            ])\n        ])\n    ]);\n};\n","import fileListComponent from './fileListComponent';\nimport sidebarButtons from './sidebarButtons';\n\nexport default sidebarComponent;\n\nconst sidebarComponent = {\n    view: (ctrl , {study}) => {\n        return m('.sidebar', {config}, [\n            sidebarButtons({study}),\n            fileListComponent({study})\n        ]);\n    }\n};\n\nfunction config(el, isInitialized, ctx){\n    if (!isInitialized) el.addEventListener('scroll', listen, false);\n    el.scrollTop = ctx.scrollTop || 0;\n\n    function listen(){\n        ctx.scrollTop = el.scrollTop;\n    }\n}\n","export default splitPane;\n\nconst splitPane = args => m.component(splitComponent, args);\n\nconst splitComponent = {\n    controller({leftWidth}){\n        return {\n            parentWidth: m.prop(),\n            parentOffset: m.prop(),\n            leftWidth: leftWidth || m.prop('auto')\n        };\n    },\n\n    view({parentWidth, parentOffset, leftWidth}, {left = '', right = ''}){\n        return m('.split-pane', {config: config(parentWidth, parentOffset, leftWidth)}, [\n            m('.split-pane-col-left', {style: {flexBasis: leftWidth() + 'px'}}, left),\n            m('.split-pane-divider', {onmousedown: onmousedown(parentOffset, leftWidth)}),\n            m('.split-pane-col-right', right)\n        ]);\n    }\n};\n\nconst config = (parentWidth, parentLeft, leftWidth) => (element, isInitialized, ctx) => {\n    if (!isInitialized){\n        update();\n        if (leftWidth() === undefined) leftWidth(parentWidth()/6);\n    }\n\n    document.addEventListener('resize', update);\n    ctx.onunload = () => document.removeEventListener('resize', update);\n    \n    function update(){\n        parentWidth(element.offsetWidth);\n        parentLeft(element.getBoundingClientRect().left);\n    }\n};\n\nconst onmousedown = (parentOffset, leftWidth) => () => {\n    document.addEventListener('mouseup', mouseup);\n    document.addEventListener('mousemove', mousemove);\n\n    function mouseup() {\n        document.removeEventListener('mousemove', mousemove);\n        document.removeEventListener('mouseup', mousemove);\n    }\n\n    function mousemove(e){\n        leftWidth(e.pageX - parentOffset());\n        m.redraw();\n    }\n};\n","export default editorLayoutComponent;\nimport studyFactory from './fileCollectionModel';\nimport editorComponent from './editorComponent';\nimport wizardComponent from './wizardComponent';\nimport sidebarComponent from './sidebar/sidebarComponent';\nimport splitPane from 'utils/splitPane';\nimport fullheight from 'utils/fullHeight';\n\nlet study;\nlet editorLayoutComponent = {\n    controller: ()=>{\n        let id = m.route.param('studyId');\n        if (!study || (study.id !== id)){\n            study = studyFactory(id);\n\n            study\n                .get()\n                .catch(err=>study.err = err.message)\n                .then(m.redraw);\n        }\n\n        let ctrl = {study, onunload};\n\n        window.addEventListener('beforeunload', beforeunload);\n\n        return ctrl;\n\n        function hasUnsavedData(){\n            return study.files().some(f => f.content() !== f.sourceContent());\n        }\n\n        function beforeunload(event) {\n            if (hasUnsavedData()) return event.returnValue = 'You have unsaved data are you sure you want to leave?';\n        }\n\n        function onunload(e){\n\n            let leavingEditor = !/^\\/editor\\//.test(m.route());\n            if (leavingEditor && hasUnsavedData() && !window.confirm('You have unsaved data are you sure you want to leave?')){\n                e.preventDefault();\n            } else {\n                window.removeEventListener('beforeunload', beforeunload);\n            }\n\n            if (leavingEditor) study = null;\n        }\n    },\n    view: ({study}) => {\n        return m('.study', {config: fullheight},  [\n            study.err ?\n                m('.alert.alert-danger',\n                    m('strong', 'Error: '), study.err)\n                :\n                !study.loaded ? '' :\n                    splitPane({\n                        leftWidth,\n                        left: m.component(sidebarComponent, {study}),\n                        right: m.route.param('resource') === 'wizard'\n                            ? m.component(wizardComponent, {study})\n                            : m.component(editorComponent, {study})\n                    })\n        ]);\n    }\n};\n\n// a clone of m.prop that users localStorage so that width changes persist across sessions as well as files.\n// Essentially this is a global variable\nfunction leftWidth(val){\n    if (arguments.length) localStorage.fileSidebarWidth = val;\n    return localStorage.fileSidebarWidth;\n}\n","import {fetchFullJson, fetchJson} from 'utils/modelHelpers';\nimport fileFactory from './fileModel';\nexport default studyFactory;\nimport {baseUrl} from 'modelUrls';\n\nlet studyPrototype = {\n    apiURL(path = ''){\n        return `${baseUrl}/view_files/${encodeURIComponent(this.code)}${path}`;\n    },\n\n    get(){\n        return fetchFullJson(this.apiURL())\n            .then(study => {\n                this.loaded = true;\n                this.id = study.id;\n                this.isReadonly = study.is_readonly;\n                this.istemplate = study.is_template;\n                this.is_locked = study.is_locked;\n                this.name = study.study_name;\n                this.baseUrl = study.base_url;\n                let files = flattenFiles(study.files)\n                    .map(assignStudyId(this.id))\n                    .map(assignViewStudy())\n                    .map(fileFactory);\n\n                this.files(files);\n                this.sort();\n            })\n            .catch(reason => {\n                this.error = true;\n                throw(reason);\n                // if(reason.status==404)\n                //\n                // console.log(reason.status);\n                //\n                // return Promise.reject(reason); // do not swallow error\n            });\n\n        function flattenFiles(files){\n            if (!files) return [];\n            return files\n                .map(spreadFile)\n                .reduce((result, fileArr) => result.concat(fileArr),[]);\n        }\n\n        function assignStudyId(id){\n            return f => Object.assign(f, {studyId: id});\n        }\n\n        function assignViewStudy(){\n            return f => Object.assign(f, {viewStudy: true});\n        }\n\n        // create an array including file and all its children\n        function spreadFile(file){\n            return [file].concat(flattenFiles(file.files));\n        }\n    },\n\n    getFile(id){\n        return this.files().find(f => f.id === id);\n    },\n\n    // makes sure not to return both a folder and its contents.\n    // This is important mainly for server side clarity (don't delete or download both a folder and its content)\n    // We go recurse through all the files, starting with those sitting in root (we don't have a root node, so we need to get them manually).\n    getChosenFiles(){\n        let vm = this.vm;\n        let rootFiles = this.files().filter(f => f.basePath === '/');\n        return getChosen(rootFiles);\n\n        function getChosen(files){\n            return files.reduce((response, file) => {\n                // a chosen file/dir does not need sub files to be checked\n                if (vm(file.id).isChosen() === 1) response.push(file);\n                // if not chosen, we need to look deeper\n                else response = response.concat(getChosen(file.files || []));\n                return response;\n            }, []);\n        }\n    },\n\n    addFile(file){\n        this.files().push(file);\n        // update the parent folder\n        let parent = this.getParents(file).reduce((result, f) => result && (result.path.length > f.path.length) ? result : f , null); \n        if (parent) {\n            parent.files || (parent.files = []);\n            parent.files.push(file);\n        }\n    },\n\n    createFile({name, content='',isDir}){\n        // validation (make sure there are no invalid characters)\n        // eslint-disable-next-line no-useless-escape\n        if(/[^\\/-_.A-Za-z0-9]/.test(name)) return Promise.reject({message: `The file name \"${name}\" is not valid`});\n\n        // validation (make sure file does not already exist)\n        let exists = this.files().some(file => file.path === name);\n        if (exists) return Promise.reject({message: `The file \"${name}\" already exists`});\n\n        // validateion (make sure direcotry exists)\n        let basePath = (name.substring(0, name.lastIndexOf('/'))).replace(/^\\//, '');\n        let dirExists = basePath === '' || this.files().some(file => file.isDir && file.path === basePath);\n        if (!dirExists) return Promise.reject({message: `The directory \"${basePath}\" does not exist`});\n        return fetchJson(this.apiURL('/file'), {method:'post', body: {name, content, isDir}})\n            .then(response => {\n                Object.assign(response, {studyId: this.id, content, path:name, isDir});\n                let file = fileFactory(response);\n                file.loaded = true;\n                this.addFile(file);\n                return response;\n            })\n            .then(this.sort.bind(this));\n    },\n\n    sort(response){\n        let files = this.files().sort(sort);\n        this.files(files);\n        return response;\n\n        function sort(a,b){\n            // sort by isDir then name\n            let nameA= +!a.isDir + a.name.toLowerCase(), nameB=+!b.isDir + b.name.toLowerCase();\n            if (nameA < nameB) return -1;//sort string ascending\n            if (nameA > nameB) return 1;\n            return 0; //default return value (no sorting)\n        }\n    },\n\n\n    /*\n     * @param files [Array] a list of file.path to download\n     * @returns url [String] the download url\n     */\n    downloadFiles(files){\n        return fetchJson(this.apiURL(), {method: 'post', body: {files}})\n            .then(response => `${baseUrl}/download?path=${response.zip_file}&study=_PATH`);\n    },\n\n\n    getParents(file){\n        return this.files().filter(f => f.isDir && file.basePath.indexOf(f.path) === 0);\n    },\n\n    // returns array of children for this file, including itself\n    getChildren(file){\n        return children(file);\n       \n        function children(file){\n            if (!file.files) return [file];\n            return file.files\n                .map(children) // harvest children\n                .reduce((result, files) => result.concat(files), [file]); // flatten\n        }\n    }\n};\n\nlet studyFactory =  code =>{\n    let study = Object.create(studyPrototype);\n    Object.assign(study, {\n        code    : code,\n        id      : '',\n        view    : true,\n        files   : m.prop([]),\n        loaded  : false,\n        error   :false,\n        vm      : viewModelMap({\n            isOpen: m.prop(false),\n            isChanged: m.prop(false),\n            isChosen: m.prop(0)\n        })\n    });\n\n    return study;\n};\n\n// http://lhorie.github.io/mithril-blog/mapping-view-models.html\nlet viewModelMap = function(signature) {\n    let map = {};\n    return function(key) {\n        if (!map[key]) {\n            map[key] = {};\n            for (let prop in signature) map[key][prop] = m.prop(signature[prop]());\n        }\n        return map[key];\n    };\n};\n","export default editorLayoutComponent;\nimport studyFactory from './viewFileCollectionModel';\nimport editorComponent from './editorComponent';\nimport wizardComponent from './wizardComponent';\nimport sidebarComponent from './sidebar/sidebarComponent';\nimport splitPane from 'utils/splitPane';\nimport fullheight from 'utils/fullHeight';\n\nlet study;\n\nlet editorLayoutComponent = {\n    controller: ()=>{\n\n        let code = m.route.param('code');\n\n        if (!study || (study.code !== code)){\n            study = studyFactory(code);\n            study\n                .get()\n                .catch(reason => {\n                    if(reason.status==403)\n                        m.route('/');\n                })\n                .then(m.redraw);\n        }\n\n        let ctrl = {study, onunload};\n        return ctrl;\n    },\n    view: ({study}) => {\n        return m('.study', {config: fullheight},  [\n            !study.loaded ? '' : splitPane({\n                leftWidth,\n                left: m.component(sidebarComponent, {study}),\n                right: m.route.param('resource') === 'wizard'\n                    ? m.component(wizardComponent, {study})\n                    : m.component(editorComponent, {study})\n            })\n        ]);\n    }\n};\n\n// a clone of m.prop that users localStorage so that width changes persist across sessions as well as files.\n// Essentially this is a global variable\nfunction leftWidth(val){\n    if (arguments.length) localStorage.fileSidebarWidth = val;\n    return localStorage.fileSidebarWidth;\n}\n","export default mainComponent;\nimport {load_studies} from './studyModel';\nimport {get_tags} from 'tags/tagsModel';\n\nimport dropdown from 'utils/dropdown';\nimport {do_create} from './studyActions';\nimport {draw_menu} from './studyMenu';\n\nimport classNames from 'utils/classNames';\nimport formatDate from 'utils/formatDate';\n\nconst mainComponent = {\n\n    controller: function(){\n        const ctrl = {\n            studies:m.prop([]),\n            have_templates:m.prop(false),\n            tags:m.prop([]),\n            user_name:m.prop(''),\n            globalSearch: m.prop(''),\n            permissionChoice: m.prop('all'),\n            loaded:false,\n            order_by_name: true,\n            loadStudies,\n            loadTags,\n            type: m.prop(''),\n            sort_studies_by_name,\n            sort_studies_by_date\n        };\n\n        loadTags();\n        loadStudies();\n        function loadStudies() {\n            ctrl.type(m.route() == '/studies' ? 'regular' : 'template');\n            // console.log(ctrl.type());\n            load_studies()\n                .then(response => response.studies)\n                .then(ctrl.studies)\n                .then(()=>ctrl.loaded = true)\n                .then(sort_studies_by_name)\n                .then(m.redraw);\n        }\n\n        function loadTags() {\n            get_tags()\n                .then(response => response.tags)\n                .then(ctrl.tags)\n                .then(m.redraw);\n        }\n\n        return ctrl;\n        function sort_studies_by_name2(study1, study2){\n            ctrl.order_by_name = true;\n            return study1.name.toLowerCase() === study2.name.toLowerCase() ? 0 : study1.name.toLowerCase() > study2.name.toLowerCase() ? 1 : -1;\n        }\n\n        function sort_studies_by_date2(study1, study2){\n            ctrl.order_by_name = false;\n            return study1.last_modified === study2.last_modified ? 0 : study1.last_modified < study2.last_modified ? 1 : -1;\n        }\n\n        function sort_studies_by_date(){\n            ctrl.studies(ctrl.studies().sort(sort_studies_by_date2));\n        }\n        function sort_studies_by_name(){\n            ctrl.studies(ctrl.studies().sort(sort_studies_by_name2));\n        }\n\n\n    },\n    view({loaded, studies, tags, permissionChoice, globalSearch, sort_studies_by_date, sort_studies_by_name, order_by_name, type}){\n        if (!loaded) return m('.loader');\n\n\n        return m('.container.studies', [\n            m('.row.p-t-1', [\n                m('.col-sm-4', [\n                    m('h3', ['My ', type()=='regular' ? 'Studies' : 'Template Studies'])\n                ]),\n\n                m('.col-sm-8', [\n                    m('button.btn.btn-success.btn-sm.pull-right', {onclick:function(){do_create(type(), studies().filter(typeFilter(type())));}}, [\n                        m('i.fa.fa-plus'), '  Add new study'\n                    ]),\n\n                    m('.pull-right.m-r-1', [\n                        dropdown({toggleSelector:'button.btn.btn-sm.btn-secondary.dropdown-toggle', toggleContent: [m('i.fa.fa-tags'), ' Tags'], elements:[\n                            m('h6.dropdown-header', 'Filter by tags'),\n                            !tags().length\n                                ? m('em.dropdown-header', 'You do not have any tags yet')\n                                : tags().map(tag =>  m('a.dropdown-item',m('label.custom-control.custom-checkbox', [\n                                    m('input.custom-control-input', {\n                                        type: 'checkbox',\n                                        checked: tag.used,\n                                        onclick: function(){ tag.used = !tag.used; }\n                                    }),\n                                    m('span.custom-control-indicator'),\n                                    m('span.custom-control-description.m-r-1.study-tag',{style: {'background-color': '#'+tag.color}}, tag.text)\n                                ]))),\n                            m('.dropdown-divider'),\n                            m('a.dropdown-item', { href: `/tags`, config: m.route }, 'Manage tags')\n                        ]})\n                    ]),\n\n                    m('.input-group.pull-right.m-r-1', [\n                        m('select.c-select.form-control', {onchange: e => permissionChoice(e.target.value)}, [\n                            m('option', {value:'all'}, 'Show all my studies'),\n                            m('option', {value:'owner'}, 'Show only studies I created'),\n                            m('option', {value:'collaboration'}, 'Show only studies shared with me'),\n                            m('option', {value:'public'}, 'Show public studies'),\n                            m('option', {value:'bank'}, 'Show study bank studies')\n                        ])\n                    ])\n                ])\n            ]),\n\n            m('.card.studies-card', [\n                m('.card-block', [\n                    m('.row', {key: '@@notid@@'}, [\n                        m('.col-sm-5', [\n                            m('.form-control-static',{onclick:sort_studies_by_name, style:'cursor:pointer'},[\n                                m('strong', 'Study Name '),\n                                m('i.fa.fa-sort', {style: {color: order_by_name ? 'black' : 'grey'}})\n                            ])\n                        ]),\n                        m('.col-sm-3', [\n                            m('.form-control-static',{onclick:sort_studies_by_date, style:'cursor:pointer'},[\n                                m('strong', ' Last Changed '),\n                                m('i.fa.fa-sort', {style: {color: !order_by_name ? 'black' : 'grey'}})\n                            ])\n                        ]),\n                        m('.col-sm-4', [\n                            m('input.form-control', {placeholder: 'Search ...', value: globalSearch(), oninput: m.withAttr('value', globalSearch)})\n                        ])\n                    ]),\n\n                    studies()\n                        .filter(typeFilter(type()))\n                        .filter(tagFilter(tags().filter(uesedFilter()).map(tag=>tag.text)))\n                        .filter(permissionFilter(permissionChoice()))\n                        .filter(searchFilter(globalSearch()))\n                        .filter(study=>!study.deleted)\n                        .map(study => m('a', {href: m.route() != '/studies' ? `/translate/${study.id}` : `/editor/${study.id}`,config:routeConfig, key: study.id}, [\n                            m('.row.study-row', [\n                                m('.col-sm-5', [\n                                    m('.study-text', [\n                                        m('i.fa.fa-fw.owner-icon', {\n                                            class: classNames({\n                                                'fa-lock':  study.is_locked,\n                                                'fa-globe': study.is_public,\n                                                'fa-flag':  study.is_template,\n                                                'fa-university':  study.is_bank,\n                                                'fa-users': !study.is_public && study.permission !== 'owner'\n                                            }),\n                                            title: study.is_public\n                                                ? study.is_bank\n                                                    ? 'Bank'\n                                                    : 'Public'\n                                                : study.permission === 'owner'\n                                                    ? ''\n                                                    : 'Collaboration'\n                                        }),\n                                        m('strong', study.name)\n                                    ]),\n                                    !study.description ? '' : m('.study-description', [\n                                        study.description,\n                                        m('.study-tip', study.description)\n                                    ])\n                                ]),\n                                m('.col-sm-3', [\n                                    m('.study-text', formatDate(new Date(study.last_modified)))\n                                ]),\n                                m('.col-sm-3', [\n                                    study.tags.map(tag=> m('span.study-tag',  {style: {'background-color': '#' + tag.color}}, tag.text))\n                                ]),\n                                m('.col-sm-1', [\n                                    m('.btn-toolbar.pull-right',\n                                        m('.btn-group.btn-group-sm', \n                                            dropdown({toggleSelector:'a.btn.btn-secondary.btn-sm.dropdown-toggle', toggleContent: 'Actions', elements: [\n                                                draw_menu(study)\n                                            ]})\n                                        )\n                                    )\n                                ])\n                            ])\n                        ]))\n                ])\n            ])\n        ]);\n    }\n};\n\n\nconst typeFilter = type => study => {\n    return study.study_type === type;\n};\n\nconst permissionFilter = permission => study => {\n    if(permission === 'all') return !(study.is_public && study.permission !== 'owner');\n    if(permission === 'public') return study.is_public && !study.is_bank;\n    if(permission === 'collaboration') return study.permission !== 'owner' && !study.is_public;\n    if(permission === 'template') return study.is_template;\n    if(permission === 'bank') return study.is_bank;\n    return study.permission === permission;\n};\n\nlet tagFilter = tags => study => {\n    if (tags.length==0)\n        return true;\n    return study.tags.map(tag=>tag.text).some(tag => tags.indexOf(tag) != -1);\n};\n\nlet uesedFilter = () => tag => tag.used;\n\nlet searchFilter = searchTerm => study => !study.name || study.name.match(new RegExp(searchTerm, 'i')) || (study.description && study.description.match(new RegExp(searchTerm, 'i')));\n\nfunction routeConfig(el, isInit, ctx, vdom) {\n\n    el.href = location.pathname + '?' + vdom.attrs.href;\n\n    if (!isInit) el.addEventListener('click', route);\n\n    function route(e){\n        let el = e.currentTarget;\n\n        if (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return;\n        if (e.defaultPrevented) return;\n\n        e.preventDefault();\n        if (e.target.tagName === 'A' && e.target !== el) return;\n\n        m.route(el.search.slice(1));\n    }\n}\n","import {get_study_list} from './deployListModel';\nimport sortTable from 'utils/sortTable';\n\n\nexport default deployComponent;\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nlet deployComponent = {\n    controller(){\n        let ctrl = {\n            list: m.prop(''),\n            sortBy: m.prop('CREATION_DATE')\n        };\n        get_study_list()\n            .then(response =>{ctrl.list(response.requests);\n            })\n            .catch(error => {\n                throw error;\n            })\n            .then(m.redraw);\n        return {ctrl};\n    },\n    view({ctrl}){\n        let list = ctrl.list;\n        return ctrl.list().length === 0\n            ?\n            m('.loader')\n            :\n            m('table', {class:'table table-nowrap table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n                m('thead', [\n                    m('tr', [\n                        m('th', thConfig('CREATION_DATE',ctrl.sortBy), 'Creation date'),\n                        m('th', thConfig('FOLDER_LOCATION',ctrl.sortBy), 'Folder location'),\n                        m('th', thConfig('RULE_FILE',ctrl.sortBy), 'Rule file'),\n                        m('th', thConfig('RESEARCHER_EMAIL',ctrl.sortBy), 'Researcher email'),\n                        m('th', thConfig('RESEARCHER_NAME',ctrl.sortBy), 'Researcher name'),\n                        m('th', thConfig('TARGET_NUMBER',ctrl.sortBy), 'Target number'),\n                        m('th', thConfig('APPROVED_BY_A_REVIEWER',ctrl.sortBy), 'Approved by a reviewer'),\n                        m('th', thConfig('EXPERIMENT_FILE',ctrl.sortBy), 'Experiment file'),\n                        m('th', thConfig('LAUNCH_CONFIRMATION',ctrl.sortBy), 'Launch confirmation'),\n                        m('th', thConfig('COMMENTS',ctrl.sortBy), 'Comments')\n                    ])\n                ]),\n                m('tbody', [\n                    ctrl.list().map(study => m('tr', [\n                        m('td', study.CREATION_DATE),\n                        m('td', m('a', {href:study.FOLDER_LOCATION}, study.FOLDER_LOCATION)),\n                        m('td', study.RULE_FILE),\n                        m('td', m('a', {href:'mailto:' + study.RESEARCHER_EMAIL}, study.RESEARCHER_EMAIL)),\n                        m('td', study.RESEARCHER_NAME),\n                        m('td', study.TARGET_NUMBER),\n                        m('td', study.APPROVED_BY_A_REVIEWER),\n                        m('td', study.EXPERIMENT_FILE),\n                        m('td', study.LAUNCH_CONFIRMATION),\n                        m('td', study.COMMENTS)\n                    ]))\n                ])\n            ]);\n    }\n};\n","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst deploy_url = `${baseUrl}/deploy_list`;\n\nexport function get_study_list(){\n    return fetchJson(deploy_url);\n}\n","import {get_change_request_list} from './changeRequestListModel';\nimport sortTable from 'utils/sortTable';\nexport default changeRequestListComponent;\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\nlet changeRequestListComponent = {\n    controller(){\n\n        let ctrl = {\n            list: m.prop(''),\n            sortBy: m.prop('CREATION_DATE')\n        };\n        get_change_request_list()\n            .then(response =>{ctrl.list(response.requests);\n                sortTable(ctrl.list, ctrl.sortBy);\n            })\n            .catch(error => {\n                throw error;\n            })\n            .then(m.redraw);\n        return {ctrl};\n    },\n\n    view({ctrl}){\n        let list = ctrl.list;\n\n\n        return ctrl.list().length === 0\n            ?\n            m('.loader')\n            :\n            m('table', {class:'table table-nowrap table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n                m('thead', [\n                    m('tr', [\n                        m('th', thConfig('CREATION_DATE',ctrl.sortBy), 'Creation date'),\n                        m('th', thConfig('RESEARCHER_EMAIL',ctrl.sortBy), 'Researcher email'),\n                        m('th', thConfig('RESEARCHER_NAME',ctrl.sortBy), 'Researcher name'),\n                        m('th', thConfig('FILE_NAMES',ctrl.sortBy), 'File names'),\n                        m('th', thConfig('TARGET_SESSIONS',ctrl.sortBy), 'Target sessions'),\n                        m('th', thConfig('STUDY_SHOWFILES_LINK',ctrl.sortBy), 'Study showfiles link'),\n                        m('th', thConfig('STATUS',ctrl.sortBy), 'Status'),\n                        m('th', thConfig('COMMENTS',ctrl.sortBy), 'Comments')\n                    ])\n                ]),\n                m('tbody', [\n                    ctrl.list().map(study => m('tr', [\n                        m('td', study.CREATION_DATE),\n                        m('td', m('a', {href:'mailto:' + study.RESEARCHER_EMAIL}, study.RESEARCHER_EMAIL)),\n                        m('td', study.RESEARCHER_NAME),\n                        m('td', study.FILE_NAMES),\n                        m('td', study.TARGET_SESSIONS),\n                        m('td', m('a', {href:study.STUDY_SHOWFILES_LINK}, study.STUDY_SHOWFILES_LINK)),\n                        m('td', study.STATUS),\n                        m('td', study.COMMENTS)\n                    ]))\n                ])\n            ]);\n    }\n};","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst change_request_url = `${baseUrl}/change_request_list`;\n\n\nexport function get_change_request_list(){\n    return fetchJson(change_request_url);\n}\n","import {get_removal_list} from './removalListModel';\nimport sortTable from 'utils/sortTable';\n\nexport default removalListComponent;\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nlet removalListComponent = {\n    controller(){\n        let ctrl = {\n            list: m.prop(''),\n            sortBy: m.prop('CREATION_DATE')\n        };\n        get_removal_list()\n            .then(response =>{ctrl.list(response.requests);\n                sortTable(ctrl.list, ctrl.sortBy);\n            })\n            .catch(error => {\n                throw error;\n            })\n            .then(m.redraw);\n        return {ctrl};\n    },\n    view({ctrl}){\n        let list = ctrl.list;\n\n        return ctrl.list().length === 0\n            ?\n            m('.loader')\n            :\n            m('table', {class:'table table-nowrap table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n                m('thead', [\n                    m('tr', [\n                        m('th', thConfig('CREATION_DATE',ctrl.sortBy), 'Creation date'),\n                        m('th', thConfig('RESEARCHER_EMAIL',ctrl.sortBy), 'Researcher email'),\n                        m('th', thConfig('RESEARCHER_NAME',ctrl.sortBy), 'Researcher name'),\n                        m('th', thConfig('STUDY_NAME',ctrl.sortBy), 'Study name'),\n                        m('th', thConfig('COMPLETED_N',ctrl.sortBy), 'Completed n'),\n                        m('th', thConfig('COMMENTS',ctrl.sortBy), 'Comments')\n                    ])\n                ]),\n                m('tbody', [\n                    ctrl.list().map(study => m('tr', [\n                        m('td', study.CREATION_DATE),\n                        m('td', m('a', {href:'mailto:' + study.RESEARCHER_EMAIL}, study.RESEARCHER_EMAIL)),\n                        m('td', study.RESEARCHER_NAME),\n                        m('td', study.STUDY_NAME),\n                        m('td', study.COMPLETED_N),\n                        m('td', study.COMMENTS)\n                    ]))\n                ])\n            ]);\n    }\n};","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst removal_url = `${baseUrl}/removal_list`;\n\nexport function get_removal_list(){\n    return fetchJson(removal_url);\n}\n","import {fetchJson} from 'utils/modelHelpers';\nimport {studyUrl as baseUrl} from 'modelUrls';\n\nfunction deploy_url(study_id)\n{\n    return `${baseUrl}/${encodeURIComponent(study_id)}/deploy`;\n}\n\nexport let get_study_prop = (study_id) => fetchJson(deploy_url(study_id), {\n    method: 'get'\n});\n\nexport let study_removal = (study_id, ctrl) => fetchJson(deploy_url(study_id), {\n    method: 'delete',\n    body: {study_name: ctrl.study_name, completed_n: ctrl.completed_n, comments: ctrl.comments}\n});\n\nexport let deploy = (study_id, ctrl) => fetchJson(deploy_url(study_id), {\n    method: 'post',\n    body: {target_number: ctrl.target_number, approved_by_a_reviewer: ctrl.approved_by_a_reviewer, experiment_file: ctrl.experiment_file, launch_confirmation: ctrl.launch_confirmation, comments: ctrl.comments, rulesValue: ctrl.rulesValue}\n});\n\nexport let Study_change_request = (study_id, ctrl) => fetchJson(deploy_url(study_id), {\n    method: 'put',\n    body: {file_names: ctrl.file_names, target_sessions: ctrl.target_sessions, status: ctrl.status, comments: ctrl.comments}\n});\n","import messages from 'utils/messagesComponent';\nexport default args => m.component(rulesComponent, args);\n\nlet rulesComponent = {\n    controller({visual, value, comments, exist_rule_file}){\n        return {visual, value, edit, remove, addcomments, exist_rule_file};\n\n        function edit(){\n            window.open('../ruletable.html');\n        }\n\n        function remove(){\n            visual('None');\n            value('parent'); // this value is defined by the rule generator\n        }\n\n        function addcomments(){\n            messages.prompt({\n                prop: comments,\n                header: 'Edit rule comments'\n            });\n        }\n    },\n    view: ({visual, value, edit, remove, exist_rule_file}) => {\n        return m('div', [\n            !exist_rule_file() ? '' : m('.small.text-muted', [\n                'You already have a rule file by the name of \"',\n                exist_rule_file(),\n                '\", it will be overwritten if you create a new one.'\n            ]),\n            m('.btn-group', [\n                m('.btn.btn-secondary.btn-sm', {onclick: edit},  [\n                    m('i.fa.fa-edit'), ' Rule editor'\n                ]),\n                m('.btn.btn-secondary.btn-sm', {onclick: remove},  [\n                    m('i.fa.fa-remove'), ' Clear rules'\n                ])\n            ]),\n            m('#ruleGenerator.card', {config: getInputs(visual, value)}, [\n                m('.card-block', visual())\n            ])\n        ]);\n    }\n};\n\nlet getInputs = (visual, value) => (element, isInit) => {\n    if (isInit) return true;\n    element.ruleGeneratorVisual = visual;\n    element.ruleGeneratorValue = value;\n};\n\n","import {deploy, get_study_prop} from './deployModel';\nimport classNames from 'utils/classNames';\nimport {formFactory, textInput, radioInput} from 'utils/formHelpers';\nimport rulesEditor from './rulesComponent';\nexport default deployComponent;\n\nconst ASTERIX = m('span.text-danger', '*');\n\nlet deployComponent = {\n    controller(){\n        const studyId = m.route.param('studyId');\n        let form = formFactory();\n        let ctrl = {\n            sent:false,\n            error: m.prop(''),\n            folder_location: m.prop(''),\n            researcher_email: m.prop(''),\n            researcher_name: m.prop(''),\n            target_number: m.prop(''),\n            \n            rulesValue: m.prop('parent'), // this value is defined by the rule generator\n            rulesVisual: m.prop('None'),\n            rulesComments: m.prop(''),\n            rule_file: m.prop(''),\n            exist_rule_file: m.prop(''),\n\n            approved_by_a_reviewer: m.prop(''),\n            zero_unnecessary_files: m.prop(''),\n\n            // unnecessary\n            completed_checklist: m.prop(''),\n            approved_by_irb: m.prop(''),\n            valid_study_name: m.prop(''),\n            realstart: m.prop(''),\n\n            experiment_file: m.prop(''),\n            experiment_files: m.prop(''),\n            launch_confirmation: m.prop(''),\n            comments: m.prop('')   \n            \n        };\n\n        get_study_prop(studyId)\n            .then(response =>{\n                ctrl.exist_rule_file(response.have_rule_file ? response.study_name+'.rules.xml' : '');\n                ctrl.study_name = response.study_name;\n                ctrl.researcher_name(response.researcher_name);\n                ctrl.researcher_email(response.researcher_email);\n                ctrl.folder_location(response.folder);\n                ctrl.experiment_files(response.experiment_file.reduce((obj, row) => {obj[row.file_name] = row.file_name;\n                    return obj;\n                }, {}));\n            })\n            .catch(response => {\n                ctrl.error(response.message);\n            })\n            .then(m.redraw);\n    \n        return {ctrl, form, submit, studyId};\n        function submit(){\n            form.showValidation(true);\n            if (!form.isValid())\n            {\n                ctrl.error('Missing parameters');\n                return;\n            }\n\n            deploy(studyId, ctrl)\n                .then((response) => {\n                    ctrl.rule_file(response.rule_file);\n                    ctrl.sent = true;\n                })\n                .catch(response => {\n                    ctrl.error(response.message);\n                })\n                .then(m.redraw);\n        }\n    },\n    view({form, ctrl, submit}){\n        if (ctrl.sent) return m('.deploy.centrify',[\n            m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n            m('h5', ['The Deploy form was sent successfully ', m('a', {href:'/deployList', config: m.route}, 'View Deploy Requests')]),\n            ctrl.rule_file() !='' ? m('h5', ['Rule File: ', m('a', {href: `/editor/${m.route.param('studyId')}/file/${ctrl.rule_file()}.xml`, config: m.route}, ctrl.rule_file())]) : ''\n        ]);\n        \n        return m('.deploy.container', [\n            m('h3', [\n                'Request Deploy ',\n                m('small', ctrl.study_name)\n            ]),\n\n            m('.row', [\n                m('.col-sm-3', m('strong', 'Researcher Name: ')),\n                m('.col-sm-9', ctrl.researcher_name())\n            ]),\n            m('.row', [\n                m('.col-sm-3', m('strong', 'Researcher Email Address: ')),\n                m('.col-sm-9', ctrl.researcher_email())\n            ]),\n            m('.row.m-b-1', [\n                m('.col-sm-3', m('strong', 'Study Folder Location: ')),\n                m('.col-sm-9', ctrl.folder_location())\n            ]),\n\n            radioInput({\n                label:m('span', ['Name of Experiment File', ASTERIX]),\n                prop: ctrl.experiment_file,\n                values:ctrl.experiment_files(),\n                form, required:true, isStack:true\n            }),\n\n            textInput({help: 'For private studies (not in the Project Implicit research pool), enter n/a', label:['Target Number of Completed Study Sessions', ASTERIX],  placeholder: 'Target Number of Completed Study Sessions', prop: ctrl.target_number, form, required:true, isStack:true}),\n\n            m('.font-weight-bold', 'Participant Restrictions'),\n            rulesEditor({value:ctrl.rulesValue, visual: ctrl.rulesVisual, comments: ctrl.rulesComments, exist_rule_file: ctrl.exist_rule_file}),\n\n            m('.font-weight-bold', 'Study is ready for deploy: ', ASTERIX),\n            m('.m-b-1', [\n                checkbox({description: 'The study\\'s study-id starts with my user name', prop: ctrl.valid_study_name, form, required:true, isStack:true}),\n                checkbox({\n                    description:  'This study has been approved by the appropriate IRB ', \n                    prop: ctrl.approved_by_irb,\n                    required:true,\n                    form, isStack:true\n                }),\n                checkbox({\n                    description:  [\n                        'The study is compliant with ',\n                        m('a', {hxref:'https://docs.google.com/document/d/1pglAQELqNLWbV1yscE2IVd7G5xVgZ8b4lkT8PYeumu8/edit?usp=sharing', target:'_blank'}, 'PI Research Pool Guidelines and Required Elements & Study Conventions'),\n                        ' .'\n                    ],\n                    prop: ctrl.completed_checklist,\n                    form, isStack:true,\n                    required:true\n                }),\n                checkbox({\n                    description: 'My study folder includes ZERO files that aren\\'t necessary for the study (e.g., word documents, older versions of files, items that were dropped from the final version)',\n                    prop: ctrl.zero_unnecessary_files,\n                    required:true,\n                    form, isStack:true\n                }),\n                checkbox({description: 'I used a realstart and lastpage tasks', prop: ctrl.realstart, form, required:true, isStack:true})\n            ]),\n            radioInput({\n                label:['Study has been approved by a *User Experience* Reviewer (Calvin Lai): ', ASTERIX],\n                prop: ctrl.approved_by_a_reviewer,\n                values: {\n                    'No, this study is not for the Project Implicit pool.' : 'No, this study is not for the Project Implicit pool.',\n                    'Yes' : 'Yes'\n                },\n                form, required:true, isStack:true\n            }),\n\n            radioInput({\n                label: ['If you are building this study for another researcher (e.g. a contract study), has the researcher received the standard final launch confirmation email and confirmed that the study is ready to be launched? ', ASTERIX],\n                prop: ctrl.launch_confirmation,\n                values: {\n                    'No,this study is mine': 'No,this study is mine',\n                    'Yes' : 'Yes'\n                },\n                form, required:true, isStack:true\n            }),\n\n            textInput({isArea: true, label: m('span', 'Additional comments'),  placeholder: 'Additional comments', prop: ctrl.comments, form, isStack:true}),\n            !ctrl.error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.error()),\n            m('button.btn.btn-primary', {onclick: submit}, 'Request Deploy')\n        ]);\n    }\n};\n\nlet checkbox = args => m.component({\n    controller({prop, form, required}){\n        let validity = () => !required || prop();\n        if (!form) throw new Error('Form not defined');\n        form.register(validity);\n\n        return {validity, showValidation: form.showValidation};\n    },\n    view: (ctrl, {prop, description = '', help, required, form}) => m('.checkmarked', \n        { onclick: ()=>prop(!prop()) },\n        [\n            m('i.fa.fa-fw', {\n                class: classNames({\n                    'fa-square-o' : !prop(),\n                    'fa-check-square-o' : prop(),\n                    'text-success' : required && form.showValidation() && prop(),\n                    'text-danger' : required && form.showValidation() && !prop()\n                })\n            }),\n            m.trust('&nbsp;'),\n            description,\n            !help ? '' : m('small.text-muted', help)\n        ])\n}, args);\n","import {formFactory, textInput, radioInput} from 'utils/formHelpers';\nimport {study_removal, get_study_prop} from 'deploy/deployModel';\n\nexport default StudyRemovalComponent;\nconst ASTERIX = m('span.text-danger', '*');\n\nlet StudyRemovalComponent = {\n    controller(){\n        const studyId = m.route.param('studyId');\n        let form = formFactory();\n        let ctrl = {\n            sent:false,\n            researcher_name: m.prop(''),\n            researcher_email: m.prop(''),\n            global_study_name: m.prop(''),\n            study_name: m.prop(''),\n            study_names: m.prop(''),\n            completed_n: m.prop(''),\n            comments: m.prop(''),\n            error: m.prop('')\n        };\n\n        get_study_prop(studyId)\n            .then(response =>{\n                ctrl.researcher_name(response.researcher_name);\n                ctrl.researcher_email(response.researcher_email);\n                ctrl.global_study_name(response.study_name);\n                ctrl.study_names(response.experiment_file.reduce((obj, row) => {\n                    obj[row.file_id] = row.file_id;\n                    return obj;\n                }, {}));\n            })\n            .catch(response => {\n                ctrl.error(response.message);\n            })\n            .then(m.redraw);\n\n        function submit(){\n            form.showValidation(true);\n            if (!form.isValid())\n            {\n                ctrl.error('Missing parameters');\n                return;\n            }\n            study_removal(studyId, ctrl)\n                .then(() => {\n                    ctrl.sent = true;\n                })\n                .catch(response => {\n                    ctrl.error(response.message);\n                })\n                .then(m.redraw);\n        }\n        return {ctrl, form, submit};\n    },\n    view({form, ctrl, submit}){\n        return ctrl.sent\n            ?\n            m('.deploy.centrify',[\n                m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n                m('h5', ['The removal form was sent successfully ', m('a', {href:'/removalList', config: m.route}, 'View removal requests')])\n            ])\n            :\n            m('.StudyRemoval.container', [\n                m('h3', [\n                    'Study Removal Request ',\n                    m('small', ctrl.global_study_name())\n                ]),\n\n                m('.row', [\n                    m('.col-sm-3', m('strong', 'Researcher Name: ')),\n                    m('.col-sm-9', ctrl.researcher_name())\n                ]),\n                m('.row.m-b-1', [\n                    m('.col-sm-3', m('strong', 'Researcher Email Address: ')),\n                    m('.col-sm-9', ctrl.researcher_email())\n                ]),\n\n                radioInput({\n                    label:m('span', ['Study name', ASTERIX]), \n                    prop: ctrl.study_name,\n                    values:ctrl.study_names(),\n                    help: 'This is the name you submitted to the RDE (e.g., colinsmith.elmcogload) ',\n                    form, required:true, isStack:true\n                }),\n                textInput({label: m('span', ['Please enter your completed n below ', m('span.text-danger', ' *')]), help: m('span', ['you can use the following link: ', m('a', {href:'https://app-prod-03.implicit.harvard.edu/implicit/research/pitracker/PITracking.html#3'}, 'https://app-prod-03.implicit.harvard.edu/implicit/research/pitracker/PITracking.html#3')]),  placeholder: 'completed n', prop: ctrl.completed_n, form, required:true, isStack:true}),\n                textInput({isArea: true, label: m('span', 'Additional comments'), help: '(e.g., anything unusual about the data collection, consistent participant comments, etc.)',  placeholder: 'Additional comments', prop: ctrl.comments, form, isStack:true}),\n                !ctrl.error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.error()),\n                m('button.btn.btn-primary', {onclick: submit}, 'Submit')\n            ]);\n    }\n};\n","import {formFactory, textInput, radioInput} from 'utils/formHelpers';\nimport {Study_change_request, get_study_prop} from 'deploy/deployModel';\n\nexport default studyChangeRequestComponent;\nconst ASTERIX = m('span.text-danger', '*');\n\nlet studyChangeRequestComponent = {\n    controller(){\n        const studyId = m.route.param('studyId');\n        let form = formFactory();\n        let ctrl = {\n            sent:false,\n            user_name: m.prop(''),\n            researcher_name: m.prop(''),\n            researcher_email: m.prop(''),\n            study_name: m.prop(''),\n            target_sessions: m.prop(''),\n            status: m.prop(''),\n            file_names: m.prop(''),\n            comments: m.prop(''),\n            error: m.prop('')\n        };\n        get_study_prop(studyId)\n            .then(response =>{\n                ctrl.researcher_name(response.researcher_name);\n                ctrl.researcher_email(response.researcher_email);\n                ctrl.user_name(response.user_name);\n                ctrl.study_name(response.study_name);\n            })\n            .catch(response => {\n                ctrl.error(response.message);\n            })\n            .then(m.redraw);\n\n        function submit(){\n            form.showValidation(true);\n            if (!form.isValid())\n            {\n                ctrl.error('Missing parameters');\n                return;\n            }\n            Study_change_request(studyId, ctrl)\n                .then(() => {\n                    ctrl.sent = true;\n                })\n                .catch(response => {\n                    ctrl.error(response.message);\n                }).then(m.redraw);\n        }\n        return {ctrl, form, submit, studyId};\n    },\n    view({form, ctrl, submit}){\n        let study_showfiles_link = document.location.origin + '/implicit/showfiles.jsp?user=' + ctrl.user_name() + '&study=' + ctrl.study_name();\n\n        if (ctrl.sent) return m('.deploy.centrify',[\n            m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n            m('h5', ['The change request form was sent successfully ', m('a', {href:'/changeRequestList', config: m.route}, 'View change request  requests')])\n        ]);\n            \n        return m('.StudyChangeRequest.container', [\n            m('h3', [\n                'Study Change Request ',\n                m('small', ctrl.study_name())\n            ]),\n\n            m('.row', [\n                m('.col-sm-3', m('strong', 'Researcher Name: ')),\n                m('.col-sm-9', ctrl.researcher_name())\n            ]),\n            m('.row', [\n                m('.col-sm-3', m('strong', 'Researcher Email Address: ')),\n                m('.col-sm-9', ctrl.researcher_email())\n            ]),\n            m('.row.m-b-1', [\n                m('.col-sm-3', m('strong', 'Study showfiles link: ')),\n                m('.col-sm-9', m('a', {href:study_showfiles_link, target: '_blank'}, study_showfiles_link))\n            ]),\n\n\n            textInput({label: m('span', ['Target number of additional sessions (In addition to the sessions completed so far)', m('span.text-danger', ' *')]),  placeholder: 'Target number of additional sessions', prop: ctrl.target_sessions, form, required:true, isStack:true}),\n\n            radioInput({\n                label: m('span', ['What\\'s the current status of your study?', ASTERIX]),\n                prop: ctrl.status,\n                values: {\n                    'Currently collecting data and does not need to be unpaused': 'Currently collecting data and does not need to be unpaused',\n                    'Manually paused and needs to be unpaused' : 'Manually paused and needs to be unpaused',\n                    'Auto-paused due to low completion rates or meeting target N.' : 'Auto-paused due to low completion rates or meeting target N.'\n                },\n                form, required:true, isStack:true\n            }),\n            textInput({isArea: true, label: m('span', ['Change Request', m('span.text-danger', ' *')]), help: 'List all file names involved in the change request. Specify for each file whether file is being updated or added to production.)',  placeholder: 'Change Request', prop: ctrl.file_names, form, required:true, isStack:true}),\n            textInput({isArea: true, label: m('span', 'Additional comments'),  placeholder: 'Additional comments', prop: ctrl.comments, form, isStack:true}),\n            !ctrl.error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.error()),\n            m('button.btn.btn-primary', {onclick: submit}, 'Submit')\n        ]);\n    }\n};\n","import {add} from './addUserModel';\nimport fullHeight from 'utils/fullHeight';\nimport {copyUrlContent} from 'utils/copyUrl';\n\nexport default addComponent;\n\nlet addComponent = {\n    controller(){\n        const username = m.prop('');\n        const first_name = m.prop('');\n        const last_name = m.prop('');\n        const email = m.prop('');\n        const iscu = m.prop(false);\n        const ctrl = {\n            username,\n            first_name,\n            last_name,\n            email,\n            iscu,\n            error: m.prop(''),\n            added:false,\n            activation_code: m.prop(''),\n            add: addAction,\n        };\n        return ctrl;\n\n        function addAction(){\n            add(username, first_name , last_name, email, iscu)\n                .then((response) => {\n                    ctrl.added = true;\n                    ctrl.activation_code(response.activation_code);\n                    m.redraw();\n                })\n                .catch(response => {\n                    ctrl.error(response.message);\n                    m.redraw();\n                });\n        }\n    },\n    view(ctrl){\n        return m('.add.centrify',[\n            ctrl.added\n                ?\n\n                ctrl.activation_code()\n                    ?\n                    [\n                        m('h5', [, `Added ${ctrl.username()} successfully`]),\n                        m('.card.card-inverse.col-md-10',\n                            [m('label', 'Send the following link to user to allow them to activate their account and to change their password.'),\n                             copyUrlContent('/static/?/activation/'+ctrl.activation_code())()\n                        ])\n                    ]:\n                    [\n                    m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n                    m('h5', [ctrl.username(), ' successfully added (email sent)!'])\n                ]\n                :\n                m('.card.card-inverse.col-md-10', [\n                    m('.card-block',[\n                        m('h4', 'Please fill the following details'),\n                        m('form', {onsubmit:ctrl.add}, [\n                            m('fieldset.form-group',\n                                m('label', 'User name:'),\n                                m('input.form-control', {\n                                    type:'text',\n                                    placeholder: 'User name',\n                                    value: ctrl.username(),\n                                    oninput: m.withAttr('value', ctrl.username),\n                                    onchange: m.withAttr('value', ctrl.username),\n                                    config: getStartValue(ctrl.username)\n                                }\n                            )),\n                            m('fieldset.form-group',\n                                m('label', 'First name:'),\n                                m('input.form-control', {\n                                    type:'text',\n                                    placeholder: 'First name',\n                                    value: ctrl.first_name(),\n                                    oninput: m.withAttr('value', ctrl.first_name),\n                                    onchange: m.withAttr('value', ctrl.first_name),\n                                    config: getStartValue(ctrl.first_name)\n                                }\n                            )),\n                            m('fieldset.form-group',\n                                m('label', 'Last name:'),\n                                m('input.form-control', {\n                                    type:'text',\n                                    placeholder: 'Last name',\n                                    value: ctrl.last_name(),\n                                    oninput: m.withAttr('value', ctrl.last_name),\n                                    onchange: m.withAttr('value', ctrl.last_name),\n                                    config: getStartValue(ctrl.last_name)\n                                }\n                                ))\n                            ,m('fieldset.form-group',\n                                m('label', 'Email:'),\n                                m('input.form-control', {\n                                    type:'text',\n                                    placeholder: 'Email',\n                                    value: ctrl.email(),\n                                    oninput: m.withAttr('value', ctrl.email),\n                                    onchange: m.withAttr('value', ctrl.email),\n                                    config: getStartValue(ctrl.email)\n                                }\n                            ))\n                        ]),\n\n                        !ctrl.error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.error()),\n                        m('button.btn.btn-primary.btn-block', {onclick: ctrl.add},'Add')\n                    ])\n                ])\n        ]);\n    }\n};\n\nfunction getStartValue(prop){\n    return (element, isInit) => {// !isInit && prop(element.value);\n        if (!isInit) setTimeout(()=>prop(element.value), 30);\n    };\n}\n","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst add_userUrl = `${baseUrl}/users/add_user`;\n\nlet added = false;\n\nexport let isadded = () => added;\n\nexport let add = (username, first_name , last_name, email, iscu) => fetchJson(add_userUrl, {\n    method: 'post',\n    body: {username, first_name , last_name, email, iscu}\n});\n\n","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\n\nfunction config_url()\n{\n    return `${baseUrl}/config`;\n}\n\nfunction gmail_url()\n{\n    return `${baseUrl}/config/gmail`;\n}\n\nfunction dbx_url()\n{\n    return `${baseUrl}/config/dbx`;\n}\n\n\nexport let get_config = () => fetchJson(config_url(), {\n    method: 'get'\n});\n\nexport let set_gmail_params = (email, password) => fetchJson(gmail_url(), {\n    body: {email, password},\n    method: 'put'\n});\n\nexport let unset_gmail_params = () => fetchJson(gmail_url(), {\n    method: 'delete'\n});\n\n\nexport let set_dbx_params = (client_id, client_secret) => fetchJson(dbx_url(), {\n    body: {client_id, client_secret},\n    method: 'put'\n});\n\nexport let unset_dbx_params = () => fetchJson(dbx_url(), {\n    method: 'delete'\n});\n","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst change_password_url = `${baseUrl}/change_password`;\nconst change_email_url = `${baseUrl}/change_email`;\nconst update_details_url = `${baseUrl}/settings`;\nconst present_templates_url = `${baseUrl}/present_templates`;\nconst dropbox_url = `${baseUrl}/dropbox`;\nconst gdrive_url = `${baseUrl}/gdrive`;\n\nfunction apiURL(code)\n{   \n    return `${change_password_url}/${encodeURIComponent(code)}`;\n}\n\nexport let is_recovery_code = (code) => fetchJson(apiURL(code), {\n    method: 'get'\n});\n\nexport let set_password = (code, password, confirm) => fetchJson(apiURL(code), {\n    method: 'post',\n    body: {password, confirm}\n});\n\nexport let set_email = (email) => fetchJson(change_email_url, {\n    method: 'post',\n    body: {email}\n});\n\n\nexport let update_details = (params) => fetchJson(update_details_url, {\n    method: 'post',\n    body: {params}\n});\n\n\nexport let get_email = () => fetchJson(change_email_url, {\n    method: 'get'\n});\n\n\nexport let check_if_present_templates = () => fetchJson(present_templates_url, {\n    method: 'get'\n});\n\nexport let set_present_templates = (value) => {\n    if (value)\n        return do_present_templates();\n    return do_hide_templates();\n};\n\n\n\nexport let do_present_templates = () => fetchJson(present_templates_url, {\n    method: 'post'\n});\n\nexport let do_hide_templates = () => fetchJson(present_templates_url, {\n    method: 'delete'\n});\n\nexport let check_if_dbx_synchronized = () => fetchJson(dropbox_url, {\n    method: 'get'\n});\n\nexport let check_if_gdrive_synchronized = () => fetchJson(gdrive_url, {\n    method: 'get'\n});\n\nexport let stop_gdrive_synchronized = () => fetchJson(gdrive_url, {\n    method: 'delete'\n});\n\nexport let stop_dbx_synchronized = () => fetchJson(dropbox_url, {\n    method: 'delete'\n});","export let password_body = ctrl => m('.card.card-inverse.col-md-4', [\n    m('.card-block',[\n        m('form', [\n            m('label', 'Password:'),\n            m('input.form-control', {\n                type:'password',\n                placeholder: 'Password',\n                value: ctrl.password(),\n                oninput: m.withAttr('value', ctrl.password),\n                onchange: m.withAttr('value', ctrl.password),\n                config: getStartValue(ctrl.password)\n            }),\n            m('label.space', 'Confirm password:'),\n            m('input.form-control', {\n                type:'password',\n                placeholder: 'Confirm password',\n                value: ctrl.confirm(),\n                oninput: m.withAttr('value', ctrl.confirm),\n                onchange: m.withAttr('value', ctrl.confirm),\n                config: getStartValue(ctrl.confirm)\n            })\n        ]),\n        !ctrl.password_error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.password_error()),\n        ctrl.external() ? '' : m('button.btn.btn-primary.btn-block', {onclick: ctrl.do_set_password},'Update')\n    ])\n]);\n\nfunction getStartValue(prop){\n    return (element, isInit) => {// !isInit && prop(element.value);\n        if (!isInit) setTimeout(()=>prop(element.value), 30);\n    };\n}","import {stop_dbx_synchronized, stop_gdrive_synchronized} from './settingsModel';\nimport messages from 'utils/messagesComponent';\n\nexport function start_dbx_sync(ctrl){\n    let error = m.prop('');\n    // ctrl.dbx_auth_link()\n    messages.confirm({okText: 'Continue', cancelText: 'Cancel', header:'Synchronization with Dropbox', content:m('p', [\n        m('p','This feature creates a backup for all your studies by copying all your study files to your Dropbox account. Every time you change a file here, on the Dashboard, it will send that update to your Dropbox account. Using the Dropbox website, you will be able to see previous versions of all the files you changed.'),\n        m('ul',\n            [\n                m('li', 'Dropbox will create a folder under Apps/minno.js/username and will copy all your studies under that folder.'),\n                m('li', 'We will not have access to any of your files on other folders.'),\n                m('li', [m('span' ,'This feature is only for backup. If you edit or delete your study files on your computer\\'s file-system, these edits will not be synchronized with the study files on this website. '), m('strong', 'Updates work only in one direction: from this website to your Dropbox, not from your Dropbox to this website.')]),\n                m('li', 'If you want to see an older version of any of your study files, you can go to Dropbox and request to see previous versions of the file. If you want to restore an older version of a file, you will need to copy and paste its text to the Dashboard\\'s editor on this website, or to download the old file to your computer and upload it to this website.')\n            ]\n        ),\n        !error() ? '' : m('p.alert.alert-danger', error())])\n    })\n        .then(function (response) {\n            if (response)\n                window.location = ctrl.dbx_auth_link();\n        });\n\n}\n\nexport function stop_dbx_sync(ctrl){\n    stop_dbx_synchronized()\n        .then(m.route('/settings'))\n        .catch(response => {\n            ctrl.synchronization_error(response.message);\n        });\n}\n\n\nexport function stop_gdrive_sync(ctrl){\n    stop_gdrive_synchronized()\n        .then(m.route('/settings'))\n        .catch(response => {\n            ctrl.synchronization_error(response.message);\n        });\n}\n\n","import {start_dbx_sync, stop_dbx_sync} from './settingsActions';\n\n\n\nexport let dropbox_body = ctrl => typeof ctrl.is_dbx_synchronized()==='undefined' || ctrl.role()=='CU' ? '' : m('.card.card-inverse.col-md-4', [\n    m('.card-block',[\n        !ctrl.is_dbx_synchronized()?\n            m('button.btn.btn-primary.btn-block', {onclick: function(){start_dbx_sync(ctrl);}},[\n                m('i.fa.fa-fw.fa-dropbox'), ' Synchronize with your Dropbox account'\n            ])\n            :\n            m('button.btn.btn-primary.btn-block', {onclick: function(){stop_dbx_sync(ctrl);}},[\n                m('i.fa.fa-fw.fa-dropbox'), ' Stop Synchronize with your Dropbox account'\n            ])\n    ])\n]);\n","import {emil_body} from './changeEmailView';\nimport {password_body} from './changePasswordView';\nimport {dropbox_body} from './connect2dropboxView';\n\nconst settings = {'password':[],\n    'emil':[],\n    'dropbox':[]\n    // ,'templates':[]\n};\n\nconst settings_hash = {\n    password: password_body,\n    emil: emil_body,\n    dropbox: dropbox_body\n    // templates: templates_body\n};\n\nexport let draw_menu = (ctrl, external) => {\n    return Object.keys(settings).map(feature=>\n        settings_hash[feature](ctrl, external));\n};\n\n","export let emil_body = ctrl => m('.card.card-inverse.col-md-4', [\n    m('.card-block',[\n        m('form', [\n            m('label', 'Email Address:'),\n            m('input.form-control', {\n                type:'email',\n                placeholder: 'Email Address',\n                value: ctrl.email(),\n                oninput: m.withAttr('value', ctrl.email),\n                onchange: m.withAttr('value', ctrl.email),\n                config: getStartValue(ctrl.email)\n            })\n        ])\n        ,\n        !ctrl.email_error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.email_error()),\n        ctrl.external() ? '' : m('button.btn.btn-primary.btn-block', {onclick: ctrl.do_set_email},'Update')\n\n    ])\n\n]);\n\nfunction getStartValue(prop){\n    return (element, isInit) => {// !isInit && prop(element.value);\n        if (!isInit) setTimeout(()=>prop(element.value), 30);\n    };\n}\n","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl, collaborationUrl} from 'modelUrls';\n\nconst pending_url = `${baseUrl}/pending`;\n\nfunction apiURL(code)\n{\n    return `${collaborationUrl}/${encodeURIComponent(code)}`;\n}\n\nexport let get_pending_studies = () => fetchJson(pending_url, {\n    method: 'get'\n});\n\n\nexport let use_code = (code) => fetchJson(apiURL(code), {\n    method: 'get'\n});\n","import {send} from './massMailModel';\nimport fullHeight from 'utils/fullHeight';\nexport default massMailComponent;\n\nlet massMailComponent = {\n    controller(){\n        const subject = m.prop('');\n        const body = m.prop('');\n        const ru = m.prop(false);\n        const su = m.prop(false);\n        const cu = m.prop(false);\n        const ctrl = {\n            subject,\n            body,\n            ru,\n            su,\n            cu,\n            error: m.prop(''),\n            sent:false,\n            send: sendAction\n        };\n        return ctrl;\n\n        function sendAction(){\n            send(subject, body , ru, su, cu)\n                .then(() => {\n                    ctrl.sent = true;\n                    m.redraw();\n                })\n                .catch(response => {\n                    ctrl.error(response.message);\n                    m.redraw();\n                });\n        }\n    },\n    view(ctrl){\n        return m('.add.centrify', {config:fullHeight},[\n            ctrl.sent\n                ?\n                [\n                    m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n                    m('h5', 'Mail successfully sent!')\n                ]\n                :\n                m('.card.card-inverse.col-md-4', [\n                    m('.card-block',[\n                        m('h4', 'Please fill the following details'),\n                        m('form', {onsubmit:ctrl.send}, [\n                            m('fieldset.form-group',\n                                m('input.form-control', {\n                                    type:'Subject',\n                                    placeholder: 'Subject',\n                                    value: ctrl.subject(),\n                                    oninput: m.withAttr('value', ctrl.subject),\n                                    onchange: m.withAttr('value', ctrl.subject),\n                                    config: getStartValue(ctrl.subject)\n                                }\n                                )),\n                            m('fieldset.form-group',\n                                m('textarea.form-control', {\n                                    type:'Body',\n                                    placeholder: 'Body',\n                                    value: ctrl.body(),\n                                    oninput: m.withAttr('value', ctrl.body),\n                                    onchange: m.withAttr('value', ctrl.body),\n                                    config: getStartValue(ctrl.body)\n                                }\n                                )),\n                            m('fieldset.form-group',\n\n                                m('label.c-input.c-checkbox', [\n                                    m('input.form-control', {\n                                        type: 'checkbox',\n                                        onclick: m.withAttr('checked', ctrl.ru)}),\n                                    m('span.c-indicator'),\n                                    m.trust('&nbsp;'),\n                                    m('span', 'Regular users')\n                                ]),\n                                m('label.c-input.c-checkbox', [\n                                    m('input.form-control', {\n                                        type: 'checkbox',\n                                        onclick: m.withAttr('checked', ctrl.su)}),\n                                    m('span.c-indicator'),\n                                    m.trust('&nbsp;'),\n                                    m('span', 'Super users')\n                                ]),\n                                m('label.c-input.c-checkbox', [\n                                    m('input.form-control', {\n                                        type: 'checkbox',\n                                        onclick: m.withAttr('checked', ctrl.cu)}),\n                                    m('span.c-indicator'),\n                                    m.trust('&nbsp;'),\n                                    m('span', 'Contract users')\n                                ])\n\n                            )\n                        ]),\n\n                        !ctrl.error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.error()),\n                        m('button.btn.btn-primary.btn-block', {onclick: ctrl.send},'Send')\n                    ])\n                ])\n        ]);\n    }\n};\n\nfunction getStartValue(prop){\n    return (element, isInit) => {// !isInit && prop(element.value);\n        if (!isInit) setTimeout(()=>prop(element.value), 30);\n    };\n}\n","import {fetchJson} from 'utils/modelHelpers';\nimport {activationUrl as activation1_url} from 'modelUrls';\n\nfunction apiURL(code)\n{   \n    return `${activation1_url}/${encodeURIComponent(code)}`;\n}\n\nexport let is_activation_code = (code) => fetchJson(apiURL(code), {\n    method: 'get'\n});\n\nexport let set_password = (code, password, confirm) => fetchJson(apiURL(code), {\n    method: 'post',\n    body: {password, confirm}\n});\n","import {fetchJson} from 'utils/modelHelpers';\nimport {collaborationUrl as collaboration_url} from 'modelUrls';\n\nfunction apiURL(code)\n{   \n    return `${collaboration_url}/${encodeURIComponent(code)}`;\n}\n\nexport let is_collaboration_code = (code) => fetchJson(apiURL(code), {\n    method: 'get'\n});\n\nexport let set_password = (code, password, confirm) => fetchJson(apiURL(code), {\n    method: 'post',\n    body: {password, confirm}\n});\n","import {get_collaborations, remove_collaboration, add_collaboration, make_pulic, add_link, revoke_link} from './sharingModel';\nimport messages from 'utils/messagesComponent';\n\nexport default collaborationComponent;\n\nlet collaborationComponent = {\n    controller(){\n        let ctrl = {\n            users:m.prop(),\n            is_public:m.prop(),\n\n            link_data:m.prop(),\n            link:m.prop(''),\n            link_type:m.prop(''),\n            link_list:m.prop([]),\n            link_add_list:m.prop([]),\n            link_remove_list:m.prop([]),\n            study_name:m.prop(),\n            user_name:m.prop(''),\n            permission:m.prop('can edit'),\n            data_permission:m.prop('visible'),\n            loaded:false,\n            col_error:m.prop(''),\n            pub_error:m.prop(''),\n            share_error:m.prop(''),\n            remove,\n            do_add_collaboration,\n            do_add_link,\n            do_revoke_link,\n            do_make_public\n        };\n        function load() {\n            get_collaborations(m.route.param('studyId'))\n                .then(response =>{ctrl.users(response.users);\n                    ctrl.is_public(response.is_public);\n                    ctrl.study_name(response.study_name);\n                    ctrl.link(response.link_data.link);\n                    ctrl.link_type(response.link_data.link_type);\n                    ctrl.link_list(response.link_data.link_list);\n\n                    ctrl.loaded = true;})\n                .catch(error => {\n                    ctrl.col_error(error.message);\n                }).then(m.redraw);\n\n        }\n        function remove(user_id){\n            messages.confirm({header:'Delete collaboration', content:'Are you sure?'})\n                .then(response => {\n                    if (response)\n                        remove_collaboration(m.route.param('studyId'), user_id)\n                            .then(()=> {\n                                load();\n                            })\n                            .catch(error => {\n                                ctrl.col_error(error.message);\n                            })\n                            .then(m.redraw);\n                });\n        }\n\n\n\n        function check_permission(ctrl){\n            return ctrl.data_permission(ctrl.permission() === 'invisible' ? 'visible' : ctrl.data_permission());\n\n\n\n        }\n\n        function do_add_collaboration()\n        {\n\n\n                messages.confirm({\n                header:'Add a Collaborator',\n                content: m.component({view: () => m('p', [\n                    m('p', 'Enter collaborator\\'s user name:'),\n                    m('input.form-control', {placeholder: 'User name', value: ctrl.user_name(), onchange: m.withAttr('value', ctrl.user_name)}),\n\n                    m('p.space', 'Select users\\'s permissions:'),\n                    m('select.form-control', {value:ctrl.permission(), onchange: m.withAttr('value',ctrl.permission)}, [\n                        m('option',{value:'can edit', selected: ctrl.permission() === 'can edit'}, 'Can edit'),\n                        m('option',{value:'read only', selected: ctrl.permission() === 'read only'}, 'Read only'),\n                        m('option',{value:'invisible', selected: ctrl.permission() === 'invisible'}, 'Invisible'),\n\n                    ]),\n                    m('p.space', 'Select data visibility:'),\n                        m('select.form-control', {value:check_permission(ctrl), onchange: m.withAttr('value',ctrl.data_permission)}, [\n                            m('option',{value:'visible', selected: ctrl.data_permission() === 'visible' }, 'Visible'),\n                            m('option',{value:'invisible', disabled: ctrl.permission() === 'invisible', selected: ctrl.data_permission() === 'invisible'}, 'Invisible')\n                        ]),\n\n                    m('p', {class: ctrl.col_error()? 'alert alert-danger' : ''}, ctrl.col_error())\n                ])\n                })})\n                .then(response => {\n                    if (response){\n\n                        if(!ctrl.user_name())\n                        {\n                            ctrl.col_error('ERROR: user name is missing');\n                            return do_add_collaboration();\n\n                        }\n                        add_collaboration(m.route.param('studyId'), ctrl.user_name, ctrl.permission, ctrl.data_permission)\n                            .then(()=>{\n                                ctrl.col_error('');\n                                load();\n                            })\n                            .catch(error => {\n                                ctrl.col_error(error.message);\n                                do_add_collaboration();\n                            })\n                            .then(m.redraw);\n                    }\n                });\n        }\n\n        function do_add_link() {\n            add_link(m.route.param('studyId'))\n                .then(response =>{ctrl.link(response.link);})\n                .catch(error => {\n                    ctrl.col_error(error.message);\n                }).then(m.redraw);\n        }\n\n        function do_revoke_link() {\n            revoke_link(m.route.param('studyId'))\n                .then(() =>{ctrl.link('');})\n                .catch(error => {\n                    ctrl.col_error(error.message);\n                }).then(m.redraw);\n        }\n\n        function do_make_public(is_public){\n            messages.confirm({okText: ['Yes, make ', is_public ? 'public' : 'private'], cancelText: ['No, keep ', is_public ? 'private' : 'public' ], header:'Are you sure?', content:m('p', [m('p', is_public\n                ?\n                'Making the study public will allow everyone to view the files. It will NOT allow others to modify the study or its files.'\n                :\n                'Making the study private will hide its files from everyone but you.'),\n            m('span', {class: ctrl.pub_error()? 'alert alert-danger' : ''}, ctrl.pub_error())])})\n                .then(response => {\n                    if (response) make_pulic(m.route.param('studyId'), is_public)\n                        .then(()=>{\n                            ctrl.pub_error('');\n                            load();\n                        })\n                        .catch(error => {\n                            ctrl.pub_error(error.message);\n                            do_make_public(is_public);\n                        })\n                        .then(m.redraw);\n                });\n\n        }\n        load();\n        return ctrl;\n    },\n    view(ctrl){\n        return  !ctrl.loaded\n            ?\n            m('.loader')\n            :\n            m('.container.sharing-page', [\n                m('.row',[\n                    m('.col-sm-7', [\n                        m('h3', [ctrl.study_name(), ' (Sharing Settings)'])\n                    ]),\n                    m('.col-sm-5', [\n                        m('button.btn.btn-secondary.btn-sm.m-r-1', {onclick:ctrl.do_add_collaboration}, [\n                            m('i.fa.fa-plus'), '  Add a new collaborator'\n                        ]),\n                        m('button.btn.btn-secondary.btn-sm', {onclick:function() {ctrl.do_make_public(!ctrl.is_public());}}, ['Make ', ctrl.is_public() ? 'Private' : 'Public'])\n                    ])\n                ]),\n                m('table', {class:'table table-striped table-hover'}, [\n                    m('thead', [\n                        m('tr', [\n                            m('th', 'User name'),\n                            m('th',  'Permission'),\n                            m('th',  'Remove')\n                        ])\n                    ]),\n                    m('tbody', [\n                        ctrl.users().map(user => m('tr', [\n                            m('td', user.user_name),\n                            m('td', [user.permission, user.status ? ` (${user.status})` : '']),\n                            m('td', m('button.btn.btn-secondary', {onclick:function() {ctrl.remove(user.user_id);}}, 'Remove'))\n                        ]))\n\n                    ]),\n                    /*  m('.row.space',\n                        m('.col-sm-12', [\n                            m('button.btn.btn-secondary.btn-sm.m-r-1', {onclick:ctrl.do_add_link},\n                                [m('i.fa.fa-plus'), '  Create / Re-create public link']\n                            ),\n                            m('button.btn.btn-secondary.btn-sm.m-r-1', {onclick:ctrl.do_revoke_link},\n                                [m('i.fa.fa-fw.fa-remove'), '  Revoke public link']\n                            ),\n                            m('label.input-group.space',[\n                                m('.input-group-addon', {onclick: function() {copy(ctrl.link());}}, m('i.fa.fa-fw.fa-copy')),\n                                m('input.form-control', { value: ctrl.link(), onchange: m.withAttr('value', ctrl.link)})\n                            ])\n                        ])\n                    )*/\n\n                ])\n            ]);\n    }\n};\n\n","\n// it makes sense to use this for cotnrast:\n// https://24ways.org/2010/calculating-color-contrast/\n\nexport let editTag = args => m.component(editTagComponent, args);\n\nlet editTagComponent = {\n    view: (ctrl, {tag_color, tag_text, error}) => m('div', [\n        m('.form-group.row', [\n            m('.col-sm-3', [\n                m('label.form-control-label', 'Tag name')\n            ]),\n            m('.col-sm-9', [\n                m('input.form-control', {placeholder: 'tag_text', value: tag_text(), oninput: m.withAttr('value', tag_text)})\n            ])\n        ]),\n\n        m('.form-group.row', [\n            m('.col-sm-3', [\n                m('label.form-control-label', 'Preview')\n            ]),\n            m('.col-sm-9.form-control-static', [\n                !tag_text()\n                    ? m('small.text-muted', 'No tag name yet')\n                    : m('span.study-tag',  {style: {'background-color': '#'+tag_color()}}, tag_text())\n            ])\n        ]),\n\n        m('.form-group.row', [\n            m('.col-sm-3', [\n                m('label.form-control-label', 'Color')\n            ]),\n            m('.col-sm-9', [\n                m('div',[\n                    colorButton('E7E7E7', tag_color),\n                    colorButton('B6CFF5', tag_color),\n                    colorButton('98D7E4', tag_color),\n                    colorButton('E3D7FF', tag_color),\n                    colorButton('FBD3E0', tag_color),\n                    colorButton('F2B2A8', tag_color),\n                    colorButton('C2C2C2', tag_color),\n                    colorButton('4986E7', tag_color)\n                ]),\n                m('div', [\n                    colorButton('2DA2BB', tag_color),\n                    colorButton('B99AFF', tag_color),\n                    colorButton('F691B2', tag_color),\n                    colorButton('FB4C2F', tag_color),\n                    colorButton('FFC8AF', tag_color),\n                    colorButton('FFDEB5', tag_color),\n                    colorButton('FBE9E7', tag_color),\n                    colorButton('FDEDC1', tag_color)\n                ]),\n                m('div', [\n                    colorButton('B3EFD3', tag_color),\n                    colorButton('A2DCC1', tag_color),\n                    colorButton('FF7537', tag_color),\n                    colorButton('FFAD46', tag_color),\n                    colorButton('EBDBDE', tag_color),\n                    colorButton('CCA6AC', tag_color),\n                    colorButton('42D692', tag_color),\n                    colorButton('16A765', tag_color)\n                ])\n            ])\n        ]),\n\n\n        m('p', {class: error()? 'alert alert-danger' : ''}, error())\n    ])\n};\n\nfunction colorButton(color, prop){\n    return m('button',  {style: {'background-color': `#${color}`}, onclick: prop.bind(null, color)}, ' A ');\n}\n\n","import {fetchJson} from 'utils/modelHelpers';\nimport {translateUrl} from 'modelUrls';\n\n\nfunction template_url(templateId)\n{\n    return `${translateUrl}/${encodeURIComponent(templateId)}`;\n}\n\nfunction page_url(templateId, pageId)\n{\n    return `${translateUrl}/${encodeURIComponent(templateId)}/${encodeURIComponent(pageId)}`;\n}\n\nexport let getListOfPages = (templateId) => fetchJson(template_url(templateId), {\n    method: 'get'\n});\n\n\nexport let getStrings = (templateId, pageId) => fetchJson(page_url(templateId, pageId), {\n    method: 'get'\n});\n\n\nexport let saveStrings = (strings, templateId, pageId) => fetchJson(page_url(templateId, pageId), {\n    body: {strings},\n    method: 'put'\n});\n","export default function textareaConfig(el, isInit){\n    const resize = () => {\n        el.style.height = ''; // reset before recaluculating\n        const height = el.scrollHeight + 'px';\n        requestAnimationFrame(() => {\n            el.style.overflow = 'hidden';\n            el.style.height = height;\n        });\n    };\n\n    if (!isInit) {\n        el.addEventListener('input',  resize);\n        requestAnimationFrame(resize);\n    }\n}\n","import {getListOfPages} from './translateModel';\nimport fullheight from 'utils/fullHeight';\nimport splitPane from 'utils/splitPane';\nimport {getStrings, saveStrings} from './translateModel';\nimport classNames from 'utils/classNames';\nimport textareaAutoresize from 'utils/textareaAutoresize';\n\nexport default pagesComponent;\n\nlet pagesComponent = {\n    controller(){\n        const templateId = m.route.param('templateId');\n        const pageId = m.route.param('pageId');\n        let ctrl = {\n            pages:m.prop(),\n            study_name:m.prop(),\n            strings:m.prop(),\n            loaded:false,\n            has_changed:m.prop(false),\n            error:m.prop(''),\n            pageId,\n            templateId,\n            save,\n            onunload\n        };\n\n        function load() {\n            getListOfPages(templateId)\n                .then(response => {\n                    ctrl.pages(response.pages);\n                    ctrl.study_name(response.study_name);\n                    ctrl.loaded = true;\n                })\n                .catch(error => {\n                    ctrl.error(error.message);\n                }).then(m.redraw);\n            if(pageId)\n                getStrings(templateId, pageId)\n                    .then(response => {\n                        ctrl.strings(response.strings.map(propifyTranslation).map(propifyChanged));\n                        ctrl.loaded = true;\n\n                    })\n                    .catch(error => {\n                        ctrl.error(error.message);\n                    }).then(m.redraw);\n\n        }\n        function save() {\n            ctrl.has_changed(false);\n            let changed_studies = ctrl.strings().filter(changedFilter());\n            if(!changed_studies.length)\n                return;\n            saveStrings(changed_studies, templateId, pageId)\n                .then(()=>load());\n        }\n        load();\n\n        function beforeunload(event) {\n            if (ctrl.has_changed())\n                event.returnValue = 'You have unsaved data are you sure you want to leave?';\n        }\n\n        function onunload(e){\n            if (ctrl.has_changed() && !window.confirm('You have unsaved data are you sure you want to leave?')){\n                e.preventDefault();\n            } else {\n                window.removeEventListener('beforeunload', beforeunload);\n            }\n        }\n        return ctrl;\n    },\n    view({loaded, pages, strings, save, templateId, pageId, study_name, has_changed}){\n        return m('.study',  [\n            !loaded ? m('.loader') : splitPane({\n                leftWidth,\n                left:m('div.translate-page', [\n                    m('h5', m('a.no-decoration',  ` ${study_name()}`)),\n                    m('.files', [\n                        m('ul', pages().map(page =>m('li.file-node',{onclick: select(templateId, page)}, [\n                            m('a.wholerow',{\n                                unselectable:'on',\n                                class:classNames({\n                                    'current': page.pageName===pageId\n                                })\n                            }, m.trust('&nbsp;')),\n\n                            m('a', {class:classNames({'text-primary': /\\.expt\\.xml$/.test(page.pageName)})}, [\n                                // icon\n                                m('i.fa.fa-fw.fa-file-o.fa-files-o', {\n                                }),\n                                // page name\n                                m('span', ` ${page.pageName}`)\n                            ])\n                        ])))\n                    ])\n                ]),\n                right:  !strings()\n                    ?  m('.centrify', [\n                        m('i.fa.fa-smile-o.fa-5x'),\n                        m('h5', 'Please select a page to start working')\n                    ])\n                    :\n                    [\n                        m('.study',\n                            m('.editor',\n                                m('.btn-toolbar.editor-menu', [\n                                    m('.file-name', {class: has_changed() ? 'text-danger' : ''},\n                                        m('span',{class: has_changed() ? '' : 'invisible'}, '*'),\n                                        pageId\n                                    ),\n                                    m('.btn-group.btn-group-sm.pull-xs-right', [\n                                        m('a.btn.btn-secondary', { title:'Save', onclick:save\n                                            , class: classNames({'btn-danger-outline' : has_changed(), 'disabled': !has_changed()})\n                                        },[\n                                            m('strong.fa.fa-save')\n                                        ])]\n                                    )]))),\n                        m('div.translate-page', {config: fullheight},\n                            [strings().map(string => m('.list-group-item', [\n                                m('.row', [\n                                    m('.col-sm-5', [\n                                        m('span',  string.text),\n                                        m('p.small.text-muted.m-y-0', string.comment)\n                                    ]),\n                                    m('.col-sm-7', [\n                                        m('textarea.form-control', {\n                                            placeholder: 'translation',\n                                            oninput: m.withAttr('value', function(value){string.translation(value); has_changed(true); string.changed=true; }),\n                                            onchange: m.withAttr('value', function(value){string.translation(value); has_changed(true); string.changed=true; }),\n                                            config: textareaAutoresize\n                                        }, string.translation())\n                                    ])\n\n                                // ,m('.col-sm-6', [\n                                //     m('input.form-control', {\n                                //         type:'text',\n                                //         placeholder: 'translation',\n                                //         value: string.translation(),\n                                //         oninput: m.withAttr('value', function(value){string.translation(value); string.changed=true; has_changed(true);}),\n                                //         onchange: m.withAttr('value', function(value){string.translation(value); string.changed=true; has_changed(true);}),\n                                //         config: getStartValue(string.translation)\n                                //     })\n                                // ])\n                                ])\n                            ]))\n                            ])\n\n                    ]\n            })\n        ]);\n    }\n};\n\n// a clone of m.prop that users localStorage so that width changes persist across sessions as well as files.\n// Essentially this is a global variable\nfunction leftWidth(val){\n    if (arguments.length) localStorage.fileSidebarWidth = val;\n    return localStorage.fileSidebarWidth;\n}\n// function do_onchange(string){\n//     m.withAttr('value', string.translation);\n// }\n\n\nfunction propifyTranslation(obj){\n    obj = Object.assign({}, obj); // copy obj\n    obj.translation = m.prop(obj.translation);\n    return obj;\n}\n\nfunction propifyChanged(obj) {\n    obj.changed = false;\n    return obj;\n}\n\n\nlet changedFilter = () => string => {\n    return string.changed==true;\n};\n\nconst select = (templateId, page) => e => {\n    e.stopPropagation();\n    e.preventDefault();\n    m.route(`/translate/${templateId}/${page.pageName}`);\n};\n","import './setup';\nimport routes from './routes';\nimport layoutWrapper from './layoutWrapper';\n\nconst wrappedRoutes = mapObject(routes, layoutWrapper);\nm.route(document.body, '/studies', wrappedRoutes);\n\n/**\n * Map Object\n * A utility function to transform objects\n * @param  {Object}     obj     The object to transform\n * @param  {Function}   cb      The transforming function\n * @return {Object}        [description]\n *\n * Signature:\n *\n * Object mapObject(Object obj, callbackFunction cb)\n *\n * where:\n *  callbackFunction :: any Function(any value, String key, Object object)\n */\n\nfunction mapObject(obj, cb) {\n    return Object.keys(obj)\n        .reduce(function(result, key) {\n            result[key] = cb(obj[key], key, obj);\n            return result;\n        }, {});\n}\n","import contextMenu from 'utils/contextMenuComponent';\nimport messages from 'utils/messagesComponent';\nimport spinner from 'utils/spinnerComponent';\nimport {getAuth, logout} from 'login/authModel';\n\nexport default layout;\n\nlet timer = 0;\nlet countdown = 0;\nlet role = '';\nlet isloggedin = true;\nlet new_msgs = false;\n\nlet layout = route => {\n    return {\n        controller(){\n            const ctrl = {\n                isloggedin: isloggedin,\n                role: m.prop(role),\n                new_msgs: m.prop(new_msgs),\n                present_templates: m.prop(false),\n                doLogout,\n                timer:m.prop(0)\n            };\n            is_loggedin();\n            function is_loggedin(){\n                getAuth().then((response) => {\n                    role = ctrl.role(response.role);\n                    new_msgs = ctrl.new_msgs(response.new_msgs);\n\n                    isloggedin = ctrl.isloggedin = response.isloggedin;\n                    ctrl.present_templates(response.present_templates);\n                    let is_view = (m.route() == `/view/${m.route.param('code')}` || m.route() == `/view/${m.route.param('code')}/${m.route.param('resource')}/${encodeURIComponent(m.route.param('fileId'))}`);\n\n                    if(ctrl.role()=='ro' && !is_view)\n                        return doLogout();\n                    let is4su   = (m.route() == `/users` || m.route() == `/config`);\n\n                    if(ctrl.role()!='su' && is4su)\n                        m.route('./');\n\n                    if (!is_view &&  !ctrl.isloggedin  && m.route() !== '/login' && m.route() !== '/recovery' && m.route() !== '/activation/'+ m.route.param('code') && m.route() !== '/change_password/'+ m.route.param('code')  && m.route() !== '/reset_password/'+ m.route.param('code')){\n                        // doLogout();\n                        let url = m.route();\n                        m.route('/login');\n                        location.hash = encodeURIComponent(url);\n                    }\n                    if(ctrl.role()=='CU' && m.route() == '/studies')\n                        m.route('/downloads');\n\n\n                    timer = response.timeoutInSeconds;\n                    run_countdown();\n                    m.redraw();\n                });\n            }\n\n            function run_countdown(){\n                clearInterval(countdown);\n                countdown = setInterval(function () {\n                    if(timer<=0)\n                        return;\n                    if(timer<10) {\n                        messages.close();\n                        doLogout();\n                    }\n                    if(timer==70)\n                        messages.confirm({header:'Timeout Warning', content:'The session is about to expire. Do you want to keep working?',okText:'Yes, stay signed-in', cancelText:'No, sign out'})\n                            .then(response => {\n                                if (!response)\n                                    return doLogout();\n                                return is_loggedin();\n                            });\n                    timer--;\n                }, 1000);\n            }\n            return ctrl;\n\n            function doLogout(){\n                clearInterval(countdown);\n                logout().then(() =>{\n                    let url = m.route();\n                    m.route('/login');\n                    location.hash = encodeURIComponent(url);\n                });\n            }\n        },\n        view(ctrl){\n\n            const settings = {\n                'studies':[],\n                // 'data':['downloads', 'downloadsAccess', 'statistics'],\n                // 'pool':[],\n                'tags':[]\n                ,'admin':[/*'deployList', 'removalList', 'changeRequestList', 'addUser', */'users', 'config'/*, 'massMail'*/]\n            };\n\n\n            const settings_hash = {\n                'studies':{text: 'Studies', href:'/studies', sub:[]},\n                'data':{text: 'Data', href:false,\n                    subs: {\n                        'downloads': {text: 'downloads', href: '/downloads'},\n                        'downloadsAccess': {text: 'Downloads Access', href: '/downloadsAccess'},\n                        'statistics': {text: 'Statistics', href: '/statistics'}\n                    }},\n                'pool':{text: 'Pool', href:'/pool', sub:[]},\n                'tags':{text: 'Tags', href:'/tags', sub:[]},\n                'admin':{text: 'Admin', href:false,\n                    su:true,\n                    subs:{'deployList': {text:'Deploy List', href: '/deployList'},\n                        'removalList': {text:'Removal List', href:'/removalList'},\n                        'changeRequestList': {text:'Change Request List', href: '/changeRequestList'},\n                        'addUser': {text:'Add User', href: '/addUser'},\n                        'config': {text:'Edit Configuration', href: '/config'},\n                        'massMail': {text:'Send MassMail', href: '/massMail'},\n                        'users': {text:'Users Management', href: '/users'}\n                    }}\n\n            };\n\n\n            return  m('.dashboard-root', {class: window.top!=window.self ? 'is-iframe' : ''}, [\n                !ctrl.isloggedin || ctrl.role()=='ro'\n                    ?\n                    ''\n                    :\n                    m('nav.navbar.navbar-dark', [\n                        m('a.navbar-brand', {href:'', config:m.route}, 'Dashboard'),\n                        m('ul.nav.navbar-nav',[\n\n                            Object.keys(settings).map(comp=>\n                                settings_hash[comp].su && ctrl.role() !=='su' ? '' :\n                                    settings[comp].length==0 ?\n                                        m('li.nav-item',[\n                                            m('a.nav-link',{href:settings_hash[comp].href, config:m.route}, settings_hash[comp].text)\n\n                                        ])\n                                        :\n                                        m('li.nav-item', [\n                                            m('.dropdown', [\n                                                m('a.nav-link', settings_hash[comp].text),\n                                                m('.dropdown-menu', [\n                                                    settings[comp].map(sub_comp=>\n                                                        m('a.dropdown-item',{href:settings_hash[comp].subs[sub_comp].href, config:m.route}, settings_hash[comp].subs[sub_comp].text)\n                                                    )\n\n                                                ])\n                                            ])\n                                        ])\n                            ),\n                            !ctrl.new_msgs() ? '' : m('li.nav-item.pull-xs-right', [\n                                m('a.nav-link',{href:'/messages', config:m.route},m('i.fa.fa-envelope.fa-lg', {style:{color:'white'}}))\n                            ]),\n\n                            m('li.nav-item.pull-xs-right', [\n                                m('a.nav-link',{href:'/settings', config:m.route},m('i.fa.fa-cog.fa-lg'))\n                            ]),\n                            !ctrl.isloggedin ? '' : m('li.nav-item.pull-xs-right',[\n                                m('button.btn.btn-info', {onclick:ctrl.doLogout}, [\n                                    m('i.fa.fa-sign-out'), '  Logout'\n                                ])\n                            ])\n                        ])\n                    ]),\n\n                m('.main-content.container-fluid', [\n                    route,\n\n                    m.component(contextMenu), // register context menu\n                    m.component(messages), // register modal\n                    m.component(spinner) // register spinner\n                ])\n\n            ]);\n        }\n    };\n\n};\n","import statisticsComponent from './study/statistics/statisticsComponent';\nimport statistics_oldComponent from './study/statistics_old/statisticsComponent';\n\n\nimport poolComponent from './pool/poolComponent';\nimport historyComponent from './pool/historyComponent';\nimport downloadsComponent from './downloads/downloadsComponent';\nimport downloadsAccessComponent from './downloadsAccess/downloadsAccessComponent';\n\nimport loginComponent from './login/loginComponent';\nimport filesComponent from './study/files/filesComponent';\nimport viewFilesComponent from './study/files/viewFilesComponent';\n\nimport studiesComponent from './study/studiesComponent';\n\n\nimport deployListComponent from 'deploy/forms/deployList/deployListComponent';\nimport changeRequestListComponent from 'deploy/forms/changeRequestList/changeRequestListComponent';\nimport removalListComponent from 'deploy/forms/removalList/removalListComponent';\n\nimport deployComponent from './deploy/deployComponent';\nimport studyRemovalComponent from './deploy/studyRemovalComponent';\nimport studyChangeRequestComponent from './deploy/studyChangeRequestComponent';\n\nimport addUserComponent from './addUser/addUserComponent';\nimport usersComponent from './admin/users/usersComponent';\nimport configComponent from './admin/config/configComponent';\nimport settingsComponent from './settings/settingsComponent';\nimport messagesComponent from './messages/messagesComponent';\nimport massMailComponent from './massMail/massMailComponent';\n\n\nimport activationComponent from './activation/activationComponent';\nimport collaborationComponent from './collaboration/collaborationComponent';\nimport resetPasswordComponent from './settings/resetPasswordComponent';\nimport recoveryComponent from './recovery/recoveryComponent';\n\nimport sharingComponent from 'study/sharing/sharingComponent';\nimport tagsComponent from 'tags/tagsComponent';\nimport translateComponent from 'study/templates/pagesComponent';\n\nexport default routes;\n\nlet routes = {\n    '/tags':  tagsComponent,\n    '/translate/:templateId':  translateComponent,\n    '/translate/:templateId/:pageId':  translateComponent,\n    '/template_studies' : studiesComponent,\n\n\n    '/recovery':  recoveryComponent,\n    '/activation/:code':  activationComponent,\n    '/collaboration/:code':  collaborationComponent,\n    '/settings':  settingsComponent,\n    '/messages':  messagesComponent,\n    '/reset_password/:code':  resetPasswordComponent,\n\n    '/deployList': deployListComponent,\n    '/removalList': removalListComponent,\n    '/changeRequestList': changeRequestListComponent,\n    '/addUser':  addUserComponent,\n    '/users':  usersComponent,\n    '/config':  configComponent,\n    '/massMail':  massMailComponent,\n\n    '/studyChangeRequest/:studyId':  studyChangeRequestComponent,\n    '/studyRemoval/:studyId':  studyRemovalComponent,\n    '/deploy/:studyId': deployComponent,\n    '/login': loginComponent,\n    '/studies' : studiesComponent,\n    '/studies/statistics_old' : statistics_oldComponent,\n    '/studies/statistics' : statisticsComponent,\n\n    '/view/:code': viewFilesComponent,\n    '/view/:code/:resource/:fileId': viewFilesComponent,\n\n\n    '/editor/:studyId': filesComponent,\n    '/editor/:studyId/:resource/:fileId': filesComponent,\n    '/pool': poolComponent,\n    '/pool/history': historyComponent,\n    '/downloads': downloadsComponent,\n    '/downloadsAccess': downloadsAccessComponent,\n    '/sharing/:studyId': sharingComponent\n};\n\n","import {get_tags, remove_tag, add_tag, edit_tag} from './tagsModel';\nimport {editTag} from './tagsActions';\nimport messages from 'utils/messagesComponent';\n\nexport default tagsComponent;\n\nlet tagsComponent = {\n    controller(){\n        let ctrl = {\n            tags:m.prop(),\n            tag_text:m.prop(''),\n            tag_color:m.prop(''),\n            loaded:false,\n            error:m.prop(''),\n            remove,\n            add,\n            edit\n        };\n\n        function load() {\n            get_tags()\n                .then(response => {\n                    ctrl.tags(response.tags);\n                    ctrl.loaded = true;\n                })\n                .catch(error => {\n                    ctrl.error(error.message);\n                }).then(m.redraw);\n        }\n\n        function remove(tag_id){\n            return () => messages.confirm({header:'Delete tag', content:'Are you sure?'})\n                .then(response => {\n                    if (response)\n                        remove_tag(tag_id)\n                            .then(load)\n                            .catch(error => {\n                                ctrl.error(error.message);\n                            })\n                            .then(m.redraw);\n                });\n        }\n\n        function edit(tag_id, tag_text, tag_color){\n            return () => {\n                ctrl.tag_text(tag_text);\n                ctrl.tag_color(tag_color);\n\n                messages.confirm({\n                    header:'Edit tag',\n                    content: editTag(ctrl)\n                })\n                    .then(response => {\n                        if (response)\n                            edit_tag(tag_id, ctrl.tag_text, ctrl.tag_color)\n                                .then(()=>{\n                                    ctrl.error('');\n                                    ctrl.tag_text('');\n                                    ctrl.tag_color('');\n                                    load();\n                                })\n                                .catch(error => {\n                                    ctrl.error(error.message);\n                                    edit_tag(tag_id, ctrl.tag_text, ctrl.tag_color);\n                                })\n                                .then(m.redraw);\n                    });\n            };\n        }\n\n        function add(){\n            ctrl.tag_text('');\n            ctrl.tag_color('E7E7E7');\n            messages.confirm({\n                header:'Add a new tag',\n                content: editTag(ctrl)\n            })\n                .then(response => {\n                    if (response) add_tag(ctrl.tag_text, ctrl.tag_color)\n                        .then(()=>{\n                            ctrl.error('');\n                            ctrl.tag_text('');\n                            ctrl.tag_color('');\n                            load();\n                        })\n                        .catch(error => {\n                            ctrl.error(error.message);\n                            add(); // retry\n                        })\n                        .then(m.redraw);\n                });\n        }\n\n        load();\n        return ctrl;\n    },\n    view({loaded, add, tags,edit,remove}){\n        if (!loaded) return m('.loader');\n\n        return m('.container.tags-page', [\n            m('.row',[\n                m('.col-sm-7', [\n                    m('h3', 'Tags')\n                ]),\n                m('.col-sm-5', [\n                    m('button.btn.btn-success.btn-sm.pull-right', {onclick:add}, [\n                        m('i.fa.fa-plus'), '  Create new tag'\n                    ])\n                ])\n            ]),\n\n            !tags().length\n                ? m('.alert.alert-info', 'You have no tags yet') \n                : m('.row', [\n                    m('.list-group.col-sm-6', [\n                        tags().map(tag => m('.list-group-item', [\n                            m('.row', [\n                                m('.col-sm-6', [\n                                    m('span.study-tag',  {style: {'background-color': '#'+tag.color}}, tag.text)\n                                ]),\n                                m('.col-sm-6', [\n                                    m('btn-group', [\n                                        m('a.btn.btn-sm.btn-secondary', {onclick:edit(tag.id, tag.text, tag.color)}, [\n                                            m('i.fa.fa-edit'),\n                                            ' Edit'\n                                        ]),\n                                        m('a.btn.btn-sm.btn-secondary', {onclick:remove(tag.id)}, [\n                                            m('i.fa.fa-remove'),\n                                            ' Remove'\n                                        ])\n                                    ])\n                                ])\n                            ])\n                        ]))\n                    ])\n                ])\n        ]);\n    }\n};\n","import {recovery} from './recoveryModel';\nimport fullHeight from 'utils/fullHeight';\nexport default recoveryComponent;\n\nlet recoveryComponent = {\n    controller(){\n        const ctrl = {\n            sent:false,\n            username: m.prop(''),\n            error: m.prop(''),\n            recoveryAction\n        };\n        return ctrl;\n\n        function recoveryAction(){\n            recovery(ctrl.username)\n                .catch(response => {\n                    ctrl.error(response.message);\n                })\n                .then(()=>{ctrl.sent = true; m.redraw();});\n        }\n    },\n    view(ctrl){\n        return  m('.recovery.centrify', {config:fullHeight},[\n            ctrl.sent\n                ?\n                [\n                    m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n                    m('h5', 'Recovery request successfully sent!')\n                ]\n                :\n                m('.card.card-inverse.col-md-4', [\n                    m('.card-block',[\n                        m('h4', 'Password Reset Request'),\n                        m('p', 'Enter your username or your email address in the space below and we will mail you the password reset instructions'),\n\n                        m('form', {onsubmit:ctrl.recoveryAction}, [\n                            m('input.form-control', {\n                                type:'username',\n                                placeholder: 'Username / Email',\n                                value: ctrl.username(),\n                                oninput: m.withAttr('value', ctrl.username),\n                                onchange: m.withAttr('value', ctrl.username),\n                                config: getStartValue(ctrl.username)\n                            })\n                        ]),\n\n                        !ctrl.error() ? '' : m('.alert.alert-warning', m('strong', 'Error: '), ctrl.error()),\n                        m('button.btn.btn-primary.btn-block', {onclick: ctrl.recoveryAction},'Request')\n                    ])\n                ])\n        ]);\n    }\n};\n\nfunction getStartValue(prop){\n    return (element, isInit) => {// !isInit && prop(element.value);\n        if (!isInit) setTimeout(()=>prop(element.value), 30);\n    };\n}\n","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst recoveryUrl = `${baseUrl}/recovery`;\n\n\nexport let recovery = (username) => fetchJson(recoveryUrl, {\n    method: 'post',\n    body: {username}\n});\n","import {is_activation_code, set_password} from './activationModel';\nimport fullHeight from 'utils/fullHeight';\nimport {password_body} from 'settings/changePasswordView';\n\nexport default activationComponent;\n\nlet activationComponent = {\n    controller(){\n        const ctrl = {\n            password: m.prop(''),\n            confirm: m.prop(''),\n            password_error: m.prop(''),\n            activated:false,\n            error:m.prop(''),\n            do_set_password\n        };\n       \n        is_activation_code(m.route.param('code'))\n        .catch(err => ctrl.error(err.message))\n        .then(m.redraw);\n\n        return ctrl;\n\n        function do_set_password(){\n            set_password(m.route.param('code'), ctrl.password, ctrl.confirm)\n                .then(() => {\n                    ctrl.activated = true;\n                })\n                .catch(response => {\n                    ctrl.password_error(response.message);\n                })\n                .then(m.redraw);\n        }\n    },\n    view(ctrl){\n        return m('.activation.centrify', {config:fullHeight},[\n            ctrl.error() ?\n                m('p.text-center',\n                    m('.alert.alert-danger', m('strong', 'Error: '), ctrl.error())) :\n                ctrl.activated\n                    ?\n                    [\n                        m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n                        m('h5', 'Password successfully updated!'),\n                        m('p.text-center', m('small.text-muted',  m('a', {href:'./'}, 'Take me to the login page!')))\n                    ]\n                    :\n                    password_body(ctrl)]);\n    }\n};\n","import {is_collaboration_code} from './collaborationModel';\nimport fullHeight from 'utils/fullHeight';\n\nexport default collaborationComponent;\n\nlet collaborationComponent = {\n    controller(){\n        is_collaboration_code(m.route.param('code'))\n            .then(() => {\n                m.route('/');\n            }).catch().then(m.redraw);\n\n\n\n    },\n    view(){\n        return m('.activation.centrify', {config:fullHeight},[\n            m('i.fa.fa-thumbs-down.fa-5x.m-b-1'),\n            m('h5', 'There is a problem! please check your code...')]);\n    }\n};\n","import {set_password, set_email, update_details, get_email, check_if_dbx_synchronized, check_if_present_templates , set_present_templates} from './settingsModel';\nimport {getAuth} from 'login/authModel';\n\nimport fullHeight from 'utils/fullHeight';\nimport {draw_menu} from './settingsMenu';\n// import {gdrive_body} from './connect2GdriveView';\n\nexport default changePasswordComponent;\n\nlet changePasswordComponent = {\n    controller(){\n\n        const ctrl = {\n            role:m.prop(''),\n            external:m.prop(true),\n            password:m.prop(''),\n            confirm:m.prop(''),\n            is_dbx_synchronized: m.prop(),\n            is_gdrive_synchronized: m.prop(),\n            present_templates: m.prop(),\n            dbx_auth_link: m.prop(''),\n            gdrive_auth_link: m.prop(''),\n            synchronization_error: m.prop(''),\n            present_templates_error: m.prop(''),\n            email: m.prop(''),\n            prev_email: m.prop(''),\n            password_error: m.prop(''),\n            password_changed:false,\n            email_error: m.prop(''),\n            email_changed:false,\n            update_all_details,\n            do_set_password,\n            do_set_email,\n            do_set_templete\n\n        };\n        getAuth().then((response) => {``;\n            ctrl.role(response.role);\n        });\n\n        get_email()\n            .then((response) => {\n                ctrl.email(response.email);\n                ctrl.prev_email(response.email);\n            })\n            .catch(response => {\n                ctrl.email_error(response.message);\n            })\n            .then(m.redraw);\n        check_if_dbx_synchronized()\n            .then((response) => {\n                ctrl.is_dbx_synchronized(response.is_synchronized);\n                ctrl.dbx_auth_link(response.auth_link);\n            })\n            .catch(response => {\n                ctrl.synchronization_error(response.message);\n            })\n            .then(m.redraw);\n\n        // check_if_gdrive_synchronized()\n        //     .then((response) => {\n        //         ctrl.is_gdrive_synchronized(response.is_synchronized);\n        //         ctrl.gdrive_auth_link(response.auth_link);\n        //     })\n        //     .catch(response => {\n        //         ctrl.synchronization_error(response.message);\n        //     })\n        //     .then(m.redraw);\n\n        check_if_present_templates()\n            .then((response) => {\n                ctrl.present_templates(response.present_templates);\n            })\n            .catch(response => {\n                ctrl.present_templates_error(response.message);\n            })\n            .then(m.redraw);\n        return ctrl;\n\n        function update_all_details(){\n\n            ctrl.password_changed = false;\n            ctrl.email_changed    = false;\n            ctrl.password_error('');\n            ctrl.email_error('');\n\n            let params = {};\n            if(ctrl.password() || ctrl.confirm()){\n                params.password = ctrl.password();\n                params.confirm = ctrl.confirm();\n            }\n            if(ctrl.email() !== ctrl.prev_email())\n            {\n                ctrl.prev_email(ctrl.email());\n                params.email = ctrl.email();\n            }\n            if(Object.keys(params).length > 0)\n                update_details(params)\n                    .then(response => {\n                        ctrl.password_error(response.password ? response.password.error : '');\n                        ctrl.email_error(response.email ? response.email.error : '');\n                        ctrl.password_changed = response.password && !response.password.error;\n                        ctrl.email_changed    = response.email && !response.email.error;\n\n\n                    })\n                    .then(m.redraw);\n        }\n\n        function do_set_password(){\n            set_password('', ctrl.password, ctrl.confirm)\n                .then(() => {\n                    ctrl.password_changed = true;\n                })\n                .catch(response => {\n                    ctrl.password_error(response.message);\n                })\n                .then(m.redraw);\n        }\n\n        function do_set_email(){\n            set_email(ctrl.email)\n                .then(() => {\n                    ctrl.email_changed = true;\n                })\n                .catch(response => {\n                    ctrl.email_error(response.message);\n                })\n                .then(m.redraw);\n        }\n        function do_set_templete(value){\n            set_present_templates(value)\n                .then(() => {\n                    ctrl.present_templates(value);\n                })\n                .catch(response => {\n                    ctrl.present_templates_error(response.message);\n                })\n                .then(m.redraw);\n        }\n    },\n    view(ctrl){\n        return m('.activation.centrify', {config:fullHeight},[\n            draw_menu(ctrl),\n            m('.card-block',\n\n                m('button.btn.btn-primary.btn-block', {onclick: ctrl.update_all_details},'Update')\n            ),\n            !ctrl.password_changed ? '' : m('.alert.alert-success', m('strong', 'Password successfully updated')),\n            !ctrl.email_changed ? '' : m('.alert.alert-success', m('strong', 'Email successfully updated'))\n        ]);\n    }\n};\n","import {get_pending_studies,\n    use_code} from './messagesModel';\nimport {getAuth} from 'login/authModel';\n\nexport default messagesComponent;\n\nlet messagesComponent = {\n    controller(){\n        const ctrl = {\n            role:m.prop(''),\n            pendings: m.prop(''),\n            loaded: false,\n            error: m.prop(''),\n            do_use_code\n        };\n        getAuth().then((response) => {\n            ctrl.role(response.role);\n        });\n\n        function do_use_code(code){\n            use_code(code)\n                .then(()=>ctrl.pendings(ctrl.pendings().filter(study=>study.accept!==code && study.reject!==code)))\n                .then(m.redraw);\n        }\n\n        get_pending_studies()\n            .then((response) => {\n                ctrl.pendings(response.studies);\n                ctrl.loaded = true;\n            })\n            .catch(response => {\n                ctrl.error(response.message);\n            })\n            .then(m.redraw);\n        return ctrl;\n    },\n    view(ctrl){\n\n        return  !ctrl.loaded\n            ?\n            m('.loader')\n            :\n            m('.container.studies', [\n                m('.row.p-t-1', [\n                    m('.col-sm-4', [\n                        m('h3', 'Sharing Invitations')\n                    ])]),\n                m('.card.studies-card', [\n                    m('.card-block', [\n                        m('.row', {key: '@@notid@@'}, [\n                            m('.col-sm-3', [\n                                m('.form-control-static',[\n                                    m('strong', 'Owner ')\n                                ])\n                            ]),\n                            m('.col-sm-4', [\n                                m('.form-control-static',[\n                                    m('strong', 'Study name ')\n                                ])]),\n                            m('.col-sm-2', [\n                                m('.form-control-static',[\n                                    m('strong', 'Permission ')\n                                ])\n                            ]),\n                            m('.col-sm-3', [\n                                m('.form-control-static',[\n                                    m('strong', 'Action ')\n                                ])\n                            ])\n\n                        ]),\n                        ctrl.pendings().map(study =>\n                            m('.row.study-row', [\n                                m('.col-sm-3', [\n                                    m('.study-text', study.owner_name)\n                                ]),\n                                m('.col-sm-4', [\n                                    m('.study-text', study.study_name)\n                                ]),\n                                m('.col-sm-2', [\n                                    m('.study-text', study.permission)\n                                ]),\n                                m('.col-sm-3', [\n                                    m('.study-text', m('button.btn.btn-primary', {onclick:function() {ctrl.do_use_code(study.accept);}}, 'Accept'), ' | ',\n                                        m('button.btn.btn-danger', {onclick:function() {ctrl.do_use_code(study.reject);}}, 'Reject'))\n                                ]),\n\n\n                            ]))\n                    ])])]);\n\n\n    }\n};\n","import {set_password, is_recovery_code} from './settingsModel';\n\nimport fullHeight from 'utils/fullHeight';\nimport {password_body} from './changePasswordView';\n\nexport default resetPasswordComponent;\n\nlet resetPasswordComponent = {\n    controller(){\n        const ctrl = {\n            password:m.prop(''),\n            confirm:m.prop(''),\n            password_error: m.prop(''),\n            password_changed:false,\n            code: m.prop(''),\n            do_set_password\n        };\n        ctrl.code(m.route.param('code')!== undefined ? m.route.param('code') : '');\n        is_recovery_code(ctrl.code())\n            .catch(() => {\n                m.route('/');\n            })\n            .then(() => {\n                m.redraw();\n            });\n\n        return ctrl;\n        \n        function do_set_password(){\n            set_password(ctrl.code(), ctrl.password, ctrl.confirm)\n                .then(() => {\n                    ctrl.password_changed = true;\n                })\n                .catch(response => {\n                    ctrl.password_error(response.message);\n                })\n                .then(m.redraw);\n        }\n    },\n    view(ctrl){\n        return m('.activation.centrify', {config:fullHeight},[\n            ctrl.password_changed\n                ?\n                [\n                    m('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n                    m('h5', 'Password successfully updated!'),\n                    m('p.text-center',\n                        m('small.text-muted',  m('a', {href:'./'}, 'Take me to my studies!'))\n                    )\n                ]\n                :\n                password_body(ctrl)\n        ]);\n    }\n};\n","import {get_users, remove_user, update_role, change_user_password} from './usersModel';\n\nimport messages from 'utils/messagesComponent';\nimport {copyUrlContent} from 'utils/copyUrl';\n\nimport addComponent from '../../addUser/addUserComponent';\n\n\nexport default usersComponent;\n\nlet usersComponent = {\n    controller(){\n        let ctrl = {\n            users:m.prop(),\n            loaded:false,\n            col_error:m.prop(''),\n            password:m.prop(''),\n            remove,\n            update,\n            change_password,\n            activate_user,\n            add_user};\n        function load() {\n            get_users()\n                .then(response =>ctrl.users(response.users))\n                .then(()=>ctrl.loaded = true)\n                .catch(error => {\n                    ctrl.col_error(error.message);\n                }).then(m.redraw);\n\n        }\n\n        function add_user(){\n            messages.alert({okText: 'Close', header:'Add a new user', content:addComponent\n\n                    })\n                .then(()=>load()).then(m.redraw);\n        }\n\n\n        function remove(user_id){\n            messages.confirm({header:'Delete user', content:'Are you sure?'})\n                .then(response => {\n                    if (response)\n                        remove_user(user_id)\n                            .then(()=> load())\n                            .catch(error => {\n                                ctrl.col_error(error.message);\n                            })\n                            .then(m.redraw);\n                });\n        }\n\n        function change_password(reset_code, user_name){\n            messages.confirm({\n                header:`Url for reset ${user_name}'s password`,\n                content: copyUrlContent(reset_code)()\n            })\n        }\n\n        function activate_user(activation_code, user_name){\n            messages.confirm({\n                header:`Url for ${user_name}'s account activation`,\n                content: copyUrlContent(activation_code)()\n            })\n        }\n\n        function update(user_id, role){\n            update_role(user_id, role)\n                .then(()=> {\n                    load();\n                })\n                .then(m.redraw);\n        }\n\n        load();\n        return ctrl;\n    },\n    view(ctrl){\n        return  !ctrl.loaded\n            ?\n            m('.loader')\n            :\n                m('.container.sharing-page', [\n                    m('.row',[\n                        m('.col-sm-10', [\n                            m('h3', 'User Management')\n                        ]),\n                        m('.col-sm-2', [\n                            m('button.btn.btn-success.btn-sm.m-r-1', {onclick:ctrl.add_user}, [\n                                m('i.fa.fa-user-plus'), '  Add a new user'\n                            ])\n                        ])\n                    ]),\n                    m('table', {class:'table table-striped table-hover'}, [\n                    m('thead', [\n                        m('tr', [\n                            m('th', 'User name'),\n                            m('th',  'First name'),\n                            m('th',  'Last name'),\n                            m('th',  'Email'),\n                            m('th',  'Role'),\n                            ctrl.users().filter(user=> !!user.reset_code || !!user.activation_code).length>0 ? m('th',  'Actions') : '',\n                            m('th',  'Remove')\n                        ])\n                    ]),\n                    m('tbody', [\n                        ctrl.users().map(user => m('tr', [\n                            m('td', user.user_name),\n                            m('td', user.first_name),\n                            m('td', user.last_name),\n                            m('td', user.email),\n                            m('td',\n                                m('select.form-control', {value:user.role, onchange : function(){ ctrl.update(user.id, this.value); }}, [\n                                    m('option',{value:'u', selected: user.role !== 'su'},  'Simple user'),\n                                    m('option',{value:'su', selected: user.role === 'su'}, 'Super user')\n                                ])\n                            ),\n\n                            ctrl.users().filter(user=> !!user.reset_code || !!user.activation_code).length==0 ? '' :\n                                !user.reset_code && !user.activation_code ?  m('td', '') :\n                                    user.reset_code ? m('td', m('button.btn.btn-secondery', {onclick:()=>ctrl.change_password(user.reset_code, user.user_name)}, 'Reset password'))\n                                        : m('td', m('button.btn.btn-secondery', {onclick:()=>ctrl.activate_user(user.activation_code, user.user_name)}, 'Activate user')),\n\n                            m('td', m('button.btn.btn-danger', {onclick:()=>ctrl.remove(user.id)}, 'Remove'))\n                        ]))\n                    ]),\n                ])\n            ]);\n    }\n};\n\n","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\n\nfunction users_url()\n{\n    return `${baseUrl}/users`;\n}\n\n\nexport let get_users = () => fetchJson(users_url(), {\n    method: 'get'\n});\n\nexport let remove_user = (user_id) => fetchJson(users_url(), {\n    body: {user_id},\n    method: 'delete'\n});\n\nexport let update_role = (user_id, role) => fetchJson(users_url(), {\n    body: {user_id, role},\n    method: 'put'\n});\n\nexport let change_user_password = (user_id, password) => fetchJson(users_url(), {\n    body: {user_id, password},\n    method: 'put'\n});","import {get_config, set_gmail_params, unset_gmail_params, set_dbx_params, unset_dbx_params} from './configModel';\n\nimport messages from 'utils/messagesComponent';\nimport {copyUrlContent} from 'utils/copyUrl';\n\nimport addComponent from '../../addUser/addUserComponent';\nimport {set_password} from \"../../settings/settingsModel\";\n\n\nexport default configComponent;\n\nlet configComponent = {\n    controller(){\n        let ctrl = {\n            loaded:m.prop(false),\n            dbx: {\n                setted: m.prop(false),\n                enable: m.prop(false),\n                client_id:m.prop(''),\n                client_secret:m.prop(''),\n                error:m.prop('')\n            },\n            gmail: {\n                setted: m.prop(false),\n                enable: m.prop(false),\n                email:m.prop(''),\n                password:m.prop(''),\n                error:m.prop('')\n            },\n\n            toggle_visibility,\n            set_gmail,\n            unset_gmail,\n            set_dbx,\n            unset_dbx\n        };\n\n\n        function set_values(response){\n            if(response.config.gmail)\n                ctrl.gmail.setted(true) && ctrl.gmail.enable(true) && ctrl.gmail.email(response.config.gmail.email) && ctrl.gmail.password(response.config.gmail.password);\n            if(response.config.dbx)\n                ctrl.dbx.setted(true) && ctrl.dbx.enable(true) && ctrl.dbx.client_id(response.config.dbx.client_id) && ctrl.dbx.client_secret(response.config.dbx.client_secret);\n        }\n\n        function toggle_visibility(varable, state){\n            ctrl[varable].error('');\n            ctrl[varable].enable(state);\n        }\n\n        function load() {\n            get_config()\n                .then(response => set_values(response))\n                .then(()=>ctrl.loaded(true))\n                .catch(error => {\n                    ctrl.col_error(error.message);\n                }).then(m.redraw);\n        }\n\n\n        function set_gmail() {\n            ctrl.gmail.error('');\n            set_gmail_params(ctrl.gmail.email, ctrl.gmail.password)\n                .catch(error => {\n                    ctrl.gmail.error(error.message);\n                })\n                .then(ctrl.gmail.setted(true))\n                .then(ctrl.gmail.enable(true))\n                .then(m.redraw);\n        }\n\n        function unset_gmail() {\n            ctrl.gmail.error('');\n            unset_gmail_params()\n                .catch(error => {\n                    ctrl.gmail.error(error.message);\n                })\n                .then(ctrl.gmail.setted(false))\n                .then(ctrl.gmail.enable(false))\n                .then(ctrl.gmail.email(''))\n                .then(ctrl.gmail.password(''))\n                .then(m.redraw);\n        }\n\n        function set_dbx() {\n            ctrl.dbx.error('');\n            set_dbx_params(ctrl.dbx.client_id, ctrl.dbx.client_secret)\n                .catch(error => {\n                    ctrl.dbx.error(error.message);\n                })\n                .then(ctrl.dbx.setted(true))\n                .then(ctrl.dbx.enable(true))\n                .then(m.redraw);\n        }\n\n        function unset_dbx() {\n            unset_dbx_params()\n                .catch(error => {\n                    ctrl.dbx.error(error.message);\n                })\n                .then(ctrl.dbx.setted(false))\n                .then(ctrl.dbx.enable(false))\n                .then(ctrl.dbx.client_id(''))\n                .then(ctrl.dbx.client_secret(''))\n                .then(m.redraw);\n        }\n\n        load();\n        return ctrl;\n    },\n    view(ctrl){\n        return  !ctrl.loaded()\n            ?\n            m('.loader')\n            :\n                m('.container.sharing-page', [\n                    m('.row',[\n                        m('.col-sm-10', [\n                            m('h3', 'Edit configuration')\n                        ])\n                    ]),\n\n                    m('.row.centrify',\n                        [m('.card.card-inverse.col-md-5.centrify', [\n\n                            !ctrl.gmail.enable() ?\n                                m('a', {onclick: ()=>ctrl.toggle_visibility('gmail', true)},\n                                    m('button.btn.btn-primary.btn-block', [\n                                        m('i.fa.fa-fw.fa-envelope'), ' Enable support with email'\n                                    ])\n                                )\n                                :\n                                m('.card-block',[\n                                m('h4', 'Enter details for Gmail accont'),\n                                m('form', [\n                                    m('input.form-control', {\n                                        type:'input',\n                                        placeholder: 'Gmail accont',\n                                        value: ctrl.gmail.email(),\n                                        oninput: m.withAttr('value', ctrl.gmail.email),\n                                        onchange: m.withAttr('value', ctrl.gmail.email),\n                                    }),\n\n                                    m('input.form-control', {\n                                        type:'input',\n                                        placeholder: 'password',\n                                        value: ctrl.gmail.password(),\n                                        oninput: m.withAttr('value', ctrl.gmail.password),\n                                        onchange: m.withAttr('value', ctrl.gmail.password),\n                                    })\n                                ]),\n                                ctrl.gmail.setted() ? ''  : m('button.btn.btn-secondery.btn-block', {onclick: ()=>ctrl.toggle_visibility('gmail', false)},'Cancel'),\n                                m('button.btn.btn-primary.btn-block', {onclick: ctrl.set_gmail},'Update'),\n                                !ctrl.gmail.setted() ? '' : m('button.btn.btn-danger.btn-block', {onclick: ctrl.unset_gmail},'remove'),\n                                !ctrl.gmail.error() ? '' : m('p.alert.alert-danger', ctrl.gmail.error()),\n                                ])\n                        ])\n\n                        ]),\n                    m('.row.centrify',\n                        m('.card.card-inverse.col-md-5.centrify', [\n                            !ctrl.dbx.enable() ?\n                                m('a', {onclick: ()=>ctrl.toggle_visibility('dbx', true)},\n                                    m('button.btn.btn-primary.btn-block', [\n                                        m('i.fa.fa-fw.fa-envelope'), ' Enable support with dropbox'\n                                    ])\n                                )\n                                :\n                                m('.card-block',[\n                                m('h4', 'Enter details for Dropbox application'),\n                                m('form', [\n                                    m('input.form-control', {\n                                        type:'input',\n                                        placeholder: 'client id',\n                                        value: ctrl.dbx.client_id(),\n                                        oninput: m.withAttr('value', ctrl.dbx.client_id),\n                                        onchange: m.withAttr('value', ctrl.dbx.client_id),\n                                    }),\n\n                                    m('input.form-control', {\n                                        type:'input',\n                                        placeholder: 'client secret',\n                                        value: ctrl.dbx.client_secret(),\n                                        oninput: m.withAttr('value', ctrl.dbx.client_secret),\n                                        onchange: m.withAttr('value', ctrl.dbx.client_secret),\n                                    })\n                                ]),\n                                    ctrl.dbx.setted() ? ''  : m('button.btn.btn-secondery.btn-block', {onclick: ()=>ctrl.toggle_visibility('dbx', false)},'Cancel'),\n                                    m('button.btn.btn-primary.btn-block', {onclick: ctrl.set_dbx},'Update'),\n                                    !ctrl.dbx.setted() ? '' : m('button.btn.btn-danger.btn-block', {onclick: ctrl.unset_dbx},'remove'),\n                                    !ctrl.dbx.error() ? '' : m('p.alert.alert-danger', ctrl.dbx.error()),\n                            ])\n                        ])\n                    ),\n            ]);\n    }\n};","import {fetchJson} from 'utils/modelHelpers';\nimport {baseUrl} from 'modelUrls';\n\nconst massMailUrl = `${baseUrl}/mass_mail`;\n\nlet sent = false;\n\nexport let issent = () => sent;\n\nexport let send = (subject, body , ru, su, cu) => fetchJson(massMailUrl, {\n    method: 'post',\n    body: {subject, body , ru, su, cu}\n});\n\n"],"names":["finallyConstructor","callback","constructor","this","then","value","resolve","reason","reject","Object","assign","target","varArgs","TypeError","let","to","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","Array","find","defineProperty","predicate","list","thisArg","i","includes","searchElement","O","len","parseInt","k","currentElement","n","String","search","start","indexOf","setTimeoutFunc","setTimeout","noop","Promise","fn","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","e","promise","push","newValue","finale","apply","_unhandledRejectionFn","Handler","done","ex","prom","promiseFinally","all","arr","args","slice","remaining","res","val","race","values","setImmediate","err","console","warn","globalNS","window","global","Error","support","Symbol","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","toString","normalizeName","name","test","toLowerCase","normalizeValue","iteratorFor","items","iterator","next","shift","Headers","headers","map","forEach","append","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","fileReaderReady","reader","onload","result","onerror","error","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","get","type","rejected","arrayBuffer","text","readAsText","chars","fromCharCode","join","readArrayBufferAsText","formData","decode","json","JSON","parse","oldValue","has","keys","entries","methods","Request","input","options","method","upcased","url","credentials","mode","signal","toUpperCase","referrer","form","trim","split","bytes","replace","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","DOMException","message","stack","create","fetch","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","key","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","module","hookCallback","some","hooks","isObject","isUndefined","isNumber","isDate","Date","hasOwnProp","a","b","extend","valueOf","createUTC","format","locale","strict","createLocalOrUTC","utc","getParsingFlags","m","_pf","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidMonth","invalidFormat","userInvalidated","iso","parsedDateParts","meridiem","rfc2822","weekdayMismatch","isValid","_isValid","flags","parsedParts","isNowValid","isNaN","_d","getTime","invalidWeekday","_strict","bigHour","isFrozen","createInvalid","NaN","fun","t","momentProperties","copyConfig","from","prop","_isAMomentObject","_i","_f","_l","_tzm","_isUTC","_offset","_locale","updateInProgress","Moment","config","updateOffset","isMoment","absFloor","number","Math","ceil","floor","toInt","argumentForCoercion","coercedNumber","isFinite","compareArrays","array1","array2","dontConvert","min","lengthDiff","abs","diffs","msg","suppressDeprecationWarnings","deprecate","firstTime","deprecationHandler","arg","deprecations","deprecateSimple","isFunction","Function","mergeConfigs","parentConfig","childConfig","Locale","aliases","addUnitAlias","unit","shorthand","lowerCase","normalizeUnits","units","normalizeObjectUnits","inputObject","normalizedProp","normalizedInput","priorities","addUnitPriority","priority","getPrioritizedUnits","unitsObj","u","sort","zeroFill","targetLength","forceSign","absNumber","zerosToFill","sign","pow","max","substr","formattingTokens","localFormattingTokens","formatFunctions","formatTokenFunctions","addFormatToken","token","padded","ordinal","func","localeData","formatMoment","expandFormat","array","match","mom","output","makeFormatFunction","invalidDate","replaceLongDateFormatTokens","longDateFormat","lastIndex","match1","match2","match3","match4","match6","match1to2","match3to4","match5to6","match1to3","match1to4","match1to6","matchUnsigned","matchSigned","matchOffset","matchShortOffset","matchWord","regexes","addRegexToken","regex","strictRegex","isStrict","getParseRegexForToken","RegExp","regexEscape","matched","p1","p2","p3","p4","s","tokens","addParseToken","addWeekParseToken","_w","YEAR","MONTH","DATE","HOUR","MINUTE","SECOND","MILLISECOND","WEEK","WEEKDAY","daysInYear","year","isLeapYear","y","parseTwoDigitYear","getSetYear","makeGetSet","keepTime","set$1","month","date","daysInMonth","x","modMonth","o","monthsShort","months","monthsShortRegex","monthsRegex","monthsParse","MONTHS_IN_FORMAT","defaultLocaleMonths","defaultLocaleMonthsShort","handleStrictParse","monthName","ii","llc","toLocaleLowerCase","_monthsParse","_longMonthsParse","_shortMonthsParse","setMonth","dayOfMonth","getSetMonth","defaultMonthsShortRegex","defaultMonthsRegex","computeMonthsParse","cmpLenRev","shortPieces","longPieces","mixedPieces","_monthsRegex","_monthsShortRegex","_monthsStrictRegex","_monthsShortStrictRegex","createUTCDate","UTC","getUTCFullYear","setUTCFullYear","firstWeekOffset","dow","doy","fwd","fwdlw","getUTCDay","dayOfYearFromWeeks","week","weekday","resYear","resDayOfYear","localWeekday","weekOffset","dayOfYear","weekOfYear","resWeek","weeksInYear","weekOffsetNext","weekdaysMin","weekdaysShort","weekdays","weekdaysMinRegex","weekdaysShortRegex","weekdaysRegex","weekdaysParse","d","defaultLocaleWeekdays","defaultLocaleWeekdaysShort","defaultLocaleWeekdaysMin","handleStrictParse$1","weekdayName","_weekdaysParse","_shortWeekdaysParse","_minWeekdaysParse","day","defaultWeekdaysRegex","defaultWeekdaysShortRegex","defaultWeekdaysMinRegex","computeWeekdaysParse","minp","shortp","longp","minPieces","_weekdaysRegex","_weekdaysShortRegex","_weekdaysMinRegex","_weekdaysStrictRegex","_weekdaysShortStrictRegex","_weekdaysMinStrictRegex","hFormat","hours","lowercase","minutes","matchMeridiem","_meridiemParse","seconds","kInput","_isPm","isPM","_meridiem","pos","pos1","pos2","globalLocale","getSetHour","baseConfig","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","LTS","LT","L","LL","LLL","LLLL","dayOfMonthOrdinalParse","relativeTime","future","past","ss","mm","h","hh","dd","M","MM","yy","meridiemParse","locales","localeFamilies","normalizeLocale","loadLocale","oldLocale","exports","_abbr","aliasedRequire","require","getSetGlobalLocale","data","getLocale","defineLocale","abbr","_config","parentLocale","names","j","chooseLocale","checkOverflow","_a","_overflowDayOfYear","_overflowWeeks","_overflowWeekday","defaults","c","configFromArray","currentDate","expectedWeekday","yearToUse","nowValue","now","_useUTC","getUTCMonth","getUTCDate","getFullYear","getMonth","getDate","w","weekYear","temp","weekdayOverflow","GG","W","E","createLocal","_week","curWeek","gg","_dayOfYear","dayOfYearFromWeekInfo","_nextDay","ms","setFullYear","getDay","setUTCMinutes","getUTCMinutes","extendedIsoRegex","basicIsoRegex","tzRegex","isoDates","isoTimes","aspNetJsonRegex","configFromISO","l","allowTime","dateFormat","timeFormat","tzFormat","string","exec","configFromStringAndFormat","extractFromRFC2822Strings","yearStr","monthStr","dayStr","hourStr","minuteStr","secondStr","obsOffsets","UT","GMT","EDT","EST","CDT","CST","MDT","MST","PDT","PST","configFromRFC2822","parsedArray","weekdayStr","parsedInput","weekdayProvided","weekdayActual","checkWeekday","obsOffset","militaryOffset","numOffset","hm","calculateOffset","ISO_8601","RFC_2822","skipped","stringLength","totalParsedInputLength","hour","meridiemHour","isPm","prepareConfig","preparse","tempConfig","bestMoment","scoreToBeat","currentScore","score","configFromStringAndArray","createFromInputFallback","configFromString","minute","second","millisecond","configFromObject","isUTC","isObjectEmpty","add","prototypeMin","other","prototypeMax","pickBy","moments","ordering","Duration","duration","years","quarters","quarter","weeks","isoWeek","days","milliseconds","unitHasDecimal","parseFloat","isDurationValid","_milliseconds","_days","_months","_data","_bubble","isDuration","absRound","round","offset","separator","utcOffset","offsetFromString","chunkOffset","matcher","matches","chunk","cloneWithOffset","model","diff","setTime","local","getDateOffset","getTimezoneOffset","isUtc","aspNetRegex","isoRegex","createDuration","diffRes","base","parseIso","isBefore","positiveMomentsDifference","inp","isAfter","createAdder","direction","period","tmp","addSubtract","isAdding","invalid","subtract","monthDiff","anchor2","adjust","wholeMonthDiff","anchor","newLocaleData","defaultFormat","defaultFormatUtc","lang","addWeekYearFormatToken","getter","getSetWeekYearHelper","weeksTarget","dayOfYearData","isoWeekYear","_dayOfMonthOrdinalParse","_ordinalParse","_dayOfMonthOrdinalParseLenient","getSetDayOfMonth","getSetMinute","getSetSecond","parseMs","getSetMillisecond","proto","preParsePostFormat","time","formats","sod","startOf","calendarFormat","asFloat","that","zoneDelta","endOf","inputString","postformat","withoutSuffix","humanize","fromNow","toNow","invalidAt","localInput","isBetween","inclusivity","localFrom","localTo","isSame","inputMs","isSameOrAfter","isSameOrBefore","parsingFlags","prioritized","isoWeekday","toArray","toObject","toDate","toISOString","keepOffset","inspect","zone","isLocal","prefix","suffix","toJSON","unix","creationData","isoWeeks","weekInfo","isoWeeksInYear","keepLocalTime","keepMinutes","localAdjust","_changeInProgress","parseZone","tZone","hasAlignedHourOffset","isDST","isUtcOffset","zoneAbbr","zoneName","dates","isDSTShifted","_isDSTShifted","proto$1","get$1","field","setter","listMonthsImpl","out","listWeekdaysImpl","localeSorted","_calendar","_longDateFormat","formatUpper","_invalidDate","_ordinal","isFuture","_relativeTime","pastFuture","source","isFormat","_monthsShort","_monthsParseExact","firstDayOfYear","firstDayOfWeek","_weekdays","_weekdaysMin","_weekdaysShort","_weekdaysParseExact","_fullWeekdaysParse","charAt","isLower","langData","mathAbs","addSubtract$1","absCeil","daysToMonths","monthsToDays","makeAs","alias","as","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","makeGetter","thresholds","abs$1","toISOString$1","Y","D","toFixed","total","totalSign","ymSign","daysSign","hmsSign","proto$2","monthsFromDays","withSuffix","posNegDuration","toIsoString","version","updateLocale","tmpLocale","relativeTimeRounding","roundingFunction","relativeTimeThreshold","threshold","limit","myMoment","HTML5_FMT","DATETIME_LOCAL","DATETIME_LOCAL_SECONDS","DATETIME_LOCAL_MS","TIME","TIME_SECONDS","TIME_MS","factory","root","moment","hasMoment","hasEventListeners","document","sto","addEvent","removeEvent","fireEvent","hasClass","setToStartOfDay","compareDates","adjustCalendar","renderDayName","renderDay","renderTitle","Pikaday","require$$0","el","capture","attachEvent","detachEvent","eventName","ev","createEvent","initEvent","dispatchEvent","createEventObject","cn","className","bound","position","reposition","defaultDate","setDefaultDate","firstDay","minDate","maxDate","yearRange","showWeekNumber","overwrite","hasProp","nodeName","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","setHours","numberOfMonths","mainCalendar","container","i18n","previousMonth","nextMonth","theme","onSelect","onOpen","onClose","onDraw","opts","isEmpty","isDisabled","isToday","isSelected","isInRange","isStartRange","isEndRange","instance","refYear","monthHtml","yearHtml","_o","isMinYear","isMaxYear","html","prev","_onMouseDown","_v","event","srcElement","setDate","getAttribute","hide","blur","prevMonth","_c","preventDefault","returnValue","_onChange","gotoMonth","gotoYear","_onInputChange","firedBy","show","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","parentNode","_b","_onClick","onchange","setAttribute","trigger","createElement","appendChild","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","fallback","toDateString","getMoment","setMoment","preventOnSelect","draw","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","adjustCalendars","gotoToday","setStartRange","setEndRange","force","_y","_m","render","innerHTML","focus","adjustPosition","width","height","viewportWidth","viewportHeight","scrollTop","left","top","clientRect","style","offsetWidth","offsetHeight","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","offsetParent","before","row","onejan","cells","after","r","dayConfig","unshift","reverse","renderHead","isVisible","str","v","destroy","removeChild","hasOwn","object","isString","$document","$location","$requestAnimationFrame","$cancelAnimationFrame","voidElements","AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR","tag","pairs","parameterize","hasAttrs","children","attrs","cell","classes","classAttr","attrName","assignAttrs","parser","id","attrValue","parseTagAttrs","f","forKeys","insertNode","parentElement","node","childNodes","deps","mock","cancelAnimationFrame","clearTimeout","requestAnimationFrame","DELETION","INSERTION","MOVE","diffKeys","cached","existing","keysDiffer","cachedCell","action","element","nodes","actions","changes","sortChanges","newCached","change","clear","splice","dummy","changeElement","maybeChanged","handleKeysDiffer","maybeRecreateObject","dataAttrKeys","redraw","strategy","configContext","retain","onunload","controllers","controller","pendingRequests","reattachNodes","editable","parentTag","$trusted","injectHTML","nodeType","nodeValue","createTextNode","first","injectTextNode","handleTextNode","shouldReattach","intact","handleNonexistentNodes","getSubArrayCount","item","buildArray","namespace","configs","concat","flatten","guid","subArrayCount","shouldMaintainIdentities","cacheCount","build","_","diffArray","reconstructCached","views","$old","startComputation","endComputation","unloaders","forcing","checkView","cachedControllers","controllerIndex","getController","subtree","handler","updateLists","buildObject","$original","markViews","hasKeys","isNew","xmlns","is","createElementNS","setAttributes","contenteditable","buildUpdatedNode","context","scheduleConfigsToBeCalled","parentCache","parentIndex","dataToString","end","makeCache","shouldUseSetAttribute","setSingleAttr","dataAttr","cachedAttr","endFirstComputation","rule","copyStyleAttrs","setAttributeNS","isContentEditable","trySetAttr","cachedAttrs","dataAttrs","unload","appendTextFragment","createRange","createContextualFragment","insertAdjacentHTML","replaceScriptNodes","tagName","replaceChild","buildExecutableNode","scriptEl","attributes","isElement","placeholder","documentNode","nodeCache","cellCache","getCellCacheKey","forceRecreation","isDocumentRoot","reset","trust","store","propify","gettersetter","topComponent","currentRoute","previousRoute","roots","components","lastRedrawId","lastRedrawCallTime","computePreRedrawHook","computePostRedrawHook","component","ctrl","currentArgs","removeRootElement","mount","isPrevented","unloader","currentComponent","checkPrevented","redrawing","withAttr","withAttrCallback","callbackThis","currentTarget","_this","routeParams","modes","pathname","hash","isDefaultRoute","normalizeRoute","route","routeUnobtrusive","ctrlKey","metaKey","shiftKey","which","parseQueryString","setScroll","scrollTo","buildQueryString","duplicates","encodeURIComponent","params","pair","cacheKey","initialValue","bind","arg1","arg2","vdom","path","router","queryStart","routeByValue","listener","href","queryIndex","currentPath","querystring","replaceHistory","history","pushState","title","param","RESOLVING","REJECTING","RESOLVED","REJECTED","Deferred","onSuccess","onFailure","state","promiseValue","finish","thennable","success","failure","notThennable","count","fire","identity","sync","outstanding","results","synchronizer","resolved","background","serialize","deserialize","extract","callbackKey","script","isJSONP","dataType","jsonp","stringify","bindData","unwrapSuccess","unwrapError","callbackName","random","resp","src","user","password","maybeXhr","createXhr","pikaday","checkStatus","checkFullStatus","catch","catchJSON","fetchVoid","Accept","Content-Type","fetchJson","const","studyUrl","urlPrefix","launchUrl","tagsUrl","translateUrl","poolUrl","statisticsUrl","downloadsUrl","collaborationUrl","downloadsAccessUrl","dateRangePicker","pikadayRange","ref","startDate","endDate","isInitialized","ctx","startPicker","endPicker","onKeydown","picker","keyCode","stopPropagation","update","areDatesEqual","startElement","endElement","setup","inputWrapper","groupClass","inputClass","validity","colWidth","showValidation","class","isStack","label","help","textInputComponent","required","register","ref$1","isArea","oninput","rows","isInit","isFirst","maybeInputComponent","dflt","checked","onclick","disabled","checkboxInputComponent","description","selectInputComponent","selected","formFactory","validationHash","every","textInput","maybeInput","checkboxInput","selectInput","radioInput","radioInputComponent","arrayInput","p","fixedArgs","fromArr","toArr","SOURCES","Research pool - Current studies","All research - Pool and lab","Demo studies","All studies","statisticsFormComponent","query","study","button","sortstudy","sorttask","sorttime","radioButton","showEmpty","sortgroup","firstTask","lastTask","sortTable","listProp","sortByProp","formatDate","pad","num","statisticsTableComponent","sortBy","tableContent","content","th_option","sorttask_sent","sorttime_sent","starts","studyName","taskName","completes","completion_rate","schema","sortByTxt","data-sort-by","statisticsComponent","yourDate","displayHelp","loading","task","studyType","studydb","submit","STATISTICS_URL","studyId","parseDate","startTask","endTask","timeframe","extended","getYear","parseQuery","downloadFile","filename","filter","fields","replacer","csv","fieldName","getStatistics","baseUrl","db","current","testDB","since","until","refresh","studyc","taskc","datac","timec","dayc","weekc","monthc","yearc","cpath","hpath","tasksM","threads","threadsNum","zero","curl","hurl","baseURL","strData","strDelimiter","objPattern","arrData","arrMatches","strMatchedValue","strMatchedDelimiter","CSVToArray","file","column","STATUS_RUNNING","updateStatus","studyStatus","interceptErrors","1","2","3","4","messages","vm","isOpen","close","custom","alert","confirm","prompt","wide","maxHeight","handleKey","preventEnterSubmits","okText","cancelText","postContent","onResize","spinner","display","hidden","classNames","argType","editMessage","editComponent","reduce","submitAttempt","rulesUrl","targetCompletions","autopauseUrl","userEmail","cancel","miniButtonView","validationView","groupClasses","valid","has-danger","has-success","inputClasses","form-control-danger","form-control-success","focusConfig","createComponent","play","studyPending","reportError","pause","remove","edit","unPropify","editNewStudy","startedSessions","completedSessions","creationDate","old","$pending","getAuth","PRODUCTION_URL","poolComponent","canCreate","globalSearch","loaded","role","colspan","TABLE_WIDTH","thConfig","studyFilter","R","P","S","canUnpause","canPause","canReset","canStop","dayButtonView","updaterId","newStatus","getAllDownloads","removeDownload","download","wait","timeout","daysAgo","endOfDay","equalDates","date1","date2","recursiveGetAll","getAll","statusLabelsMap","downloadsComponent","cancelDownload","fileSize","createDataAccessRequest","dataAccessRequest","deleteDataAccessRequest","downloadAccess","grantComponent","username","revokeComponent","approved","grant","revoke","downloadsAccessComponent","isAdmin","dataRequest","email","dataRequestFilter","canApprove","canDelete","fullHeight","loginComponent","isloggedin","loginAction","substring","onsubmit","autofocus","onkeydown","getStartValue","jshintOptions","curly","latedef","undef","unused","browser","devel","esversion","predef","filePrototype","apiUrl","sourceContent","last_modify","save","copy","study_id","new_study_id","del","hasChanged","define","requirejs","eval","checkSyntax","jshint","JSHINT","syntaxValid","syntaxData","setPath","lastIndexOf","basePath","fileFactory","fileObj","undoManager","files","studyPrototype","isUploading","apiURL","parseFiles","isReadonly","is_readonly","istemplate","is_template","is_locked","is_published","is_public","study_name","base_url","versions","ensureArray","spreadFile","flattenDeep","acc","mergeFiles","newfiles","oldfiles","toRemove","oldfile","newfile","addFile","removeFile","getFile","getChosenFiles","getChosen","isChosen","parent","getParent","createFile","isDir","nameA","nameB","move","newpath","folderExists","fileExists","hasChangedChildren","getChildren","uploadFiles","fd","downloadFiles","delFiles","paths","make_experiment","descriptive_id","exp_data","delete_experiment","update_experiment","getParents","viewModelMap","signature","imgEditor","unknownComponent","downloadSupport","externalHost","downloadLink","link","click","dirs","dir","/","newPath","dirName","dirNode","fa-caret-right","fa-caret-down","get_url","get_exps_url","load_studies","load_templates","duplicate_study","lock_study","lock","publish_study","publish","update_url","copyFileComponent","studies","sort_studies_by_name2","template_filter","permission","study1","study2","playground","study_type","filePaths","exist","upload","moveFile","targetPath","moveAction","copyFile","filePath","isFocused","def","encodeURI","isSaved","closed","pathProp","deleteFiles","chosenFiles","resetFile","aceComponent","editorCache","observer","editor","settings","setReadOnly","paste","getSelectionRange","padding","getSession","getLine","insert","setContent","getValue","setValue","moveCursorTo","ace","toUrl","session","commands","setTheme","setMode","setUseWorker","setHighlightActiveLine","setShowPrintMargin","setFontSize","$blockScrolling","Infinity","on","getMode","$id","$worker","addCommand","bindKey","win","mac","onSave","execCommand","scroll","setScrollTop","clearSelection","setUndoManager","UndoManager","getScrollTop","getCursorPosition","off","syntaxComponent","analize","errorCount","warningCount","errors","isError","code","col","character","evidence","level","testArr","flat","toFlatten","multiPick","propArr","previous","flattenSequence","sequence","mixer","elseData","branches","concatClean","pipValidator","trials","stimuli","elements","trialSets","stimulusSets","media","mediaSets","getPath","image","template","trialTest","trial","tests","interactions","interaction","conditions","testInteractions","validateComponent","validations","pipValidate","validator","validationReport","cls","copyUrlContent","copyComponent","getAbsoluteUrl","copyUrl","launch","copyFail","autoCopy","select","indent","tab","print","isShort","inheritInput","inheritInputComponent","rawType","rawSet","TYPES","taskComponent","common","inherit","proceed","minno-time","minno-quest","pip (old minno-time)","messageComponent","pipComponent","questComponent","timeComponent","taskSwitch","templateUrl","props","scriptUrl","0.3","0.2","pageComponent","page","decline","progressBar","autoFocus","questions","stem","errorMsg","quest","helpText","typeMap","question","None","Text","Text Area","Select One","Select Multiple","Slider","textComponent","textareaComponent","selectOneComponent","sliderComponent","autoSubmit","columns","answers","numericValues","steps","hidePips","highlight","labels","snippetRunner","isOk","taskSnippet","pageSnippet","questSnippet","amdReg","textEditor","textEditorComponent","channels","channel","modeClass","isJs","isExpt","isHtml","amdMatch","APItype","onmousedown","btn-danger-outline","textContent","textMode","modeMap","js","jsp","jst","htm","txt","cs","py","xml","editors","css","jpg","jpeg","bmp","png","pdf","fileEditorComponent","unknowEditor","wizardComponent","compileScript","basicPage","randomize","times","questionList","basicSelect","q","contextMenuComponent","menu","show-context-menu","menuNode","pageX","pageY","onClick","submenu","icon","fileContext","version_id","inactive","downloadUrl","contextMenu","DRAGOVER_CLASS","uploadConfig","deactivate","classList","uploadonchange","dragdrop","iterate","dt","dataTransfer","rootPromises","readDirectory","entry","readEntries","oldEntries","dirReader","createReader","newEntries","promises","isFile","webkitGetAsEntry","isDirectory","entriesApi","getFilesAndDirectories","webkitRelativePath","nodeComponent","folderHash","hasChildren","toggleOpen","oncontextmenu","unselectable","text-primary","choose","fa-check-square-o","fa-square-o","fa-minus-square-o","fa-file-code-o","fa-file-text-o","fa-file-image-o","fa-file-pdf-o","fa-folder-o","font-weight-bold","folder","viewStudy","newState","folderComponent","dropdown","dropdownComponent","inLowerViewport","toggleSelector","toggleContent","right","dropdown-menu-right","dropdown-menu-up","closest","selector","studyTemplatesComponent","reuse_id","templates","template_id","ownerFilter","sort_studies","study_1","study_2","tag_url","tag_id","study_url","get_tags","add_tag","tag_text","tag_color","edit_tag","studyTagsComponent","tags","sort_tags","used","changed","background-color","color","tag_1","tag_2","createMessage","exps","exp_id","all_exp_ids","all_versions","file_format","file_split","downloaded","experiments","exp","tmp_exps","exp2find","exp2update","ids","start_date","end_date","file_data","data_file","ask_get_data","collaboration_url","link_url","make_pulic","do_create","isTemplate","ask","do_make_public","do_lock","do_publish","can_edit","not","delete","rename","duplicate","unpublish","unlock","sharing","public","private","settings_hash","new_tags","deleted","study_description","republish","deploy","studyChangeRequest","studyRemoval","draw_menu","comp","sidebarButtons","readonly","multiple","sidebarComponent","filesCount","chosenCount","currentState","chooseState","splitPane","splitComponent","leftWidth","parentWidth","parentOffset","flexBasis","parentLeft","mousemove","editorLayoutComponent","isChanged","leavingEditor","hasUnsavedData","beforeunload","fullheight","editorComponent","localStorage","fileSidebarWidth","fetchFullJson","flattenFiles","fileArr","mainComponent","have_templates","user_name","permissionChoice","order_by_name","loadStudies","loadTags","sort_studies_by_name","sort_studies_by_date","sort_studies_by_date2","last_modified","typeFilter","tagFilter","uesedFilter","permissionFilter","searchFilter","routeConfig","fa-lock","fa-globe","fa-flag","fa-university","is_bank","fa-users","searchTerm","defaultPrevented","deployComponent","requests","CREATION_DATE","FOLDER_LOCATION","RULE_FILE","RESEARCHER_EMAIL","RESEARCHER_NAME","TARGET_NUMBER","APPROVED_BY_A_REVIEWER","EXPERIMENT_FILE","LAUNCH_CONFIRMATION","COMMENTS","changeRequestListComponent","FILE_NAMES","TARGET_SESSIONS","STUDY_SHOWFILES_LINK","STATUS","removalListComponent","STUDY_NAME","COMPLETED_N","deploy_url","get_study_prop","rulesComponent","visual","comments","exist_rule_file","addcomments","getInputs","ruleGeneratorVisual","ruleGeneratorValue","ASTERIX","sent","folder_location","researcher_email","researcher_name","target_number","rulesValue","rulesVisual","rulesComments","rule_file","approved_by_a_reviewer","zero_unnecessary_files","completed_checklist","approved_by_irb","valid_study_name","realstart","experiment_file","experiment_files","launch_confirmation","have_rule_file","file_name","checkbox","hxref","No, this study is not for the Project Implicit pool.","Yes","No,this study is mine","text-success","text-danger","StudyRemovalComponent","global_study_name","study_names","completed_n","file_id","addComponent","first_name","last_name","iscu","added","activation_code","change_email_url","present_templates_url","dropbox_url","change_password_url","set_password","do_present_templates","do_hide_templates","password_body","password_error","external","do_set_password","stop_dbx_sync","synchronization_error","emil","dropbox","email_error","do_set_email","is_dbx_synchronized","dbx_auth_link","use_code","activation1_url","is_collaboration_code","editTag","editTagComponent","colorButton","page_url","templateId","pageId","getListOfPages","textareaConfig","resize","scrollHeight","pagesComponent","pages","strings","has_changed","changed_studies","changedFilter","load","propifyTranslation","propifyChanged","pageName","comment","translation","textareaAutoresize","timer","countdown","new_msgs","wrappedRoutes","/tags","/translate/:templateId","translateComponent","/translate/:templateId/:pageId","/template_studies","studiesComponent","/recovery","recoveryAction","/activation/:code","activated","/collaboration/:code","/settings","is_gdrive_synchronized","present_templates","gdrive_auth_link","present_templates_error","prev_email","password_changed","email_changed","update_all_details","do_set_templete","is_synchronized","auth_link","feature","/messages","pendings","do_use_code","accept","owner_name","/reset_password/:code","/deployList","deployListComponent","/removalList","/changeRequestList","/addUser","addUserComponent","/users","users","col_error","user_id","change_password","reset_code","activate_user","add_user","/config","dbx","setted","enable","client_id","client_secret","gmail","toggle_visibility","varable","set_gmail","unset_gmail","set_dbx","unset_dbx","/massMail","subject","ru","su","cu","/studyChangeRequest/:studyId","target_sessions","file_names","study_showfiles_link","origin","Currently collecting data and does not need to be unpaused","Manually paused and needs to be unpaused","Auto-paused due to low completion rates or meeting target N.","/studyRemoval/:studyId","studyRemovalComponent","/deploy/:studyId","/login","/studies","/studies/statistics_old","statistics_oldComponent","/studies/statistics","/view/:code","viewFilesComponent","/view/:code/:resource/:fileId","/editor/:studyId","filesComponent","/editor/:studyId/:resource/:fileId","/pool","/pool/history","historyComponent","/downloads","/downloadsAccess","/sharing/:studyId","link_data","link_type","link_list","link_add_list","link_remove_list","data_permission","pub_error","share_error","do_add_collaboration","do_add_link","do_revoke_link","doLogout","is_loggedin","is_view","is4su","timeoutInSeconds","clearInterval","setInterval","admin","sub","subs","downloads","downloadsAccess","statistics","pool","deployList","removalList","changeRequestList","addUser","massMail","sub_comp"],"mappings":"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"}