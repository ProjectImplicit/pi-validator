{"version":3,"file":"main.js","sources":["validator/syntaxComponent.js","validator/parser/messages.js","validator/parser/parser.js","validator/parser/pipValidator.js","validator/parser/questValidator.js","validator/parser/managerValidator.js","validator/parser/validator.js","validator/scriptTestComponent.js","validator/validatorComponent.js","main.js"],"sourcesContent":["export default syntax;\n\n/**\n * Syntax component\n * Takes an argument as follows:\n *\n * {valid: Boolean, data: jshint(script).data()}\n */\nvar syntax = {\n\n\t/**\n\t * Analyze script\n\t * @param  {String} script A script to analyze\n\t * @return {Object}\n\t * {\n\t *      valid: Boolean,\n\t *      data: Object, // raw data\n\t *      errors: Array, // an array of analyzed errors\n\t *      errorCount: Number, // the number of errors\n\t *      warningCount: Number // the number of warnings\n\t * }\n\t */\n\tanalize: script => {\n\t\tvar jshint = window.JSHINT;\n\t\tvar valid = jshint(script, syntax.jshintOptions);\n\t\tvar data = jshint.data();\n\t\tvar errorCount = 0;\n\t\tvar warningCount = 0;\n\n\t\tvar errors = valid ? [] : data.errors\n\t\t\t.filter(e => e) // clean null values\n\t\t\t.map(err => {\n\t\t\t\tvar isError = err.code && (err.code[0] === 'E');\n\n\t\t\t\tisError ? errorCount++ : warningCount++;\n\n\t\t\t\treturn {\n\t\t\t\t\tisError: isError,\n\t\t\t\t\tline: err.line,\n\t\t\t\t\tcol: err.character,\n\t\t\t\t\treason: err.reason,\n\t\t\t\t\tevidence: err.evidence\n\t\t\t\t};\n\t\t\t});\n\n\t\treturn {\n\t\t\tvalid: valid,\n\t\t\tdata: data,\n\t\t\terrors : errors,\n\t\t\terrorCount: errorCount,\n\t\t\twarningCount: warningCount\n\t\t};\n\t},\n\n\tjshintOptions: {\n\t\t// JSHint Default Configuration File (as on JSHint website)\n\t\t// See http://jshint.com/docs/ for more details\n\n\t\t'curly'         : false,    // true: Require {} for every new block or scope\n\t\t'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n\t\t'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n\t\t'unused'        : 'vars',   // Unused variables:\n\t\t\t\t\t\t\t\t\t//   true     : all variables, last function parameter\n\t\t\t\t\t\t\t\t\t//   'vars'   : all variables only\n\t\t\t\t\t\t\t\t\t//   'strict' : all variables, all function parameters\n\t\t'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n\t\t'browser'       : true,     // Web Browser (window, document, etc)\n\t\t'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n\t\t// Custom Globals\n\t\tpredef: ['piGlobal','define','require','requirejs','angular']\n\t},\n\n\tcontroller:  args => {\n\t\treturn args.model;\n\t},\n\n\tview: ctrl => {\n\t\treturn m('div', [\n\t\t\tm('h3', 'Syntax'),\n\n\t\t\tctrl.valid\n\t\t\t\t?\n\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t])\n\t\t\t\t:\n\t\t\t\tm('div', [\n\t\t\t\t\tm('table.table', [\n\t\t\t\t\t\tm('tbody', ctrl.errors.map(err => {\n\t\t\t\t\t\t\treturn m('tr',[\n\t\t\t\t\t\t\t\tm('td.text-muted', `line ${err.line}`),\n\t\t\t\t\t\t\t\tm('td.text-muted', `col ${err.col}`),\n\t\t\t\t\t\t\t\tm('td', {class: err.isError ? 'text-danger' : 'text-info'}, err.reason),\n\t\t\t\t\t\t\t\tm('td',err.evidence)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}))\n\t\t\t\t\t]),\n\n\t\t\t\t\tm('.row',[\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.errorCount} critical errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-info'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-warning-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.warningCount} non standard syntax errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\n\t\t\t\t])\n\t\t]);\n\t}\n};\n","export function warn(message, test){\n\treturn {level:'warn', message: message, test:test};\n}\n\nexport function error(message, test){\n\treturn {level:'error', message: message, test:test};\n}\n\nexport function row(element, testArr){\n\n\tvar messages = testArr\n\t\t.reduce((previous, current)=>previous.concat(current), []) // concatAll\n\t\t.filter(msg => msg) // clean empty\n\t\t.filter(msg => typeof msg.test == 'function' ? msg.test(element) : !!msg.test); // run test...\n\n\treturn !messages.length ? null : {\n\t\telement: element,\n\t\tmessages: messages\n\t};\n}\n","function multiPick(arr, propArr){\n\treturn arr\n\t\t.map(e=> e && [].concat(e[propArr[0]], e[propArr[1]], e[propArr[2]])) // gather all stim arrays\n\t\t.reduce((previous, current)=>previous.concat(current),[]) // flatten arrays\n\t\t.filter(t=>t); // remove all undefined stim\n}\n\nfunction flattenSequence(sequence){\n\tfunction unMix(e){\n\t\treturn flattenSequence([].concat(e.data, e.elseData, (e.branches || []).map(e=>e.data)));\n\t}\n\n\treturn sequence\n\t\t.reduce((previous, current) => {return previous.concat(current && current.mixer ? unMix(current) : current);},[])\n\t\t.filter(t=>t); // remove all undefined stim;\n}\n\nfunction concatClean(){\n\tvar args = [].splice.call(arguments,0);\n\treturn [].concat.apply([], args).filter(e=>e);\n}\n\nexport function pipElements(script){\n\tvar trials, stimuli, media;\n\n\ttrials = concatClean(flattenSequence(script.sequence), script.trialSets);\n\tstimuli = concatClean(\n\t\tscript.stimulusSets,\n\t\tmultiPick(trials,['stimuli', 'layout'])\n\t);\n\tmedia = concatClean(\n\t\tscript.mediaSets,\n\t\tmultiPick(stimuli,['media','touchMedia'])\n\t);\n\n\treturn {trials:trials, stimuli:stimuli, media:media};\n}\n\nexport function questElements(script){\n\tvar pages, questions;\n\n\tpages = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\tquestions = [].concat(\n\t\tscript.questionsSets,\n\t\tflattenSequence(multiPick(pages,['questions']))\n\t).filter(t=>t);\n\n\treturn {pages:pages, questions:questions};\n}\n\nexport function managerElements(script){\n\tvar tasks;\n\n\ttasks = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\treturn {tasks:tasks};\n}","import {warn, error, row} from './messages';\nimport {pipElements} from './parser';\n\nexport default pipValidator;\n\nfunction pipValidator(script, url){\n\tvar errors = [];\n\tvar elements = pipElements(script);\n\n\terrors.push({type:'Settings',errors: checkSettings(script, url)});\n\terrors.push({type:'Trials',errors: filterMap(elements.trials, trialTest)});\n\t// errors.push({type:'Stimuli',errors: filterMap(elements.stimuli, stimuliTest)});\n\t// errors.push({type:'Media',errors: filterMap(elements.media, mediaTest)});\n\n\treturn errors;\n}\n\nfunction filterMap(arr, fn){\n\treturn arr.map(fn).filter(e=>e);\n}\n\n/**\n * Check settings\n * @param  {Object} script The script to be tested\n * @param  {String} url    The script origin URL\n * @return {Array}        Array of error rows\n */\nfunction checkSettings(script, url){\n\tvar settings = script.settings || {};\n\n\tvar w = byProp(warn);\n\t// var e = byProp(error);\n\n\tvar errors = [\n\t\tr('base_url', [\n\t\t\tw('Your base_url is not in the same directory as your script.', e => {\n\t\t\t\tvar path = url.substring(0, url.lastIndexOf('/') + 1);\n\t\t\t\tvar t = s => (!s || s.indexOf(path) !== 0);\n\t\t\t\treturn (typeof e == 'object') ? t(e.image) && t(e.template) : t(e);\n\t\t\t})\n\t\t])\n\t];\n\n\treturn errors.filter(function(err){return !!err;});\n\n\tfunction r(prop, arr){\n\t\tvar el = {};\n\t\tel[prop] = settings[prop];\n\t\treturn prop in settings && row(el, arr);\n\t}\n\n\t// wrap warn/error so that I don't have to individually\n\tfunction byProp(fn){\n\t\treturn function(msg, test){\n\t\t\treturn fn(msg, e => {\n\t\t\t\tfor (var prop in e) {\n\t\t\t\t\treturn test(e[prop]);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n}\n\nfunction trialTest(trial) {\n\tvar tests = [\n\t\ttestInteractions(trial.interactions),\n\t\ttestInput(trial.input)\n\t];\n\n\treturn row(trial, tests);\n\n\tfunction testInteractions(interactions){\n\t\tif (!interactions) {return;}\n\n\t\tif (!Array.isArray(interactions)){\n\t\t\treturn [error('Interactions must be an array.', true)];\n\t\t}\n\n\t\treturn [\n\t\t\tinteractions.some(i=>!i.conditions) ? error('All interactions must have conditions', true) : [\n\t\t\t\terror('All conditions must have a type', interactions.some(i=>!!i.conditions.type))\n\t\t\t],\n\t\t\tinteractions.some(i=>!i.actions) ? error('All interactions must have actions', true) : [\n\t\t\t\terror('All actions must have a type', interactions.some(i=>!!i.actions.type))\n\t\t\t]\n\t\t];\n\t}\n\n\tfunction testInput(input){\n\t\tif (!input) {return;}\n\n\t\tif (!Array.isArray(trial.input)){\n\t\t\treturn [error('Input must be an Array', true)];\n\t\t}\n\n\t\treturn [\n\t\t\terror('Input must always have a handle', input.some(i=>!i.handle)),\n\t\t\terror('Input must always have an on attribute', input.some(i=>!i.on))\n\t\t];\n\t}\n}\n\nfunction stimuliTest(stim){\n\tvar tests = [];\n\treturn row(stim, tests);\n}\n\nfunction mediaTest(media){\n\tvar tests = [\n\n\t];\n\treturn row(media, tests);\n}","import messages from './messages';\nimport {questElements} from './parser';\n\nexport default function questValidator(script){\n\tvar errors = [];\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Pages', errors:[]});\n\terrors.push({type:'Questions', errors:[]});\n\n\treturn errors;\n}","\nimport {warn, error} from './messages';\nimport {managerElements} from './parser';\n\nexport default function managerValidator(script){\n\tvar errors = [];\n\tvar elements = managerElements(script);\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Tasks', errors:[]});\n\n\treturn errors;\n}\n\n\n\n","import pipValidate from './pipValidator';\nimport questValidate from './questValidator';\nimport managerValidate from './managerValidator';\n\nexport default function validate(script){\n\tvar type = script.type && script.type.toLowerCase();\n\tswitch (type){\n\tcase 'pip' : return pipValidate.apply(null, arguments);\n\tcase 'quest' : return questValidate.apply(null, arguments);\n\tcase 'manager' : return managerValidate.apply(null, arguments);\n\tdefault:\n\t\tthrow new Error('Unknown script.type: ' + type);\n\t}\n}\n\nexport function dd(){\n\treturn [\n\t\t{\n\t\t\ttype: 'task',\n\t\t\terrosrs:[],\n\t\t\terrors: [\n\t\t\t\t{\n\t\t\t\t\telement: {name:'myName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'error', message: 'error message1'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message2'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message3'},\n\t\t\t\t\t\t{level:'error', message: 'error message4'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\telement: {name:'otherName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'warn', message: 'warn message1'},\n\t\t\t\t\t\t{level:'error', message: 'error message2'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t];\n}\n","import validator from './parser/validator';\nexport default scriptTestComponent;\n\nvar scriptTestComponent = {\n\tcontroller: args => {\n\t\tvar ctrl = {\n\t\t\tvalidations : m.prop([]),\n\t\t\tisError: false\n\t\t};\n\n\t\ttry {\n\t\t\teval(args.script.replace('define(', 'define(\"myTask\",'));\n\t\t\twindow.requirejs(['myTask'], script => {\n\t\t\t\tm.startComputation();\n\t\t\t\tctrl.validations(validator(script, args.url));\n\t\t\t\tm.endComputation();\n\t\t\t}, err => {\n\t\t\t\tctrl.isError = true;\n\t\t\t\tthrow err;\n\t\t\t});\n\t\t} catch(e) {\n\t\t\tctrl.isError = true;\n\t\t}\n\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn  m('div', [\n\t\t\tm('h3', 'Script Analysis'),\n\n\t\t\t!ctrl.isError ? '' :\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t`There was a problem parsing this script. Are you sure that it is a valid PI script?`\n\t\t\t]),\n\n\t\t\tctrl.validations().map(validationReport => {\n\t\t\t\treturn [\n\t\t\t\t\tm('h4', validationReport.type),\n\t\t\t\t\t!validationReport.errors.length\n\t\t\t\t\t\t?\n\t\t\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t\t\t])\n\t\t\t\t\t\t:\n\t\t\t\t\t\tvalidationReport.errors.map(err => {\n\t\t\t\t\t\t\treturn m('.row',[\n\t\t\t\t\t\t\t\tm('.col-md-4', err.element),\n\t\t\t\t\t\t\t\tm('.col-md-8',[\n\t\t\t\t\t\t\t\t\tm('ul', err.messages.map(msg => {\n\t\t\t\t\t\t\t\t\t\treturn m('li.list-unstyled', {class: msg.level == 'error' ? 'text-danger' : 'text-info'}, [\n\t\t\t\t\t\t\t\t\t\t\tm('strong', msg.level),\n\t\t\t\t\t\t\t\t\t\t\tmsg.message\n\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t})\n\t\t\t\t];\n\t\t\t})\n\n\t\t]);\n\t}\n};\n\n","import syntax from './syntaxComponent';\nimport scriptTest from './scriptTestComponent';\n\n/**\n * Validator component\n * m.component(validator, {url: 'url/d.js'})\n * @type {Object}\n */\nvar validator = {\n\tcontroller: args => {\n\t\tvar ctrl = {\n\t\t\tloaded: false,\n\t\t\tsyntaxModel: {},\n\t\t\turl: args.url,\n\t\t\tscript: m.prop()\n\t\t};\n\n\t\tm\n\t\t\t.request({method:'GET', url:args.url,background:true, deserialize: text => text})\n\t\t\t.then(ctrl.script, ()=>ctrl.error = true)\n\t\t\t.then(script => {\n\t\t\t\tm.startComputation();\n\t\t\t\tctrl.syntaxModel = syntax.analize(script);\n\t\t\t\tctrl.loaded = true;\n\t\t\t\tm.endComputation();\n\t\t\t});\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn m('.container', [\n\t\t\tm('h2', 'Validator', [m('small', ctrl.url)]),\n\t\t\t!ctrl.loaded\n\t\t\t\t?\n\t\t\t\tm('.loader')\n\t\t\t\t:\n\t\t\t\tctrl.error\n\t\t\t\t\t?\n\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t`There was a problem loading ${ctrl.url}`\n\t\t\t\t\t])\n\t\t\t\t\t:\n\t\t\t\t\t[\n\t\t\t\t\t\tm.component(syntax, {model: ctrl.syntaxModel}),\n\t\t\t\t\t\tctrl.syntaxModel.errorCount > 1\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t\t\t`We cannot parse the script as long as there are syntax errors`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tm.component(scriptTest, {url: ctrl.url, script: ctrl.script()})\n\t\t\t\t\t]\n\t\t]);\n\t}\n};\n\nexport default validator;","import validator from './validator/validatorComponent';\n\n\n\nm.mount(document.body, {\n\tview: () => {\n\t\treturn m.component(validator, {url: getParameterByName('url') || '/test/distance.js'});\n\t}\n});\n\nfunction getParameterByName(name) {\n\tname = name.replace(/[\\[]/, '\\\\\\[').replace(/[\\]]/, '\\\\\\]');\n\tvar regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)'),\n\t\tresults = regex.exec(location.search);\n\treturn results == null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}"],"names":["pipValidate","questValidate","managerValidate","validator","scriptTest"],"mappings":"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","sourceRoot":"/source/"}