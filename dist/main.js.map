{"version":3,"file":"main.js","sources":["../src/utils/modelHelpers.js","../src/study/studiesComponent.js","../src/study/fileModel.js","../src/study/studyModel.js","../src/utils/fullHeight.js","../src/study/editors/imgEditor.js","../src/study/editors/pdfEditor.js","../src/study/editors/unknownEditor.js","../src/utils/messagesComponent.js","../src/study/sidebar/wizards/pipWizard.js","../src/study/sidebar/wizards/questWizard.js","../src/study/sidebar/wizards/managerWizard.js","../src/study/sidebar/fileActions.js","../src/study/editors/ace/aceComponent.js","../src/study/editors/ace/syntaxComponent.js","../src/study/editors/ace/parser/messages.js","../src/study/editors/ace/parser/parser.js","../src/study/editors/ace/parser/pipValidator.js","../src/study/editors/ace/parser/questValidator.js","../src/study/editors/ace/parser/managerValidator.js","../src/study/editors/ace/parser/validator.js","../src/study/editors/ace/validatorComponent.js","../src/study/editors/textMenu.js","../src/study/editors/textEditor.js","../src/study/editorComponent.js","../src/utils/classNames.js","../src/utils/contextMenuComponent.js","../src/study/sidebar/fileContext.js","../src/utils/uploader.js","../src/study/sidebar/nodeComponent.js","../src/study/sidebar/folderComponent.js","../src/study/sidebar/filesComponent.js","../src/study/sidebar/sidebarButtons.js","../src/study/sidebar/sidebarComponent.js","../src/study/studyComponent.js","../src/pool/poolModel.js","../src/utils/spinnerComponent.js","../src/pool/poolEditComponent.js","../src/pool/poolCreateComponent.js","../src/pool/poolActions.js","../src/login/authModel.js","../src/utils/sortTable.js","../src/utils/formatDate.js","../src/pool/poolComponent.js","../src/utils/dateRange.js","../src/pool/historyComponent.js","../src/downloads/downloadsModel.js","../src/downloads/downloadsCreate.js","../src/downloads/downloadsActions.js","../src/downloads/downloadsComponent.js","../src/login/loginComponent.js","../src/routes.js","../src/layoutWrapper.js","../src/main.js"],"sourcesContent":["export let checkStatus = response => {\n\n\tif (response.status >= 200 && response.status < 300) {\n\t\treturn response;\n\t}\n\n\tlet error = new Error(response.statusText);\n\n\terror.response = response;\n\n\tthrow error;\n};\n\nexport let toJSON = response => response\n\t.json()\n\t.catch(\t);\n\n// extract info from status error\nexport let catchJSON = err => (err.response ? err.response.json() : Promise.reject())\n\t.catch(() => Promise.reject(err))\n\t.then(json => Promise.reject(json));\n\n\nexport function fetchVoid(url, options = {}){\n\tlet opts = Object.assign({\n\t\tcredentials: 'same-origin',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t}, options);\n\n\topts.body = JSON.stringify(options.body);\n\treturn fetch(url, opts)\n\t\t.then(checkStatus)\n\t\t.catch(catchJSON);\n}\n\nexport function fetchJson(url, options){\n\treturn fetchVoid(url, options)\n\t\t.then(toJSON);\n}\n\nexport function fetchUpload(url, options){\n\tlet opts = Object.assign({\n\t\tcredentials: 'same-origin'\n\t}, options);\n\n\treturn fetch(url, opts)\n\t\t.then(checkStatus)\n\t\t.then(toJSON)\n\t\t.catch(catchJSON);\n}","import {toJSON, checkStatus} from 'utils/modelHelpers';\nexport default mainComponent;\n\nvar mainComponent = {\n\tcontroller: function(){\n\t\tvar ctrl = {\n\t\t\tstudies:m.prop(),\n\t\t\tloaded:false\n\t\t};\n\t\tfetch('/dashboard/dashboard/studies', {credentials: 'same-origin'})\n\t\t\t.then(checkStatus)\n\t\t\t.then(toJSON)\n\t\t\t.then(ctrl.studies)\n\t\t\t.then(()=>ctrl.loaded = true)\n\t\t\t.then(m.redraw);\n\n\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn m('.container', [\n\t\t\tm('h3', 'My studies'),\n\t\t\t!ctrl.loaded\n\t\t\t\t?\n\t\t\t\tm('.loader')\n\t\t\t\t:\n\t\t\t\tm('.list-group',ctrl.studies().studies.map(study => m('a.list-group-item',{\n\t\t\t\t\thref: `/editor/${study.id}`,\n\t\t\t\t\tconfig: m.route\n\t\t\t\t}, study.name)))\n\t\t]);\n\t}\n};","import {fetchVoid, fetchJson} from 'utils/modelHelpers';\nexport default fileFactory;\nlet baseUrl = '/dashboard/dashboard';\n\n/**\n * file = {\n * \tid: #hash,\n * \turl: URL\n * }\n */\n\nlet filePrototype = {\n\tapiUrl(){\n\t\treturn `${baseUrl}/files/${encodeURIComponent(this.studyId)}/file/${encodeURIComponent(this.id)}`;\n\t},\n\n\tget(){\n\t\treturn fetchJson(this.apiUrl())\n\t\t\t.then(response => {\n\t\t\t\tthis.sourceContent(response.content);\n\t\t\t\tthis.content(response.content);\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.error = false;\n\t\t\t})\n\t\t\t.catch(reason => {\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.error = true;\n\t\t\t\treturn Promise.reject(reason); // do not swallow error\n\t\t\t});\n\t},\n\n\tsave(){\n\t\treturn fetchVoid(this.apiUrl(), {\n\t\t\tmethod:'put',\n\t\t\tbody: {content: this.content}\n\t\t})\n\t\t\t.then(response => {\n\t\t\t\tthis.sourceContent(this.content()); // update source content\n\t\t\t\treturn response;\n\t\t\t});\n\t},\n\n\tmove(path, study){\n\t\tlet basePath = (path.substring(0, path.lastIndexOf('/')));\n\t\tlet folderExists = basePath === '/' || study.files().some(f => f.isDir && f.path === basePath);\n\n\t\tif (!folderExists) return Promise.reject({message: `Folder ${basePath} does not exist.`});\n\t\tif (study.files().some(f=>f.path === path)) return Promise.reject({message: `File ${path} already exists.`});\n\n\t\tlet oldPath = this.path;\n\t\tthis.setPath(path);\n\t\treturn fetchJson(this.apiUrl() + `/move/${encodeURIComponent(path)}`, {\n\t\t\tmethod:'post'\n\t\t})\n\t\t\t.then(response => {\n\t\t\t\tthis.id = response.id;\n\t\t\t\tthis.url = response.url;\n\t\t\t})\n\t\t\t.catch(response => {\n\t\t\t\tthis.setPath(oldPath);\n\t\t\t\treturn Promise.reject(response);\n\t\t\t});\n\t},\n\n\tdel(){\n\t\treturn fetchVoid(this.apiUrl(), {method:'delete'});\n\t},\n\n\n\thasChanged() {\n\t\treturn this.sourceContent() === this.content();\n\t},\n\n\tdefine(context = window){\n\t\tvar requirejs = context.requirejs;\n\t\tvar name = this.url;\n\t\tvar content = this.content();\n\n\t\treturn new Promise((resolve) => {\n\t\t\trequirejs.undef(name);\n\t\t\tcontext.eval(content.replace(`define(`,`define('` + name + `',`));\n\t\t\tresolve();\n\t\t});\n\t},\n\n\trequire(context = window){\n\t\tvar requirejs = context.requirejs;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\trequirejs([this.url], resolve,reject);\n\t\t});\n\t},\n\n\tcheckSyntax(){\n\t\tvar jshint = window.JSHINT;\n\t\tthis.syntaxValid = jshint(this.content(), jshintOptions);\n\t\tthis.syntaxData = jshint.data();\n\t\treturn this.syntaxValid;\n\t},\n\n\tsetPath(path = ''){\n\t\tthis.path = path;\n\t\tthis.name = path.substring(path.lastIndexOf('/')+1);\n\t\tthis.basePath = (path.substring(0, path.lastIndexOf('/'))) + '/';\n\t\tthis.type = path.substring(path.lastIndexOf('.')+1).toLowerCase();\n\t}\n};\n\nvar jshintOptions = {\n\t// JSHint Default Configuration File (as on JSHint website)\n\t// See http://jshint.com/docs/ for more details\n\n\t'curly'         : false,    // true: Require {} for every new block or scope\n\t'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n\t'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n\t'unused'        : 'vars',   // Unused variables:\n\t\t\t\t\t\t\t\t//   true     : all variables, last function parameter\n\t\t\t\t\t\t\t\t//   'vars'   : all variables only\n\t\t\t\t\t\t\t\t//   'strict' : all variables, all function parameters\n\t'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n\t'browser'       : true,     // Web Browser (window, document, etc)\n\t'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n\t// Custom Globals\n\tpredef: ['piGlobal','define','require','requirejs','angular']\n};\n\nconst fileFactory = fileObj => {\n\tlet file = Object.create(filePrototype);\n\tlet path = decodeURIComponent(fileObj.path);\n\n\n\tfile.setPath(path);\n\n\tObject.assign(file, fileObj, {\n\t\tid\t\t\t\t: fileObj.id,\n\t\tsourceContent\t: m.prop(fileObj.content || ''),\n\t\tcontent \t\t: contentProvider.call(file, fileObj.content || ''), // custom m.prop, alows checking syntax on change\n\n\t\t// keep track of loaded state\n\t\tloaded\t\t\t: false,\n\t\terror \t\t\t: false,\n\n\t\t// these are defined when calling checkSyntax\n\t\tsyntaxValid \t: undefined,\n\t\tsyntaxData \t\t: undefined\n\t});\n\n\tfile.content(fileObj.content || '');\n\n\tif (fileObj.files) file.files = fileObj.files.map(fileFactory).map(file => Object.assign(file, {studyId: fileObj.studyId}));\n\n\treturn file;\n\n\n\tfunction contentProvider (store) {\n\t\tvar prop = (...args) => {\n\t\t\tif (args.length) {\n\t\t\t\tstore = args[0];\n\t\t\t\tthis.type === 'js' && this.checkSyntax();\n\t\t\t}\n\t\t\treturn store;\n\t\t};\n\n\t\tprop.toJSON = () => store;\n\n\t\treturn prop;\n\t}\n};","import {fetchJson, fetchUpload} from 'utils/modelHelpers';\nimport fileFactory from './fileModel';\nexport default studyFactory;\n\nlet baseUrl = '/dashboard/dashboard';\n\nlet studyPrototype = {\n\tapiURL(path = ''){\n\t\treturn `${baseUrl}/files/${encodeURIComponent(this.id)}${path}`;\n\t},\n\n\tget(){\n\t\treturn fetchJson(this.apiURL())\n\t\t\t.then(study => {\n\t\t\t\tthis.loaded = true;\n\t\t\t\tlet files = flattenFiles(study.files)\n\t\t\t\t\t.map(assignStudyId(this.id))\n\t\t\t\t\t.map(fileFactory)\n\t\t\t\t\t.sort(sort);\n\n\t\t\t\tthis.files(files);\n\t\t\t})\n\t\t\t.catch(reason => {\n\t\t\t\tthis.error = true;\n\t\t\t\treturn Promise.reject(reason); // do not swallow error\n\t\t\t});\n\n\t\tfunction flattenFiles(files){\n\t\t\treturn files ? [].concat(...files.map(spreadFile)) : [];\n\t\t}\n\n\t\tfunction assignStudyId(id){\n\t\t\treturn f => Object.assign(f, {studyId: id});\n\t\t}\n\n\t\tfunction spreadFile(file){\n\t\t\treturn [file, ...flattenFiles(file.files)];\n\t\t}\n\n\t\tfunction sort(a,b){\n\t\t\t// sort by isDir then name\n\t\t\tlet nameA= +a.isDir + a.name.toLowerCase(), nameB=+b.isDir + b.name.toLowerCase();\n\t\t\tif (nameA < nameB) return -1;//sort string ascending\n\t\t\tif (nameA > nameB) return 1;\n\t\t\treturn 0; //default return value (no sorting)\n\t\t}\n\t},\n\n\tgetFile(id){\n\t\treturn this.files().find(f => f.id === id);\n\t},\n\n\tcreateFile({name, content='',isDir}){\n\t\treturn fetchJson(this.apiURL('/file'), {method:'post', body: {name, content, isDir}})\n\t\t\t.then(response => {\n\t\t\t\tObject.assign(response, {studyId: this.id, content, path:name, isDir});\n\t\t\t\tlet file = fileFactory(response);\n\t\t\t\tfile.loaded = true;\n\t\t\t\tthis.files().push(file);\n\t\t\t\treturn response;\n\t\t\t});\n\t},\n\n\tuploadFiles(path, files){\n\t\tlet paths = Array.from(files, file => path === '/' ? file.name : path + '/' + file.name);\n\t\tlet formData = buildFormData(path === '/' ? '' : path, files);\n\t\t// validation (make sure files do not already exist)\n\t\tlet exists = this.files().find(file => paths.includes(file.path));\n\t\tif (exists) return Promise.reject({message: `The file \"${exists.path}\" already exists`});\n\n\t\treturn fetchUpload(this.apiURL(`/upload/${path === '/' ? '' : path}`), {method:'post', body:formData})\n\t\t\t.then(response => {\n\t\t\t\tresponse.forEach(src => {\n\t\t\t\t\tlet file = fileFactory(src);\n\t\t\t\t\tthis.files().push(file);\n\t\t\t\t});\n\n\t\t\t\treturn response;\n\t\t\t});\n\n\t\tfunction buildFormData(path, files) {\n\t\t\tvar formData = new FormData;\n\t\t\t// formData.append('path', path);\n\n\t\t\t// for (let file in files) {\n\t\t\t// \tformData.append('files', files[file]);\n\t\t\t// }\n\n\t\t\tfor (let i = 0; i < files.length; i++) {\n\t\t\t\tformData.append(i, files[i]);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\t},\n\n\tdel(fileId){\n\t\tlet file = this.getFile(fileId);\n\t\treturn file.del()\n\t\t\t.then(() => {\n\t\t\t\tlet files = this.files()\n\t\t\t\t\t.filter(f => f.path.indexOf(file.path) !== 0); // all paths that start with the same path are deleted\n\t\t\t\tthis.files(files);\n\t\t\t});\n\t}\n};\n\nlet studyFactory = \tid =>{\n\tlet study = Object.create(studyPrototype);\n\tObject.assign(study, {\n\t\tid \t\t: id,\n\t\tfiles \t: m.prop([]),\n\t\tloaded \t: false,\n\t\terror \t:false\n\t});\n\n\treturn study;\n};\n","export default fullHeight;\nlet fullHeight = (element, isInitialized, ctx) => {\n\tif (!isInitialized){\n\t\tonResize();\n\n\t\twindow.addEventListener('resize', onResize, true);\n\n\t\tctx.onunload = function(){\n\t\t\twindow.removeEventListener('resize', onResize);\n\t\t};\n\n\t}\n\n\tfunction onResize(){\n\t\telement.style.height = document.documentElement.clientHeight - element.getBoundingClientRect().top + 'px';\n\t}\n};","export default imgEditor;\n\nlet imgEditor = ({file}) => m('div.img-editor.centrify', [\n\tm('img', {src:file.url})\n]);","export default pdfEditor;\n\nlet pdfEditor = ({file}) => m('object', {\n\tdata: file.url,\n\ttype: 'application/pdf',\n\twidth: '100%',\n\theight: '100%'\n});\n\n","export default unknownComponent;\n\nlet unknownComponent = () => m('.centrify', [\n\tm('i.fa.fa-file.fa-5x'),\n\tm('h5', 'Unknow file type')\n]);","export default messages;\n\nlet noop = ()=>{};\n\nlet messages = {\n\tvm: {isOpen: false},\n\n\topen: (type, opts={}) => {\n\t\tlet promise = new Promise((resolve, reject) => {\n\t\t\tmessages.vm = {resolve,reject,type, opts, isOpen:true};\n\t\t});\n\t\tm.redraw();\n\n\t\treturn promise;\n\t},\n\n\tclose: response => {\n\t\tlet vm = messages.vm;\n\t\tvm.isOpen = false;\n\t\tif (typeof vm.resolve === 'function') vm.resolve(response);\n\t\tm.redraw();\n\t},\n\n\tcustom: opts=>messages.open('custom', opts),\n\talert: opts => messages.open('alert', opts),\n\tconfirm: opts => messages.open('confirm', opts),\n\tprompt: opts => messages.open('prompt', opts),\n\n\tview: () => {\n\t\tlet vm = messages.vm;\n\t\tlet close = messages.close.bind(null, null);\n\t\tlet stopPropagation = e => e.stopPropagation();\n\t\treturn m('#messages.backdrop', [\n\t\t\t!vm || !vm.isOpen\n\t\t\t\t? ''\n\t\t\t\t:[\n\t\t\t\t\tm('.overlay', {config:messages.config()}),\n\t\t\t\t\tm('.backdrop-content', {onclick:close}, [\n\t\t\t\t\t\tm('.card', {class: vm.opts.wide ? 'col-sm-8' : 'col-sm-5', config:maxHeight}, [\n\t\t\t\t\t\t\tm('.card-block', {onclick: stopPropagation}, [\n\t\t\t\t\t\t\t\tmessages.views[vm.type](vm.opts)\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t]);\n\n\t},\n\n\tconfig: () => {\n\t\treturn (element, isInitialized, context) => {\n\t\t\tif (!isInitialized) {\n\t\t\t\tlet handleKey = function(e) {\n\t\t\t\t\tif (e.keyCode == 27) {\n\t\t\t\t\t\tmessages.close(null);\n\t\t\t\t\t}\n\t\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\t\tmessages.close(true);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tdocument.body.addEventListener('keyup', handleKey);\n\n\t\t\t\tcontext.onunload = function() {\n\t\t\t\t\tdocument.body.removeEventListener('keyup', handleKey);\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t},\n\n\tviews: {\n\t\tcustom: (opts={}) => opts.content,\n\n\t\talert: (opts={}) => {\n\t\t\tlet close = response => messages.close.bind(null, response);\n\t\t\treturn [\n\t\t\t\tm('h4', opts.header),\n\t\t\t\tm('p.card-text', opts.content),\n\t\t\t\tm('.text-xs-right.btn-toolbar',[\n\t\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n\t\t\t\t])\n\t\t\t];\n\t\t},\n\n\t\tconfirm: (opts={}) => {\n\t\t\tlet close = response => messages.close.bind(null, response);\n\t\t\treturn [\n\t\t\t\tm('h4', opts.header),\n\t\t\t\tm('p.card-text', opts.content),\n\t\t\t\tm('.text-xs-right.btn-toolbar',[\n\t\t\t\t\tm('a.btn.btn-secondary.btn-sm', {onclick:close(null)}, opts.okText || 'Cancel'),\n\t\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n\t\t\t\t])\n\t\t\t];\n\t\t},\n\n\t\t/**\n\t\t * Promise prompt(Object opts{header: String, content: String, name: Prop})\n\t\t *\n\t\t * where:\n\t\t *   any Prop(any value)\n\t\t */\n\t\tprompt: (opts={}) => {\n\t\t\tlet close = response => messages.close.bind(null, response);\n\t\t\tlet prop = opts.prop || noop;\n\t\t\treturn [\n\t\t\t\tm('h4', opts.header),\n\t\t\t\tm('.card-text', opts.content),\n\t\t\t\tm('.card-block', [\n\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\tvalue: prop(),\n\t\t\t\t\t\tonchange: m.withAttr('value', prop),\n\t\t\t\t\t\tconfig: (element, isInitialized) => {\n\t\t\t\t\t\t\tif (!isInitialized) element.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t]),\n\t\t\t\tm('.text-xs-right.btn-toolbar',[\n\t\t\t\t\tm('a.btn.btn-secondary.btn-sm', {onclick:close(null)}, opts.okText || 'Cancel'),\n\t\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:close(true)}, opts.okText || 'OK')\n\t\t\t\t])\n\t\t\t];\n\t\t}\n\t}\n};\n\n\n// set message max height, so that content can scroll within it.\nlet maxHeight = (element, isInitialized, ctx) => {\n\tif (!isInitialized){\n\t\tonResize();\n\n\t\twindow.addEventListener('resize', onResize, true);\n\n\t\tctx.onunload = function(){\n\t\t\twindow.removeEventListener('resize', onResize);\n\t\t};\n\n\t}\n\n\tfunction onResize(){\n\t\telement.style.maxHeight = document.documentElement.clientHeight * 0.9 + 'px';\n\t}\n\n};","import messages from 'utils/messagesComponent';\nexport default pipWizard;\nlet pipWizard = ({name, content}) => {\n\treturn messages.prompt({\n\t\theader: 'Create PIP',\n\t\tcontent: 'Please insert the file name:',\n\t\tprop: name\n\t})\n\t.then(response => {\n\t\tif (response) {\n\t\t\tcontent(template());\n\t\t}\n\t\treturn response;\n\t});\n};\n\nlet template = () => `define(['pipAPI','pipScorer'], function(APIConstructor,Scorer) {\n\n\tvar API = new APIConstructor();\n\tvar scorer = new Scorer();\n\n\t// add something to the current object\n\tAPI.addCurrent({});\n\n\t// set the base urls for images and templates\n\tAPI.addSettings('base_url',{\n\t\timage : '/my/folder/images',\n\t\ttemplate : '/my/folder/templates'\n\t});\n\n\t// base trial\n\tAPI.addTrialSets('base',{\n\t\tinput: [\n\t\t\t{handle:'space',on:'space'}\n\t\t],\n\n\t\tstimuli: [\n\t\t\t{media: 'Hello World!!'}\n\t\t],\n\n\t\tinteractions: [\n\t\t\t{\n\t\t\t\tconditions: [\n\t\t\t\t\t{type:'begin'}\n\t\t\t\t],\n\t\t\t\tactions: [\n\t\t\t\t\t{type:'showStim',handle:'All'}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tconditions: [\n\t\t\t\t\t{type:'inputEquals',value:'space'}\n\t\t\t\t],\n\t\t\t\tactions: [\n\t\t\t\t\t{type:'endTrial'}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t});\n\n\tAPI.addSequence([\n\t\t{\n\t\t\tmixer: 'random',\n\t\t\tdata: [\n\t\t\t\t{\n\t\t\t\t\tmixer: 'repeat',\n\t\t\t\t\ttimes: 10,\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{inherit:'base'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]);\n\n\treturn API.script;\n});`\n","import messages from 'utils/messagesComponent';\nexport default questWizard;\nlet questWizard = ({name, content}) => {\n\treturn messages.prompt({\n\t\theader: 'Create piQuest',\n\t\tcontent: 'Please insert the file name:',\n\t\tprop: name\n\t})\n\t.then(response => {\n\t\tif (response) {\n\t\t\tcontent(template());\n\t\t}\n\t\treturn response;\n\t});\n};\n\nlet template = () => `define(['questAPI'], function(Quest){\n\n\tvar API = new Quest();\n\n\tAPI.addSequence([\n\t\t{\n\t\t\theader: 'Hello World',\n\t\t\tquestions: [\n\t\t\t\t{\n\t\t\t\t\tname: 'pickaname',\n\t\t\t\t\ttype: 'selectOne',\n\t\t\t\t\tstem: 'What is you favorite color?',\n\t\t\t\t\tanswers: ['red', 'blue', 'green']\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]);\n\n\treturn API.script;\n});`;\n","import messages from 'utils/messagesComponent';\nexport default managerWizard;\nlet managerWizard = ({name, content}) => {\n\treturn messages.prompt({\n\t\theader: 'Create piManager',\n\t\tcontent: 'Please insert the file name:',\n\t\tprop: name\n\t})\n\t.then(response => {\n\t\tif (response) {\n\t\t\tcontent(template());\n\t\t}\n\t\treturn response;\n\t});\n};\n\nlet template = () => `define(['managerAPI'], function(Manager){\n\n    var API = new Manager();\n\n    API.addSequence([\n        {type:'message', template:'<h1>Hellow world</h1>', keys: ' '}\n    ]);\n\n    return API.script;\n});`;\n","import messages from 'utils/messagesComponent';\nimport pipWizard from './wizards/pipWizard';\nimport questWizard from './wizards/questWizard';\nimport managerWizard from './wizards/managerWizard';\n\nexport let uploadFiles = (path,study) => files => {\n\tstudy\n\t\t.uploadFiles(path, files)\n\t\t.catch(response => messages.alert({\n\t\t\theader: 'Upload File',\n\t\t\tcontent: response.message\n\t\t}))\n\t\t.then(m.redraw);\n};\n\n\nexport let moveFile = (file,study) => () => {\n\tlet newPath = m.prop(file.path);\n\treturn messages.prompt({\n\t\theader: 'Move/Rename File',\n\t\tprop: newPath\n\t})\n\t\t.then(response => {\n\t\t\tif (response) return moveAction(file,study);\n\t\t});\n\n\tfunction moveAction(file,study){\n\t\tlet def = file\n\t\t\t.move(newPath(),study) // the actual movement\n\t\t\t.catch(response => messages.alert({\n\t\t\t\theader: 'Move/Rename File',\n\t\t\t\tcontent: response.message\n\t\t\t}))\n\t\t\t.then(m.redraw); // redraw after server response\n\n\t\tm.redraw();\n\t\treturn def;\n\t}\n};\n\nexport let play = file => () => {\n\tlet playground;\n\n\tplayground = window.open('playground.html', 'Playground');\n\n\tplayground.onload = function(){\n\t\t// first set the unload listener\n\t\tplayground.addEventListener('unload', function() {\n\t\t\t// get focus back here\n\t\t\twindow.focus();\n\t\t});\n\n\t\t// then activate the player (this ensures that when )\n\t\tplayground.activate(file);\n\t\tplayground.focus();\n\t};\n};\n\nexport let save = file => () => {\n\tfile.save().catch(err => messages.alert({\n\t\theader: 'Error Saving:',\n\t\tcontent: err.message\n\t}));\n};\n\n\n// add trailing slash if needed, and then remove proceeding slash\n// return prop\nlet pathProp = path => m.prop(path.replace(/\\/?$/, '/').replace(/^\\//, ''));\n\nfunction create(study, name, content){\n\treturn response => {\n\t\tif (response) {\n\t\t\tstudy.createFile({name:name(), content:content()})\n\t\t\t\t.then(response => {\n\t\t\t\t\tm.route(`/editor/${study.id}/${encodeURIComponent(response.id)}`);\n\t\t\t\t\treturn response;\n\t\t\t\t})\n\t\t\t\t.catch(err => messages.alert({\n\t\t\t\t\theader: 'Failed to create file:',\n\t\t\t\t\tcontent: err.message\n\t\t\t\t}));\n\t\t}\n\t};\n}\n\nexport let createDir = (study, path='') => () => {\n\tlet name = pathProp(path);\n\n\tmessages.prompt({\n\t\theader: 'Create Directory',\n\t\tcontent: 'Please insert directory name',\n\t\tprop: name\n\t})\n\t\t.then(response => {\n\t\t\tif (response) return study.createFile({name:name(), isDir:true});\n\t\t})\n\t\t.then(m.redraw)\n\t\t.catch(err => messages.alert({\n\t\t\theader: 'Failed to create directory:',\n\t\t\tcontent: err.message\n\t\t}));\n};\n\nexport let createEmpty = (study, path = '') => () => {\n\tlet name = pathProp(path);\n\tlet content = ()=>'';\n\n\tmessages.prompt({\n\t\theader: 'Create file',\n\t\tcontent: 'Please insert the file name:',\n\t\tprop: name\n\t}).then(create(study, name,content));\n};\n\nexport let createPIP = (study, path = '') => () => {\n\tlet name = pathProp(path);\n\tlet content = m.prop();\n\tpipWizard({ name, content}).then(create(study, name, content));\n};\n\nexport let createQuest = (study, path = '') => () => {\n\tlet name = pathProp(path);\n\tlet content = m.prop();\n\tquestWizard({ name, content}).then(create(study, name, content));\n};\n\nexport let createManager = (study, path = '') => () => {\n\tlet name = pathProp(path);\n\tlet content = m.prop();\n\tmanagerWizard({ name, content}).then(create(study, name, content));\n};","import fullHeight from 'utils/fullHeight';\nexport default ace;\n\nlet ace = args => m.component(aceComponent, args);\n\nlet noop = function(){};\n\nlet aceComponent = {\n\tview: function editorView(ctrl, args){\n\t\treturn m('.editor', {config: aceComponent.config(args)});\n\t},\n\n\tconfig: function({content, settings = {}}){\n\t\treturn function(element, isInitialized, ctx){\n\t\t\tlet editor;\n\t\t\tlet mode = settings.mode || 'javascript';\n\n\t\t\tif (!isInitialized){\n\t\t\t\tfullHeight(element, isInitialized, ctx);\n\n\t\t\t\trequire(['ace/ace'], function(ace){\n\t\t\t\t\tace.config.set('packaged', true);\n\t\t\t\t\tace.config.set('basePath', require.toUrl('ace'));\n\n\t\t\t\t\teditor = ace.edit(element);\n\t\t\t\t\tlet commands = editor.commands;\n\n\t\t\t\t\teditor.setTheme('ace/theme/monokai');\n\t\t\t\t\teditor.getSession().setMode('ace/mode/' + mode);\n\t\t\t\t\tif (mode !== 'javascript') editor.getSession().setUseWorker(false);\n\t\t\t\t\teditor.setHighlightActiveLine(true);\n\t\t\t\t\teditor.setShowPrintMargin(false);\n\t\t\t\t\teditor.setFontSize('18px');\n\t\t\t\t\teditor.$blockScrolling = Infinity; // scroll to top\n\n\t\t\t\t\teditor.getSession().on('change', function(){\n\t\t\t\t\t\tm.startComputation();\n\t\t\t\t\t\tcontent(editor.getValue());\n\t\t\t\t\t\tm.endComputation();\n\t\t\t\t\t});\n\n\t\t\t\t\tcommands.addCommand({\n\t\t\t\t\t\tname: 'save',\n\t\t\t\t\t\tbindKey: {win: 'Ctrl-S', mac: 'Command-S'},\n\t\t\t\t\t\texec: settings.onSave || noop\n\t\t\t\t\t});\n\n\t\t\t\t\teditor.setValue(content());\n\n\t\t\t\t\tctx.onunload = () => editor.destroy();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\teditor && editor.setValue(content());\n\t\t};\n\t}\n};","export default syntax;\n\nlet syntax = args => m.component(syntaxComponent, args);\n\n/**\n * Syntax component\n * Takes an argument as follows:\n *\n * {valid: Boolean, data: jshint(script).data()}\n */\nvar syntaxComponent = {\n\n\t/**\n\t * Analyze script\n\t * @param  {String} script A script to analyze\n\t * @return {Object}\n\t * {\n\t *      isValid: Boolean,\n\t *      data: Object, // raw data\n\t *      errors: Array, // an array of analyzed errors\n\t *      errorCount: Number, // the number of errors\n\t *      warningCount: Number // the number of warnings\n\t * }\n\t */\n\tanalize: (isValid, data) => {\n\t\tvar errorCount = 0;\n\t\tvar warningCount = 0;\n\t\tvar errors = isValid ? [] : data.errors\n\t\t\t.filter(e => e) // clean null values\n\t\t\t.map(err => {\n\t\t\t\tvar isError = err.code && (err.code[0] === 'E');\n\n\t\t\t\tisError ? errorCount++ : warningCount++;\n\n\t\t\t\treturn {\n\t\t\t\t\tisError: isError,\n\t\t\t\t\tline: err.line,\n\t\t\t\t\tcol: err.character,\n\t\t\t\t\treason: err.reason,\n\t\t\t\t\tevidence: err.evidence\n\t\t\t\t};\n\t\t\t});\n\t\treturn {\n\t\t\tisValid: isValid,\n\t\t\tdata: data,\n\t\t\terrors : errors,\n\t\t\terrorCount: errorCount,\n\t\t\twarningCount: warningCount\n\t\t};\n\t},\n\n\tjshintOptions: {\n\t\t// JSHint Default Configuration File (as on JSHint website)\n\t\t// See http://jshint.com/docs/ for more details\n\n\t\t'curly'         : false,    // true: Require {} for every new block or scope\n\t\t'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n\t\t'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n\t\t'unused'        : 'vars',   // Unused variables:\n\t\t\t\t\t\t\t\t\t//   true     : all variables, last function parameter\n\t\t\t\t\t\t\t\t\t//   'vars'   : all variables only\n\t\t\t\t\t\t\t\t\t//   'strict' : all variables, all function parameters\n\t\t'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n\t\t'browser'       : true,     // Web Browser (window, document, etc)\n\t\t'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n\t\t// Custom Globals\n\t\tpredef: ['piGlobal','define','require','requirejs','angular']\n\t},\n\n\tcontroller:  args => {\n\t\tvar file = args.file;\n\t\treturn syntaxComponent.analize(file.syntaxValid, file.syntaxData);\n\t},\n\n\tview: ctrl => {\n\t\treturn m('div', [\n\t\t\tctrl.isValid\n\t\t\t\t?\n\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t])\n\t\t\t\t:\n\t\t\t\tm('div', [\n\t\t\t\t\tm('table.table', [\n\t\t\t\t\t\tm('tbody', ctrl.errors.map(err => {\n\t\t\t\t\t\t\treturn m('tr',[\n\t\t\t\t\t\t\t\tm('td.text-muted', `line ${err.line}`),\n\t\t\t\t\t\t\t\tm('td.text-muted', `col ${err.col}`),\n\t\t\t\t\t\t\t\tm('td', {class: err.isError ? 'text-danger' : 'text-info'}, err.reason),\n\t\t\t\t\t\t\t\tm('td',err.evidence)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}))\n\t\t\t\t\t]),\n\n\t\t\t\t\tm('.row',[\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.errorCount} critical errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-info'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-warning-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.warningCount} non standard syntax errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\n\t\t\t\t])\n\t\t]);\n\t}\n};\n","export function warn(message, test){\n\treturn {level:'warn', message: message, test:test};\n}\n\nexport function error(message, test){\n\treturn {level:'error', message: message, test:test};\n}\n\nexport function row(element, testArr){\n\tvar messages = flatten(testArr)\n\t\t.filter(msg => msg) // clean empty\n\t\t.filter(msg => typeof msg.test == 'function' ? msg.test(element) : !!msg.test); // run test...\n\n\treturn !messages.length ? null : {\n\t\telement: element,\n\t\tmessages: messages\n\t};\n}\n\nfunction flatten(arr) {\n\treturn arr.reduce(function (flat, toFlatten) {\n\t\treturn flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n\t}, []);\n}","function multiPick(arr, propArr){\n\treturn arr\n\t\t.map(e=> e && [].concat(e[propArr[0]], e[propArr[1]], e[propArr[2]])) // gather all stim arrays\n\t\t.reduce((previous, current)=>previous.concat(current),[]) // flatten arrays\n\t\t.filter(t=>t); // remove all undefined stim\n}\n\nfunction flattenSequence(sequence){\n\tfunction unMix(e){\n\t\treturn flattenSequence([].concat(e.data, e.elseData, (e.branches || []).map(e=>e.data)));\n\t}\n\n\treturn sequence\n\t\t.reduce((previous, current) => {return previous.concat(current && current.mixer ? unMix(current) : current);},[])\n\t\t.filter(t=>t); // remove all undefined stim;\n}\n\nfunction concatClean(){\n\tvar args = [].splice.call(arguments,0);\n\treturn [].concat.apply([], args).filter(e=>e);\n}\n\nexport function pipElements(script){\n\tvar trials, stimuli, media;\n\n\ttrials = concatClean(flattenSequence(script.sequence), script.trialSets);\n\tstimuli = concatClean(\n\t\tscript.stimulusSets,\n\t\tmultiPick(trials,['stimuli', 'layout'])\n\t);\n\tmedia = concatClean(\n\t\tscript.mediaSets,\n\t\tmultiPick(stimuli,['media','touchMedia'])\n\t);\n\n\treturn {trials:trials, stimuli:stimuli, media:media};\n}\n\nexport function questElements(script){\n\tvar pages, questions;\n\n\tpages = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\tquestions = [].concat(\n\t\tscript.questionsSets,\n\t\tflattenSequence(multiPick(pages,['questions']))\n\t).filter(t=>t);\n\n\treturn {pages:pages, questions:questions};\n}\n\nexport function managerElements(script){\n\tvar tasks;\n\n\ttasks = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\treturn {tasks:tasks};\n}","import {warn, error, row} from './messages';\nimport {pipElements} from './parser';\n\nexport default pipValidator;\n\nfunction pipValidator(script, url){\n\tvar errors = [];\n\tvar elements = pipElements(script);\n\n\terrors.push({type:'Settings',errors: checkSettings(script, url)});\n\terrors.push({type:'Trials',errors: filterMap(elements.trials, trialTest)});\n\t// errors.push({type:'Stimuli',errors: filterMap(elements.stimuli, stimuliTest)});\n\t// errors.push({type:'Media',errors: filterMap(elements.media, mediaTest)});\n\n\treturn errors;\n}\n\nfunction filterMap(arr, fn){\n\treturn arr.map(fn).filter(e=>e);\n}\n\n/**\n * Check settings\n * @param  {Object} script The script to be tested\n * @param  {String} url    The script origin URL\n * @return {Array}        Array of error rows\n */\nfunction checkSettings(script, url){\n\tvar settings = script.settings || {};\n\n\tvar w = byProp(warn);\n\t// var e = byProp(error);\n\n\tvar errors = [\n\t\tr('base_url', [\n\t\t\tw('Your base_url is not in the same directory as your script.', e => {\n\t\t\t\t// use this!!!\n\t\t\t\t// http://stackoverflow.com/questions/4497531/javascript-get-url-path\n\t\t\t\tvar getPath = url => {\n\t\t\t\t\tvar a = document.createElement('a');\n\t\t\t\t\ta.href = url;\n\t\t\t\t\treturn a.pathname;\n\t\t\t\t};\n\n\t\t\t\tvar path = getPath(url).substring(0, url.lastIndexOf('/') + 1); // get path but remove file name\n\t\t\t\tvar t = s => (!s || getPath(s).indexOf(path) !== 0);\n\n\t\t\t\treturn (typeof e == 'object') ? t(e.image) && t(e.template) : t(e);\n\t\t\t})\n\t\t])\n\t];\n\n\treturn errors.filter(function(err){return !!err;});\n\n\tfunction r(prop, arr){\n\t\tvar el = {};\n\t\tel[prop] = settings[prop];\n\t\treturn prop in settings && row(el, arr);\n\t}\n\n\t// wrap warn/error so that I don't have to individually\n\tfunction byProp(fn){\n\t\treturn function(msg, test){\n\t\t\treturn fn(msg, e => {\n\t\t\t\tfor (var prop in e) {\n\t\t\t\t\treturn test(e[prop]);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n}\n\nfunction trialTest(trial) {\n\tvar tests = [\n\t\ttestInteractions(trial.interactions),\n\t\ttestInput(trial.input)\n\t];\n\n\treturn row(trial, tests);\n\n\tfunction testInteractions(interactions){\n\t\tif (!interactions) {return;}\n\n\t\tif (!Array.isArray(interactions)){\n\t\t\treturn [error('Interactions must be an array.', true)];\n\t\t}\n\n\t\treturn  interactions.map((interaction, index) => {\n\t\t\treturn [\n\t\t\t\t!interaction.conditions ? error(`Interaction [${index}] must have conditions`, true) : [\n\t\t\t\t\terror(`Interaction conditon [${index}] must have a type`, toArray(interaction.conditions).some(c=>!c.type))\n\t\t\t\t],\n\t\t\t\t!interaction.actions ? error(`Interaction [${index}] must have actions`, true) : [\n\t\t\t\t\terror(`Interaction action [${index}] must have a type`, toArray(interaction.actions).some(a=>!a.type))\n\t\t\t\t]\n\t\t\t];\n\t\t});\n\n\n\t\tfunction toArray(arr){\n\t\t\treturn Array.isArray(arr) ? arr : [arr];\n\t\t}\n\n\t}\n\n\tfunction testInput(input){\n\t\tif (!input) {return;}\n\n\t\tif (!Array.isArray(trial.input)){\n\t\t\treturn [error('Input must be an Array', true)];\n\t\t}\n\n\t\treturn [\n\t\t\terror('Input must always have a handle', input.some(i=>!i.handle)),\n\t\t\terror('Input must always have an on attribute', input.some(i=>!i.on))\n\t\t];\n\t}\n}\n\nfunction stimuliTest(stim){\n\tvar tests = [];\n\treturn row(stim, tests);\n}\n\nfunction mediaTest(media){\n\tvar tests = [\n\n\t];\n\treturn row(media, tests);\n}","import messages from './messages';\nimport {questElements} from './parser';\n\nexport default function questValidator(script){\n\tvar errors = [];\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Pages', errors:[]});\n\terrors.push({type:'Questions', errors:[]});\n\n\treturn errors;\n}","\nimport {warn, error} from './messages';\nimport {managerElements} from './parser';\n\nexport default function managerValidator(script){\n\tvar errors = [];\n\tvar elements = managerElements(script);\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Tasks', errors:[]});\n\n\treturn errors;\n}\n\n\n\n","import pipValidate from './pipValidator';\nimport questValidate from './questValidator';\nimport managerValidate from './managerValidator';\n\nexport default function validate(script){\n\tvar type = script.type && script.type.toLowerCase();\n\tswitch (type){\n\tcase 'pip' : return pipValidate.apply(null, arguments);\n\tcase 'quest' : return questValidate.apply(null, arguments);\n\tcase 'manager' : return managerValidate.apply(null, arguments);\n\tdefault:\n\t\tthrow new Error('Unknown script.type: ' + type);\n\t}\n}\n\nexport function dd(){\n\treturn [\n\t\t{\n\t\t\ttype: 'task',\n\t\t\terrosrs:[],\n\t\t\terrors: [\n\t\t\t\t{\n\t\t\t\t\telement: {name:'myName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'error', message: 'error message1'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message2'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message3'},\n\t\t\t\t\t\t{level:'error', message: 'error message4'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\telement: {name:'otherName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'warn', message: 'warn message1'},\n\t\t\t\t\t\t{level:'error', message: 'error message2'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t];\n}\n","import validator from './parser/validator';\nexport default validate;\n\nlet validate = args => m.component(validateComponent, args);\n\nvar validateComponent = {\n\tcontroller: args => {\n\t\tvar file = args.file;\n\t\tvar ctrl = {\n\t\t\tvalidations : m.prop([]),\n\t\t\tisError: false\n\t\t};\n\n\t\tm.startComputation();\n\t\tfile\n\t\t\t.define()\n\t\t\t.then(()=>{\n\t\t\t\treturn file.require();\n\t\t\t})\n\t\t\t.then(script => {\n\t\t\t\tctrl.validations(validator(script, file.url));\n\t\t\t\tm.endComputation();\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tctrl.isError = true;\n\t\t\t\tm.endComputation();\n\t\t\t});\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn  m('div', [\n\t\t\t!ctrl.isError ? '' :\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t`There was a problem parsing this script. Are you sure that it is a valid PI script? Make sure you fix all syntax errors.`\n\t\t\t]),\n\n\t\t\tctrl.validations().map(validationReport => {\n\t\t\t\treturn [\n\t\t\t\t\tm('h4', validationReport.type),\n\t\t\t\t\t!validationReport.errors.length\n\t\t\t\t\t\t?\n\t\t\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t\t\t])\n\t\t\t\t\t\t:\n\t\t\t\t\t\tvalidationReport.errors.map(err => {\n\t\t\t\t\t\t\treturn m('.row',[\n\t\t\t\t\t\t\t\tm('.col-md-4.stringified',\n\t\t\t\t\t\t\t\t\tm('div', {class:'pre'}, m.trust(stringify(err.element)))\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tm('.col-md-8',[\n\t\t\t\t\t\t\t\t\tm('ul', err.messages.map(msg => {\n\t\t\t\t\t\t\t\t\t\treturn m('li.list-unstyled', {class: msg.level == 'error' ? 'text-danger' : 'text-info'}, [\n\t\t\t\t\t\t\t\t\t\t\tm('strong', msg.level),\n\t\t\t\t\t\t\t\t\t\t\tmsg.message\n\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t})\n\t\t\t\t];\n\t\t\t})\n\n\t\t]);\n\t}\n};\n\n\nfunction stringify(value, pretty) {\n\tif (value == null) { // null || undefined\n\t\treturn '<i class=\"text-muted\">undefined</i>';\n\t}\n\tif (value === '') {\n\t\treturn '<i class=\"text-muted\">an empty string</i>';\n\t}\n\n\tswitch (typeof value) {\n\t\tcase 'string':\n\t\t\tbreak;\n\t\tcase 'number':\n\t\t\tvalue = '' + value;\n\t\t\tbreak;\n\t\tcase 'object':\n\t\t\t// display the error message not the full thing...\n\t\t\tif (value instanceof Error){\n\t\t\t\tvalue = value.message;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t/* fall through */\n\t\tdefault:\n\t\t\t// @TODO: implement this: http://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript\n\t\t\tvalue = syntaxHighlight(JSON.stringify(value, null, 4));\n\t}\n\n\treturn value;\n}\n\n\nfunction syntaxHighlight(json) {\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        var cls = 'number';\n        if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n                cls = 'key';\n            } else {\n                cls = 'string';\n            }\n        } else if (/true|false/.test(match)) {\n            cls = 'boolean';\n        } else if (/null/.test(match)) {\n            cls = 'null';\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n}\n","import {play, save} from '../sidebar/fileActions';\n\nexport default textMenuView;\n\nlet textMenuView = ({mode, file}) => {\n\tlet setMode = value => () => mode(value);\n\tlet modeClass = value => mode() === value ? 'active' : '';\n\tlet isJs = file.type === 'js';\n\n\treturn m('.btn-toolbar', [\n\t\tm('.btn-group.btn-group-sm', [\n\t\t\t!isJs ? '' :  m('a.btn.btn-secondary', {onclick: play(file), title:'Play this task'},[\n\t\t\t\tm('strong.fa.fa-play')\n\t\t\t]),\n\n\t\t\tm('a.btn.btn-secondary', {onclick: save(file), title:'Save (ctrl+s)'},[\n\t\t\t\tm('strong.fa.fa-save')\n\t\t\t])\n\t\t]),\n\t\t!isJs ? '' : m('.btn-group.btn-group-sm.pull-xs-right', [\n\t\t\tm('a.btn.btn-secondary', {onclick: setMode('edit'), class: modeClass('edit')},[\n\t\t\t\tm('strong','Edit')\n\t\t\t]),\n\t\t\tm('a.btn.btn-secondary', {onclick: setMode('syntax'), class: modeClass('syntax')},[\n\t\t\t\tm('strong','Syntax')\n\t\t\t]),\n\t\t\tm('a.btn.btn-secondary', {onclick: setMode('validator'), class: modeClass('validator')},[\n\t\t\t\tm('strong','Validator')\n\t\t\t])\n\t\t])\n\t]);\n};\n\n","import {save} from '../sidebar/fileActions';\nimport ace from './ace/aceComponent';\n\nimport syntaxComponent from './ace/syntaxComponent';\nimport validatorComponent from './ace/validatorComponent';\n\nimport textMenu from './textMenu';\n\nexport default textEditor;\n\nlet textEditor = args => m.component(textEditorComponent, args);\n\nlet textEditorComponent = {\n\tcontroller: function({file}){\n\t\tfile.loaded || file.get()\n\t\t\t.then(m.redraw)\n\t\t\t.catch(m.redraw);\n\n\t\tlet ctrl = {mode:m.prop('edit')};\n\n\t\treturn ctrl;\n\t},\n\n\tview: function(ctrl, {file}){\n\n\t\tif (!file.loaded) return m('.loader');\n\n\t\tif (file.error) return m('div', {class:'alert alert-danger'}, [\n\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t`The file \"${file.path}\" was not found`\n\t\t]);\n\n\t\treturn m('.editor', [\n\t\t\ttextMenu({mode: ctrl.mode, file}),\n\t\t\ttextContent(ctrl, {file})\n\t\t]);\n\t}\n};\n\nlet textContent = (ctrl, {file}) => {\n\tlet textMode = modeMap[file.type] || 'javascript';\n\tswitch (ctrl.mode()){\n\tcase 'edit' : return ace({content:file.content, settings: {onSave: save, mode: textMode}});\n\tcase 'validator': return validatorComponent({file});\n\tcase 'syntax': return syntaxComponent({file});\n\t}\n};\n\nlet modeMap = {\n\tjs: 'javascript',\n\tjst: 'ejs',\n\thtml: 'ejs',\n\thtm: 'ejs',\n\txml: 'xml'\n};","import fullHeight from 'utils/fullHeight';\nimport imgEditor from './editors/imgEditor';\nimport pdfEditor from './editors/pdfEditor';\nimport unknowEditor from './editors/unknownEditor';\nimport textEditor from './editors/textEditor';\n\nexport default fileEditorComponent;\n\nlet editors = {\n\tjs: textEditor,\n\thtml: textEditor,\n\thtm: textEditor,\n\tjst: textEditor,\n\txml: textEditor,\n\n\tjpg: imgEditor,\n\tbmp: imgEditor,\n\tpng: imgEditor,\n\n\tpdf: pdfEditor\n};\n\nlet fileEditorComponent = {\n\tcontroller: function({study}) {\n\t\tvar id = m.route.param('fileID');\n\t\tvar file = study.getFile(id);\n\t\tvar ctrl = {\n\t\t\tfile: file\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\n\tview: (ctrl, args = {}) => {\n\t\tlet file = ctrl.file;\n\t\tlet editor = file && editors[file.type] || unknowEditor;\n\n\t\treturn m('div', {config:fullHeight}, [\n\t\t\tfile\n\t\t\t\t? editor({file:file, settings: args.settings})\n\t\t\t\t: m('.centrify', [\n\t\t\t\t\tm('i.fa.fa-smile-o.fa-5x'),\n\t\t\t\t\tm('h5', 'Please select a file to start working')\n\t\t\t\t])\n\t\t]);\n\t}\n};","// taken from here:\n// https://github.com/JedWatson/classnames/blob/master/index.js\nvar hasOwn = {}.hasOwnProperty;\n\nfunction classNames () {\n\tvar classes = '';\n\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\tvar arg = arguments[i];\n\t\tif (!arg) continue;\n\n\t\tvar argType = typeof arg;\n\n\t\tif (argType === 'string' || argType === 'number') {\n\t\t\tclasses += ' ' + arg;\n\t\t} else if (Array.isArray(arg)) {\n\t\t\tclasses += ' ' + classNames.apply(null, arg);\n\t\t} else if (argType === 'object') {\n\t\t\tfor (var key in arg) {\n\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\tclasses += ' ' + key;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classes.substr(1);\n}\n\nexport default classNames;\n","import classNames from './classNames';\nexport default contextMenuComponent;\n\n/**\n * Set this component into your layout then use any mouse event to open the context menu:\n * oncontextmenu: contextMenuComponent.open([...menu])\n *\n * Example menu:\n * [\n * \t{icon:'fa-play', text:'begone'},\n *\t{icon:'fa-play', text:'asdf'},\n *\t{separator:true},\n *\t{icon:'fa-play', text:'wertwert', menu: [\n *\t\t{icon:'fa-play', text:'asdf'}\n *\t]}\n * ]\n */\n\nlet contextMenuComponent = {\n\tvm: {\n\t\tshow: m.prop(false),\n\t\tstyle: m.prop({}),\n\t\tmenu: m.prop([\n\t\t])\n\t},\n\tview: () => {\n\t\treturn m(\n\t\t\t'.context-menu',\n\t\t\t{\n\t\t\t\tclass: classNames({'show-context-menu': contextMenuComponent.vm.show()}),\n\t\t\t\tstyle: contextMenuComponent.vm.style()\n\t\t\t},\n\t\t\tcontextMenuComponent.vm.menu().map(menuNode)\n\t\t);\n\t},\n\n\topen: menu => e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tcontextMenuComponent.vm.menu(menu);\n\t\tcontextMenuComponent.vm.show(true);\n\t\tcontextMenuComponent.vm.style({\n\t\t\tleft:e.pageX + 'px',\n\t\t\ttop:e.pageY + 'px'\n\t\t});\n\n\t\tdocument.addEventListener('mousedown', onClick, false);\n\t\tfunction onClick(){\n\t\t\tcontextMenuComponent.vm.show(false);\n\t\t\tdocument.removeEventListener('mousedown', onClick);\n\t\t\tm.redraw();\n\t\t}\n\t}\n};\n\nlet menuNode = (node, key) => {\n\treturn node.separator\n\t\t? m('.context-menu-separator', {key:key})\n\t\t: m('.context-menu-item', {class: classNames({disabled: node.disabled, submenu:node.menu, key: key})}, [\n\t\t\tm('button.context-menu-btn',{onmousedown: node.disabled || node.action}, [\n\t\t\t\tm('i.fa', {class:node.icon}),\n\t\t\t\tm('span.context-menu-text', node.text)\n\t\t\t]),\n\t\t\tnode.menu ? m('.context-menu', node.menu.map(menuNode)) : ''\n\t\t]);\n};","import contextMenu from 'utils/contextMenuComponent';\nimport messages from 'utils/messagesComponent';\nimport {createDir, createPIP, createQuest, createManager, createEmpty, moveFile} from './fileActions';\nexport default fileContext;\n\n// download support according to modernizer\nlet downloadSupport = !window.externalHost && 'download' in document.createElement('a');\n\nlet fileContext = (file, study) => {\n\tlet path = file.isDir ? file.path : file.basePath;\n\tlet menu = [\n\t\t// {icon:'fa-copy', text:'Duplicate', action: () => messages.alert({header:'Duplicate: ' + file.name, content:'Duplicate has not been implemented yet'})},\n\n\t\t{icon:'fa-folder', text:'New Folder', action: createDir(study, path)},\n\t\t{icon:'fa-file', text:'New File', action: createEmpty(study, path)},\n\t\t{icon:'fa-magic', text:'New from wizard', menu:[\n\t\t\t{text:'piPlayer', action: createPIP(study, path)},\n\t\t\t{text:'piQuest', action: createQuest(study, path)},\n\t\t\t{text:'piManager', action: createManager(study, path)}\n\t\t]},\n\t\t{separator:true},\n\t\t{icon:'fa-download', text:'Download', action: downloadFile},\n\n\t\t// {icon:'fa-clipboard', text:'Copy Url', action: () => alert('copy')},\n\t\t{icon:'fa-close', text:'Delete', action: deleteFile},\n\t\t{icon:'fa-exchange', text:'Move/Rename...', action: moveFile(file,study)}\n\t];\n\n\treturn contextMenu.open(menu);\n\n\tfunction downloadFile(){\n\t\tif (downloadSupport){\n\t\t\tlet link = document.createElement('a');\n\t\t\tlink.href = file.url;\n\t\t\tlink.download = file.name;\n\t\t\tlink.target = '_blank';\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link);\n\t\t} else {\n\t\t\tlet win = window.open(file.url, '_blank');\n\t\t\twin.focus();\n\t\t}\n\t}\n\n\tfunction deleteFile(){\n\t\tmessages.confirm({\n\t\t\theader:['Delete ',m('small', file.name)],\n\t\t\tcontent: 'Are you sure you want to delete this file? This action is permanent!'\n\t\t})\n\t\t.then(ok => {\n\t\t\tif (ok) return study.del(file.id);\n\t\t})\n\t\t.then(m.redraw)\n\t\t.catch( err => {\n\t\t\terr.response.json()\n\t\t\t\t.then(response => {\n\t\t\t\t\tmessages.alert({\n\t\t\t\t\t\theader: 'Delete failed:',\n\t\t\t\t\t\tcontent: response.message\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\treturn err;\n\t\t});\n\t} // end delete file\n};\n\n","const DRAGOVER_CLASS = 'is-dragover';\nfunction dragdrop(element, options) {\n\toptions = options || {};\n\n\telement.addEventListener('dragover', activate);\n\telement.addEventListener('dragleave', deactivate);\n\telement.addEventListener('dragend', deactivate);\n\telement.addEventListener('drop', deactivate);\n\telement.addEventListener('drop', update);\n\n\tfunction activate(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation(); // so that only the lowest level element gets focused\n\t\telement.classList.add(DRAGOVER_CLASS);\n\t}\n\tfunction deactivate() {\n\t\telement.classList.remove(DRAGOVER_CLASS);\n\t}\n\tfunction update(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tonchange(options)(e);\n\t}\n}\n\nexport let uploadConfig = ctrl => (element, isInitialized) => {\n\tif (!isInitialized) {\n\t\tdragdrop(element, {onchange: ctrl.onchange});\n\t}\n};\n\nexport let uploadBox = args => m('form.upload', {method:'post', enctype:'multipart/form-data', config:uploadConfig(args)},[\n\tm('i.fa.fa-download\t.fa-3x.m-b-1'),\n\tm('input.box__file', {id:'upload', type:'file', name:'files[]', 'data-multiple-caption':'{count} files selected', multiple:true, onchange:onchange(args)}),\n\tm('label', {for:'upload'},\n\t\tm('strong', 'Choose a file'),\n\t\tm('span', ' or drag it here')\n\t)\n]);\n\n// call onchange with files\nlet onchange = args => e => {\n\tif (typeof args.onchange == 'function') {\n\t\targs.onchange((e.dataTransfer || e.target).files);\n\t}\n};","import folder from './folderComponent';\nimport classNames from 'utils/classNames';\nimport fileContext from './fileContext';\nimport {uploadConfig} from 'utils/uploader';\nimport {uploadFiles} from './fileActions';\n\nexport default node;\n\nlet node = (file, args) => m.component(nodeComponent, file, args);\n\nlet nodeComponent = {\n\tcontroller: (file) => {\n\t\treturn {\n\t\t\tisCurrent: m.route.param('fileID') === file.id\n\t\t};\n\t},\n\tview: (ctrl, file, {folderHash, study, filesVM}) => {\n\t\tlet vm = filesVM(file.id); // vm is created by the study component, it exposes a \"isOpen\" and \"isChanged\" properties\n\t\treturn m('li.file-node',\n\t\t\t{\n\t\t\t\tkey: file.id,\n\t\t\t\tclass: classNames({\n\t\t\t\t\topen : vm.isOpen()\n\t\t\t\t}),\n\t\t\t\tonclick: file.isDir ? () => vm.isOpen(!vm.isOpen()) : choose(file),\n\t\t\t\toncontextmenu: fileContext(file, study),\n\t\t\t\tconfig: file.isDir ? uploadConfig({onchange:uploadFiles(file.path, study)}) : null\n\t\t\t},\n\t\t\t[\n\t\t\t\tm('a.wholerow', {\n\t\t\t\t\tunselectable:'on',\n\t\t\t\t\tclass:classNames({\n\t\t\t\t\t\t'current': ctrl.isCurrent\n\t\t\t\t\t})\n\t\t\t\t}, m.trust('&nbsp;')),\n\t\t\t\tm('i.fa.fa-fw', {\n\t\t\t\t\tclass: classNames({\n\t\t\t\t\t\t'fa-caret-right' : file.isDir && !vm.isOpen(),\n\t\t\t\t\t\t'fa-caret-down': file.isDir && vm.isOpen()\n\t\t\t\t\t})\n\t\t\t\t}),\n\n\t\t\t\tm('a', [\n\t\t\t\t\tm('i.fa.fa-fw.fa-file-o', {\n\t\t\t\t\t\tclass: classNames({\n\t\t\t\t\t\t\t'fa-file-code-o': /(js)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-file-text-o': /(jst|html|xml)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-file-image-o': /(jpg|png|bmp)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-file-pdf-o': /(pdf)$/.test(file.type),\n\t\t\t\t\t\t\t'fa-folder-o': file.isDir\n\t\t\t\t\t\t})\n\t\t\t\t\t}),\n\t\t\t\t\t` ${file.name}`,\n\t\t\t\t\tfile.isDir ? folder(file.path + '/', {folderHash, study, filesVM}) : ''\n\t\t\t\t])\n\t\t\t]\n\t\t);\n\t}\n};\n\nlet choose = (file) => e => {\n\te.stopPropagation();\n\te.preventDefault();\n\tm.route(`/editor/${file.studyId}/${encodeURIComponent(file.id)}`);\n};","import node from './nodeComponent';\nexport default folder;\n\nlet folder = (path, args) => m.component(folderComponent, path, args);\n\nlet folderComponent = {\n\tview(ctrl, path, {folderHash, study, filesVM}){\n\t\tlet files = folderHash[path] || [];\n\n\t\treturn m('.files',[\n\t\t\tm('ul', files.map(file => node(file, {folderHash, study, filesVM})))\n\t\t]);\n\t}\n};\n","import folderComponent from './folderComponent';\nimport {uploadConfig} from 'utils/uploader';\nimport {uploadFiles} from './fileActions';\nexport default filesComponent;\n\nlet currentStudy, filesVM;\n\n\nlet filesComponent = {\n\tcontroller(){\n\t\t// Create new VM only if we change study name\n\t\tlet studyId = m.route.param('studyId');\n\t\tif (!filesVM || (currentStudy !== studyId)){\n\t\t\tcurrentStudy = studyId;\n\t\t\tfilesVM = viewModelMap({\n\t\t\t\tisOpen: m.prop(false),\n\t\t\t\tisChanged: m.prop(false)\n\t\t\t});\n\t\t}\n\n\t\treturn {filesVM, parseFiles};\n\t},\n\tview({parseFiles, filesVM}, {study}){\n\t\tlet folderHash = parseFiles(study.files());\n\t\tlet config = uploadConfig({onchange:uploadFiles('/', study)});\n\t\treturn m('div', {config}, folderComponent('/', {folderHash, study, filesVM}));\n\t}\n};\n\n\n// http://lhorie.github.io/mithril-blog/mapping-view-models.html\nvar viewModelMap = function(signature) {\n\tvar map = {};\n\treturn function(key) {\n\t\tif (!map[key]) {\n\t\t\tmap[key] = {};\n\t\t\tfor (var prop in signature) map[key][prop] = m.prop(signature[prop]());\n\t\t}\n\t\treturn map[key];\n\t};\n};\n\nlet parseFiles = files => files.reduce((hash, file)=>{\n\tlet path = file.basePath;\n\tif (!hash[path]) hash[path] = [];\n\thash[path].push(file);\n\treturn hash;\n}, {});","import {createPIP, createQuest, createManager, createEmpty} from './fileActions';\nexport default sidebarButtons;\n\nlet sidebarButtons = {\n\tcontroller: ({study}) => {\n\t\tlet ctrl = {\n\t\t\tnewOpen: false,\n\t\t\ttoggleNew: () => ctrl.newOpen = !ctrl.newOpen,\n\t\t\tcreateEmpty: createEmpty(study),\n\t\t\tcreatePIP: createPIP(study),\n\t\t\tcreateQuest: createQuest(study),\n\t\t\tcreateManager: createManager(study)\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\n\tview: ctrl => {\n\t\treturn m('.btn-group', {class: ctrl.newOpen ? 'open' : ''}, [\n\t\t\tm('.btn.btn-sm.btn-secondary', {onclick:ctrl.createEmpty}, [\n\t\t\t\tm('i.fa.fa-plus'), ' New'\n\t\t\t]),\n\t\t\tm('.btn.btn-sm.btn-secondary.dropdown-toggle', {onclick:ctrl.toggleNew}),\n\t\t\tm('.dropdown-menu', {onclick: ctrl.toggleNew}, [\n\t\t\t\tm('a.dropdown-item', {onclick: ctrl.createPIP}, 'piPlayer'),\n\t\t\t\tm('a.dropdown-item', {onclick: ctrl.createQuest}, 'piQuest'),\n\t\t\t\tm('a.dropdown-item', {onclick: ctrl.createManager}, 'piManager')\n\t\t\t])\n\t\t]);\n\t}\n};","import filesComponent from './filesComponent';\nimport sidebarButtons from './sidebarButtons';\nimport {uploadBox} from 'utils/uploader';\nimport {uploadFiles} from './fileActions';\nexport default sidebarComponent;\n\nlet sidebarComponent = {\n\tview: (ctrl , {study, filesVM}) => {\n\t\treturn m('.sidebar', [\n\t\t\tm('h5', study.id),\n\t\t\tm.component(sidebarButtons, {study}),\n\t\t\tm.component(filesComponent, {study,filesVM, files: study.files() || []}),\n\t\t\tuploadBox({onchange: uploadFiles('/', study)})\n\t\t]);\n\t}\n};","export default editorLayoutComponent;\nimport studyFactory from './studyModel';\nimport editorComponent from './editorComponent';\nimport sidebarComponent from './sidebar/sidebarComponent';\n\nlet study, filesVM;\n\nlet editorLayoutComponent = {\n\tcontroller: ()=>{\n\t\tlet id = m.route.param('studyId');\n\n\t\tif (!study || (study.id !== id)){\n\t\t\tstudy = studyFactory(id);\n\t\t\tstudy\n\t\t\t\t.get()\n\t\t\t\t.then(m.redraw);\n\t\t}\n\n\t\tif (!filesVM) filesVM = viewModelMap({\n\t\t\tisOpen: m.prop(false),\n\t\t\tisChanged: m.prop(false)\n\t\t});\n\n\t\tlet ctrl = {study, filesVM, onunload: debounce(onunload,0, true)};\n\n\t\twindow.addEventListener('beforeunload', beforeunload);\n\n\n\t\treturn ctrl;\n\n\t\tfunction hasUnsavedData(){\n\t\t\treturn study.files().some(f => f.content() !== f.sourceContent());\n\t\t}\n\n\t\tfunction beforeunload(event) {\n\t\t\tif (hasUnsavedData()) return event.returnValue = 'You have unsaved data are you sure you want to leave?';\n\t\t}\n\n\t\t// this function needs to be debounced because of https://github.com/lhorie/mithril.js/issues/931\n\t\tfunction onunload(e){\n\t\t\tlet leavingEditor = () => !/^\\/editor\\//.test(m.route());\n\t\t\tif (leavingEditor() && hasUnsavedData() && !window.confirm('You have unsaved data are you sure you want to leave?')){\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\twindow.removeEventListener('beforeunload', beforeunload);\n\t\t\t}\n\t\t}\n\t},\n\tview: ctrl => {\n\t\tlet study = ctrl.study;\n\t\tlet filesVM = ctrl.filesVM;\n\t\treturn m('.row.study', [\n\t\t\tstudy.loaded\n\t\t\t\t? [\n\t\t\t\t\tm('.col-md-2', [\n\t\t\t\t\t\tm.component(sidebarComponent, {study, filesVM})\n\t\t\t\t\t]),\n\t\t\t\t\tm('.col-md-10',[\n\t\t\t\t\t\tm.component(editorComponent, {study, filesVM})\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t\t\t:\n\t\t\t\t''\n\t\t]);\n\t}\n};\n\n// http://lhorie.github.io/mithril-blog/mapping-view-models.html\nvar viewModelMap = function(signature) {\n\tvar map = {};\n\treturn function(key) {\n\t\tif (!map[key]) {\n\t\t\tmap[key] = {};\n\t\t\tfor (var prop in signature) map[key][prop] = m.prop(signature[prop]());\n\t\t}\n\t\treturn map[key];\n\t};\n};\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n\tvar timeout;\n\treturn function() {\n\t\tvar context = this, args = arguments;\n\t\tvar later = function() {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) func.apply(context, args);\n\t};\n}","import {fetchJson} from 'utils/modelHelpers';\nconst url = '/dashboard/StudyData';\n\nexport const STATUS_RUNNING = 'R';\nexport const STATUS_PAUSED = 'P';\nexport const STATUS_STOP = 'S';\n\nexport function createStudy(study){\n\tlet body = Object.assign({\n\t\taction:'insertRulesTable',\n\t\tcreationDate: new Date(),\n\t\tstudyStatus: STATUS_RUNNING\n\t}, study);\n\n\treturn fetchJson(url, {method: 'post', body: body})\n\t\t.then(interceptErrors);\n}\n\nexport function updateStudy(study){\n\tlet body = Object.assign({\n\t\taction:'updateRulesTable'\n\t}, study);\n\n\treturn  fetchJson(url, {method: 'post',body:body})\n\t\t.then(interceptErrors);\n}\n\nexport function updateStatus(study, status){\n\tlet body = Object.assign({\n\t\taction:'updateStudyStatus'\n\t}, study,{studyStatus: status});\n\n\treturn  fetchJson(url, {method: 'post',body:body})\n\t\t.then(interceptErrors);\n}\n\nexport function getAllPoolStudies(){\n\treturn fetchJson(url, {method:'post', body: {action:'getAllPoolStudies'}})\n\t\t.then(interceptErrors);\n}\n\nexport function getLast100PoolUpdates(){\n\treturn fetchJson(url, {method:'post', body: {action:'getLast100PoolUpdates'}})\n\t\t.then(interceptErrors);\n}\n\nexport function getStudyId(study){\n\tlet body = Object.assign({\n\t\taction:'getStudyId'\n\t}, study);\n\n\treturn  fetchJson(url, {method: 'post',body:body});\n}\n\nexport function resetStudy(study){\n\treturn fetchJson(url, {method:'post', body: Object.assign({action:'resetCompletions'}, study)})\n\t\t.then(interceptErrors);\n}\n\nfunction interceptErrors(response){\n\tif (!response.error){\n\t\treturn response;\n\t}\n\n\tlet errors = {\n\t\t1: 'This ID already exists.',\n\t\t2: 'The study could not be found.',\n\t\t3: 'The rule file could not be found.',\n\t\t4: 'The rules file does not fit the \"research\" schema.'\n\t};\n\n\treturn Promise.reject({message: errors[response.error]});\n}","export default spinner;\n\nlet spinner = {\n\tdisplay: m.prop(false),\n\tshow(response){\n\t\tspinner.display(true);\n\t\tm.redraw();\n\t\treturn response;\n\t},\n\thide(response){\n\t\tspinner.display(false);\n\t\tm.redraw();\n\t\treturn response;\n\t},\n\tview(){\n\t\treturn m('.backdrop', {hidden:!spinner.display()}, // spinner.show()\n\t\t\tm('.overlay'),\n\t\t\tm('.backdrop-content.spinner.icon.fa.fa-cog.fa-spin')\n\t\t);\n\t}\n};","import classNames from 'utils/classNames';\nimport messages from 'utils/messagesComponent';\nexport default editMessage;\n\n/**\n * Create edit component\n * Promise editMessage({input:Object, output:Prop})\n */\nlet editMessage = args => messages.custom({\n\tcontent: m.component(editComponent, Object.assign({close:messages.close}, args)),\n\twide: true\n});\n\nlet editComponent = {\n\tcontroller({input, output, close}){\n\t\tlet study = ['rulesUrl', 'targetCompletions', 'autopauseUrl', 'userEmail'].reduce((study, prop)=>{\n\t\t\tstudy[prop] = m.prop(input[prop] || '');\n\t\t\treturn study;\n\t\t}, {});\n\n\t\t// export study to calling component\n\t\toutput(study);\n\n\n\t\tlet ctrl = {\n\t\t\tstudy,\n\t\t\tsubmitAttempt: false,\n\t\t\tvalidity(){\n\t\t\t\tlet isEmail = str  => /\\S+@\\S+\\.\\S+/.test(str);\n\t\t\t\tlet isNormalInteger = str => /^\\+?(0|[1-9]\\d*)$/.test(str);\n\n\t\t\t\tlet response = {\n\t\t\t\t\trulesUrl: study.rulesUrl(),\n\t\t\t\t\ttargetCompletions: isNormalInteger(study.targetCompletions()),\n\t\t\t\t\tautopauseUrl: study.autopauseUrl(),\n\t\t\t\t\tuserEmail: isEmail(study.userEmail())\n\n\t\t\t\t};\n\t\t\t\treturn response;\n\t\t\t},\n\t\t\tok(){\n\t\t\t\tctrl.submitAttempt = true;\n\t\t\t\tlet response = ctrl.validity();\n\t\t\t\tlet isValid = Object.keys(response).every(key => response[key]);\n\n\t\t\t\tif (isValid) {\n\t\t\t\t\tstudy.targetCompletions(+study.targetCompletions());// targetCompletions should be cast as a number\n\t\t\t\t\tclose(true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\tclose(null);\n\t\t\t}\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\tview(ctrl, {input}){\n\t\tlet study = ctrl.study;\n\t\tlet validity = ctrl.validity();\n\t\tlet miniButtonView = (prop, name, url) => m('button.btn.btn-secondary.btn-sm', {onclick: prop.bind(null,url)}, name);\n\t\tlet validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n\t\tlet groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n\t\t\t'has-danger': !valid,\n\t\t\t'has-success' : valid\n\t\t});\n\t\tlet inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n\t\t\t'form-control-danger': !valid,\n\t\t\t'form-control-success': valid\n\t\t});\n\n\t\treturn m('div',[\n\t\t\tm('h4', 'Study Editor'),\n\t\t\tm('.card-block', [\n\t\t\t\tm('.form-group', [\n\t\t\t\t\tm('label', 'Study ID'),\n\t\t\t\t\tm('p',[\n\t\t\t\t\t\tm('strong.form-control-static', input.studyId)\n\t\t\t\t\t])\n\n\t\t\t\t]),\n\t\t\t\tm('.form-group', [\n\t\t\t\t\tm('label', 'Study URL'),\n\t\t\t\t\tm('p',[\n\t\t\t\t\t\tm('strong.form-control-static', input.studyUrl)\n\t\t\t\t\t])\n\t\t\t\t]),\n\n\t\t\t\tm('.form-group', {class:groupClasses(validity.rulesUrl)}, [\n\t\t\t\t\tm('label', 'Rules File URL'),\n\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\tconfig: focusConfig,\n\t\t\t\t\t\tplaceholder:'Rules file URL',\n\t\t\t\t\t\tvalue: study.rulesUrl(),\n\t\t\t\t\t\tonkeyup: m.withAttr('value', study.rulesUrl),\n\t\t\t\t\t\tclass:inputClasses(validity.rulesUrl)\n\t\t\t\t\t}),\n\t\t\t\t\tm('p.text-muted.btn-toolbar', [\n\t\t\t\t\t\tminiButtonView(study.rulesUrl, 'Priority26', '/research/library/rules/Priority26.xml')\n\t\t\t\t\t]),\n\t\t\t\t\tvalidationView(validity.rulesUrl, 'This row is required')\n\t\t\t\t]),\n\t\t\t\tm('.form-group', {class:groupClasses(validity.autopauseUrl)}, [\n\t\t\t\t\tm('label', 'Auto-pause file URL'),\n\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\tplaceholder:'Auto pause file URL',\n\t\t\t\t\t\tvalue: study.autopauseUrl(),\n\t\t\t\t\t\tonkeyup: m.withAttr('value', study.autopauseUrl),\n\t\t\t\t\t\tclass:inputClasses(validity.autopauseUrl)\n\t\t\t\t\t}),\n\t\t\t\t\tm('p.text-muted.btn-toolbar', [\n\t\t\t\t\t\tminiButtonView(study.autopauseUrl, 'Default', '/research/library/pausefiles/pausedefault.xml'),\n\t\t\t\t\t\tminiButtonView(study.autopauseUrl, 'Never', '/research/library/pausefiles/neverpause.xml'),\n\t\t\t\t\t\tminiButtonView(study.autopauseUrl, 'Low restrictions', '/research/library/pausefiles/pauselowrestrictions.xml')\n\t\t\t\t\t]),\n\t\t\t\t\tvalidationView(validity.autopauseUrl, 'This row is required')\n\t\t\t\t]),\n\t\t\t\tm('.form-group', {class:groupClasses(validity.targetCompletions)}, [\n\t\t\t\t\tm('label','Target number of sessions'),\n\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\ttype:'number',\n\t\t\t\t\t\tplaceholder:'Target Sessions',\n\t\t\t\t\t\tvalue: study.targetCompletions(),\n\t\t\t\t\t\tonkeyup: m.withAttr('value', study.targetCompletions),\n\t\t\t\t\t\tonclick: m.withAttr('value', study.targetCompletions),\n\t\t\t\t\t\tclass:inputClasses(validity.targetCompletions)\n\t\t\t\t\t}),\n\t\t\t\t\tvalidationView(validity.targetCompletions, 'This row is required and has to be an integer above 0')\n\t\t\t\t]),\n\t\t\t\tm('.form-group', {class:groupClasses(validity.userEmail)}, [\n\t\t\t\t\tm('label','User Email'),\n\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\ttype:'email',\n\t\t\t\t\t\tplaceholder:'Email',\n\t\t\t\t\t\tvalue: study.userEmail(),\n\t\t\t\t\t\tonkeyup: m.withAttr('value', study.userEmail),\n\t\t\t\t\t\tclass:inputClasses(validity.userEmail)\n\t\t\t\t\t}),\n\t\t\t\t\tvalidationView(validity.userEmail, 'This row is required and must be a valid Email')\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('.text-xs-right.btn-toolbar',[\n\t\t\t\tm('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'OK')\n\t\t\t])\n\t\t]);\n\t}\n};\n\nlet focusConfig = (element, isInitialized) => {\n\tif (!isInitialized) element.focus();\n};\n","import classNames from 'utils/classNames';\nimport messages from 'utils/messagesComponent';\nexport default createMessage;\n\n/**\n * Create edit component\n * Promise editMessage({output:Prop})\n */\nlet createMessage = args => messages.custom({\n\tcontent: m.component(createComponent, Object.assign({close:messages.close}, args)),\n\twide: true\n});\n\nlet createComponent = {\n\tcontroller({output, close}){\n\t\tlet study = output({\n\t\t\tstudyUrl: m.prop('')\n\t\t});\n\n\t\tlet ctrl = {\n\t\t\tstudy,\n\t\t\tsubmitAttempt: false,\n\t\t\tvalidity(){\n\t\t\t\tlet response = {\n\t\t\t\t\tstudyUrl: study.studyUrl()\n\t\t\t\t};\n\t\t\t\treturn response;\n\t\t\t},\n\t\t\tok(){\n\t\t\t\tctrl.submitAttempt = true;\n\t\t\t\tlet response = ctrl.validity();\n\t\t\t\tlet isValid = Object.keys(response).every(key => response[key]);\n\t\t\t\tif (isValid) close(true);\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\tclose(null);\n\t\t\t}\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\tview(ctrl){\n\t\tlet study = ctrl.study;\n\t\tlet validity = ctrl.validity();\n\t\tlet validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n\t\tlet groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n\t\t\t'has-danger': !valid,\n\t\t\t'has-success' : valid\n\t\t});\n\t\tlet inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n\t\t\t'form-control-danger': !valid,\n\t\t\t'form-control-success': valid\n\t\t});\n\n\t\treturn m('div',[\n\t\t\tm('h4', 'Create Study'),\n\t\t\tm('.card-block', [\n\t\t\t\tm('.form-group', {class:groupClasses(validity.studyUrl)}, [\n\t\t\t\t\tm('label', 'Study URL'),\n\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\tconfig: focusConfig,\n\t\t\t\t\t\tplaceholder:'Study URL',\n\t\t\t\t\t\tvalue: study.studyUrl(),\n\t\t\t\t\t\tonkeyup: m.withAttr('value', study.studyUrl),\n\t\t\t\t\t\tclass:inputClasses(validity.studyUrl)\n\t\t\t\t\t}),\n\t\t\t\t\tvalidationView(validity.studyUrl, 'This row is required')\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('.text-xs-right.btn-toolbar',[\n\t\t\t\tm('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'Proceed')\n\t\t\t])\n\t\t]);\n\t}\n};\n\nlet focusConfig = (element, isInitialized) => {\n\tif (!isInitialized) element.focus();\n};","import {updateStudy, createStudy, updateStatus, getStudyId, resetStudy, STATUS_RUNNING, STATUS_PAUSED, STATUS_STOP} from './poolModel';\nimport messages from 'utils/messagesComponent';\nimport spinner from 'utils/spinnerComponent';\nimport editMessage from './poolEditComponent';\nimport createMessage from './poolCreateComponent';\n\n\nexport function play(study){\n\treturn messages.confirm({\n\t\theader: 'Continue Study:',\n\t\tcontent: `Are you sure you want to continue \"${study.studyId}\"?`\n\t})\n\t.then(response => {\n\t\tif(response) {\n\t\t\tstudyPending(study, true)();\n\t\t\treturn updateStatus(study, STATUS_RUNNING)\n\t\t\t\t.then(()=>study.studyStatus = STATUS_RUNNING)\n\t\t\t\t.catch(reportError('Continue Study'))\n\t\t\t\t.then(studyPending(study, false));\n\t\t}\n\t});\n}\n\nexport function pause(study){\n\treturn messages.confirm({\n\t\theader: 'Pause Study:',\n\t\tcontent: `Are you sure you want to pause \"${study.studyId}\"?`\n\t})\n\t.then(response => {\n\t\tif(response) {\n\t\t\tstudyPending(study, true)();\n\t\t\treturn updateStatus(study, STATUS_PAUSED)\n\t\t\t\t.then(()=>study.studyStatus = STATUS_PAUSED)\n\t\t\t\t.catch(reportError('Pause Study'))\n\t\t\t\t.then(studyPending(study, false));\n\t\t}\n\t});\n}\n\nexport let remove  = (study, list) => {\n\treturn messages.confirm({\n\t\theader: 'Remove Study:',\n\t\tcontent: `Are you sure you want to remove \"${study.studyId}\" from the pool?`\n\t})\n\t.then(response => {\n\t\tif(response) {\n\t\t\tstudyPending(study, true)();\n\t\t\treturn updateStatus(study, STATUS_STOP)\n\t\t\t\t.then(() => list(list().filter(el => el !== study)))\n\t\t\t\t.catch(reportError('Remove Study'))\n\t\t\t\t.then(studyPending(study, false));\n\t\t}\n\t});\n};\n\nexport let edit  = (input) => {\n\tlet output = m.prop();\n\treturn editMessage({input, output})\n\t\t.then(response => {\n\t\t\tif (response) {\n\t\t\t\tstudyPending(input, true)();\n\t\t\t\tlet study = Object.assign({}, input, unPropify(output()));\n\t\t\t\treturn updateStudy(study)\n\t\t\t\t\t.then(() => Object.assign(input, study)) // update study in view\n\t\t\t\t\t.catch(reportError('Study Editor'))\n\t\t\t\t\t.then(studyPending(input, false));\n\t\t\t}\n\t\t});\n};\n\nexport let create = (list) => {\n\tlet output = m.prop();\n\treturn createMessage({output})\n\t\t.then(response => {\n\t\t\tif (response) {\n\t\t\t\tspinner.show();\n\t\t\t\tgetStudyId(output())\n\t\t\t\t\t.then(response => Object.assign(unPropify(output()), response)) // add response data to \"newStudy\"\n\t\t\t\t\t.then(spinner.hide)\n\t\t\t\t\t.then(editNewStudy);\n\t\t\t}\n\t\t});\n\n\tfunction editNewStudy(input){\n\t\tlet output = m.prop();\n\t\treturn editMessage({input, output})\n\t\t\t.then(response => {\n\t\t\t\tif (response) {\n\t\t\t\t\tlet study = Object.assign({\n\t\t\t\t\t\tstartedSessions: 0,\n\t\t\t\t\t\tcompletedSessions: 0,\n\t\t\t\t\t\tcreationDate:new Date(),\n\t\t\t\t\t\tstudyStatus: STATUS_RUNNING\n\t\t\t\t\t}, input, unPropify(output()));\n\t\t\t\t\treturn createStudy(study)\n\t\t\t\t\t\t.then(() => list().push(study))\n\t\t\t\t\t\t.then(m.redraw)\n\t\t\t\t\t\t.catch(reportError('Create Study'));\n\t\t\t\t}\n\t\t\t});\n\t}\n};\n\nexport let reset = study => {\n\tmessages.confirm({\n\t\theader: 'Restart study',\n\t\tcontent: 'Are you sure you want to restart this study? This action will reset all started and completed sessions.'\n\t}).then(response => {\n\t\tif (response) {\n\t\t\tlet old = {\n\t\t\t\tstartedSessions: study.startedSessions,\n\t\t\t\tcompletedSessions: study.completedSessions\n\t\t\t};\n\t\t\tstudy.startedSessions = study.completedSessions = 0;\n\t\t\tm.redraw();\n\t\t\treturn resetStudy(study)\n\t\t\t\t.catch(response => {\n\t\t\t\t\tObject.assign(study, old);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t})\n\t\t\t\t.catch(reportError('Restart study'));\n\t\t}\n\t});\n};\n\nlet reportError = header => err => messages.alert({header, content: err.message});\n\nlet studyPending = (study, state) => () => {\n\tstudy.$pending = state;\n\tm.redraw();\n};\n\nlet unPropify = obj => Object.keys(obj).reduce((result, key) => {\n\tresult[key] = obj[key]();\n\treturn result;\n}, {});","import {fetchJson,fetchVoid} from 'utils/modelHelpers';\n\nconst loginUrl = '/dashboard/dashboard/connect';\nconst logoutUrl = '/dashboard/logout';\n\nlet authorizeState = {};\n\nexport let isLoggedIn = () => !!authorizeState.isLoggedin;\nexport let getRole = () => authorizeState.role;\n\nexport function authorize(){\n\tauthorizeState = getAuth();\n}\n\nexport let login = (username, password) => fetchJson(loginUrl, {\n\tmethod: 'post',\n\tbody: {username, password}\n});\n\nexport let logout = () => fetchVoid(logoutUrl, {method:'post'});\n\nfunction getAuth(){\n\tvar cookieValue = decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\\s*)PiLogin\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1'));\n\ttry {\n\t\treturn cookieValue ? JSON.parse(cookieValue) : {};\n\t} catch (e) {\n\t\tsetTimeout(()=>{throw e;});\n\t\treturn {};\n\t}\n}","export default function sortTable(listProp, sortByProp) {\n\treturn function(e) {\n\t\tlet prop = e.target.getAttribute('data-sort-by');\n\t\tlet list = listProp();\n\t\tif (prop) {\n\t\t\tif (typeof sortByProp == 'function') sortByProp(prop); // record property so that we can change style accordingly\n\t\t\tvar first = list[0];\n\t\t\tlist.sort(function(a, b) {\n\t\t\t\treturn a[prop] > b[prop] ? 1 : a[prop] < b[prop] ? -1 : 0;\n\t\t\t});\n\t\t\tif (first === list[0]) list.reverse();\n\t\t}\n\t};\n}\n","export default function formatDate(date){\n\tlet pad = num => num < 10 ? '0' + num : num;\n\treturn `${pad(date.getMonth() + 1)}\\\\${pad(date.getDate())}\\\\${date.getFullYear()}`;\n}\n","import {getAllPoolStudies, STATUS_PAUSED, STATUS_RUNNING} from './poolModel';\nimport {play, pause, remove, edit, create, reset} from './poolActions';\nimport {getRole} from 'login/authModel';\nimport sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\nexport default poolComponent;\n\nconst PRODUCTION_URL = 'https://implicit.harvard.edu/implicit/';\nconst TABLE_WIDTH = 8;\n\nlet poolComponent = {\n\tcontroller: () => {\n\t\tconst ctrl = {\n\t\t\tplay: play,\n\t\t\tpause: pause,\n\t\t\tremove: remove,\n\t\t\tedit: edit,\n\t\t\treset: reset,\n\t\t\tcreate: create,\n\t\t\tcanCreate: () => getRole() === 'SU',\n\t\t\tlist: m.prop([]),\n\t\t\tglobalSearch: m.prop(''),\n\t\t\tsortBy: m.prop(),\n\t\t\terror: m.prop('')\n\t\t};\n\n\t\tgetAllPoolStudies()\n\t\t\t.then(ctrl.list)\n\t\t\t.catch(ctrl.error)\n\t\t\t.then(m.redraw);\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\tlet list = ctrl.list;\n\t\treturn m('.pool', [\n\t\t\tm('h2', 'Study pool'),\n\t\t\tctrl.error()\n\t\t\t\t?\n\t\t\t\tm('.alert.alert-warning',\n\t\t\t\t\tm('strong', 'Warning!! '), ctrl.error().message\n\t\t\t\t)\n\t\t\t\t:\n\t\t\t\tm('table', {class:'table table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n\t\t\t\t\tm('thead', [\n\t\t\t\t\t\tm('tr', [\n\t\t\t\t\t\t\tm('th', {colspan:TABLE_WIDTH - 1}, [\n\t\t\t\t\t\t\t\tm('input.form-control', {placeholder: 'Global Search ...', onkeyup: m.withAttr('value', ctrl.globalSearch)})\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tm('th', [\n\t\t\t\t\t\t\t\tm('a.btn.btn-secondary', {href:'/pool/history', config:m.route}, [\n\t\t\t\t\t\t\t\t\tm('i.fa.fa-history'), '  History'\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tctrl.canCreate() ? m('tr', [\n\t\t\t\t\t\t\tm('th.text-xs-center', {colspan:TABLE_WIDTH}, [\n\t\t\t\t\t\t\t\tm('button.btn.btn-secondary', {onclick:ctrl.create.bind(null, list)}, [\n\t\t\t\t\t\t\t\t\tm('i.fa.fa-plus'), '  Add new study'\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]) : '',\n\t\t\t\t\t\tm('tr', [\n\t\t\t\t\t\t\tm('th', thConfig('studyId',ctrl.sortBy), 'ID'),\n\t\t\t\t\t\t\tm('th', thConfig('studyUrl',ctrl.sortBy), 'Study'),\n\t\t\t\t\t\t\tm('th', thConfig('rulesUrl',ctrl.sortBy), 'Rules'),\n\t\t\t\t\t\t\tm('th', thConfig('autopauseUrl',ctrl.sortBy), 'Autopause'),\n\t\t\t\t\t\t\tm('th', thConfig('completedSessions',ctrl.sortBy), 'Completion'),\n\t\t\t\t\t\t\tm('th', thConfig('creationDate',ctrl.sortBy), 'Date'),\n\t\t\t\t\t\t\tm('th','Status'),\n\t\t\t\t\t\t\tm('th','Actions')\n\t\t\t\t\t\t])\n\t\t\t\t\t]),\n\t\t\t\t\tm('tbody', [\n\t\t\t\t\t\tlist().length === 0\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\tm('tr.table-info',\n\t\t\t\t\t\t\t\tm('td.text-xs-center', {colspan: TABLE_WIDTH},\n\t\t\t\t\t\t\t\t\tm('strong', 'Heads up! '), 'There are no pool studies yet'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tlist().filter(studyFilter(ctrl)).map(study => m('tr', [\n\t\t\t\t\t\t\t\t// ### ID\n\t\t\t\t\t\t\t\tm('td', study.studyId),\n\n\t\t\t\t\t\t\t\t// ### Study url\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\tm('a', {href:PRODUCTION_URL + study.studyUrl, target: '_blank'}, 'Study')\n\t\t\t\t\t\t\t\t]),\n\n\t\t\t\t\t\t\t\t// ### Rules url\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\tm('a', {href:PRODUCTION_URL + study.rulesUrl, target: '_blank'}, 'Rules')\n\t\t\t\t\t\t\t\t]),\n\n\t\t\t\t\t\t\t\t// ### Autopause url\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\tm('a', {href:PRODUCTION_URL + study.autopauseUrl, target: '_blank'}, 'Autopause')\n\t\t\t\t\t\t\t\t]),\n\n\t\t\t\t\t\t\t\t// ### Completions\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\t(100 * study.completedSessions / study.targetCompletions).toFixed(1) + '% ',\n\t\t\t\t\t\t\t\t\tm('i.fa.fa-info-circle'),\n\t\t\t\t\t\t\t\t\tm('.card.info-box', [\n\t\t\t\t\t\t\t\t\t\tm('.card-header', 'Completion Details'),\n\t\t\t\t\t\t\t\t\t\tm('ul.list-group.list-group-flush',[\n\t\t\t\t\t\t\t\t\t\t\tm('li.list-group-item', [\n\t\t\t\t\t\t\t\t\t\t\t\tm('strong', 'Target Completions: '), study.targetCompletions\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\tm('li.list-group-item', [\n\t\t\t\t\t\t\t\t\t\t\t\tm('strong', 'Started Sessions: '), study.startedSessions\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\tm('li.list-group-item', [\n\t\t\t\t\t\t\t\t\t\t\t\tm('strong', 'Completed Sessions: '), study.completedSessions\n\t\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t]),\n\n\t\t\t\t\t\t\t\t// ### Date\n\t\t\t\t\t\t\t\tm('td', formatDate(new Date(study.creationDate))),\n\n\t\t\t\t\t\t\t\t// ### Status\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tR: m('span.label.label-success', 'Running'),\n\t\t\t\t\t\t\t\t\t\tP: m('span.label.label-info', 'Paused'),\n\t\t\t\t\t\t\t\t\t\tS: m('span.label.label-danger', 'Stopped')\n\t\t\t\t\t\t\t\t\t}[study.studyStatus]\n\t\t\t\t\t\t\t\t]),\n\n\t\t\t\t\t\t\t\t// ### Actions\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\tstudy.$pending\n\t\t\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t\t\t\tm('.l', 'Loading...')\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\tm('.btn-group', [\n\t\t\t\t\t\t\t\t\t\t\tstudy.canUnpause && study.studyStatus === STATUS_PAUSED ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.play.bind(null, study)}, [\n\t\t\t\t\t\t\t\t\t\t\t\tm('i.fa.fa-play')\n\t\t\t\t\t\t\t\t\t\t\t]) : '',\n\t\t\t\t\t\t\t\t\t\t\tstudy.canPause && study.studyStatus === STATUS_RUNNING ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.pause.bind(null, study)}, [\n\t\t\t\t\t\t\t\t\t\t\t\tm('i.fa.fa-pause')\n\t\t\t\t\t\t\t\t\t\t\t]) : '',\n\t\t\t\t\t\t\t\t\t\t\tm('button.btn.btn-sm.btn-secondary', {onclick: ctrl.edit.bind(null, study)}, [\n\t\t\t\t\t\t\t\t\t\t\t\tm('i.fa.fa-edit')\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\tstudy.canReset ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.reset.bind(null, study)}, [\n\t\t\t\t\t\t\t\t\t\t\t\tm('i.fa.fa-refresh')\n\t\t\t\t\t\t\t\t\t\t\t]) : '',\n\t\t\t\t\t\t\t\t\t\t\tstudy.canStop ? m('button.btn.btn-sm.btn-secondary', {onclick: ctrl.remove.bind(null, study, list)}, [\n\t\t\t\t\t\t\t\t\t\t\t\tm('i.fa.fa-close')\n\t\t\t\t\t\t\t\t\t\t\t]) : ''\n\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t]))\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t]);\n\t}\n};\n\n// @TODO: bad idiom! should change things within the object, not the object itself.\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nfunction studyFilter(ctrl){\n\treturn study =>\n\t\tincludes(study.studyId, ctrl.globalSearch()) ||\n\t\tincludes(study.studyUrl, ctrl.globalSearch()) ||\n\t\tincludes(study.rulesUrl, ctrl.globalSearch());\n\n\tfunction includes(val, search){\n\t\treturn typeof val === 'string' && val.includes(search);\n\t}\n}","// import $ from 'jquery';\nlet Pikaday = window.Pikaday;\n\nexport let datePicker = (prop, options) => m.component(pikaday, {prop,options});\nexport let dateRangePicker = args => m.component(pikadayRange, args);\n\nlet pikaday = {\n\tview(ctrl, {prop, options}){\n\t\treturn m('div', {config: pikaday.config(prop, options)});\n\t},\n\tconfig(prop, options){\n\t\treturn (element, isInitialized, ctx) => {\n\t\t\tif (!isInitialized){\n\t\t\t\tctx.picker = new Pikaday(Object.assign({\n\t\t\t\t\tonSelect: prop,\n\t\t\t\t\tcontainer: element\n\t\t\t\t},options));\n\n\t\t\t\telement.appendChild(ctx.picker.el);\n\t\t\t}\n\n\t\t\tctx.picker.setDate(prop());\n\t\t};\n\t}\n};\n\n/**\n * args = {\n * \tstartValue: m.prop,\n *  endValue: m.prop,\n *  options: Object // specific daterange plugin options\n * }\n */\n\nlet pikadayRange = {\n\tview: function(ctrl, args){\n\t\treturn m('.date-range',[\n\t\t\tm('.figure', [\n\t\t\t\tm('strong','Start Date'),\n\t\t\t\tm('br'),\n\t\t\t\tm('.figure', {config:pikadayRange.configStart(args)})\n\t\t\t]),\n\t\t\tm.trust('&nbsp;'),\n\t\t\tm('.figure', [\n\t\t\t\tm('strong','End Date'),\n\t\t\t\tm('br'),\n\t\t\t\tm('.figure', {config:pikadayRange.configEnd(args)})\n\t\t\t])\n\t\t]);\n\t},\n\tconfigStart({startDate, endDate}){\n\t\treturn (element, isInitialized, ctx) => {\n\t\t\tlet picker = ctx.picker;\n\n\t\t\tif (!isInitialized){\n\t\t\t\tpicker = ctx.picker = new Pikaday({\n\t\t\t\t\tmaxDate: new Date(),\n\t\t\t\t\tonSelect: date => startDate(date) && update() || m.redraw()\n\t\t\t\t});\n\t\t\t\telement.appendChild(picker.el);\n\n\t\t\t\tctx.onunload = picker.destroy.bind(picker);\n\t\t\t\tpicker.setDate(startDate());\n\t\t\t}\n\n\t\t\t// resset picker date only if the date has changed externaly\n\t\t\tif (!datesEqual(startDate() ,picker.getDate())){\n\t\t\t\tpicker.setDate(startDate(),true);\n\t\t\t\tupdate();\n\t\t\t}\n\n\t\t\tfunction update(){\n\t\t\t\tpicker.setStartRange(startDate());\n\t\t\t\tpicker.setEndRange(endDate());\n\t\t\t\tpicker.setMaxDate(endDate());\n\t\t\t}\n\t\t};\n\t},\n\tconfigEnd({startDate, endDate}){\n\t\treturn (element, isInitialized, ctx) => {\n\t\t\tlet picker = ctx.picker;\n\n\t\t\tif (!isInitialized){\n\t\t\t\tpicker = ctx.picker = new Pikaday({\n\t\t\t\t\tmaxDate: new Date(),\n\t\t\t\t\tonSelect: date => endDate(date) && update() || m.redraw()\n\t\t\t\t});\n\t\t\t\telement.appendChild(picker.el);\n\n\t\t\t\tctx.onunload = picker.destroy.bind(picker);\n\t\t\t\tpicker.setDate(endDate());\n\t\t\t}\n\n\t\t\t// resset picker date only if the date has changed externaly\n\t\t\tif (!datesEqual(endDate() ,picker.getDate())){\n\t\t\t\tpicker.setDate(endDate(),true);\n\t\t\t\tupdate();\n\t\t\t}\n\n\t\t\tfunction update(){\n\t\t\t\tpicker.setStartRange(startDate());\n\t\t\t\tpicker.setEndRange(endDate());\n\t\t\t\tpicker.setMinDate(startDate());\n\t\t\t}\n\t\t};\n\t}\n};\n\nlet datesEqual = (date1, date2) => date1 instanceof Date && date2 instanceof Date && date1.getTime() === date2.getTime();","import {getLast100PoolUpdates} from './poolModel';\nimport {dateRangePicker} from 'utils/dateRange';\nimport sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\nexport default poolComponent;\n\nlet poolComponent = {\n\tcontroller: () => {\n\t\tconst ctrl = {\n\t\t\tlist: m.prop([]),\n\t\t\tglobalSearch: m.prop(''),\n\t\t\tstartDate: m.prop(new Date(0)),\n\t\t\tendDate: m.prop(new Date()),\n\t\t\tsortBy: m.prop()\n\t\t};\n\n\t\tgetLast100PoolUpdates()\n\t\t\t.then(ctrl.list)\n\t\t\t.then(m.redraw);\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\tlet list = ctrl.list;\n\t\treturn m('.pool', [\n\t\t\tm('h2', 'Pool history'),\n\t\t\tm('table', {class:'table table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n\t\t\t\tm('thead', [\n\t\t\t\t\tm('tr', [\n\t\t\t\t\t\tm('th.row', {colspan:8}, [\n\t\t\t\t\t\t\tm('.col-sm-4',\n\t\t\t\t\t\t\t\tm('input.form-control', {placeholder: 'Global Search ...', onkeyup: m.withAttr('value', ctrl.globalSearch)})\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tm('.col-sm-8',\n\t\t\t\t\t\t\t\tdateRangePicker(ctrl),\n\t\t\t\t\t\t\t\tm('.btn-group-vertical.history-button-group',[\n\t\t\t\t\t\t\t\t\tdayButtonView(ctrl, 'Last 7 Days', 7),\n\t\t\t\t\t\t\t\t\tdayButtonView(ctrl, 'Last 30 Days', 30),\n\t\t\t\t\t\t\t\t\tdayButtonView(ctrl, 'Last 90 Days', 90),\n\t\t\t\t\t\t\t\t\tdayButtonView(ctrl, 'All times', 3650)\n\t\t\t\t\t\t\t\t])\n\n\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t])\n\t\t\t\t\t]),\n\t\t\t\t\tm('tr', [\n\t\t\t\t\t\tm('th', thConfig('studyId',ctrl.sortBy), 'ID'),\n\t\t\t\t\t\tm('th', thConfig('updaterId',ctrl.sortBy), 'Updater'),\n\t\t\t\t\t\tm('th', thConfig('creationDate',ctrl.sortBy), 'Creation Date'),\n\t\t\t\t\t\tm('th','New Status')\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\tm('tbody', [\n\t\t\t\t\tlist().filter(studyFilter(ctrl)).map(study => m('tr', [\n\t\t\t\t\t\t// ### ID\n\t\t\t\t\t\tm('td', study.studyId),\n\n\t\t\t\t\t\tm('td', study.updaterId),\n\n\t\t\t\t\t\t// ### Date\n\t\t\t\t\t\tm('td', formatDate(new Date(study.creationDate))),\n\n\t\t\t\t\t\t// ### Status\n\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tR: m('span.label.label-success', 'Running'),\n\t\t\t\t\t\t\t\tP: m('span.label.label-info', 'Paused'),\n\t\t\t\t\t\t\t\tS: m('span.label.label-danger', 'Stopped')\n\t\t\t\t\t\t\t}[study.newStatus]\n\t\t\t\t\t\t])\n\t\t\t\t\t]))\n\t\t\t\t])\n\t\t\t])\n\t\t]);\n\t}\n};\n\n// @TODO: bad idiom! should change things within the object, not the object itself.\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nfunction studyFilter(ctrl){\n\treturn study =>\n\t\t(includes(study.studyId, ctrl.globalSearch()) ||\tincludes(study.updaterId, ctrl.globalSearch()) || includes(study.rulesUrl, ctrl.globalSearch()))\n\t\t&& (new Date(study.creationDate)).getTime() >= ctrl.startDate().getTime()\n\t\t&& (new Date(study.creationDate)).getTime() <= ctrl.endDate().getTime();\n\n\tfunction includes(val, search){\n\t\treturn typeof val === 'string' && val.includes(search);\n\t}\n}\n\nlet dayButtonView = (ctrl, name, days) => m('button.btn.btn-secondary.btn-sm', {onclick: () => {\n\tlet d = new Date();\n\td.setDate(d.getDate() - days);\n\tctrl.startDate(d);\n\tctrl.endDate(new Date());\n}}, name);","import {fetchJson, fetchVoid} from 'utils/modelHelpers';\nconst url = '/dashboard/DashboardData';\n\nexport const STATUS_RUNNING = 'R';\nexport const STATUS_COMPLETE = 'C';\nexport const STATUS_ERROR = 'X';\n\nexport let getAllDownloads = () => fetchJson(url, {\n\tmethod:'post',\n\tbody: {action:'getAllDownloads'}\n}).then(interceptErrors);\n\nexport let removeDownload = download => fetchVoid(url, {\n\tmethod:'post',\n\tbody: Object.assign({action:'removeDownload'}, download)\n}).then(interceptErrors);\n\nexport let createDownload = download => fetchJson(url, {\n\tmethod: 'post',\n\tbody: Object.assign({action:'download'}, download)\n}).then(interceptErrors);\n\n\n\nfunction interceptErrors(response){\n\tif (!response || !response.error){\n\t\treturn response;\n\t}\n\n\treturn Promise.reject({message: response.msg});\n}","import messages from 'utils/messagesComponent';\nimport {dateRangePicker} from 'utils/dateRange';\nimport classNames from 'utils/classNames';\n\nexport default args => messages.custom({\n\tcontent: m.component(createComponent, Object.assign({close:messages.close}, args)),\n\twide: true\n});\n\n\nlet createComponent = {\n\tcontroller({output, close}){\n\t\tlet download ={\n\t\t\tstudyId: m.prop(''),\n\t\t\tdb: m.prop('test'),\n\t\t\tstartDate: m.prop(new Date(0)),\n\t\t\tendDate: m.prop(new Date())\n\t\t};\n\n\t\t// export study to calling component\n\t\toutput(download);\n\n\n\t\tlet ctrl = {\n\t\t\tdownload,\n\t\t\tsubmitAttempt: false,\n\t\t\tvalidity(){\n\t\t\t\tlet response = {\n\t\t\t\t\tstudyId: download.studyId()\n\t\t\t\t};\n\t\t\t\treturn response;\n\t\t\t},\n\t\t\tok(){\n\t\t\t\tctrl.submitAttempt = true;\n\t\t\t\tlet response = ctrl.validity();\n\t\t\t\tlet isValid = Object.keys(response).every(key => response[key]);\n\n\t\t\t\tif (isValid) close(true);\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\tclose(null);\n\t\t\t}\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\tview(ctrl){\n\t\tlet download = ctrl.download;\n\t\tlet validity = ctrl.validity();\n\t\tlet validationView = (isValid, message) => isValid || !ctrl.submitAttempt ? '' : m('small.text-muted', message);\n\t\tlet groupClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n\t\t\t'has-danger': !valid,\n\t\t\t'has-success' : valid\n\t\t});\n\t\tlet inputClasses = valid => !ctrl.submitAttempt ? '' : classNames({\n\t\t\t'form-control-danger': !valid,\n\t\t\t'form-control-success': valid\n\t\t});\n\n\t\treturn m('div',[\n\t\t\tm('h4', 'Request Download'),\n\t\t\tm('.card-block', [\n\t\t\t\tm('.form-group', {class:groupClasses(validity.studyId)}, [\n\t\t\t\t\tm('label', 'Study Id'),\n\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\tconfig: focusConfig,\n\t\t\t\t\t\tplaceholder:'Study Id',\n\t\t\t\t\t\tvalue: download.studyId(),\n\t\t\t\t\t\tonkeyup: m.withAttr('value', download.studyId),\n\t\t\t\t\t\tclass:inputClasses(validity.studyId)\n\t\t\t\t\t}),\n\t\t\t\t\tvalidationView(validity.studyId, 'The study ID is required in order to request a download.')\n\t\t\t\t]),\n\t\t\t\tm('.form-group', [\n\t\t\t\t\tm('label','Database'),\n\t\t\t\t\tm('select.form-control', {onchange: m.withAttr('value',download.db)}, [\n\t\t\t\t\t\tm('option',{value:'test', selected: download.db() === 'test'}, 'Development'),\n\t\t\t\t\t\tm('option',{value:'warehouse', selected: download.db() === 'warehouse'}, 'Production')\n\t\t\t\t\t])\n\t\t\t\t]),\n\t\t\t\tm('.form-group', [\n\t\t\t\t\tm('label', 'Date Range'),\n\t\t\t\t\tdateRangePicker(download),\n\t\t\t\t\tm('p.text-muted.btn-toolbar', [\n\t\t\t\t\t\tdayButtonView(download, 'Last 7 Days', 7),\n\t\t\t\t\t\tdayButtonView(download, 'Last 30 Days', 30),\n\t\t\t\t\t\tdayButtonView(download, 'Last 90 Days', 90),\n\t\t\t\t\t\tdayButtonView(download, 'All times', 3650)\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('.text-xs-right.btn-toolbar',[\n\t\t\t\tm('a.btn.btn-secondary.btn-sm', {onclick:ctrl.cancel}, 'Cancel'),\n\t\t\t\tm('a.btn.btn-primary.btn-sm', {onclick:ctrl.ok}, 'OK')\n\t\t\t])\n\t\t]);\n\t}\n};\n\nlet focusConfig = (element, isInitialized) => {\n\tif (!isInitialized) element.focus();\n};\n\nlet dayButtonView = (download, name, days) => m('button.btn.btn-secondary.btn-sm', {onclick: () => {\n\tlet d = new Date();\n\td.setDate(d.getDate() - days);\n\tdownload.startDate(d);\n\tdownload.endDate(new Date());\n}}, name);","import {getAllDownloads, removeDownload, createDownload, STATUS_RUNNING} from './downloadsModel';\nimport createMessage from './downloadsCreate';\nimport messages from 'utils/messagesComponent';\n\n/**\n * Get all downloads\n */\n\nexport let recursiveGetAll = debounce(getAll, 5000);\nexport function getAll({list, cancel, error}){\n\treturn getAllDownloads()\n\t\t.then(list)\n\t\t.then(response => {\n\t\t\tif (!cancel() && response.some(download => download.studyStatus === STATUS_RUNNING)) {\n\t\t\t\trecursiveGetAll({list, cancel, error});\n\t\t\t}\n\t\t})\n\t\t.catch(error)\n\t\t.then(m.redraw);\n}\n\n\n// debounce but call at first iteration\nfunction debounce(func, wait) {\n\tlet first = true;\n\tlet timeout;\n\treturn function() {\n\t\tvar context = this, args = arguments;\n\t\tvar later = function() {\n\t\t\ttimeout = null;\n\t\t\tfunc.apply(context, args);\n\t\t};\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (first) {\n\t\t\tfunc.apply(context, args);\n\t\t\tfirst = false;\n\t\t}\n\t};\n}\n\n\n/**\n * Remove download\n */\n\nexport function remove(download, list) {\n\treturn messages.confirm({\n\t\theader: 'Delete Request:',\n\t\tcontent: [\n\t\t\t'Are you sure you want to delete this request from your queue?',\n\t\t\tm('.text-xs-center',\n\t\t\t\tm('small.muted-text','(Don\\'t worry, the data will stay on our servers and you can request it again in the future)')\n\t\t\t)\n\t\t]\n\t})\n\t.then(function(response){\n\t\tif (response) return doRemove(download, list);\n\t});\n}\n\nfunction doRemove(download, list){\n\tlist(list().filter(el => el !== download));\n\tm.redraw();\n\tremoveDownload(download)\n\t\t.catch(err => {\n\t\t\tlist().push(download);\n\t\t\treturn messages.alert({\n\t\t\t\theader: 'Delete Request',\n\t\t\t\tcontent: err.message\n\t\t\t});\n\t\t});\n}\n\n/**\n * Create download\n */\n\nexport function create(list, cancel){\n\tlet output = m.prop();\n\treturn createMessage({output})\n\t\t.then(response => {\n\t\t\tif (response){\n\t\t\t\tlet download = unPropify(output());\n\t\t\t\tlist().unshift(Object.assign({\n\t\t\t\t\tstudyStatus: STATUS_RUNNING,\n\t\t\t\t\tcreationDate: new Date()\n\t\t\t\t},download));\n\t\t\t\tcancel(true);\n\t\t\t\treturn createDownload(download)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tcancel(false);\n\t\t\t\t\t\tgetAll({list, cancel});\n\t\t\t\t\t})\n\t\t\t\t\t.catch(reportError)\n\t\t\t\t\t.then(cancel.bind(null, false));\n\t\t\t}\n\t\t});\n}\n\nlet unPropify = obj => Object.keys(obj).reduce((result, key) => {\n\tresult[key] = obj[key]();\n\treturn result;\n}, {});\n\nlet reportError = header => err => messages.alert({header, content: err.message});","import sortTable from 'utils/sortTable';\nimport formatDate from 'utils/formatDate';\nimport {getAll, remove, create} from './downloadsActions';\nexport default downloadsComponent;\n\nconst TABLE_WIDTH = 7;\n\nconst downloadsComponent = {\n\tcontroller(){\n\t\tlet list = m.prop([]);\n\t\tlet cancelDownload = m.prop(false);\n\n\t\tconst ctrl = {\n\t\t\tlist,\n\t\t\tcancelDownload,\n\t\t\tcreate,\n\t\t\tremove,\n\t\t\tglobalSearch: m.prop(''),\n\t\t\tsortBy: m.prop('studyId'),\n\t\t\tonunload(){\n\t\t\t\tcancelDownload(true);\n\t\t\t},\n\t\t\terror: m.prop('')\n\t\t};\n\n\t\tgetAll({list:ctrl.list, cancel: cancelDownload, error: ctrl.error});\n\n\t\treturn ctrl;\n\t},\n\n\tview(ctrl) {\n\t\tlet list = ctrl.list;\n\t\treturn m('.downloads', [\n\t\t\tm('h2', 'Downloads'),\n\t\t\tctrl.error()\n\t\t\t\t?\n\t\t\t\tm('.alert.alert-warning',\n\t\t\t\t\tm('strong', 'Warning!! '), ctrl.error().message\n\t\t\t\t)\n\t\t\t\t:\n\t\t\t\tm('table', {class:'table table-striped table-hover',onclick:sortTable(list, ctrl.sortBy)}, [\n\t\t\t\t\tm('thead', [\n\t\t\t\t\t\tm('tr', [\n\t\t\t\t\t\t\tm('th', {colspan:TABLE_WIDTH}, [\n\t\t\t\t\t\t\t\tm('input.form-control', {placeholder: 'Global Search ...', onkeyup: m.withAttr('value', ctrl.globalSearch)})\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('tr', [\n\t\t\t\t\t\t\tm('th.text-xs-center', {colspan:TABLE_WIDTH}, [\n\t\t\t\t\t\t\t\tm('button.btn.btn-secondary', {onclick:ctrl.create.bind(null, list, ctrl.cancelDownload)}, [\n\t\t\t\t\t\t\t\t\tm('i.fa.fa-plus'), '  Download request'\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('tr', [\n\t\t\t\t\t\t\tm('th', thConfig('studyId',ctrl.sortBy), 'ID'),\n\t\t\t\t\t\t\tm('th', 'Data file'),\n\t\t\t\t\t\t\tm('th', thConfig('db',ctrl.sortBy), 'Database'),\n\t\t\t\t\t\t\tm('th', thConfig('fileSize',ctrl.sortBy), 'File Size'),\n\t\t\t\t\t\t\tm('th', thConfig('creationDate',ctrl.sortBy), 'Date Added'),\n\t\t\t\t\t\t\tm('th','Status'),\n\t\t\t\t\t\t\tm('th','Actions')\n\t\t\t\t\t\t])\n\t\t\t\t\t]),\n\t\t\t\t\tm('tbody', [\n\t\t\t\t\t\tlist().length === 0\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\tm('tr.table-info',\n\t\t\t\t\t\t\t\tm('td.text-xs-center', {colspan: TABLE_WIDTH},\n\t\t\t\t\t\t\t\t\tm('strong', 'Heads up! '), 'There are no downloads running yet'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t:\n\n\t\t\t\t\t\t\tlist().filter(studyFilter(ctrl)).map(download => m('tr', [\n\t\t\t\t\t\t\t\t// ### ID\n\t\t\t\t\t\t\t\tm('td', download.studyId),\n\n\t\t\t\t\t\t\t\t// ### Study url\n\t\t\t\t\t\t\t\tm('td',\n\t\t\t\t\t\t\t\t\tdownload.studyUrl\n\t\t\t\t\t\t\t\t\t\t? download.fileSize\n\t\t\t\t\t\t\t\t\t\t\t? m('a', {href:download.studyUrl, download:true, target: '_blank'}, 'Download')\n\t\t\t\t\t\t\t\t\t\t\t: m('i.text-muted', 'No Data')\n\t\t\t\t\t\t\t\t\t\t: m('i.text-muted', 'Loading...')\n\t\t\t\t\t\t\t\t),\n\n\t\t\t\t\t\t\t\t// ### Database\n\t\t\t\t\t\t\t\tm('td', download.db),\n\n\t\t\t\t\t\t\t\t// ### Filesize\n\t\t\t\t\t\t\t\tm('td', download.fileSize !== 'unknown'\n\t\t\t\t\t\t\t\t\t? download.fileSize\n\t\t\t\t\t\t\t\t\t: m('i.text-muted', 'Unknown')\n\t\t\t\t\t\t\t\t),\n\n\t\t\t\t\t\t\t\t// ### Date Added\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\tformatDate(new Date(download.creationDate)),\n\t\t\t\t\t\t\t\t\t'  ',\n\t\t\t\t\t\t\t\t\tm('i.fa.fa-info-circle'),\n\t\t\t\t\t\t\t\t\tm('.card.info-box', [\n\t\t\t\t\t\t\t\t\t\tm('.card-header', 'Creation Details'),\n\t\t\t\t\t\t\t\t\t\tm('ul.list-group.list-group-flush',[\n\t\t\t\t\t\t\t\t\t\t\tm('li.list-group-item', [\n\t\t\t\t\t\t\t\t\t\t\t\tm('strong', 'Creation Date: '), formatDate(new Date(download.creationDate))\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\tm('li.list-group-item', [\n\t\t\t\t\t\t\t\t\t\t\t\tm('strong', 'Start Date: '), formatDate(new Date(download.startDate))\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\tm('li.list-group-item', [\n\t\t\t\t\t\t\t\t\t\t\t\tm('strong', 'End Date: '), formatDate(new Date(download.endDate))\n\t\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t]),\n\n\t\t\t\t\t\t\t\t// ### Status\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tC: m('span.label.label-success', 'Complete'),\n\t\t\t\t\t\t\t\t\t\tR: m('span.label.label-info', 'Running'),\n\t\t\t\t\t\t\t\t\t\tX: m('span.label.label-danger', 'Error')\n\t\t\t\t\t\t\t\t\t}[download.studyStatus]\n\t\t\t\t\t\t\t\t]),\n\n\t\t\t\t\t\t\t\t// ### Actions\n\t\t\t\t\t\t\t\tm('td', [\n\t\t\t\t\t\t\t\t\tm('.btn-group', [\n\t\t\t\t\t\t\t\t\t\tm('button.btn.btn-sm.btn-secondary', {onclick: ctrl.remove.bind(null, download, list)}, [\n\t\t\t\t\t\t\t\t\t\t\tm('i.fa.fa-close')\n\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t]))\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t]);\n\t}\n};\n\n// @TODO: bad idiom! should change things within the object, not the object itself.\nlet thConfig = (prop, current) => ({'data-sort-by':prop, class: current() === prop ? 'active' : ''});\n\nfunction studyFilter(ctrl){\n\tlet search = ctrl.globalSearch();\n\treturn study =>\n\t\tincludes(study.studyId, search) ||\n\t\tincludes(study.studyUrl, search);\n\n\tfunction includes(val, search){\n\t\treturn typeof val === 'string' && val.includes(search);\n\t}\n}","import {login, isLoggedIn} from './authModel';\nimport fullHeight from 'utils/fullHeight';\nexport default loginComponent;\n\nlet loginComponent = {\n\tcontroller(){\n\t\tconst username = m.prop('');\n\t\tconst password = m.prop('');\n\t\tconst ctrl = {\n\t\t\tusername,\n\t\t\tpassword,\n\t\t\tisLoggedIn,\n\t\t\terror: m.prop(''),\n\t\t\tlogin: loginAction\n\t\t};\n\n\t\treturn ctrl;\n\n\t\tfunction loginAction(){\n\t\t\tconsole.log('va', username(), password())\n\t\t\tlogin(username, password)\n\t\t\t\t.then(() => {\n\t\t\t\t\tm.route('/');\n\t\t\t\t})\n\t\t\t\t.catch(response => {\n\t\t\t\t\tctrl.error(response.message);\n\t\t\t\t\tm.redraw();\n\t\t\t\t});\n\t\t}\n\t},\n\tview(ctrl){\n\t\treturn m('.login.centrify', {config:fullHeight},[\n\t\t\tisLoggedIn()\n\t\t\t\t?\n\t\t\t\t[\n\t\t\t\t\tm('i.fa.fa-thumbs-up.fa-5x.m-b-1'),\n\t\t\t\t\tm('h5', 'You are already logged in!')\n\t\t\t\t]\n\t\t\t\t:\n\t\t\t\tm('.card.card-inverse.col-md-4', [\n\t\t\t\t\tm('.card-block',[\n\t\t\t\t\t\tm('h4', 'Please sign in'),\n\n\t\t\t\t\t\tm('form', {onsubmit:ctrl.login}, [\n\t\t\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\t\t\ttype:'username',\n\t\t\t\t\t\t\t\tplaceholder: 'Username / Email',\n\t\t\t\t\t\t\t\tvalue: ctrl.username(),\n\t\t\t\t\t\t\t\tonkeyup: m.withAttr('value', ctrl.username),\n\t\t\t\t\t\t\t\tconfig: getStartValue(ctrl.username)\n\t\t\t\t\t\t\t}),\n\n\t\t\t\t\t\t\tm('input.form-control', {\n\t\t\t\t\t\t\t\ttype:'password',\n\t\t\t\t\t\t\t\tplaceholder: 'Password',\n\t\t\t\t\t\t\t\tvalue: ctrl.password(),\n\t\t\t\t\t\t\t\tonkeyup: m.withAttr('value', ctrl.password),\n\t\t\t\t\t\t\t\tconfig: getStartValue(ctrl.password)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]),\n\n\t\t\t\t\t\tctrl.error() ? m('.alert.alert-warning', m('strong', 'Warning!! '), ctrl.error()) : '',\n\n\t\t\t\t\t\tm('button.btn.btn-primary.btn-block', {onclick: ctrl.login},'Sign in'),\n\n\t\t\t\t\t\t// m('p.text-center',\n\t\t\t\t\t\t// \tm('a', m('small.text-muted','Lost your password?'))\n\t\t\t\t\t\t// )\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t]);\n\t}\n};\n\nfunction getStartValue(prop){\n\tconsole.log('horrible hack to manage chrome pw autocomplete')\n\treturn (element, isInit) => {// !isInit && prop(element.value);\n\t\tif (!isInit) setTimeout(()=>prop(element.value), 30);\n\t}\n}","import studiesComponent from './study/studiesComponent';\nimport studyComponent from './study/studyComponent';\nimport poolComponent from './pool/poolComponent';\nimport historyComponent from './pool/historyComponent';\nimport downloadsComponent from './downloads/downloadsComponent';\nimport loginComponent from './login/loginComponent';\nexport default routes;\n\nlet routes = {\n\t'/login': loginComponent,\n\t'/studies' : studiesComponent,\n\t'/editor/:studyId': studyComponent,\n\t'/editor/:studyId/:fileID': studyComponent,\n\t'/pool': poolComponent,\n\t'/pool/history': historyComponent,\n\t'/downloads': downloadsComponent\n};\n\n","import contextMenu from 'utils/contextMenuComponent';\nimport messages from 'utils/messagesComponent';\nimport spinner from 'utils/spinnerComponent';\nimport {authorize, isLoggedIn, logout} from 'login/authModel';\nexport default layout;\n\nlet layout = route => {\n\treturn {\n\t\tcontroller(){\n\t\t\tauthorize();\n\t\t\tif (!isLoggedIn() && m.route() !== '/login') m.route('/login');\n\n\t\t\treturn {doLogout};\n\n\t\t\tfunction doLogout(){\n\t\t\t\tlogout();\n\t\t\t\tm.route('/login');\n\t\t\t}\n\t\t},\n\t\tview(ctrl){\n\t\t\treturn  m('.dashboard-root', {class: window.top!=window.self ? 'is-iframe' : ''}, [\n\t\t\t\tm('nav.navbar.navbar-dark.navbar-fixed-top', [\n\t\t\t\t\tm('a.navbar-brand', {href:'/dashboard/dashboard'}, 'Dashboard'),\n\t\t\t\t\tm('ul.nav.navbar-nav',[\n\t\t\t\t\t\tm('li.nav-item',[\n\t\t\t\t\t\t\tm('a.nav-link',{href:'/studies', config:m.route},'Studies')\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('li.nav-item',[\n\t\t\t\t\t\t\tm('a.nav-link',{href:'/pool', config:m.route},'Pool')\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('li.nav-item',[\n\t\t\t\t\t\t\tm('a.nav-link',{href:'/downloads', config:m.route},'Downloads')\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('li.nav-item.pull-xs-right',[\n\t\t\t\t\t\t\tm('button.btn.btn-info', {onclick:ctrl.doLogout}, [\n\t\t\t\t\t\t\t\tm('i.fa.fa-sign-out'), '  Logout'\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\t\t\t\t]),\n\n\t\t\t\tm('.main-content.container-fluid', [\n\t\t\t\t\troute\n\t\t\t\t]),\n\n\t\t\t\tm.component(contextMenu), // register context menu\n\t\t\t\tm.component(messages), // register modal\n\t\t\t\tm.component(spinner) // register spinner\n\t\t\t]);\n\t\t}\n\t};\n\n};","import routes from './routes';\nimport layoutWrapper from './layoutWrapper';\n\nlet wrappedRoutes = mapObject(routes, layoutWrapper);\nm.route(document.body, '/studies', wrappedRoutes);\n\n/**\n * Map Object\n * A utility function to transform objects\n * @param  {Object} \tobj \tThe object to transform\n * @param  {Function} \tcb \t\tThe transforming function\n * @return {Object}        [description]\n *\n * Signature:\n *\n * Object mapObject(Object obj, callbackFunction cb)\n *\n * where:\n * \tcallbackFunction :: any Function(any value, String key, Object object)\n */\nfunction mapObject(obj, cb) {\n\treturn Object.keys(obj)\n\t\t.reduce(function(result, key) {\n\t\t\tresult[key] = cb(obj[key], key, obj);\n\t\t\treturn result;\n\t\t}, {});\n}\n"],"names":["baseUrl","template","noop","validate","pipValidate","questValidate","managerValidate","validator","textMenu","validatorComponent","syntaxComponent","unknowEditor","contextMenu","filesVM","viewModelMap","folderComponent","editorComponent","focusConfig","play","create","poolComponent","thConfig","studyFilter","url","STATUS_RUNNING","interceptErrors","createComponent","dayButtonView","debounce","remove","createMessage","unPropify","reportError","TABLE_WIDTH","studiesComponent","studyComponent","historyComponent","layoutWrapper"],"mappings":"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"}