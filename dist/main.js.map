{"version":3,"file":"main.js","sources":["editor/fileModel.js","editor/aceComponent.js","editor/editorComponent.js","editor/syntaxComponent.js","editor/parser/messages.js","editor/parser/parser.js","editor/parser/pipValidator.js","editor/parser/questValidator.js","editor/parser/managerValidator.js","editor/parser/validator.js","editor/validatorComponent.js","editor/fileEditorComponent.js","mainComponent.js","main.js"],"sourcesContent":["class File {\n\tconstructor(url){\n\t\tthis.url = url;\n\n\t\t// keep track of file content\n\t\tthis.sourceContent = m.prop('');\n\t\tthis.content = (store => {\n\t\t\tvar prop = (...args) => {\n\t\t\t\tif (args.length) {\n\t\t\t\t\tstore = args[0];\n\t\t\t\t\tthis.checkSyntax();\n\t\t\t\t}\n\t\t\t\treturn store;\n\t\t\t};\n\n\t\t\tprop.toJSON = () => store;\n\n\t\t\treturn prop;\n\t\t})('');\n\n\t\t// this is set within the load function\n\t\tthis.loaded = false;\n\t\tthis.error = false;\n\n\t\t// these are defined when calling checkSyntax\n\t\tthis.syntaxValid = undefined;\n\t\tthis.syntaxData = undefined;\n\t}\n\n\tload(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tm\n\t\t\t\t.request({method:'GET', url:this.url,background:true, deserialize: text => text})\n\t\t\t\t.then(script => {\n\t\t\t\t\tm.startComputation();\n\t\t\t\t\tthis.sourceContent(script);\n\t\t\t\t\tthis.content(script);\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\tm.endComputation();\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.error = true;\n\t\t\t\t})\n\t\t\t\t.then(resolve, reject);\n\t\t});\n\t}\n\n\tsave(){\n\t\talert('Saving content: not implemented yet');\n\t}\n\n\thasChanged() {\n\t\treturn this.sourceContent() === this.content();\n\t}\n\n\tdefine(context = window){\n\t\tvar requirejs = context.requirejs;\n\t\tvar name = this.url;\n\t\tvar content = this.content();\n\n\t\treturn new Promise((resolve) => {\n\t\t\trequirejs.undef(name);\n\t\t\tcontext.eval(content.replace(`define(`,`define('` + name + `',`));\n\t\t\tresolve();\n\t\t});\n\t}\n\n\trequire(context = window){\n\t\tvar requirejs = context.requirejs;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\trequirejs([this.url], resolve,reject);\n\t\t});\n\t}\n\n\tcheckSyntax(){\n\t\tvar jshint = window.JSHINT;\n\t\tthis.syntaxValid = jshint(this.content(), jshintOptions);\n\t\tthis.syntaxData = jshint.data();\n\t\treturn this.syntaxValid;\n\t}\n}\n\nvar jshintOptions = {\n\t// JSHint Default Configuration File (as on JSHint website)\n\t// See http://jshint.com/docs/ for more details\n\n\t'curly'         : false,    // true: Require {} for every new block or scope\n\t'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n\t'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n\t'unused'        : 'vars',   // Unused variables:\n\t\t\t\t\t\t\t\t//   true     : all variables, last function parameter\n\t\t\t\t\t\t\t\t//   'vars'   : all variables only\n\t\t\t\t\t\t\t\t//   'strict' : all variables, all function parameters\n\t'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n\t'browser'       : true,     // Web Browser (window, document, etc)\n\t'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n\t// Custom Globals\n\tpredef: ['piGlobal','define','require','requirejs','angular']\n};\n\nexport default File;","export default aceComponent;\n\nvar noop = function(){};\n\nvar aceComponent = {\n\tcontroller: function controller(args){\n\t\tvar ctrl = {\n\t\t\tcontent: args.content\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\n\tview: function editorView(ctrl){\n\t\treturn m('.editor', {config: aceComponent.config(ctrl)});\n\t},\n\n\tconfig: function(ctrl){\n\t\treturn function(element, isInitialized, ctx){\n\t\t\tvar editor;\n\t\t\tvar content = ctrl.content;\n\n\t\t\tif (!isInitialized){\n\t\t\t\trequire(['ace/ace'], function(ace){\n\t\t\t\t\tace.config.set('packaged', true);\n\t\t\t\t\tace.config.set('basePath', require.toUrl('ace'));\n\n\t\t\t\t\teditor = ace.edit(element);\n\t\t\t\t\tvar commands = editor.commands;\n\n\t\t\t\t\teditor.setTheme('ace/theme/monokai');\n\t\t\t\t\teditor.getSession().setMode('ace/mode/javascript');\n\t\t\t\t\teditor.setHighlightActiveLine(true);\n\t\t\t\t\teditor.setShowPrintMargin(false);\n\t\t\t\t\teditor.setFontSize('18px');\n\n\n\n\n\n\t\t\t\t\teditor.getSession().on('change', function(){\n\t\t\t\t\t\tm.startComputation();\n\t\t\t\t\t\tcontent(editor.getValue());\n\t\t\t\t\t\tm.endComputation();\n\t\t\t\t\t});\n\n\n\n\t\t\t\t\tcommands.addCommand({\n\t\t\t\t\t\tname: 'save',\n\t\t\t\t\t\tbindKey: {win: 'Ctrl-S', mac: 'Command-S'},\n\t\t\t\t\t\texec: ctrl.onSave || noop\n\t\t\t\t\t});\n\n\n\t\t\t\t\teditor.setValue(content());\n\t\t\t\t\teditor.moveCursorTo(1,1); // scroll up\n\t\t\t\t});\n\t\t\t}\n\n\t\t\teditor && editor.setValue(content());\n\t\t\tonResize();\n\n\t\t\twindow.addEventListener('resize', onResize, true);\n\n\t\t\tctx.onunload = function(){\n\t\t\t\twindow.removeEventListener('resize', onResize);\n\t\t\t\teditor && editor.destroy();\n\t\t\t};\n\n\t\t\tfunction onResize(){\n\t\t\t\telement.style.height = document.documentElement.clientHeight - element.offsetTop + 'px';\n\t\t\t}\n\n\t\t};\n\t}\n};","import aceComponent from './aceComponent';\nexport default editorPage;\n\nvar editorPage = {\n\tcontroller: function(args){\n\t\tvar file = args.file;\n\n\t\tvar ctrl = {\n\t\t\tfile: file,\n\t\t\tcontent:file.content,\n\t\t\tsave: file.save,\n\t\t\tplay: play\n\t\t};\n\n\t\treturn ctrl;\n\n\t\tfunction play(){\n\t\t\tvar playground;\n\n\t\t\tplayground = window.open('playground.html', 'Playground');\n\n\t\t\tplayground.onload = function(){\n\t\t\t\t// first set the unload listener\n\t\t\t\tplayground.addEventListener('unload', function() {\n\t\t\t\t\t// get focus back here\n\t\t\t\t\twindow.focus();\n\t\t\t\t});\n\n\t\t\t\t// then activate the player (this ensures that when )\n\t\t\t\tplayground.activate(file);\n\t\t\t\tplayground.focus();\n\t\t\t};\n\n\t\t}\n\t},\n\n\tview: function(ctrl){\n\t\treturn m('.editor', [\n\t\t\tm('.btn-toolbar', [\n\t\t\t\tm('.btn-group', [\n\t\t\t\t\tm('a.btn.btn-default', {onclick: ctrl.save},[\n\t\t\t\t\t\tm('strong.glyphicon.glyphicon-floppy-disk')\n\t\t\t\t\t]),\n\t\t\t\t\tm('a.btn.btn-default', {onclick: ctrl.play},[\n\t\t\t\t\t\tm('strong.glyphicon.glyphicon-play')\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm.component(aceComponent, {content:ctrl.content})\n\t\t]);\n\t}\n};","export default syntax;\n\n/**\n * Syntax component\n * Takes an argument as follows:\n *\n * {valid: Boolean, data: jshint(script).data()}\n */\nvar syntax = {\n\n\t/**\n\t * Analyze script\n\t * @param  {String} script A script to analyze\n\t * @return {Object}\n\t * {\n\t *      isValid: Boolean,\n\t *      data: Object, // raw data\n\t *      errors: Array, // an array of analyzed errors\n\t *      errorCount: Number, // the number of errors\n\t *      warningCount: Number // the number of warnings\n\t * }\n\t */\n\tanalize: (isValid, data) => {\n\t\tvar errorCount = 0;\n\t\tvar warningCount = 0;\n\t\tvar errors = isValid ? [] : data.errors\n\t\t\t.filter(e => e) // clean null values\n\t\t\t.map(err => {\n\t\t\t\tvar isError = err.code && (err.code[0] === 'E');\n\n\t\t\t\tisError ? errorCount++ : warningCount++;\n\n\t\t\t\treturn {\n\t\t\t\t\tisError: isError,\n\t\t\t\t\tline: err.line,\n\t\t\t\t\tcol: err.character,\n\t\t\t\t\treason: err.reason,\n\t\t\t\t\tevidence: err.evidence\n\t\t\t\t};\n\t\t\t});\n\t\treturn {\n\t\t\tisValid: isValid,\n\t\t\tdata: data,\n\t\t\terrors : errors,\n\t\t\terrorCount: errorCount,\n\t\t\twarningCount: warningCount\n\t\t};\n\t},\n\n\tjshintOptions: {\n\t\t// JSHint Default Configuration File (as on JSHint website)\n\t\t// See http://jshint.com/docs/ for more details\n\n\t\t'curly'         : false,    // true: Require {} for every new block or scope\n\t\t'latedef'       : 'nofunc', // true: Require variables/functions to be defined before being used\n\t\t'undef'         : true,     // true: Require all non-global variables to be declared (prevents global leaks)\n\t\t'unused'        : 'vars',   // Unused variables:\n\t\t\t\t\t\t\t\t\t//   true     : all variables, last function parameter\n\t\t\t\t\t\t\t\t\t//   'vars'   : all variables only\n\t\t\t\t\t\t\t\t\t//   'strict' : all variables, all function parameters\n\t\t'strict'        : false,    // true: Requires all functions run in ES5 Strict Mode\n\n\t\t'browser'       : true,     // Web Browser (window, document, etc)\n\t\t'devel'         : true,     // Development/debugging (alert, confirm, etc)\n\n\t\t// Custom Globals\n\t\tpredef: ['piGlobal','define','require','requirejs','angular']\n\t},\n\n\tcontroller:  args => {\n\t\tvar file = args.file;\n\t\treturn syntax.analize(file.syntaxValid, file.syntaxData);\n\t},\n\n\tview: ctrl => {\n\t\treturn m('div', [\n\t\t\tctrl.isValid\n\t\t\t\t?\n\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t])\n\t\t\t\t:\n\t\t\t\tm('div', [\n\t\t\t\t\tm('table.table', [\n\t\t\t\t\t\tm('tbody', ctrl.errors.map(err => {\n\t\t\t\t\t\t\treturn m('tr',[\n\t\t\t\t\t\t\t\tm('td.text-muted', `line ${err.line}`),\n\t\t\t\t\t\t\t\tm('td.text-muted', `col ${err.col}`),\n\t\t\t\t\t\t\t\tm('td', {class: err.isError ? 'text-danger' : 'text-info'}, err.reason),\n\t\t\t\t\t\t\t\tm('td',err.evidence)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}))\n\t\t\t\t\t]),\n\n\t\t\t\t\tm('.row',[\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.errorCount} critical errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('.col-md-6', [\n\t\t\t\t\t\t\tm('div', {class:'alert alert-info'}, [\n\t\t\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-warning-sign'}),\n\t\t\t\t\t\t\t\t`You have ${ctrl.warningCount} non standard syntax errors.`\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t])\n\t\t\t\t\t])\n\n\t\t\t\t])\n\t\t]);\n\t}\n};\n","export function warn(message, test){\n\treturn {level:'warn', message: message, test:test};\n}\n\nexport function error(message, test){\n\treturn {level:'error', message: message, test:test};\n}\n\nexport function row(element, testArr){\n\tvar messages = flatten(testArr)\n\t\t.filter(msg => msg) // clean empty\n\t\t.filter(msg => typeof msg.test == 'function' ? msg.test(element) : !!msg.test); // run test...\n\n\treturn !messages.length ? null : {\n\t\telement: element,\n\t\tmessages: messages\n\t};\n}\n\nfunction flatten(arr) {\n\treturn arr.reduce(function (flat, toFlatten) {\n\t\treturn flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n\t}, []);\n}","function multiPick(arr, propArr){\n\treturn arr\n\t\t.map(e=> e && [].concat(e[propArr[0]], e[propArr[1]], e[propArr[2]])) // gather all stim arrays\n\t\t.reduce((previous, current)=>previous.concat(current),[]) // flatten arrays\n\t\t.filter(t=>t); // remove all undefined stim\n}\n\nfunction flattenSequence(sequence){\n\tfunction unMix(e){\n\t\treturn flattenSequence([].concat(e.data, e.elseData, (e.branches || []).map(e=>e.data)));\n\t}\n\n\treturn sequence\n\t\t.reduce((previous, current) => {return previous.concat(current && current.mixer ? unMix(current) : current);},[])\n\t\t.filter(t=>t); // remove all undefined stim;\n}\n\nfunction concatClean(){\n\tvar args = [].splice.call(arguments,0);\n\treturn [].concat.apply([], args).filter(e=>e);\n}\n\nexport function pipElements(script){\n\tvar trials, stimuli, media;\n\n\ttrials = concatClean(flattenSequence(script.sequence), script.trialSets);\n\tstimuli = concatClean(\n\t\tscript.stimulusSets,\n\t\tmultiPick(trials,['stimuli', 'layout'])\n\t);\n\tmedia = concatClean(\n\t\tscript.mediaSets,\n\t\tmultiPick(stimuli,['media','touchMedia'])\n\t);\n\n\treturn {trials:trials, stimuli:stimuli, media:media};\n}\n\nexport function questElements(script){\n\tvar pages, questions;\n\n\tpages = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\tquestions = [].concat(\n\t\tscript.questionsSets,\n\t\tflattenSequence(multiPick(pages,['questions']))\n\t).filter(t=>t);\n\n\treturn {pages:pages, questions:questions};\n}\n\nexport function managerElements(script){\n\tvar tasks;\n\n\ttasks = [].concat(\n\t\tflattenSequence(script.sequence),\n\t\tscript.pagesSets\n\t).filter(t=>t);\n\n\treturn {tasks:tasks};\n}","import {warn, error, row} from './messages';\nimport {pipElements} from './parser';\n\nexport default pipValidator;\n\nfunction pipValidator(script, url){\n\tvar errors = [];\n\tvar elements = pipElements(script);\n\n\terrors.push({type:'Settings',errors: checkSettings(script, url)});\n\terrors.push({type:'Trials',errors: filterMap(elements.trials, trialTest)});\n\t// errors.push({type:'Stimuli',errors: filterMap(elements.stimuli, stimuliTest)});\n\t// errors.push({type:'Media',errors: filterMap(elements.media, mediaTest)});\n\n\treturn errors;\n}\n\nfunction filterMap(arr, fn){\n\treturn arr.map(fn).filter(e=>e);\n}\n\n/**\n * Check settings\n * @param  {Object} script The script to be tested\n * @param  {String} url    The script origin URL\n * @return {Array}        Array of error rows\n */\nfunction checkSettings(script, url){\n\tvar settings = script.settings || {};\n\n\tvar w = byProp(warn);\n\t// var e = byProp(error);\n\n\tvar errors = [\n\t\tr('base_url', [\n\t\t\tw('Your base_url is not in the same directory as your script.', e => {\n\t\t\t\t// use this!!!\n\t\t\t\t// http://stackoverflow.com/questions/4497531/javascript-get-url-path\n\t\t\t\tvar getPath = url => {\n\t\t\t\t\tvar a = document.createElement('a');\n\t\t\t\t\ta.href = url;\n\t\t\t\t\treturn a.pathname;\n\t\t\t\t};\n\n\t\t\t\tvar path = getPath(url).substring(0, url.lastIndexOf('/') + 1); // get path but remove file name\n\t\t\t\tvar t = s => (!s || getPath(s).indexOf(path) !== 0);\n\n\t\t\t\treturn (typeof e == 'object') ? t(e.image) && t(e.template) : t(e);\n\t\t\t})\n\t\t])\n\t];\n\n\treturn errors.filter(function(err){return !!err;});\n\n\tfunction r(prop, arr){\n\t\tvar el = {};\n\t\tel[prop] = settings[prop];\n\t\treturn prop in settings && row(el, arr);\n\t}\n\n\t// wrap warn/error so that I don't have to individually\n\tfunction byProp(fn){\n\t\treturn function(msg, test){\n\t\t\treturn fn(msg, e => {\n\t\t\t\tfor (var prop in e) {\n\t\t\t\t\treturn test(e[prop]);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n}\n\nfunction trialTest(trial) {\n\tvar tests = [\n\t\ttestInteractions(trial.interactions),\n\t\ttestInput(trial.input)\n\t];\n\n\treturn row(trial, tests);\n\n\tfunction testInteractions(interactions){\n\t\tif (!interactions) {return;}\n\n\t\tif (!Array.isArray(interactions)){\n\t\t\treturn [error('Interactions must be an array.', true)];\n\t\t}\n\n\t\treturn  interactions.map((interaction, index) => {\n\t\t\treturn [\n\t\t\t\t!interaction.conditions ? error(`Interaction [${index}] must have conditions`, true) : [\n\t\t\t\t\terror(`Interaction conditon [${index}] must have a type`, toArray(interaction.conditions).some(c=>!c.type))\n\t\t\t\t],\n\t\t\t\t!interaction.actions ? error(`Interaction [${index}] must have actions`, true) : [\n\t\t\t\t\terror(`Interaction action [${index}] must have a type`, toArray(interaction.actions).some(a=>!a.type))\n\t\t\t\t]\n\t\t\t];\n\t\t});\n\n\n\t\tfunction toArray(arr){\n\t\t\treturn Array.isArray(arr) ? arr : [arr];\n\t\t}\n\n\t}\n\n\tfunction testInput(input){\n\t\tif (!input) {return;}\n\n\t\tif (!Array.isArray(trial.input)){\n\t\t\treturn [error('Input must be an Array', true)];\n\t\t}\n\n\t\treturn [\n\t\t\terror('Input must always have a handle', input.some(i=>!i.handle)),\n\t\t\terror('Input must always have an on attribute', input.some(i=>!i.on))\n\t\t];\n\t}\n}\n\nfunction stimuliTest(stim){\n\tvar tests = [];\n\treturn row(stim, tests);\n}\n\nfunction mediaTest(media){\n\tvar tests = [\n\n\t];\n\treturn row(media, tests);\n}","import messages from './messages';\nimport {questElements} from './parser';\n\nexport default function questValidator(script){\n\tvar errors = [];\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Pages', errors:[]});\n\terrors.push({type:'Questions', errors:[]});\n\n\treturn errors;\n}","\nimport {warn, error} from './messages';\nimport {managerElements} from './parser';\n\nexport default function managerValidator(script){\n\tvar errors = [];\n\tvar elements = managerElements(script);\n\n\terrors.push({type:'Settings', errors:[]});\n\terrors.push({type:'Tasks', errors:[]});\n\n\treturn errors;\n}\n\n\n\n","import pipValidate from './pipValidator';\nimport questValidate from './questValidator';\nimport managerValidate from './managerValidator';\n\nexport default function validate(script){\n\tvar type = script.type && script.type.toLowerCase();\n\tswitch (type){\n\tcase 'pip' : return pipValidate.apply(null, arguments);\n\tcase 'quest' : return questValidate.apply(null, arguments);\n\tcase 'manager' : return managerValidate.apply(null, arguments);\n\tdefault:\n\t\tthrow new Error('Unknown script.type: ' + type);\n\t}\n}\n\nexport function dd(){\n\treturn [\n\t\t{\n\t\t\ttype: 'task',\n\t\t\terrosrs:[],\n\t\t\terrors: [\n\t\t\t\t{\n\t\t\t\t\telement: {name:'myName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'error', message: 'error message1'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message2'},\n\t\t\t\t\t\t{level:'warn', message: 'warn message3'},\n\t\t\t\t\t\t{level:'error', message: 'error message4'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\telement: {name:'otherName', content: [1,2,3]},\n\t\t\t\t\tmessages: [\n\t\t\t\t\t\t{level:'warn', message: 'warn message1'},\n\t\t\t\t\t\t{level:'error', message: 'error message2'}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t];\n}\n","import validator from './parser/validator';\nexport default validateComponent;\n\nvar validateComponent = {\n\tcontroller: args => {\n\t\tvar file = args.file;\n\t\tvar ctrl = {\n\t\t\tvalidations : m.prop([]),\n\t\t\tisError: false\n\t\t};\n\n\t\tm.startComputation();\n\t\tfile\n\t\t\t.define()\n\t\t\t.then(()=>{\n\t\t\t\treturn file.require();\n\t\t\t})\n\t\t\t.then(script => {\n\t\t\t\tctrl.validations(validator(script, file.url));\n\t\t\t\tm.endComputation();\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tctrl.isError = true;\n\t\t\t\tm.endComputation();\n\t\t\t});\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn  m('div', [\n\t\t\t!ctrl.isError ? '' :\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t`There was a problem parsing this script. Are you sure that it is a valid PI script? Make sure you fix all syntax errors.`\n\t\t\t]),\n\n\t\t\tctrl.validations().map(validationReport => {\n\t\t\t\treturn [\n\t\t\t\t\tm('h4', validationReport.type),\n\t\t\t\t\t!validationReport.errors.length\n\t\t\t\t\t\t?\n\t\t\t\t\t\tm('div', {class:'alert alert-success'}, [\n\t\t\t\t\t\t\tm('strong','Well done!'),\n\t\t\t\t\t\t\t'Your script is squeaky clean'\n\t\t\t\t\t\t])\n\t\t\t\t\t\t:\n\t\t\t\t\t\tvalidationReport.errors.map(err => {\n\t\t\t\t\t\t\treturn m('.row',[\n\t\t\t\t\t\t\t\tm('.col-md-4.stringified',\n\t\t\t\t\t\t\t\t\tm('div', {class:'pre'}, m.trust(stringify(err.element)))\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tm('.col-md-8',[\n\t\t\t\t\t\t\t\t\tm('ul', err.messages.map(msg => {\n\t\t\t\t\t\t\t\t\t\treturn m('li.list-unstyled', {class: msg.level == 'error' ? 'text-danger' : 'text-info'}, [\n\t\t\t\t\t\t\t\t\t\t\tm('strong', msg.level),\n\t\t\t\t\t\t\t\t\t\t\tmsg.message\n\t\t\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t})\n\t\t\t\t];\n\t\t\t})\n\n\t\t]);\n\t}\n};\n\n\nfunction stringify(value, pretty) {\n\tif (value == null) { // null || undefined\n\t\treturn '<i class=\"text-muted\">undefined</i>';\n\t}\n\tif (value === '') {\n\t\treturn '<i class=\"text-muted\">an empty string</i>';\n\t}\n\n\tswitch (typeof value) {\n\t\tcase 'string':\n\t\t\tbreak;\n\t\tcase 'number':\n\t\t\tvalue = '' + value;\n\t\t\tbreak;\n\t\tcase 'object':\n\t\t\t// display the error message not the full thing...\n\t\t\tif (value instanceof Error){\n\t\t\t\tvalue = value.message;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t/* fall through */\n\t\tdefault:\n\t\t\t// @TODO: implement this: http://stackoverflow.com/questions/4810841/how-can-i-pretty-print-json-using-javascript\n\t\t\tvalue = syntaxHighlight(JSON.stringify(value, null, 4));\n\t}\n\n\treturn value;\n}\n\n\nfunction syntaxHighlight(json) {\n\tconsole.log(json)\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        var cls = 'number';\n        if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n                cls = 'key';\n            } else {\n                cls = 'string';\n            }\n        } else if (/true|false/.test(match)) {\n            cls = 'boolean';\n        } else if (/null/.test(match)) {\n            cls = 'null';\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n}\n","import File from './fileModel';\nimport editorComponent from './editorComponent';\nimport syntaxComponent from './syntaxComponent';\nimport validatorComponent from './validatorComponent';\n\nexport default fileEditorComponent;\n\nlet fileEditorComponent = {\n\tcontroller: function() {\n\t\tvar url = m.route.param('url');\n\t\tvar file = new File(url);\n\t\tfile.load();\n\n\t\tvar ctrl = {\n\t\t\tfile: file,\n\t\t\tactiveTab: m.prop('edit')\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\n\tview: ctrl => {\n\t\tvar file = ctrl.file;\n\t\tvar activeTab = ctrl.activeTab;\n\n\t\treturn m('.container', [\n\t\t\tm('h2', 'Edit ', [m('small', file.url)]),\n\n\t\t\t!file.loaded\n\t\t\t\t?\n\t\t\t\tm('.loader')\n\t\t\t\t:\n\t\t\t\tfile.error\n\t\t\t\t\t?\n\t\t\t\t\tm('div', {class:'alert alert-danger'}, [\n\t\t\t\t\t\tm('strong',{class:'glyphicon glyphicon-exclamation-sign'}),\n\t\t\t\t\t\t`The file \"${file.url}\" was not found`\n\t\t\t\t\t])\n\t\t\t\t\t:\n\t\t\t\t\t[\n\t\t\t\t\t\tm('ul.nav.nav-tabs',[\n\t\t\t\t\t\t\tm('li', {class: activeTab() == 'edit' ? 'active' : ''}, [\n\t\t\t\t\t\t\t\tm('a[data-tab=\"edit\"]', {onclick:m.withAttr('data-tab', activeTab)}, 'Edit')\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tm('li', {class: activeTab() == 'syntax' ? 'active' : ''}, [\n\t\t\t\t\t\t\t\tm('a[data-tab=\"syntax\"]', {onclick:m.withAttr('data-tab', activeTab)}, [\n\t\t\t\t\t\t\t\t\t'Syntax ',\n\t\t\t\t\t\t\t\t\tm('span.badge.alert-danger',file.syntaxValid ? '' : file.syntaxData.errors.length)\n\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\tm('li', {class: activeTab() == 'validate' ? 'active' : ''}, [\n\t\t\t\t\t\t\t\tm('a[data-tab=\"validate\"]', {onclick:m.withAttr('data-tab', activeTab)}, 'Validate')\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tm('.tab-content', [\n\t\t\t\t\t\t\tactiveTab() == 'edit' ? m.component(editorComponent, {file:file}) : '',\n\t\t\t\t\t\t\tactiveTab() == 'syntax' ? m.component(syntaxComponent, {file:file}) : '',\n\t\t\t\t\t\t\tactiveTab() == 'validate' ? m.component(validatorComponent, {file:file}) : ''\n\t\t\t\t\t\t])\n\t\t\t\t\t]\n\t\t]);\n\t}\n};","export default mainComponent;\n\nvar mainComponent = {\n\tcontroller: function(){\n\t\tvar ctrl = {\n\t\t\turl: m.prop('')\n\t\t};\n\n\t\treturn ctrl;\n\t},\n\tview: ctrl => {\n\t\treturn m('.container', [\n\t\t\tm('.jumbotron', [\n\t\t\t\tm('h2', 'Welcome to PI Validator'),\n\t\t\t\tm('p','Please insert the url for the file you would like to edit'),\n\t\t\t\tm('.input-group', [\n\t\t\t\t\tm('span.input-group-btn', [\n\t\t\t\t\t\tm('a.btn.btn-default', {href: `/file/${ctrl.url()}`, config: m.route}, m.trust('<span aria-hidden=\"true\" class=\"glyphicon glyphicon-search\"></span>'))\n\t\t\t\t\t]),\n\t\t\t\t\tm('input.form-control[placeholder=\"Please insert a URL\"]', {value: ctrl.url(), onchange: m.withAttr('value', ctrl.url)})\n\t\t\t\t])\n\t\t\t])\n\t\t]);\n\t}\n};","import mainComponent from './mainComponent';\nimport fileEditorComponent from './editor/fileEditorComponent';\n\nm.route(document.body, '', {\n\t'' : mainComponent,\n\t'/file/:url...': fileEditorComponent\n});"],"names":["pipValidate","questValidate","managerValidate","validator","editorComponent","syntaxComponent","validatorComponent"],"mappings":"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","sourceRoot":"/source/"}